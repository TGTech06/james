var Vc=Object.defineProperty;var $c=(r,e,t)=>e in r?Vc(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var at=(r,e,t)=>($c(r,typeof e!="symbol"?e+"":e,t),t);import{i as qc,j as zc,k as tn,l as Hc,s as lo,d as J,n as bt,e as Zc,u as Kc,g as Yc,f as Jc,v as rn,h as nn,o as Ua,r as Xs,m as Wc}from"./scheduler.193b0897.js";import{r as Gc,t as Hr,b as Qc,f as Zr,S as ho,i as fo,d as Ze,v as po,e as vn,a as _e,g as se,j as W,o as Wt,k as G,l as be,p as Gt,m as Y,z as $,A as ye,s as le,c as de,B as Xc,u as el,w as tl,x as rl,y as nl,C as os,D as sl,E as Le,F as je,q as wn,G as Ba}from"./index.18598242.js";import{g as mo}from"./globals.7f7f1b26.js";import{g as Sn,b as ot,c as _t,P as ut,a as ct,d as jr,_ as Ie,e as dn,f as al}from"./public.9150bb34.js";import{w as pr}from"./index.cfa5c76d.js";function il(r,e){const t=e.token={};function n(s,a,i,o){if(e.token!==t)return;e.resolved=o;let u=e.ctx;i!==void 0&&(u=u.slice(),u[i]=o);const c=s&&(e.current=s)(u);let l=!1;e.block&&(e.blocks?e.blocks.forEach((d,h)=>{h!==a&&d&&(Gc(),Hr(d,1,1,()=>{e.blocks[h]===d&&(e.blocks[h]=null)}),Qc())}):e.block.d(1),c.c(),Zr(c,1),c.m(e.mount(),e.anchor),l=!0),e.block=c,e.blocks&&(e.blocks[a]=c),l&&Hc()}if(qc(r)){const s=zc();if(r.then(a=>{tn(s),n(e.then,1,e.value,a),tn(null)},a=>{if(tn(s),n(e.catch,2,e.error,a),tn(null),!e.hasCatch)throw a}),e.current!==e.pending)return n(e.pending,0),!0}else{if(e.current!==e.then)return n(e.then,1,e.value,r),!0;e.resolved=r}}function ol(r,e,t){const n=e.slice(),{resolved:s}=r;r.current===r.then&&(n[r.value]=s),r.current===r.catch&&(n[r.error]=s),r.block.p(n,t)}class Ir{constructor(e){Object.defineProperty(this,"pageContent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.pageContent=e.pageContent?e.pageContent.toString():this.pageContent,this.metadata=e.metadata??{}}}var ul=Object.defineProperty,cl=(r,e,t)=>e in r?ul(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ll=(r,e,t)=>(cl(r,typeof e!="symbol"?e+"":e,t),t),Cn={};Cn.byteLength=fl;Cn.toByteArray=ml;Cn.fromByteArray=bl;var it=[],Ye=[],dl=typeof Uint8Array<"u"?Uint8Array:Array,us="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var qt=0,hl=us.length;qt<hl;++qt)it[qt]=us[qt],Ye[us.charCodeAt(qt)]=qt;Ye["-".charCodeAt(0)]=62;Ye["_".charCodeAt(0)]=63;function yo(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function fl(r){var e=yo(r),t=e[0],n=e[1];return(t+n)*3/4-n}function pl(r,e,t){return(e+t)*3/4-t}function ml(r){var e,t=yo(r),n=t[0],s=t[1],a=new dl(pl(r,n,s)),i=0,o=s>0?n-4:n,u;for(u=0;u<o;u+=4)e=Ye[r.charCodeAt(u)]<<18|Ye[r.charCodeAt(u+1)]<<12|Ye[r.charCodeAt(u+2)]<<6|Ye[r.charCodeAt(u+3)],a[i++]=e>>16&255,a[i++]=e>>8&255,a[i++]=e&255;return s===2&&(e=Ye[r.charCodeAt(u)]<<2|Ye[r.charCodeAt(u+1)]>>4,a[i++]=e&255),s===1&&(e=Ye[r.charCodeAt(u)]<<10|Ye[r.charCodeAt(u+1)]<<4|Ye[r.charCodeAt(u+2)]>>2,a[i++]=e>>8&255,a[i++]=e&255),a}function yl(r){return it[r>>18&63]+it[r>>12&63]+it[r>>6&63]+it[r&63]}function gl(r,e,t){for(var n,s=[],a=e;a<t;a+=3)n=(r[a]<<16&16711680)+(r[a+1]<<8&65280)+(r[a+2]&255),s.push(yl(n));return s.join("")}function bl(r){for(var e,t=r.length,n=t%3,s=[],a=16383,i=0,o=t-n;i<o;i+=a)s.push(gl(r,i,i+a>o?o:i+a));return n===1?(e=r[t-1],s.push(it[e>>2]+it[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],s.push(it[e>>10]+it[e>>4&63]+it[e<<2&63]+"=")),s.join("")}function _l(r,e){let t=Array.from({length:r.length},(n,s)=>({start:s,end:s+1}));for(;t.length>1;){let n=null;for(let s=0;s<t.length-1;s++){const a=r.slice(t[s].start,t[s+1].end),i=e.get(a.join(","));i!=null&&(n==null||i<n[0])&&(n=[i,s])}if(n!=null){const s=n[1];t[s]={start:t[s].start,end:t[s+1].end},t.splice(s+1,1)}else break}return t}function vl(r,e){return r.length===1?[e.get(r.join(","))]:_l(r,e).map(t=>e.get(r.slice(t.start,t.end).join(","))).filter(t=>t!=null)}function wl(r){return r.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var Ms=class{constructor(r,e){at(this,"specialTokens");at(this,"inverseSpecialTokens");at(this,"patStr");at(this,"textEncoder",new TextEncoder);at(this,"textDecoder",new TextDecoder("utf-8"));at(this,"rankMap",new Map);at(this,"textMap",new Map);this.patStr=r.pat_str;const t=r.bpe_ranks.split(`
`).filter(Boolean).reduce((n,s)=>{const[a,i,...o]=s.split(" "),u=Number.parseInt(i,10);return o.forEach((c,l)=>n[c]=u+l),n},{});for(const[n,s]of Object.entries(t)){const a=Cn.toByteArray(n);this.rankMap.set(a.join(","),s),this.textMap.set(s,a)}this.specialTokens={...r.special_tokens,...e},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((n,[s,a])=>(n[a]=this.textEncoder.encode(s),n),{})}encode(r,e=[],t="all"){const n=new RegExp(this.patStr,"ug"),s=Ms.specialTokenRegex(Object.keys(this.specialTokens)),a=[],i=new Set(e==="all"?Object.keys(this.specialTokens):e),o=new Set(t==="all"?Object.keys(this.specialTokens).filter(c=>!i.has(c)):t);if(o.size>0){const c=Ms.specialTokenRegex([...o]),l=r.match(c);if(l!=null)throw new Error(`The text contains a special token that is not allowed: ${l[0]}`)}let u=0;for(;;){let c=null,l=u;for(;s.lastIndex=l,c=s.exec(r),!(c==null||i.has(c[0]));)l=c.index+1;const d=(c==null?void 0:c.index)??r.length;for(const b of r.substring(u,d).matchAll(n)){const m=this.textEncoder.encode(b[0]),w=this.rankMap.get(m.join(","));if(w!=null){a.push(w);continue}a.push(...vl(m,this.rankMap))}if(c==null)break;let h=this.specialTokens[c[0]];a.push(h),u=c.index+c[0].length}return a}decode(r){const e=[];let t=0;for(let a=0;a<r.length;++a){const i=r[a],o=this.textMap.get(i)??this.inverseSpecialTokens[i];o!=null&&(e.push(o),t+=o.length)}const n=new Uint8Array(t);let s=0;for(const a of e)n.set(a,s),s+=a.length;return this.textDecoder.decode(n)}},go=Ms;ll(go,"specialTokenRegex",r=>new RegExp(r.map(e=>wl(e)).join("|"),"g"));function Ol(r){switch(r){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"text-embedding-ada-002":return"cl100k_base";default:throw new Error("Unknown model")}}var kn={exports:{}},bo={};function Xe(r,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(r)),this._timeouts=r,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var El=Xe;Xe.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};Xe.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};Xe.prototype.retry=function(r){if(this._timeout&&clearTimeout(this._timeout),!r)return!1;var e=new Date().getTime();if(r&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(r),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(r);var t=this._timeouts.shift();if(t===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),t=this._cachedTimeouts.slice(-1);else return!1;var n=this;return this._timer=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},t),this._options.unref&&this._timer.unref(),!0};Xe.prototype.attempt=function(r,e){this._fn=r,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var t=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){t._operationTimeoutCb()},t._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};Xe.prototype.try=function(r){console.log("Using RetryOperation.try() is deprecated"),this.attempt(r)};Xe.prototype.start=function(r){console.log("Using RetryOperation.start() is deprecated"),this.attempt(r)};Xe.prototype.start=Xe.prototype.try;Xe.prototype.errors=function(){return this._errors};Xe.prototype.attempts=function(){return this._attempts};Xe.prototype.mainError=function(){if(this._errors.length===0)return null;for(var r={},e=null,t=0,n=0;n<this._errors.length;n++){var s=this._errors[n],a=s.message,i=(r[a]||0)+1;r[a]=i,i>=t&&(e=s,t=i)}return e};(function(r){var e=El;r.operation=function(t){var n=r.timeouts(t);return new e(n,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})},r.timeouts=function(t){if(t instanceof Array)return[].concat(t);var n={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var s in t)n[s]=t[s];if(n.minTimeout>n.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var a=[],i=0;i<n.retries;i++)a.push(this.createTimeout(i,n));return t&&t.forever&&!a.length&&a.push(this.createTimeout(i,n)),a.sort(function(o,u){return o-u}),a},r.createTimeout=function(t,n){var s=n.randomize?Math.random()+1:1,a=Math.round(s*Math.max(n.minTimeout,1)*Math.pow(n.factor,t));return a=Math.min(a,n.maxTimeout),a},r.wrap=function(t,n,s){if(n instanceof Array&&(s=n,n=null),!s){s=[];for(var a in t)typeof t[a]=="function"&&s.push(a)}for(var i=0;i<s.length;i++){var o=s[i],u=t[o];t[o]=(function(l){var d=r.operation(n),h=Array.prototype.slice.call(arguments,1),b=h.pop();h.push(function(m){d.retry(m)||(m&&(arguments[0]=d.mainError()),b.apply(this,arguments))}),d.attempt(function(){l.apply(t,h)})}).bind(t,u),t[o].options=n}}})(bo);var Al=bo;const Pl=Al,xl=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class _o extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const Tl=(r,e,t)=>{const n=t.retries-(e-1);return r.attemptNumber=e,r.retriesLeft=n,r},Sl=r=>xl.includes(r),vo=(r,e)=>new Promise((t,n)=>{e={onFailedAttempt:()=>{},retries:10,...e};const s=Pl.operation(e);s.attempt(async a=>{try{t(await r(a))}catch(i){if(!(i instanceof Error)){n(new TypeError(`Non-error was thrown: "${i}". You should only throw errors.`));return}if(i instanceof _o)s.stop(),n(i.originalError);else if(i instanceof TypeError&&!Sl(i.message))s.stop(),n(i);else{Tl(i,a,e);try{await e.onFailedAttempt(i)}catch(o){n(o);return}s.retry(i)||n(s.mainError())}}})});kn.exports=vo;kn.exports.default=vo;kn.exports.AbortError=_o;var Cl=kn.exports;const wo=Sn(Cl);var Oo={},Eo={exports:{}};(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function s(u,c,l){this.fn=u,this.context=c,this.once=l||!1}function a(u,c,l,d,h){if(typeof l!="function")throw new TypeError("The listener must be a function");var b=new s(l,d||u,h),m=t?t+c:c;return u._events[m]?u._events[m].fn?u._events[m]=[u._events[m],b]:u._events[m].push(b):(u._events[m]=b,u._eventsCount++),u}function i(u,c){--u._eventsCount===0?u._events=new n:delete u._events[c]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],l,d;if(this._eventsCount===0)return c;for(d in l=this._events)e.call(l,d)&&c.push(t?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(l)):c},o.prototype.listeners=function(c){var l=t?t+c:c,d=this._events[l];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,b=d.length,m=new Array(b);h<b;h++)m[h]=d[h].fn;return m},o.prototype.listenerCount=function(c){var l=t?t+c:c,d=this._events[l];return d?d.fn?1:d.length:0},o.prototype.emit=function(c,l,d,h,b,m){var w=t?t+c:c;if(!this._events[w])return!1;var g=this._events[w],P=arguments.length,k,C;if(g.fn){switch(g.once&&this.removeListener(c,g.fn,void 0,!0),P){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,l),!0;case 3:return g.fn.call(g.context,l,d),!0;case 4:return g.fn.call(g.context,l,d,h),!0;case 5:return g.fn.call(g.context,l,d,h,b),!0;case 6:return g.fn.call(g.context,l,d,h,b,m),!0}for(C=1,k=new Array(P-1);C<P;C++)k[C-1]=arguments[C];g.fn.apply(g.context,k)}else{var x=g.length,j;for(C=0;C<x;C++)switch(g[C].once&&this.removeListener(c,g[C].fn,void 0,!0),P){case 1:g[C].fn.call(g[C].context);break;case 2:g[C].fn.call(g[C].context,l);break;case 3:g[C].fn.call(g[C].context,l,d);break;case 4:g[C].fn.call(g[C].context,l,d,h);break;default:if(!k)for(j=1,k=new Array(P-1);j<P;j++)k[j-1]=arguments[j];g[C].fn.apply(g[C].context,k)}}return!0},o.prototype.on=function(c,l,d){return a(this,c,l,d,!1)},o.prototype.once=function(c,l,d){return a(this,c,l,d,!0)},o.prototype.removeListener=function(c,l,d,h){var b=t?t+c:c;if(!this._events[b])return this;if(!l)return i(this,b),this;var m=this._events[b];if(m.fn)m.fn===l&&(!h||m.once)&&(!d||m.context===d)&&i(this,b);else{for(var w=0,g=[],P=m.length;w<P;w++)(m[w].fn!==l||h&&!m[w].once||d&&m[w].context!==d)&&g.push(m[w]);g.length?this._events[b]=g.length===1?g[0]:g:i(this,b)}return this},o.prototype.removeAllListeners=function(c){var l;return c?(l=t?t+c:c,this._events[l]&&i(this,l)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,r.exports=o})(Eo);var kl=Eo.exports,jn={exports:{}},jl=(r,e)=>(e=e||(()=>{}),r.then(t=>new Promise(n=>{n(e())}).then(()=>t),t=>new Promise(n=>{n(e())}).then(()=>{throw t})));const Il=jl;class Ao extends Error{constructor(e){super(e),this.name="TimeoutError"}}const Po=(r,e,t)=>new Promise((n,s)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){n(r);return}const a=setTimeout(()=>{if(typeof t=="function"){try{n(t())}catch(u){s(u)}return}const i=typeof t=="string"?t:`Promise timed out after ${e} milliseconds`,o=t instanceof Error?t:new Ao(i);typeof r.cancel=="function"&&r.cancel(),s(o)},e);Il(r.then(n,s),()=>{clearTimeout(a)})});jn.exports=Po;jn.exports.default=Po;jn.exports.TimeoutError=Ao;var Rl=jn.exports,ea={},ta={};Object.defineProperty(ta,"__esModule",{value:!0});function Nl(r,e,t){let n=0,s=r.length;for(;s>0;){const a=s/2|0;let i=n+a;t(r[i],e)<=0?(n=++i,s-=a+1):s=a}return n}ta.default=Nl;Object.defineProperty(ea,"__esModule",{value:!0});const Dl=ta;class Ll{constructor(){this._queue=[]}enqueue(e,t){t=Object.assign({priority:0},t);const n={priority:t.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority){this._queue.push(n);return}const s=Dl.default(this._queue,n,(a,i)=>i.priority-a.priority);this._queue.splice(s,0,n)}dequeue(){const e=this._queue.shift();return e==null?void 0:e.run}filter(e){return this._queue.filter(t=>t.priority===e.priority).map(t=>t.run)}get size(){return this._queue.length}}ea.default=Ll;Object.defineProperty(Oo,"__esModule",{value:!0});const Ml=kl,xo=Rl,Fl=ea,sn=()=>{},Ul=new xo.TimeoutError;class Bl extends Ml{constructor(e){var t,n,s,a;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=sn,this._resolveIdle=sn,e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:Fl.default},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(t=e.intervalCap)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(a=(s=e.interval)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=sn,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=sn,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(this._intervalId===void 0){const t=this._intervalEnd-e;if(t<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},t)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const t=this._queue.dequeue();return t?(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise((n,s)=>{const a=async()=>{this._pendingCount++,this._intervalCount++;try{const i=this._timeout===void 0&&t.timeout===void 0?e():xo.default(Promise.resolve(e()),t.timeout===void 0?this._timeout:t.timeout,()=>{(t.throwOnTimeout===void 0?this._throwOnTimeout:t.throwOnTimeout)&&s(Ul)});n(await i)}catch(i){s(i)}this._next()};this._queue.enqueue(a,t),this._tryToStartAnother(),this.emit("add")})}async addAll(e,t){return Promise.all(e.map(async n=>this.add(n,t)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{const t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{const t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}var vt=Oo.default=Bl;const Vl=[400,401,403,404,405,406,407,408,409];let ra=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6;const t="default"in vt?vt.default:vt;this.queue=new t({concurrency:this.maxConcurrency})}call(e,...t){return this.queue.add(()=>wo(()=>e(...t).catch(n=>{throw n instanceof Error?n:new Error(n)}),{onFailedAttempt(n){var i,o,u,c;if(n.message.startsWith("Cancel")||n.message.startsWith("TimeoutError")||n.message.startsWith("AbortError")||(n==null?void 0:n.code)==="ECONNABORTED")throw n;const s=(i=n==null?void 0:n.response)==null?void 0:i.status;if(s&&Vl.includes(+s))throw n;const a=(o=n==null?void 0:n.response)==null?void 0:o.data;if(((u=a==null?void 0:a.error)==null?void 0:u.code)==="insufficient_quota"){const l=new Error((c=a==null?void 0:a.error)==null?void 0:c.message);throw l.name="InsufficientQuotaError",l}},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,t,...n){return e.signal?Promise.race([this.call(t,...n),new Promise((s,a)=>{var i;(i=e.signal)==null||i.addEventListener("abort",()=>{a(new Error("AbortError"))})})]):this.call(t,...n)}fetch(...e){return this.call(()=>fetch(...e).then(t=>t.ok?t:Promise.reject(t)))}};const an={},$l=new ra({});async function ql(r,e){return r in an||(an[r]=$l.fetch(`https://tiktoken.pages.dev/js/${r}.json`,{signal:e==null?void 0:e.signal}).then(t=>t.json()).catch(t=>{throw delete an[r],t})),new go(await an[r],e==null?void 0:e.extendedSpecialTokens)}async function To(r,e){return ql(Ol(r),e)}var zl=function(r,e){if(typeof r!="string")throw new TypeError("Expected a string");return e=typeof e>"u"?"_":e,r.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()};const Hl=Sn(zl);var So={exports:{}};const Zl=/[\p{Lu}]/u,Kl=/[\p{Ll}]/u,Va=/^[\p{Lu}](?![\p{Lu}])/gu,Co=/([\p{Alpha}\p{N}_]|$)/u,ko=/[_.\- ]+/,Yl=new RegExp("^"+ko.source),$a=new RegExp(ko.source+Co.source,"gu"),qa=new RegExp("\\d+"+Co.source,"gu"),Jl=(r,e,t)=>{let n=!1,s=!1,a=!1;for(let i=0;i<r.length;i++){const o=r[i];n&&Zl.test(o)?(r=r.slice(0,i)+"-"+r.slice(i),n=!1,a=s,s=!0,i++):s&&a&&Kl.test(o)?(r=r.slice(0,i-1)+"-"+r.slice(i-1),a=s,s=!1,n=!0):(n=e(o)===o&&t(o)!==o,a=s,s=t(o)===o&&e(o)!==o)}return r},Wl=(r,e)=>(Va.lastIndex=0,r.replace(Va,t=>e(t))),Gl=(r,e)=>($a.lastIndex=0,qa.lastIndex=0,r.replace($a,(t,n)=>e(n)).replace(qa,t=>e(t))),jo=(r,e)=>{if(!(typeof r=="string"||Array.isArray(r)))throw new TypeError("Expected the input to be `string | string[]`");if(e={pascalCase:!1,preserveConsecutiveUppercase:!1,...e},Array.isArray(r)?r=r.map(a=>a.trim()).filter(a=>a.length).join("-"):r=r.trim(),r.length===0)return"";const t=e.locale===!1?a=>a.toLowerCase():a=>a.toLocaleLowerCase(e.locale),n=e.locale===!1?a=>a.toUpperCase():a=>a.toLocaleUpperCase(e.locale);return r.length===1?e.pascalCase?n(r):t(r):(r!==t(r)&&(r=Jl(r,t,n)),r=r.replace(Yl,""),e.preserveConsecutiveUppercase?r=Wl(r,t):r=t(r),e.pascalCase&&(r=n(r.charAt(0))+r.slice(1)),Gl(r,n))};So.exports=jo;So.exports.default=jo;function Ql(r,e){return(e==null?void 0:e[r])||Hl(r)}function Xl(r,e,t){const n={};for(const s in r)Object.hasOwn(r,s)&&(n[e(s,t)]=r[s]);return n}function za(r){return Array.isArray(r)?[...r]:{...r}}function ed(r,e){const t=za(r);for(const[n,s]of Object.entries(e)){const[a,...i]=n.split(".").reverse();let o=t;for(const u of i.reverse()){if(o[u]===void 0)break;o[u]=za(o[u]),o=o[u]}o[a]!==void 0&&(o[a]={lc:1,type:"secret",id:[s]})}return t}class rt{get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}constructor(e,...t){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_kwargs=e||{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof rt||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},t={},n=Object.keys(this.lc_kwargs).reduce((s,a)=>(s[a]=a in this?this[a]:this.lc_kwargs[a],s),{});for(let s=Object.getPrototypeOf(this);s;s=Object.getPrototypeOf(s))Object.assign(e,Reflect.get(s,"lc_aliases",this)),Object.assign(t,Reflect.get(s,"lc_secrets",this)),Object.assign(n,Reflect.get(s,"lc_attributes",this));for(const s in t)s in this&&this[s]!==void 0&&(n[s]=this[s]||n[s]);return{lc:1,type:"constructor",id:[...this.lc_namespace,this.constructor.name],kwargs:Xl(Object.keys(t).length?ed(n,t):n,Ql,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:[...this.lc_namespace,this.constructor.name]}}}class td extends rt{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","document_transformers"]})}}class rd extends td{constructor(e){if(super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","document_transformers","text_splitters"]}),Object.defineProperty(this,"chunkSize",{enumerable:!0,configurable:!0,writable:!0,value:1e3}),Object.defineProperty(this,"chunkOverlap",{enumerable:!0,configurable:!0,writable:!0,value:200}),Object.defineProperty(this,"keepSeparator",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lengthFunction",{enumerable:!0,configurable:!0,writable:!0,value:t=>t.length}),this.chunkSize=(e==null?void 0:e.chunkSize)??this.chunkSize,this.chunkOverlap=(e==null?void 0:e.chunkOverlap)??this.chunkOverlap,this.keepSeparator=(e==null?void 0:e.keepSeparator)??this.keepSeparator,this.lengthFunction=(e==null?void 0:e.lengthFunction)??(t=>t.length),this.chunkOverlap>=this.chunkSize)throw new Error("Cannot have chunkOverlap >= chunkSize")}async transformDocuments(e,t={}){return this.splitDocuments(e,t)}splitOnSeparator(e,t){let n;if(t)if(this.keepSeparator){const s=t.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&");n=e.split(new RegExp(`(?=${s})`))}else n=e.split(t);else n=e.split("");return n.filter(s=>s!=="")}async createDocuments(e,t=[],n={}){const s=t.length>0?t:new Array(e.length).fill({}),{chunkHeader:a="",chunkOverlapHeader:i="(cont'd) ",appendChunkOverlapHeader:o=!1}=n,u=new Array;for(let c=0;c<e.length;c+=1){const l=e[c];let d=1,h=null;for(const b of await this.splitText(l)){let m=a,w=0;if(h){const C=l.indexOf(b),x=l.indexOf(h)+this.lengthFunction(h);w=(l.slice(x,C).match(/\n/g)||[]).length,o&&(m+=i)}d+=w;const g=(b.match(/\n/g)||[]).length,P=s[c].loc&&typeof s[c].loc=="object"?{...s[c].loc}:{};P.lines={from:d,to:d+g};const k={...s[c],loc:P};m+=b,u.push(new Ir({pageContent:m,metadata:k})),d+=g,h=b}}return u}async splitDocuments(e,t={}){const n=e.filter(i=>i.pageContent!==void 0),s=n.map(i=>i.pageContent),a=n.map(i=>i.metadata);return this.createDocuments(s,a,t)}joinDocs(e,t){const n=e.join(t).trim();return n===""?null:n}mergeSplits(e,t){const n=[],s=[];let a=0;for(const o of e){const u=this.lengthFunction(o);if(a+u+(s.length>0?t.length:0)>this.chunkSize&&(a>this.chunkSize&&console.warn(`Created a chunk of size ${a}, +
which is longer than the specified ${this.chunkSize}`),s.length>0)){const c=this.joinDocs(s,t);for(c!==null&&n.push(c);a>this.chunkOverlap||a+u>this.chunkSize&&a>0;)a-=this.lengthFunction(s[0]),s.shift()}s.push(o),a+=u}const i=this.joinDocs(s,t);return i!==null&&n.push(i),n}}class Rr extends rd{constructor(e){super(e),Object.defineProperty(this,"separators",{enumerable:!0,configurable:!0,writable:!0,value:[`

`,`
`," ",""]}),this.separators=(e==null?void 0:e.separators)??this.separators,this.keepSeparator=(e==null?void 0:e.keepSeparator)??!0}async _splitText(e,t){const n=[];let s=t[t.length-1],a;for(let c=0;c<t.length;c+=1){const l=t[c];if(l===""){s=l;break}if(e.includes(l)){s=l,a=t.slice(c+1);break}}const i=this.splitOnSeparator(e,s);let o=[];const u=this.keepSeparator?"":s;for(const c of i)if(this.lengthFunction(c)<this.chunkSize)o.push(c);else{if(o.length){const l=this.mergeSplits(o,u);n.push(...l),o=[]}if(!a)n.push(c);else{const l=await this._splitText(c,a);n.push(...l)}}if(o.length){const c=this.mergeSplits(o,u);n.push(...c)}return n}async splitText(e){return this._splitText(e,this.separators)}static fromLanguage(e,t){return new Rr({...t,separators:Rr.getSeparatorsForLanguage(e)})}static getSeparatorsForLanguage(e){if(e==="cpp")return[`
class `,`
void `,`
int `,`
float `,`
double `,`
if `,`
for `,`
while `,`
switch `,`
case `,`

`,`
`," ",""];if(e==="go")return[`
func `,`
var `,`
const `,`
type `,`
if `,`
for `,`
switch `,`
case `,`

`,`
`," ",""];if(e==="java")return[`
class `,`
public `,`
protected `,`
private `,`
static `,`
if `,`
for `,`
while `,`
switch `,`
case `,`

`,`
`," ",""];if(e==="js")return[`
function `,`
const `,`
let `,`
var `,`
class `,`
if `,`
for `,`
while `,`
switch `,`
case `,`
default `,`

`,`
`," ",""];if(e==="php")return[`
function `,`
class `,`
if `,`
foreach `,`
while `,`
do `,`
switch `,`
case `,`

`,`
`," ",""];if(e==="proto")return[`
message `,`
service `,`
enum `,`
option `,`
import `,`
syntax `,`

`,`
`," ",""];if(e==="python")return[`
class `,`
def `,`
	def `,`

`,`
`," ",""];if(e==="rst")return[`
===
`,`
---
`,`
***
`,`
.. `,`

`,`
`," ",""];if(e==="ruby")return[`
def `,`
class `,`
if `,`
unless `,`
while `,`
for `,`
do `,`
begin `,`
rescue `,`

`,`
`," ",""];if(e==="rust")return[`
fn `,`
const `,`
let `,`
if `,`
while `,`
for `,`
loop `,`
match `,`
const `,`

`,`
`," ",""];if(e==="scala")return[`
class `,`
object `,`
def `,`
val `,`
var `,`
if `,`
for `,`
while `,`
match `,`
case `,`

`,`
`," ",""];if(e==="swift")return[`
func `,`
class `,`
struct `,`
enum `,`
if `,`
for `,`
while `,`
do `,`
switch `,`
case `,`

`,`
`," ",""];if(e==="markdown")return[`
## `,`
### `,`
#### `,`
##### `,`
###### `,"```\n\n",`

***

`,`

---

`,`

___

`,`

`,`
`," ",""];if(e==="latex")return[`
\\chapter{`,`
\\section{`,`
\\subsection{`,`
\\subsubsection{`,`
\\begin{enumerate}`,`
\\begin{itemize}`,`
\\begin{description}`,`
\\begin{list}`,`
\\begin{quote}`,`
\\begin{quotation}`,`
\\begin{verse}`,`
\\begin{verbatim}`,`
\\begin{align}`,"$$","$",`

`,`
`," ",""];if(e==="html")return["<body>","<div>","<p>","<br>","<li>","<h1>","<h2>","<h3>","<h4>","<h5>","<h6>","<span>","<table>","<tr>","<td>","<th>","<ul>","<ol>","<header>","<footer>","<nav>","<head>","<style>","<script>","<meta>","<title>"," ",""];if(e==="sol")return[`
pragma `,`
using `,`
contract `,`
interface `,`
library `,`
constructor `,`
type `,`
function `,`
event `,`
modifier `,`
error `,`
struct `,`
enum `,`
if `,`
for `,`
while `,`
do while `,`
assembly `,`

`,`
`," ",""];throw new Error(`Language ${e} is not supported.`)}}async function nd(r){const t=await(await fetch(r)).arrayBuffer(),n=await crypto.subtle.digest("SHA-1",t),a=Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("");return console.log("readableHash from computeSHA1FromFile: ",a),a}async function Io(r){const t=new TextEncoder().encode(r),n=await crypto.subtle.digest("SHA-1",t),a=Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("");return console.log("readableHash from computeSHA1FromContent: ",a),a}function Ha(r){return Array.isArray(r)?r:[r]}function sd(r){let e,t,n,s=!1;return function(i){e===void 0?(e=i,t=0,n=-1):e=id(e,i);const o=e.length;let u=0;for(;t<o;){s&&(e[t]===10&&(u=++t),s=!1);let c=-1;for(;t<o&&c===-1;++t)switch(e[t]){case 58:n===-1&&(n=t-u);break;case 13:s=!0;case 10:c=t;break}if(c===-1)break;r(e.subarray(u,c),n),u=t,n=-1}u===o?e=void 0:u!==0&&(e=e.subarray(u),t-=u)}}function ad(r,e,t){let n=Za();const s=new TextDecoder;return function(i,o){if(i.length===0)t==null||t(n),n=Za();else if(o>0){const u=s.decode(i.subarray(0,o)),c=o+(i[o+1]===32?2:1),l=s.decode(i.subarray(c));switch(u){case"data":n.data=n.data?n.data+`
`+l:l;break;case"event":n.event=l;break;case"id":r(n.id=l);break;case"retry":const d=parseInt(l,10);isNaN(d)||e(n.retry=d);break}}}}function id(r,e){const t=new Uint8Array(r.length+e.length);return t.set(r),t.set(e,r.length),t}function Za(){return{data:"",event:"",id:"",retry:void 0}}var od="https://api-inference.huggingface.co/models/",Ro=(r=>(r.Length="length",r.EndOfSequenceToken="eos_token",r.StopSequence="stop_sequence",r))(Ro||{}),No=class{constructor(r="",e={}){at(this,"apiKey");at(this,"defaultOptions");this.apiKey=r,this.defaultOptions=e}async fillMask(r,e){const t=await this.request(r,e);if(!(Array.isArray(t)&&t.every(s=>typeof s.score=="number"&&typeof s.sequence=="string"&&typeof s.token=="number"&&typeof s.token_str=="string")))throw new TypeError("Invalid inference output: output must be of type Array<score: number, sequence:string, token:number, token_str:string>");return t}async summarization(r,e){const t=await this.request(r,e);if(!(Array.isArray(t)&&t.every(s=>typeof s.summary_text=="string")))throw new TypeError("Invalid inference output: output must be of type Array<summary_text: string>");return t==null?void 0:t[0]}async questionAnswer(r,e){const t=await this.request(r,e);if(!(typeof t.answer=="string"&&typeof t.end=="number"&&typeof t.score=="number"&&typeof t.start=="number"))throw new TypeError("Invalid inference output: output must be of type <answer: string, end: number, score: number, start: number>");return t}async tableQuestionAnswer(r,e){const t=await this.request(r,e);if(!(typeof t.aggregator=="string"&&typeof t.answer=="string"&&Array.isArray(t.cells)&&t.cells.every(s=>typeof s=="string")&&Array.isArray(t.coordinates)&&t.coordinates.every(s=>Array.isArray(s)&&s.every(a=>typeof a=="number"))))throw new TypeError("Invalid inference output: output must be of type <aggregator: string, answer: string, cells: string[], coordinates: number[][]>");return t}async textClassification(r,e){var s;const t=(s=await this.request(r,e))==null?void 0:s[0];if(!(Array.isArray(t)&&t.every(a=>typeof a.label=="string"&&typeof a.score=="number")))throw new TypeError("Invalid inference output: output must be of type Array<label: string, score: number>");return t}async textGeneration(r,e){const t=await this.request(r,e);if(!(Array.isArray(t)&&t.every(s=>typeof s.generated_text=="string")))throw new TypeError("Invalid inference output: output must be of type Array<generated_text: string>");return t==null?void 0:t[0]}async*textGenerationStream(r,e){yield*this.streamingRequest(r,e)}async tokenClassification(r,e){const t=Ha(await this.request(r,e));if(!(Array.isArray(t)&&t.every(s=>typeof s.end=="number"&&typeof s.entity_group=="string"&&typeof s.score=="number"&&typeof s.start=="number"&&typeof s.word=="string")))throw new TypeError("Invalid inference output: output must be of type Array<end: number, entity_group: string, score: number, start: number, word: string>");return t}async translation(r,e){const t=await this.request(r,e);if(!(Array.isArray(t)&&t.every(s=>typeof s.translation_text=="string")))throw new TypeError("Invalid inference output: output must be of type Array<translation_text: string>");return t==null?void 0:t[0]}async zeroShotClassification(r,e){const t=Ha(await this.request(r,e));if(!(Array.isArray(t)&&t.every(s=>Array.isArray(s.labels)&&s.labels.every(a=>typeof a=="string")&&Array.isArray(s.scores)&&s.scores.every(a=>typeof a=="number")&&typeof s.sequence=="string")))throw new TypeError("Invalid inference output: output must be of type Array<labels: string[], scores: number[], sequence: string>");return t}async conversational(r,e){const t=await this.request(r,e);if(!(Array.isArray(t.conversation.generated_responses)&&t.conversation.generated_responses.every(s=>typeof s=="string")&&Array.isArray(t.conversation.past_user_inputs)&&t.conversation.past_user_inputs.every(s=>typeof s=="string")&&typeof t.generated_text=="string"&&Array.isArray(t.warnings)&&t.warnings.every(s=>typeof s=="string")))throw new TypeError("Invalid inference output: output must be of type <conversation: {generated_responses: string[], past_user_inputs: string[]}, generated_text: string, warnings: string[]>");return t}async featureExtraction(r,e){return await this.request(r,e)}async automaticSpeechRecognition(r,e){const t=await this.request(r,{...e,binary:!0});if(!(typeof t.text=="string"))throw new TypeError("Invalid inference output: output must be of type <text: string>");return t}async audioClassification(r,e){const t=await this.request(r,{...e,binary:!0});if(!(Array.isArray(t)&&t.every(s=>typeof s.label=="string"&&typeof s.score=="number")))throw new TypeError("Invalid inference output: output must be of type Array<label: string, score: number>");return t}async imageClassification(r,e){const t=await this.request(r,{...e,binary:!0});if(!(Array.isArray(t)&&t.every(s=>typeof s.label=="string"&&typeof s.score=="number")))throw new TypeError("Invalid inference output: output must be of type Array<label: string, score: number>");return t}async objectDetection(r,e){const t=await this.request(r,{...e,binary:!0});if(!(Array.isArray(t)&&t.every(s=>typeof s.label=="string"&&typeof s.score=="number"&&typeof s.box.xmin=="number"&&typeof s.box.ymin=="number"&&typeof s.box.xmax=="number"&&typeof s.box.ymax=="number")))throw new TypeError("Invalid inference output: output must be of type Array<{label:string; score:number; box:{xmin:number; ymin:number; xmax:number; ymax:number}}>");return t}async imageSegmentation(r,e){const t=await this.request(r,{...e,binary:!0});if(!(Array.isArray(t)&&t.every(s=>typeof s.label=="string"&&typeof s.mask=="string"&&typeof s.score=="number")))throw new TypeError("Invalid inference output: output must be of type Array<label: string, mask: string, score: number>");return t}async textToImage(r,e){const t=await this.request(r,{...e,blob:!0});if(!(t&&t instanceof Blob))throw new TypeError("Invalid inference output: output must be of type object & of instance Blob");return t}async imageToText(r,e){var t;return(t=await this.request(r,{...e,binary:!0}))==null?void 0:t[0]}makeRequestOptions(r,e){const t={...this.defaultOptions,...e},{model:n,...s}=r,a={};this.apiKey&&(a.Authorization=`Bearer ${this.apiKey}`),e!=null&&e.binary||(a["Content-Type"]="application/json"),e!=null&&e.binary&&(t.wait_for_model&&(a["X-Wait-For-Model"]="true"),t.use_cache===!1&&(a["X-Use-Cache"]="false"),t.dont_load_model&&(a["X-Load-Model"]="0"));const i=`${od}${n}`,o={headers:a,method:"POST",body:e!=null&&e.binary?r.data:JSON.stringify({...s,options:t}),credentials:e!=null&&e.includeCredentials?"include":"same-origin"};return{url:i,info:o,mergedOptions:t}}async request(r,e){const{url:t,info:n,mergedOptions:s}=this.makeRequestOptions(r,e),a=await fetch(t,n);if(s.retry_on_error!==!1&&a.status===503&&!s.wait_for_model)return this.request(r,{...s,wait_for_model:!0});if(e!=null&&e.blob){if(!a.ok)throw new Error("An error occurred while fetching the blob");return await a.blob()}const i=await a.json();if(i.error)throw new Error(i.error);return i}async*streamingRequest(r,e){var l;const{url:t,info:n,mergedOptions:s}=this.makeRequestOptions({...r,stream:!0},e),a=await fetch(t,n);if(s.retry_on_error!==!1&&a.status===503&&!s.wait_for_model)return this.streamingRequest(r,{...s,wait_for_model:!0});if(!a.ok){if((l=a.headers.get("Content-Type"))!=null&&l.startsWith("application/json")){const d=await a.json();if(d.error)throw new Error(d.error)}throw new Error(`Server response contains error: ${a.status}`)}if(a.headers.get("content-type")!=="text/event-stream")throw new Error("Server does not support event stream content type, it returned "+a.headers.get("content-type"));if(!a.body)return;const i=a.body.getReader();let o=[];const c=sd(ad(()=>{},()=>{},d=>{o.push(d)}));try{for(;;){const{done:d,value:h}=await i.read();if(d)return;c(h);for(const b of o)b.data.length>0&&(yield JSON.parse(b.data));o=[]}}finally{i.releaseLock()}}};const ud=Object.freeze(Object.defineProperty({__proto__:null,HfInference:No,TextGenerationStreamFinishReason:Ro},Symbol.toStringTag,{value:"Module"}));class Do{constructor(e){Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.caller=new ra(e??{})}}const cd=()=>typeof window<"u"&&typeof window.document<"u",ld=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",dd=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),Lo=()=>typeof Deno<"u",Mo=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!Lo(),na=()=>{let r;return cd()?r="browser":Mo()?r="node":ld()?r="webworker":dd()?r="jsdom":Lo()?r="deno":r="other",r};let cs;async function hd(){return cs===void 0&&(cs={library:"langchain-js",runtime:na()}),cs}function Se(r){var e;try{return typeof process<"u"?(e=process.env)==null?void 0:e[r]:void 0}catch{return}}class On extends Do{constructor(e){super(e??{}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.model=(e==null?void 0:e.model)??"sentence-transformers/distilbert-base-nli-mean-tokens",this.apiKey=(e==null?void 0:e.apiKey)??Se("HUGGINGFACEHUB_API_KEY"),this.client=new No(this.apiKey)}async _embed(e){const t=e.map(n=>n.replace(/\n/g," "));return this.caller.call(()=>this.client.featureExtraction({model:this.model,inputs:t}))}embedQuery(e){return this._embed([e]).then(t=>t[0])}embedDocuments(e){return this._embed(e)}}const Fo="__run";class In extends rt{get text(){return this.content}constructor(e,t){typeof e=="string"&&(e={content:e,additional_kwargs:t}),e.additional_kwargs||(e.additional_kwargs={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","schema"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}}class Uo extends In{_getType(){return"human"}}class Bo extends In{_getType(){return"ai"}}class fd extends In{_getType(){return"system"}}class gb extends In{constructor(e,t){typeof e=="string"&&(e={content:e,role:t}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}}class Vo extends rt{}class pd{}class md{}class yd extends pd{constructor(e){super(),Object.defineProperty(this,"vectorStore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"k",{enumerable:!0,configurable:!0,writable:!0,value:4}),Object.defineProperty(this,"filter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.vectorStore=e.vectorStore,this.k=e.k??this.k,this.filter=e.filter}async getRelevantDocuments(e){return await this.vectorStore.similaritySearch(e,this.k,this.filter)}async addDocuments(e,t){return this.vectorStore.addDocuments(e,t)}}class gd{constructor(e,t){Object.defineProperty(this,"embeddings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.embeddings=e}async delete(e){throw new Error("Not implemented.")}async similaritySearch(e,t=4,n=void 0){return(await this.similaritySearchVectorWithScore(await this.embeddings.embedQuery(e),t,n)).map(a=>a[0])}async similaritySearchWithScore(e,t=4,n=void 0){return this.similaritySearchVectorWithScore(await this.embeddings.embedQuery(e),t,n)}static fromTexts(e,t,n,s){throw new Error("the Langchain vectorstore implementation you are using forgot to override this, please report a bug")}static fromDocuments(e,t,n){throw new Error("the Langchain vectorstore implementation you are using forgot to override this, please report a bug")}asRetriever(e,t){return new yd({vectorStore:this,k:e,filter:t})}}class Ut extends gd{constructor(e,t){super(e,t),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tableName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queryName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.client=t.client,this.tableName=t.tableName||"documents",this.queryName=t.queryName||"match_documents",this.filter=t.filter}async addDocuments(e,t){const n=e.map(({pageContent:s})=>s);return this.addVectors(await this.embeddings.embedDocuments(n),e,t)}async addVectors(e,t,n){const s=e.map((o,u)=>({content:t[u].pageContent,embedding:o,metadata:t[u].metadata})),a=500;let i=[];for(let o=0;o<s.length;o+=a){const u=s.slice(o,o+a).map(l=>n!=null&&n.ids?{id:n.ids[o],...l}:l),c=await this.client.from(this.tableName).upsert(u).select();if(c.error)throw new Error(`Error inserting: ${c.error.message} ${c.status} ${c.statusText}`);c.data&&(i=i.concat(c.data.map(l=>l.id)))}return i}async delete(e){const{ids:t}=e;for(const n of t)await this.client.from(this.tableName).delete().eq("id",n)}async similaritySearchVectorWithScore(e,t,n){if(n&&this.filter)throw new Error("cannot provide both `filter` and `this.filter`");const s=n??this.filter??{},a={query_embedding:e};let i;if(typeof s=="function")i=d=>s(d).limit(t);else if(typeof s=="object")a.filter=s,a.match_count=t,i=d=>d;else throw new Error("invalid filter type");const o=this.client.rpc(this.queryName,a),{data:u,error:c}=await i(o);if(c)throw new Error(`Error searching for documents: ${c.code} ${c.message} ${c.details}`);return u.map(d=>[new Ir({metadata:d.metadata,pageContent:d.content}),d.similarity])}static async fromTexts(e,t,n,s){const a=[];for(let i=0;i<e.length;i+=1){const o=Array.isArray(t)?t[i]:t,u=new Ir({pageContent:e[i],metadata:o});a.push(u)}return Ut.fromDocuments(a,n,s)}static async fromDocuments(e,t,n){const s=new this(t,n);return await s.addDocuments(e),s}static async fromExistingIndex(e,t){return new this(e,t)}}var Fs={},$o={},sa={exports:{}},qo=function(e,t){return function(){for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];return e.apply(t,s)}},bd=qo,Rt=Object.prototype.toString;function aa(r){return Array.isArray(r)}function Us(r){return typeof r>"u"}function _d(r){return r!==null&&!Us(r)&&r.constructor!==null&&!Us(r.constructor)&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function zo(r){return Rt.call(r)==="[object ArrayBuffer]"}function vd(r){return Rt.call(r)==="[object FormData]"}function wd(r){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&zo(r.buffer),e}function Od(r){return typeof r=="string"}function Ed(r){return typeof r=="number"}function Ho(r){return r!==null&&typeof r=="object"}function hn(r){if(Rt.call(r)!=="[object Object]")return!1;var e=Object.getPrototypeOf(r);return e===null||e===Object.prototype}function Ad(r){return Rt.call(r)==="[object Date]"}function Pd(r){return Rt.call(r)==="[object File]"}function xd(r){return Rt.call(r)==="[object Blob]"}function Zo(r){return Rt.call(r)==="[object Function]"}function Td(r){return Ho(r)&&Zo(r.pipe)}function Sd(r){return Rt.call(r)==="[object URLSearchParams]"}function Cd(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function kd(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function ia(r,e){if(!(r===null||typeof r>"u"))if(typeof r!="object"&&(r=[r]),aa(r))for(var t=0,n=r.length;t<n;t++)e.call(null,r[t],t,r);else for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.call(null,r[s],s,r)}function Bs(){var r={};function e(s,a){hn(r[a])&&hn(s)?r[a]=Bs(r[a],s):hn(s)?r[a]=Bs({},s):aa(s)?r[a]=s.slice():r[a]=s}for(var t=0,n=arguments.length;t<n;t++)ia(arguments[t],e);return r}function jd(r,e,t){return ia(e,function(s,a){t&&typeof s=="function"?r[a]=bd(s,t):r[a]=s}),r}function Id(r){return r.charCodeAt(0)===65279&&(r=r.slice(1)),r}var $e={isArray:aa,isArrayBuffer:zo,isBuffer:_d,isFormData:vd,isArrayBufferView:wd,isString:Od,isNumber:Ed,isObject:Ho,isPlainObject:hn,isUndefined:Us,isDate:Ad,isFile:Pd,isBlob:xd,isFunction:Zo,isStream:Td,isURLSearchParams:Sd,isStandardBrowserEnv:kd,forEach:ia,merge:Bs,extend:jd,trim:Cd,stripBOM:Id},zt=$e;function Ka(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Ko=function(e,t,n){if(!t)return e;var s;if(n)s=n(t);else if(zt.isURLSearchParams(t))s=t.toString();else{var a=[];zt.forEach(t,function(u,c){u===null||typeof u>"u"||(zt.isArray(u)?c=c+"[]":u=[u],zt.forEach(u,function(d){zt.isDate(d)?d=d.toISOString():zt.isObject(d)&&(d=JSON.stringify(d)),a.push(Ka(c)+"="+Ka(d))}))}),s=a.join("&")}if(s){var i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e},Rd=$e;function Rn(){this.handlers=[]}Rn.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};Rn.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Rn.prototype.forEach=function(e){Rd.forEach(this.handlers,function(n){n!==null&&e(n)})};var Nd=Rn,Dd=$e,Ld=function(e,t){Dd.forEach(e,function(s,a){a!==t&&a.toUpperCase()===t.toUpperCase()&&(e[t]=s,delete e[a])})},Yo=function(e,t,n,s,a){return e.config=t,n&&(e.code=n),e.request=s,e.response=a,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},Jo={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ls,Ya;function Wo(){if(Ya)return ls;Ya=1;var r=Yo;return ls=function(t,n,s,a,i){var o=new Error(t);return r(o,n,s,a,i)},ls}var ds,Ja;function Md(){if(Ja)return ds;Ja=1;var r=Wo();return ds=function(t,n,s){var a=s.config.validateStatus;!s.status||!a||a(s.status)?t(s):n(r("Request failed with status code "+s.status,s.config,null,s.request,s))},ds}var hs,Wa;function Fd(){if(Wa)return hs;Wa=1;var r=$e;return hs=r.isStandardBrowserEnv()?function(){return{write:function(n,s,a,i,o,u){var c=[];c.push(n+"="+encodeURIComponent(s)),r.isNumber(a)&&c.push("expires="+new Date(a).toGMTString()),r.isString(i)&&c.push("path="+i),r.isString(o)&&c.push("domain="+o),u===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(n){var s=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),hs}var fs,Ga;function Ud(){return Ga||(Ga=1,fs=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}),fs}var ps,Qa;function Bd(){return Qa||(Qa=1,ps=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}),ps}var ms,Xa;function Vd(){if(Xa)return ms;Xa=1;var r=Ud(),e=Bd();return ms=function(n,s){return n&&!r(s)?e(n,s):s},ms}var ys,ei;function $d(){if(ei)return ys;ei=1;var r=$e,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return ys=function(n){var s={},a,i,o;return n&&r.forEach(n.split(`
`),function(c){if(o=c.indexOf(":"),a=r.trim(c.substr(0,o)).toLowerCase(),i=r.trim(c.substr(o+1)),a){if(s[a]&&e.indexOf(a)>=0)return;a==="set-cookie"?s[a]=(s[a]?s[a]:[]).concat([i]):s[a]=s[a]?s[a]+", "+i:i}}),s},ys}var gs,ti;function qd(){if(ti)return gs;ti=1;var r=$e;return gs=r.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),s;function a(i){var o=i;return t&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return s=a(window.location.href),function(o){var u=r.isString(o)?a(o):o;return u.protocol===s.protocol&&u.host===s.host}}():function(){return function(){return!0}}(),gs}var bs,ri;function Nn(){if(ri)return bs;ri=1;function r(e){this.message=e}return r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,bs=r,bs}var _s,ni;function si(){if(ni)return _s;ni=1;var r=$e,e=Md(),t=Fd(),n=Ko,s=Vd(),a=$d(),i=qd(),o=Wo(),u=Jo,c=Nn();return _s=function(d){return new Promise(function(b,m){var w=d.data,g=d.headers,P=d.responseType,k;function C(){d.cancelToken&&d.cancelToken.unsubscribe(k),d.signal&&d.signal.removeEventListener("abort",k)}r.isFormData(w)&&delete g["Content-Type"];var x=new XMLHttpRequest;if(d.auth){var j=d.auth.username||"",A=d.auth.password?unescape(encodeURIComponent(d.auth.password)):"";g.Authorization="Basic "+btoa(j+":"+A)}var S=s(d.baseURL,d.url);x.open(d.method.toUpperCase(),n(S,d.params,d.paramsSerializer),!0),x.timeout=d.timeout;function y(){if(x){var p="getAllResponseHeaders"in x?a(x.getAllResponseHeaders()):null,O=!P||P==="text"||P==="json"?x.responseText:x.response,T={data:O,status:x.status,statusText:x.statusText,headers:p,config:d,request:x};e(function(B){b(B),C()},function(B){m(B),C()},T),x=null}}if("onloadend"in x?x.onloadend=y:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(y)},x.onabort=function(){x&&(m(o("Request aborted",d,"ECONNABORTED",x)),x=null)},x.onerror=function(){m(o("Network Error",d,null,x)),x=null},x.ontimeout=function(){var O=d.timeout?"timeout of "+d.timeout+"ms exceeded":"timeout exceeded",T=d.transitional||u;d.timeoutErrorMessage&&(O=d.timeoutErrorMessage),m(o(O,d,T.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",x)),x=null},r.isStandardBrowserEnv()){var v=(d.withCredentials||i(S))&&d.xsrfCookieName?t.read(d.xsrfCookieName):void 0;v&&(g[d.xsrfHeaderName]=v)}"setRequestHeader"in x&&r.forEach(g,function(O,T){typeof w>"u"&&T.toLowerCase()==="content-type"?delete g[T]:x.setRequestHeader(T,O)}),r.isUndefined(d.withCredentials)||(x.withCredentials=!!d.withCredentials),P&&P!=="json"&&(x.responseType=d.responseType),typeof d.onDownloadProgress=="function"&&x.addEventListener("progress",d.onDownloadProgress),typeof d.onUploadProgress=="function"&&x.upload&&x.upload.addEventListener("progress",d.onUploadProgress),(d.cancelToken||d.signal)&&(k=function(p){x&&(m(!p||p&&p.type?new c("canceled"):p),x.abort(),x=null)},d.cancelToken&&d.cancelToken.subscribe(k),d.signal&&(d.signal.aborted?k():d.signal.addEventListener("abort",k))),w||(w=null),x.send(w)})},_s}var ke=$e,ai=Ld,zd=Yo,Hd=Jo,Zd={"Content-Type":"application/x-www-form-urlencoded"};function ii(r,e){!ke.isUndefined(r)&&ke.isUndefined(r["Content-Type"])&&(r["Content-Type"]=e)}function Kd(){var r;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(r=si()),r}function Yd(r,e,t){if(ke.isString(r))try{return(e||JSON.parse)(r),ke.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(r)}var Dn={transitional:Hd,adapter:Kd(),transformRequest:[function(e,t){return ai(t,"Accept"),ai(t,"Content-Type"),ke.isFormData(e)||ke.isArrayBuffer(e)||ke.isBuffer(e)||ke.isStream(e)||ke.isFile(e)||ke.isBlob(e)?e:ke.isArrayBufferView(e)?e.buffer:ke.isURLSearchParams(e)?(ii(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):ke.isObject(e)||t&&t["Content-Type"]==="application/json"?(ii(t,"application/json"),Yd(e)):e}],transformResponse:[function(e){var t=this.transitional||Dn.transitional,n=t&&t.silentJSONParsing,s=t&&t.forcedJSONParsing,a=!n&&this.responseType==="json";if(a||s&&ke.isString(e)&&e.length)try{return JSON.parse(e)}catch(i){if(a)throw i.name==="SyntaxError"?zd(i,this,"E_JSON_PARSE"):i}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};ke.forEach(["delete","get","head"],function(e){Dn.headers[e]={}});ke.forEach(["post","put","patch"],function(e){Dn.headers[e]=ke.merge(Zd)});var oa=Dn,Jd=$e,Wd=oa,Gd=function(e,t,n){var s=this||Wd;return Jd.forEach(n,function(i){e=i.call(s,e,t)}),e},vs,oi;function Go(){return oi||(oi=1,vs=function(e){return!!(e&&e.__CANCEL__)}),vs}var ui=$e,ws=Gd,Qd=Go(),Xd=oa,eh=Nn();function Os(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new eh("canceled")}var th=function(e){Os(e),e.headers=e.headers||{},e.data=ws.call(e,e.data,e.headers,e.transformRequest),e.headers=ui.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),ui.forEach(["delete","get","head","post","put","patch","common"],function(s){delete e.headers[s]});var t=e.adapter||Xd.adapter;return t(e).then(function(s){return Os(e),s.data=ws.call(e,s.data,s.headers,e.transformResponse),s},function(s){return Qd(s)||(Os(e),s&&s.response&&(s.response.data=ws.call(e,s.response.data,s.response.headers,e.transformResponse))),Promise.reject(s)})},qe=$e,Qo=function(e,t){t=t||{};var n={};function s(l,d){return qe.isPlainObject(l)&&qe.isPlainObject(d)?qe.merge(l,d):qe.isPlainObject(d)?qe.merge({},d):qe.isArray(d)?d.slice():d}function a(l){if(qe.isUndefined(t[l])){if(!qe.isUndefined(e[l]))return s(void 0,e[l])}else return s(e[l],t[l])}function i(l){if(!qe.isUndefined(t[l]))return s(void 0,t[l])}function o(l){if(qe.isUndefined(t[l])){if(!qe.isUndefined(e[l]))return s(void 0,e[l])}else return s(void 0,t[l])}function u(l){if(l in t)return s(e[l],t[l]);if(l in e)return s(void 0,e[l])}var c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u};return qe.forEach(Object.keys(e).concat(Object.keys(t)),function(d){var h=c[d]||a,b=h(d);qe.isUndefined(b)&&h!==u||(n[d]=b)}),n},Es,ci;function Xo(){return ci||(ci=1,Es={version:"0.26.1"}),Es}var rh=Xo().version,ua={};["object","boolean","number","function","string","symbol"].forEach(function(r,e){ua[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});var li={};ua.transitional=function(e,t,n){function s(a,i){return"[Axios v"+rh+"] Transitional option '"+a+"'"+i+(n?". "+n:"")}return function(a,i,o){if(e===!1)throw new Error(s(i," has been removed"+(t?" in "+t:"")));return t&&!li[i]&&(li[i]=!0,console.warn(s(i," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(a,i,o):!0}};function nh(r,e,t){if(typeof r!="object")throw new TypeError("options must be an object");for(var n=Object.keys(r),s=n.length;s-- >0;){var a=n[s],i=e[a];if(i){var o=r[a],u=o===void 0||i(o,a,r);if(u!==!0)throw new TypeError("option "+a+" must be "+u);continue}if(t!==!0)throw Error("Unknown option "+a)}}var sh={assertOptions:nh,validators:ua},eu=$e,ah=Ko,di=Nd,hi=th,Ln=Qo,tu=sh,Ht=tu.validators;function Kr(r){this.defaults=r,this.interceptors={request:new di,response:new di}}Kr.prototype.request=function(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Ln(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;n!==void 0&&tu.assertOptions(n,{silentJSONParsing:Ht.transitional(Ht.boolean),forcedJSONParsing:Ht.transitional(Ht.boolean),clarifyTimeoutError:Ht.transitional(Ht.boolean)},!1);var s=[],a=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(t)===!1||(a=a&&b.synchronous,s.unshift(b.fulfilled,b.rejected))});var i=[];this.interceptors.response.forEach(function(b){i.push(b.fulfilled,b.rejected)});var o;if(!a){var u=[hi,void 0];for(Array.prototype.unshift.apply(u,s),u=u.concat(i),o=Promise.resolve(t);u.length;)o=o.then(u.shift(),u.shift());return o}for(var c=t;s.length;){var l=s.shift(),d=s.shift();try{c=l(c)}catch(h){d(h);break}}try{o=hi(c)}catch(h){return Promise.reject(h)}for(;i.length;)o=o.then(i.shift(),i.shift());return o};Kr.prototype.getUri=function(e){return e=Ln(this.defaults,e),ah(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};eu.forEach(["delete","get","head","options"],function(e){Kr.prototype[e]=function(t,n){return this.request(Ln(n||{},{method:e,url:t,data:(n||{}).data}))}});eu.forEach(["post","put","patch"],function(e){Kr.prototype[e]=function(t,n,s){return this.request(Ln(s||{},{method:e,url:t,data:n}))}});var ih=Kr,As,fi;function oh(){if(fi)return As;fi=1;var r=Nn();function e(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(i){n=i});var s=this;this.promise.then(function(a){if(s._listeners){var i,o=s._listeners.length;for(i=0;i<o;i++)s._listeners[i](a);s._listeners=null}}),this.promise.then=function(a){var i,o=new Promise(function(u){s.subscribe(u),i=u}).then(a);return o.cancel=function(){s.unsubscribe(i)},o},t(function(i){s.reason||(s.reason=new r(i),n(s.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var s=this._listeners.indexOf(n);s!==-1&&this._listeners.splice(s,1)}},e.source=function(){var n,s=new e(function(i){n=i});return{token:s,cancel:n}},As=e,As}var Ps,pi;function uh(){return pi||(pi=1,Ps=function(e){return function(n){return e.apply(null,n)}}),Ps}var xs,mi;function ch(){if(mi)return xs;mi=1;var r=$e;return xs=function(t){return r.isObject(t)&&t.isAxiosError===!0},xs}var yi=$e,lh=qo,fn=ih,dh=Qo,hh=oa;function ru(r){var e=new fn(r),t=lh(fn.prototype.request,e);return yi.extend(t,fn.prototype,e),yi.extend(t,e),t.create=function(s){return ru(dh(r,s))},t}var mt=ru(hh);mt.Axios=fn;mt.Cancel=Nn();mt.CancelToken=oh();mt.isCancel=Go();mt.VERSION=Xo().version;mt.all=function(e){return Promise.all(e)};mt.spread=uh();mt.isAxiosError=ch();sa.exports=mt;sa.exports.default=mt;var fh=sa.exports,nu=fh,Oe={},ca={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.RequiredError=r.BaseAPI=r.COLLECTION_FORMATS=r.BASE_PATH=void 0;const e=nu;r.BASE_PATH="https://api.openai.com/v1".replace(/\/+$/,""),r.COLLECTION_FORMATS={csv:",",ssv:" ",tsv:"	",pipes:"|"};class t{constructor(a,i=r.BASE_PATH,o=e.default){this.basePath=i,this.axios=o,a&&(this.configuration=a,this.basePath=a.basePath||this.basePath)}}r.BaseAPI=t;class n extends Error{constructor(a,i){super(i),this.field=a,this.name="RequiredError"}}r.RequiredError=n})(ca);var la=ot&&ot.__awaiter||function(r,e,t,n){function s(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function o(l){try{c(n.next(l))}catch(d){i(d)}}function u(l){try{c(n.throw(l))}catch(d){i(d)}}function c(l){l.done?a(l.value):s(l.value).then(o,u)}c((n=n.apply(r,e||[])).next())})};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.createRequestFunction=Oe.toPathString=Oe.serializeDataIfNeeded=Oe.setSearchParams=Oe.setOAuthToObject=Oe.setBearerAuthToObject=Oe.setBasicAuthToObject=Oe.setApiKeyToObject=Oe.assertParamExists=Oe.DUMMY_BASE_URL=void 0;const ph=ca;Oe.DUMMY_BASE_URL="https://example.com";Oe.assertParamExists=function(r,e,t){if(t==null)throw new ph.RequiredError(e,`Required parameter ${e} was null or undefined when calling ${r}.`)};Oe.setApiKeyToObject=function(r,e,t){return la(this,void 0,void 0,function*(){if(t&&t.apiKey){const n=typeof t.apiKey=="function"?yield t.apiKey(e):yield t.apiKey;r[e]=n}})};Oe.setBasicAuthToObject=function(r,e){e&&(e.username||e.password)&&(r.auth={username:e.username,password:e.password})};Oe.setBearerAuthToObject=function(r,e){return la(this,void 0,void 0,function*(){if(e&&e.accessToken){const t=typeof e.accessToken=="function"?yield e.accessToken():yield e.accessToken;r.Authorization="Bearer "+t}})};Oe.setOAuthToObject=function(r,e,t,n){return la(this,void 0,void 0,function*(){if(n&&n.accessToken){const s=typeof n.accessToken=="function"?yield n.accessToken(e,t):yield n.accessToken;r.Authorization="Bearer "+s}})};function Vs(r,e,t=""){e!=null&&(typeof e=="object"?Array.isArray(e)?e.forEach(n=>Vs(r,n,t)):Object.keys(e).forEach(n=>Vs(r,e[n],`${t}${t!==""?".":""}${n}`)):r.has(t)?r.append(t,e):r.set(t,e))}Oe.setSearchParams=function(r,...e){const t=new URLSearchParams(r.search);Vs(t,e),r.search=t.toString()};Oe.serializeDataIfNeeded=function(r,e,t){const n=typeof r!="string";return(n&&t&&t.isJsonMime?t.isJsonMime(e.headers["Content-Type"]):n)?JSON.stringify(r!==void 0?r:{}):r||""};Oe.toPathString=function(r){return r.pathname+r.search+r.hash};Oe.createRequestFunction=function(r,e,t,n){return(s=e,a=t)=>{const i=Object.assign(Object.assign({},r.options),{url:((n==null?void 0:n.basePath)||a)+r.url});return s.request(i)}};(function(r){var e=ot&&ot.__awaiter||function(i,o,u,c){function l(d){return d instanceof u?d:new u(function(h){h(d)})}return new(u||(u=Promise))(function(d,h){function b(g){try{w(c.next(g))}catch(P){h(P)}}function m(g){try{w(c.throw(g))}catch(P){h(P)}}function w(g){g.done?d(g.value):l(g.value).then(b,m)}w((c=c.apply(i,o||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.OpenAIApi=r.OpenAIApiFactory=r.OpenAIApiFp=r.OpenAIApiAxiosParamCreator=r.CreateImageRequestResponseFormatEnum=r.CreateImageRequestSizeEnum=r.ChatCompletionResponseMessageRoleEnum=r.ChatCompletionRequestMessageRoleEnum=void 0;const t=nu,n=Oe,s=ca;r.ChatCompletionRequestMessageRoleEnum={System:"system",User:"user",Assistant:"assistant",Function:"function"},r.ChatCompletionResponseMessageRoleEnum={System:"system",User:"user",Assistant:"assistant",Function:"function"},r.CreateImageRequestSizeEnum={_256x256:"256x256",_512x512:"512x512",_1024x1024:"1024x1024"},r.CreateImageRequestResponseFormatEnum={Url:"url",B64Json:"b64_json"},r.OpenAIApiAxiosParamCreator=function(i){return{cancelFineTune:(o,u={})=>e(this,void 0,void 0,function*(){n.assertParamExists("cancelFineTune","fineTuneId",o);const c="/fine-tunes/{fine_tune_id}/cancel".replace("{fine_tune_id}",encodeURIComponent(String(o))),l=new URL(c,n.DUMMY_BASE_URL);let d;i&&(d=i.baseOptions);const h=Object.assign(Object.assign({method:"POST"},d),u),b={},m={};n.setSearchParams(l,m);let w=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},b),w),u.headers),{url:n.toPathString(l),options:h}}),createAnswer:(o,u={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createAnswer","createAnswerRequest",o);const c="/answers",l=new URL(c,n.DUMMY_BASE_URL);let d;i&&(d=i.baseOptions);const h=Object.assign(Object.assign({method:"POST"},d),u),b={},m={};b["Content-Type"]="application/json",n.setSearchParams(l,m);let w=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},b),w),u.headers),h.data=n.serializeDataIfNeeded(o,h,i),{url:n.toPathString(l),options:h}}),createChatCompletion:(o,u={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createChatCompletion","createChatCompletionRequest",o);const c="/chat/completions",l=new URL(c,n.DUMMY_BASE_URL);let d;i&&(d=i.baseOptions);const h=Object.assign(Object.assign({method:"POST"},d),u),b={},m={};b["Content-Type"]="application/json",n.setSearchParams(l,m);let w=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},b),w),u.headers),h.data=n.serializeDataIfNeeded(o,h,i),{url:n.toPathString(l),options:h}}),createClassification:(o,u={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createClassification","createClassificationRequest",o);const c="/classifications",l=new URL(c,n.DUMMY_BASE_URL);let d;i&&(d=i.baseOptions);const h=Object.assign(Object.assign({method:"POST"},d),u),b={},m={};b["Content-Type"]="application/json",n.setSearchParams(l,m);let w=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},b),w),u.headers),h.data=n.serializeDataIfNeeded(o,h,i),{url:n.toPathString(l),options:h}}),createCompletion:(o,u={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createCompletion","createCompletionRequest",o);const c="/completions",l=new URL(c,n.DUMMY_BASE_URL);let d;i&&(d=i.baseOptions);const h=Object.assign(Object.assign({method:"POST"},d),u),b={},m={};b["Content-Type"]="application/json",n.setSearchParams(l,m);let w=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},b),w),u.headers),h.data=n.serializeDataIfNeeded(o,h,i),{url:n.toPathString(l),options:h}}),createEdit:(o,u={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createEdit","createEditRequest",o);const c="/edits",l=new URL(c,n.DUMMY_BASE_URL);let d;i&&(d=i.baseOptions);const h=Object.assign(Object.assign({method:"POST"},d),u),b={},m={};b["Content-Type"]="application/json",n.setSearchParams(l,m);let w=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},b),w),u.headers),h.data=n.serializeDataIfNeeded(o,h,i),{url:n.toPathString(l),options:h}}),createEmbedding:(o,u={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createEmbedding","createEmbeddingRequest",o);const c="/embeddings",l=new URL(c,n.DUMMY_BASE_URL);let d;i&&(d=i.baseOptions);const h=Object.assign(Object.assign({method:"POST"},d),u),b={},m={};b["Content-Type"]="application/json",n.setSearchParams(l,m);let w=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},b),w),u.headers),h.data=n.serializeDataIfNeeded(o,h,i),{url:n.toPathString(l),options:h}}),createFile:(o,u,c={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createFile","file",o),n.assertParamExists("createFile","purpose",u);const l="/files",d=new URL(l,n.DUMMY_BASE_URL);let h;i&&(h=i.baseOptions);const b=Object.assign(Object.assign({method:"POST"},h),c),m={},w={},g=new(i&&i.formDataCtor||FormData);o!==void 0&&g.append("file",o),u!==void 0&&g.append("purpose",u),m["Content-Type"]="multipart/form-data",n.setSearchParams(d,w);let P=h&&h.headers?h.headers:{};return b.headers=Object.assign(Object.assign(Object.assign(Object.assign({},m),g.getHeaders()),P),c.headers),b.data=g,{url:n.toPathString(d),options:b}}),createFineTune:(o,u={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createFineTune","createFineTuneRequest",o);const c="/fine-tunes",l=new URL(c,n.DUMMY_BASE_URL);let d;i&&(d=i.baseOptions);const h=Object.assign(Object.assign({method:"POST"},d),u),b={},m={};b["Content-Type"]="application/json",n.setSearchParams(l,m);let w=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},b),w),u.headers),h.data=n.serializeDataIfNeeded(o,h,i),{url:n.toPathString(l),options:h}}),createImage:(o,u={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createImage","createImageRequest",o);const c="/images/generations",l=new URL(c,n.DUMMY_BASE_URL);let d;i&&(d=i.baseOptions);const h=Object.assign(Object.assign({method:"POST"},d),u),b={},m={};b["Content-Type"]="application/json",n.setSearchParams(l,m);let w=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},b),w),u.headers),h.data=n.serializeDataIfNeeded(o,h,i),{url:n.toPathString(l),options:h}}),createImageEdit:(o,u,c,l,d,h,b,m={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createImageEdit","image",o),n.assertParamExists("createImageEdit","prompt",u);const w="/images/edits",g=new URL(w,n.DUMMY_BASE_URL);let P;i&&(P=i.baseOptions);const k=Object.assign(Object.assign({method:"POST"},P),m),C={},x={},j=new(i&&i.formDataCtor||FormData);o!==void 0&&j.append("image",o),c!==void 0&&j.append("mask",c),u!==void 0&&j.append("prompt",u),l!==void 0&&j.append("n",l),d!==void 0&&j.append("size",d),h!==void 0&&j.append("response_format",h),b!==void 0&&j.append("user",b),C["Content-Type"]="multipart/form-data",n.setSearchParams(g,x);let A=P&&P.headers?P.headers:{};return k.headers=Object.assign(Object.assign(Object.assign(Object.assign({},C),j.getHeaders()),A),m.headers),k.data=j,{url:n.toPathString(g),options:k}}),createImageVariation:(o,u,c,l,d,h={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createImageVariation","image",o);const b="/images/variations",m=new URL(b,n.DUMMY_BASE_URL);let w;i&&(w=i.baseOptions);const g=Object.assign(Object.assign({method:"POST"},w),h),P={},k={},C=new(i&&i.formDataCtor||FormData);o!==void 0&&C.append("image",o),u!==void 0&&C.append("n",u),c!==void 0&&C.append("size",c),l!==void 0&&C.append("response_format",l),d!==void 0&&C.append("user",d),P["Content-Type"]="multipart/form-data",n.setSearchParams(m,k);let x=w&&w.headers?w.headers:{};return g.headers=Object.assign(Object.assign(Object.assign(Object.assign({},P),C.getHeaders()),x),h.headers),g.data=C,{url:n.toPathString(m),options:g}}),createModeration:(o,u={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createModeration","createModerationRequest",o);const c="/moderations",l=new URL(c,n.DUMMY_BASE_URL);let d;i&&(d=i.baseOptions);const h=Object.assign(Object.assign({method:"POST"},d),u),b={},m={};b["Content-Type"]="application/json",n.setSearchParams(l,m);let w=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},b),w),u.headers),h.data=n.serializeDataIfNeeded(o,h,i),{url:n.toPathString(l),options:h}}),createSearch:(o,u,c={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createSearch","engineId",o),n.assertParamExists("createSearch","createSearchRequest",u);const l="/engines/{engine_id}/search".replace("{engine_id}",encodeURIComponent(String(o))),d=new URL(l,n.DUMMY_BASE_URL);let h;i&&(h=i.baseOptions);const b=Object.assign(Object.assign({method:"POST"},h),c),m={},w={};m["Content-Type"]="application/json",n.setSearchParams(d,w);let g=h&&h.headers?h.headers:{};return b.headers=Object.assign(Object.assign(Object.assign({},m),g),c.headers),b.data=n.serializeDataIfNeeded(u,b,i),{url:n.toPathString(d),options:b}}),createTranscription:(o,u,c,l,d,h,b={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createTranscription","file",o),n.assertParamExists("createTranscription","model",u);const m="/audio/transcriptions",w=new URL(m,n.DUMMY_BASE_URL);let g;i&&(g=i.baseOptions);const P=Object.assign(Object.assign({method:"POST"},g),b),k={},C={},x=new(i&&i.formDataCtor||FormData);o!==void 0&&x.append("file",o),u!==void 0&&x.append("model",u),c!==void 0&&x.append("prompt",c),l!==void 0&&x.append("response_format",l),d!==void 0&&x.append("temperature",d),h!==void 0&&x.append("language",h),k["Content-Type"]="multipart/form-data",n.setSearchParams(w,C);let j=g&&g.headers?g.headers:{};return P.headers=Object.assign(Object.assign(Object.assign(Object.assign({},k),x.getHeaders()),j),b.headers),P.data=x,{url:n.toPathString(w),options:P}}),createTranslation:(o,u,c,l,d,h={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createTranslation","file",o),n.assertParamExists("createTranslation","model",u);const b="/audio/translations",m=new URL(b,n.DUMMY_BASE_URL);let w;i&&(w=i.baseOptions);const g=Object.assign(Object.assign({method:"POST"},w),h),P={},k={},C=new(i&&i.formDataCtor||FormData);o!==void 0&&C.append("file",o),u!==void 0&&C.append("model",u),c!==void 0&&C.append("prompt",c),l!==void 0&&C.append("response_format",l),d!==void 0&&C.append("temperature",d),P["Content-Type"]="multipart/form-data",n.setSearchParams(m,k);let x=w&&w.headers?w.headers:{};return g.headers=Object.assign(Object.assign(Object.assign(Object.assign({},P),C.getHeaders()),x),h.headers),g.data=C,{url:n.toPathString(m),options:g}}),deleteFile:(o,u={})=>e(this,void 0,void 0,function*(){n.assertParamExists("deleteFile","fileId",o);const c="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(o))),l=new URL(c,n.DUMMY_BASE_URL);let d;i&&(d=i.baseOptions);const h=Object.assign(Object.assign({method:"DELETE"},d),u),b={},m={};n.setSearchParams(l,m);let w=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},b),w),u.headers),{url:n.toPathString(l),options:h}}),deleteModel:(o,u={})=>e(this,void 0,void 0,function*(){n.assertParamExists("deleteModel","model",o);const c="/models/{model}".replace("{model}",encodeURIComponent(String(o))),l=new URL(c,n.DUMMY_BASE_URL);let d;i&&(d=i.baseOptions);const h=Object.assign(Object.assign({method:"DELETE"},d),u),b={},m={};n.setSearchParams(l,m);let w=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},b),w),u.headers),{url:n.toPathString(l),options:h}}),downloadFile:(o,u={})=>e(this,void 0,void 0,function*(){n.assertParamExists("downloadFile","fileId",o);const c="/files/{file_id}/content".replace("{file_id}",encodeURIComponent(String(o))),l=new URL(c,n.DUMMY_BASE_URL);let d;i&&(d=i.baseOptions);const h=Object.assign(Object.assign({method:"GET"},d),u),b={},m={};n.setSearchParams(l,m);let w=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},b),w),u.headers),{url:n.toPathString(l),options:h}}),listEngines:(o={})=>e(this,void 0,void 0,function*(){const u="/engines",c=new URL(u,n.DUMMY_BASE_URL);let l;i&&(l=i.baseOptions);const d=Object.assign(Object.assign({method:"GET"},l),o),h={},b={};n.setSearchParams(c,b);let m=l&&l.headers?l.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},h),m),o.headers),{url:n.toPathString(c),options:d}}),listFiles:(o={})=>e(this,void 0,void 0,function*(){const u="/files",c=new URL(u,n.DUMMY_BASE_URL);let l;i&&(l=i.baseOptions);const d=Object.assign(Object.assign({method:"GET"},l),o),h={},b={};n.setSearchParams(c,b);let m=l&&l.headers?l.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},h),m),o.headers),{url:n.toPathString(c),options:d}}),listFineTuneEvents:(o,u,c={})=>e(this,void 0,void 0,function*(){n.assertParamExists("listFineTuneEvents","fineTuneId",o);const l="/fine-tunes/{fine_tune_id}/events".replace("{fine_tune_id}",encodeURIComponent(String(o))),d=new URL(l,n.DUMMY_BASE_URL);let h;i&&(h=i.baseOptions);const b=Object.assign(Object.assign({method:"GET"},h),c),m={},w={};u!==void 0&&(w.stream=u),n.setSearchParams(d,w);let g=h&&h.headers?h.headers:{};return b.headers=Object.assign(Object.assign(Object.assign({},m),g),c.headers),{url:n.toPathString(d),options:b}}),listFineTunes:(o={})=>e(this,void 0,void 0,function*(){const u="/fine-tunes",c=new URL(u,n.DUMMY_BASE_URL);let l;i&&(l=i.baseOptions);const d=Object.assign(Object.assign({method:"GET"},l),o),h={},b={};n.setSearchParams(c,b);let m=l&&l.headers?l.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},h),m),o.headers),{url:n.toPathString(c),options:d}}),listModels:(o={})=>e(this,void 0,void 0,function*(){const u="/models",c=new URL(u,n.DUMMY_BASE_URL);let l;i&&(l=i.baseOptions);const d=Object.assign(Object.assign({method:"GET"},l),o),h={},b={};n.setSearchParams(c,b);let m=l&&l.headers?l.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},h),m),o.headers),{url:n.toPathString(c),options:d}}),retrieveEngine:(o,u={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveEngine","engineId",o);const c="/engines/{engine_id}".replace("{engine_id}",encodeURIComponent(String(o))),l=new URL(c,n.DUMMY_BASE_URL);let d;i&&(d=i.baseOptions);const h=Object.assign(Object.assign({method:"GET"},d),u),b={},m={};n.setSearchParams(l,m);let w=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},b),w),u.headers),{url:n.toPathString(l),options:h}}),retrieveFile:(o,u={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveFile","fileId",o);const c="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(o))),l=new URL(c,n.DUMMY_BASE_URL);let d;i&&(d=i.baseOptions);const h=Object.assign(Object.assign({method:"GET"},d),u),b={},m={};n.setSearchParams(l,m);let w=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},b),w),u.headers),{url:n.toPathString(l),options:h}}),retrieveFineTune:(o,u={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveFineTune","fineTuneId",o);const c="/fine-tunes/{fine_tune_id}".replace("{fine_tune_id}",encodeURIComponent(String(o))),l=new URL(c,n.DUMMY_BASE_URL);let d;i&&(d=i.baseOptions);const h=Object.assign(Object.assign({method:"GET"},d),u),b={},m={};n.setSearchParams(l,m);let w=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},b),w),u.headers),{url:n.toPathString(l),options:h}}),retrieveModel:(o,u={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveModel","model",o);const c="/models/{model}".replace("{model}",encodeURIComponent(String(o))),l=new URL(c,n.DUMMY_BASE_URL);let d;i&&(d=i.baseOptions);const h=Object.assign(Object.assign({method:"GET"},d),u),b={},m={};n.setSearchParams(l,m);let w=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},b),w),u.headers),{url:n.toPathString(l),options:h}})}},r.OpenAIApiFp=function(i){const o=r.OpenAIApiAxiosParamCreator(i);return{cancelFineTune(u,c){return e(this,void 0,void 0,function*(){const l=yield o.cancelFineTune(u,c);return n.createRequestFunction(l,t.default,s.BASE_PATH,i)})},createAnswer(u,c){return e(this,void 0,void 0,function*(){const l=yield o.createAnswer(u,c);return n.createRequestFunction(l,t.default,s.BASE_PATH,i)})},createChatCompletion(u,c){return e(this,void 0,void 0,function*(){const l=yield o.createChatCompletion(u,c);return n.createRequestFunction(l,t.default,s.BASE_PATH,i)})},createClassification(u,c){return e(this,void 0,void 0,function*(){const l=yield o.createClassification(u,c);return n.createRequestFunction(l,t.default,s.BASE_PATH,i)})},createCompletion(u,c){return e(this,void 0,void 0,function*(){const l=yield o.createCompletion(u,c);return n.createRequestFunction(l,t.default,s.BASE_PATH,i)})},createEdit(u,c){return e(this,void 0,void 0,function*(){const l=yield o.createEdit(u,c);return n.createRequestFunction(l,t.default,s.BASE_PATH,i)})},createEmbedding(u,c){return e(this,void 0,void 0,function*(){const l=yield o.createEmbedding(u,c);return n.createRequestFunction(l,t.default,s.BASE_PATH,i)})},createFile(u,c,l){return e(this,void 0,void 0,function*(){const d=yield o.createFile(u,c,l);return n.createRequestFunction(d,t.default,s.BASE_PATH,i)})},createFineTune(u,c){return e(this,void 0,void 0,function*(){const l=yield o.createFineTune(u,c);return n.createRequestFunction(l,t.default,s.BASE_PATH,i)})},createImage(u,c){return e(this,void 0,void 0,function*(){const l=yield o.createImage(u,c);return n.createRequestFunction(l,t.default,s.BASE_PATH,i)})},createImageEdit(u,c,l,d,h,b,m,w){return e(this,void 0,void 0,function*(){const g=yield o.createImageEdit(u,c,l,d,h,b,m,w);return n.createRequestFunction(g,t.default,s.BASE_PATH,i)})},createImageVariation(u,c,l,d,h,b){return e(this,void 0,void 0,function*(){const m=yield o.createImageVariation(u,c,l,d,h,b);return n.createRequestFunction(m,t.default,s.BASE_PATH,i)})},createModeration(u,c){return e(this,void 0,void 0,function*(){const l=yield o.createModeration(u,c);return n.createRequestFunction(l,t.default,s.BASE_PATH,i)})},createSearch(u,c,l){return e(this,void 0,void 0,function*(){const d=yield o.createSearch(u,c,l);return n.createRequestFunction(d,t.default,s.BASE_PATH,i)})},createTranscription(u,c,l,d,h,b,m){return e(this,void 0,void 0,function*(){const w=yield o.createTranscription(u,c,l,d,h,b,m);return n.createRequestFunction(w,t.default,s.BASE_PATH,i)})},createTranslation(u,c,l,d,h,b){return e(this,void 0,void 0,function*(){const m=yield o.createTranslation(u,c,l,d,h,b);return n.createRequestFunction(m,t.default,s.BASE_PATH,i)})},deleteFile(u,c){return e(this,void 0,void 0,function*(){const l=yield o.deleteFile(u,c);return n.createRequestFunction(l,t.default,s.BASE_PATH,i)})},deleteModel(u,c){return e(this,void 0,void 0,function*(){const l=yield o.deleteModel(u,c);return n.createRequestFunction(l,t.default,s.BASE_PATH,i)})},downloadFile(u,c){return e(this,void 0,void 0,function*(){const l=yield o.downloadFile(u,c);return n.createRequestFunction(l,t.default,s.BASE_PATH,i)})},listEngines(u){return e(this,void 0,void 0,function*(){const c=yield o.listEngines(u);return n.createRequestFunction(c,t.default,s.BASE_PATH,i)})},listFiles(u){return e(this,void 0,void 0,function*(){const c=yield o.listFiles(u);return n.createRequestFunction(c,t.default,s.BASE_PATH,i)})},listFineTuneEvents(u,c,l){return e(this,void 0,void 0,function*(){const d=yield o.listFineTuneEvents(u,c,l);return n.createRequestFunction(d,t.default,s.BASE_PATH,i)})},listFineTunes(u){return e(this,void 0,void 0,function*(){const c=yield o.listFineTunes(u);return n.createRequestFunction(c,t.default,s.BASE_PATH,i)})},listModels(u){return e(this,void 0,void 0,function*(){const c=yield o.listModels(u);return n.createRequestFunction(c,t.default,s.BASE_PATH,i)})},retrieveEngine(u,c){return e(this,void 0,void 0,function*(){const l=yield o.retrieveEngine(u,c);return n.createRequestFunction(l,t.default,s.BASE_PATH,i)})},retrieveFile(u,c){return e(this,void 0,void 0,function*(){const l=yield o.retrieveFile(u,c);return n.createRequestFunction(l,t.default,s.BASE_PATH,i)})},retrieveFineTune(u,c){return e(this,void 0,void 0,function*(){const l=yield o.retrieveFineTune(u,c);return n.createRequestFunction(l,t.default,s.BASE_PATH,i)})},retrieveModel(u,c){return e(this,void 0,void 0,function*(){const l=yield o.retrieveModel(u,c);return n.createRequestFunction(l,t.default,s.BASE_PATH,i)})}}},r.OpenAIApiFactory=function(i,o,u){const c=r.OpenAIApiFp(i);return{cancelFineTune(l,d){return c.cancelFineTune(l,d).then(h=>h(u,o))},createAnswer(l,d){return c.createAnswer(l,d).then(h=>h(u,o))},createChatCompletion(l,d){return c.createChatCompletion(l,d).then(h=>h(u,o))},createClassification(l,d){return c.createClassification(l,d).then(h=>h(u,o))},createCompletion(l,d){return c.createCompletion(l,d).then(h=>h(u,o))},createEdit(l,d){return c.createEdit(l,d).then(h=>h(u,o))},createEmbedding(l,d){return c.createEmbedding(l,d).then(h=>h(u,o))},createFile(l,d,h){return c.createFile(l,d,h).then(b=>b(u,o))},createFineTune(l,d){return c.createFineTune(l,d).then(h=>h(u,o))},createImage(l,d){return c.createImage(l,d).then(h=>h(u,o))},createImageEdit(l,d,h,b,m,w,g,P){return c.createImageEdit(l,d,h,b,m,w,g,P).then(k=>k(u,o))},createImageVariation(l,d,h,b,m,w){return c.createImageVariation(l,d,h,b,m,w).then(g=>g(u,o))},createModeration(l,d){return c.createModeration(l,d).then(h=>h(u,o))},createSearch(l,d,h){return c.createSearch(l,d,h).then(b=>b(u,o))},createTranscription(l,d,h,b,m,w,g){return c.createTranscription(l,d,h,b,m,w,g).then(P=>P(u,o))},createTranslation(l,d,h,b,m,w){return c.createTranslation(l,d,h,b,m,w).then(g=>g(u,o))},deleteFile(l,d){return c.deleteFile(l,d).then(h=>h(u,o))},deleteModel(l,d){return c.deleteModel(l,d).then(h=>h(u,o))},downloadFile(l,d){return c.downloadFile(l,d).then(h=>h(u,o))},listEngines(l){return c.listEngines(l).then(d=>d(u,o))},listFiles(l){return c.listFiles(l).then(d=>d(u,o))},listFineTuneEvents(l,d,h){return c.listFineTuneEvents(l,d,h).then(b=>b(u,o))},listFineTunes(l){return c.listFineTunes(l).then(d=>d(u,o))},listModels(l){return c.listModels(l).then(d=>d(u,o))},retrieveEngine(l,d){return c.retrieveEngine(l,d).then(h=>h(u,o))},retrieveFile(l,d){return c.retrieveFile(l,d).then(h=>h(u,o))},retrieveFineTune(l,d){return c.retrieveFineTune(l,d).then(h=>h(u,o))},retrieveModel(l,d){return c.retrieveModel(l,d).then(h=>h(u,o))}}};class a extends s.BaseAPI{cancelFineTune(o,u){return r.OpenAIApiFp(this.configuration).cancelFineTune(o,u).then(c=>c(this.axios,this.basePath))}createAnswer(o,u){return r.OpenAIApiFp(this.configuration).createAnswer(o,u).then(c=>c(this.axios,this.basePath))}createChatCompletion(o,u){return r.OpenAIApiFp(this.configuration).createChatCompletion(o,u).then(c=>c(this.axios,this.basePath))}createClassification(o,u){return r.OpenAIApiFp(this.configuration).createClassification(o,u).then(c=>c(this.axios,this.basePath))}createCompletion(o,u){return r.OpenAIApiFp(this.configuration).createCompletion(o,u).then(c=>c(this.axios,this.basePath))}createEdit(o,u){return r.OpenAIApiFp(this.configuration).createEdit(o,u).then(c=>c(this.axios,this.basePath))}createEmbedding(o,u){return r.OpenAIApiFp(this.configuration).createEmbedding(o,u).then(c=>c(this.axios,this.basePath))}createFile(o,u,c){return r.OpenAIApiFp(this.configuration).createFile(o,u,c).then(l=>l(this.axios,this.basePath))}createFineTune(o,u){return r.OpenAIApiFp(this.configuration).createFineTune(o,u).then(c=>c(this.axios,this.basePath))}createImage(o,u){return r.OpenAIApiFp(this.configuration).createImage(o,u).then(c=>c(this.axios,this.basePath))}createImageEdit(o,u,c,l,d,h,b,m){return r.OpenAIApiFp(this.configuration).createImageEdit(o,u,c,l,d,h,b,m).then(w=>w(this.axios,this.basePath))}createImageVariation(o,u,c,l,d,h){return r.OpenAIApiFp(this.configuration).createImageVariation(o,u,c,l,d,h).then(b=>b(this.axios,this.basePath))}createModeration(o,u){return r.OpenAIApiFp(this.configuration).createModeration(o,u).then(c=>c(this.axios,this.basePath))}createSearch(o,u,c){return r.OpenAIApiFp(this.configuration).createSearch(o,u,c).then(l=>l(this.axios,this.basePath))}createTranscription(o,u,c,l,d,h,b){return r.OpenAIApiFp(this.configuration).createTranscription(o,u,c,l,d,h,b).then(m=>m(this.axios,this.basePath))}createTranslation(o,u,c,l,d,h){return r.OpenAIApiFp(this.configuration).createTranslation(o,u,c,l,d,h).then(b=>b(this.axios,this.basePath))}deleteFile(o,u){return r.OpenAIApiFp(this.configuration).deleteFile(o,u).then(c=>c(this.axios,this.basePath))}deleteModel(o,u){return r.OpenAIApiFp(this.configuration).deleteModel(o,u).then(c=>c(this.axios,this.basePath))}downloadFile(o,u){return r.OpenAIApiFp(this.configuration).downloadFile(o,u).then(c=>c(this.axios,this.basePath))}listEngines(o){return r.OpenAIApiFp(this.configuration).listEngines(o).then(u=>u(this.axios,this.basePath))}listFiles(o){return r.OpenAIApiFp(this.configuration).listFiles(o).then(u=>u(this.axios,this.basePath))}listFineTuneEvents(o,u,c){return r.OpenAIApiFp(this.configuration).listFineTuneEvents(o,u,c).then(l=>l(this.axios,this.basePath))}listFineTunes(o){return r.OpenAIApiFp(this.configuration).listFineTunes(o).then(u=>u(this.axios,this.basePath))}listModels(o){return r.OpenAIApiFp(this.configuration).listModels(o).then(u=>u(this.axios,this.basePath))}retrieveEngine(o,u){return r.OpenAIApiFp(this.configuration).retrieveEngine(o,u).then(c=>c(this.axios,this.basePath))}retrieveFile(o,u){return r.OpenAIApiFp(this.configuration).retrieveFile(o,u).then(c=>c(this.axios,this.basePath))}retrieveFineTune(o,u){return r.OpenAIApiFp(this.configuration).retrieveFineTune(o,u).then(c=>c(this.axios,this.basePath))}retrieveModel(o,u){return r.OpenAIApiFp(this.configuration).retrieveModel(o,u).then(c=>c(this.axios,this.basePath))}}r.OpenAIApi=a})($o);var Mn={};const mh="openai",yh="3.3.0",gh="Node.js library for the OpenAI API",bh={type:"git",url:"git@github.com:openai/openai-node.git"},_h=["openai","open","ai","gpt-3","gpt3"],vh="OpenAI",wh="MIT",Oh="./dist/index.js",Eh="./dist/index.d.ts",Ah={build:"tsc --outDir dist/"},Ph={axios:"^0.26.0","form-data":"^4.0.0"},xh={"@types/node":"^12.11.5",typescript:"^3.6.4"},Th={name:mh,version:yh,description:gh,repository:bh,keywords:_h,author:vh,license:wh,main:Oh,types:Eh,scripts:Ah,dependencies:Ph,devDependencies:xh};var Ts,gi;function Sh(){return gi||(gi=1,Ts=typeof self=="object"?self.FormData:window.FormData),Ts}Object.defineProperty(Mn,"__esModule",{value:!0});Mn.Configuration=void 0;const Ch=Th;class kh{constructor(e={}){this.apiKey=e.apiKey,this.organization=e.organization,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.baseOptions=e.baseOptions,this.formDataCtor=e.formDataCtor,this.baseOptions||(this.baseOptions={}),this.baseOptions.headers=Object.assign({"User-Agent":`OpenAI/NodeJS/${Ch.version}`,Authorization:`Bearer ${this.apiKey}`},this.baseOptions.headers),this.organization&&(this.baseOptions.headers["OpenAI-Organization"]=this.organization),this.formDataCtor||(this.formDataCtor=Sh())}isJsonMime(e){const t=new RegExp("^(application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(;.*)?$","i");return e!==null&&(t.test(e)||e.toLowerCase()==="application/json-patch+json")}}Mn.Configuration=kh;(function(r){var e=ot&&ot.__createBinding||(Object.create?function(n,s,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return s[a]}})}:function(n,s,a,i){i===void 0&&(i=a),n[i]=s[a]}),t=ot&&ot.__exportStar||function(n,s){for(var a in n)a!=="default"&&!s.hasOwnProperty(a)&&e(s,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t($o,r),t(Mn,r)})(Fs);function su(r,e){return function(){return r.apply(e,arguments)}}const{toString:jh}=Object.prototype,{getPrototypeOf:da}=Object,Fn=(r=>e=>{const t=jh.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),yt=r=>(r=r.toLowerCase(),e=>Fn(e)===r),Un=r=>e=>typeof e===r,{isArray:dr}=Array,Nr=Un("undefined");function Ih(r){return r!==null&&!Nr(r)&&r.constructor!==null&&!Nr(r.constructor)&&We(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const au=yt("ArrayBuffer");function Rh(r){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&au(r.buffer),e}const Nh=Un("string"),We=Un("function"),iu=Un("number"),Bn=r=>r!==null&&typeof r=="object",Dh=r=>r===!0||r===!1,pn=r=>{if(Fn(r)!=="object")return!1;const e=da(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},Lh=yt("Date"),Mh=yt("File"),Fh=yt("Blob"),Uh=yt("FileList"),Bh=r=>Bn(r)&&We(r.pipe),Vh=r=>{let e;return r&&(typeof FormData=="function"&&r instanceof FormData||We(r.append)&&((e=Fn(r))==="formdata"||e==="object"&&We(r.toString)&&r.toString()==="[object FormData]"))},$h=yt("URLSearchParams"),qh=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Yr(r,e,{allOwnKeys:t=!1}={}){if(r===null||typeof r>"u")return;let n,s;if(typeof r!="object"&&(r=[r]),dr(r))for(n=0,s=r.length;n<s;n++)e.call(null,r[n],n,r);else{const a=t?Object.getOwnPropertyNames(r):Object.keys(r),i=a.length;let o;for(n=0;n<i;n++)o=a[n],e.call(null,r[o],o,r)}}function ou(r,e){e=e.toLowerCase();const t=Object.keys(r);let n=t.length,s;for(;n-- >0;)if(s=t[n],e===s.toLowerCase())return s;return null}const uu=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),cu=r=>!Nr(r)&&r!==uu;function $s(){const{caseless:r}=cu(this)&&this||{},e={},t=(n,s)=>{const a=r&&ou(e,s)||s;pn(e[a])&&pn(n)?e[a]=$s(e[a],n):pn(n)?e[a]=$s({},n):dr(n)?e[a]=n.slice():e[a]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&Yr(arguments[n],t);return e}const zh=(r,e,t,{allOwnKeys:n}={})=>(Yr(e,(s,a)=>{t&&We(s)?r[a]=su(s,t):r[a]=s},{allOwnKeys:n}),r),Hh=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),Zh=(r,e,t,n)=>{r.prototype=Object.create(e.prototype,n),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:e.prototype}),t&&Object.assign(r.prototype,t)},Kh=(r,e,t,n)=>{let s,a,i;const o={};if(e=e||{},r==null)return e;do{for(s=Object.getOwnPropertyNames(r),a=s.length;a-- >0;)i=s[a],(!n||n(i,r,e))&&!o[i]&&(e[i]=r[i],o[i]=!0);r=t!==!1&&da(r)}while(r&&(!t||t(r,e))&&r!==Object.prototype);return e},Yh=(r,e,t)=>{r=String(r),(t===void 0||t>r.length)&&(t=r.length),t-=e.length;const n=r.indexOf(e,t);return n!==-1&&n===t},Jh=r=>{if(!r)return null;if(dr(r))return r;let e=r.length;if(!iu(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=r[e];return t},Wh=(r=>e=>r&&e instanceof r)(typeof Uint8Array<"u"&&da(Uint8Array)),Gh=(r,e)=>{const n=(r&&r[Symbol.iterator]).call(r);let s;for(;(s=n.next())&&!s.done;){const a=s.value;e.call(r,a[0],a[1])}},Qh=(r,e)=>{let t;const n=[];for(;(t=r.exec(e))!==null;)n.push(t);return n},Xh=yt("HTMLFormElement"),ef=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,s){return n.toUpperCase()+s}),bi=(({hasOwnProperty:r})=>(e,t)=>r.call(e,t))(Object.prototype),tf=yt("RegExp"),lu=(r,e)=>{const t=Object.getOwnPropertyDescriptors(r),n={};Yr(t,(s,a)=>{e(s,a,r)!==!1&&(n[a]=s)}),Object.defineProperties(r,n)},rf=r=>{lu(r,(e,t)=>{if(We(r)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=r[t];if(We(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},nf=(r,e)=>{const t={},n=s=>{s.forEach(a=>{t[a]=!0})};return dr(r)?n(r):n(String(r).split(e)),t},sf=()=>{},af=(r,e)=>(r=+r,Number.isFinite(r)?r:e),Ss="abcdefghijklmnopqrstuvwxyz",_i="0123456789",du={DIGIT:_i,ALPHA:Ss,ALPHA_DIGIT:Ss+Ss.toUpperCase()+_i},of=(r=16,e=du.ALPHA_DIGIT)=>{let t="";const{length:n}=e;for(;r--;)t+=e[Math.random()*n|0];return t};function uf(r){return!!(r&&We(r.append)&&r[Symbol.toStringTag]==="FormData"&&r[Symbol.iterator])}const cf=r=>{const e=new Array(10),t=(n,s)=>{if(Bn(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[s]=n;const a=dr(n)?[]:{};return Yr(n,(i,o)=>{const u=t(i,s+1);!Nr(u)&&(a[o]=u)}),e[s]=void 0,a}}return n};return t(r,0)},lf=yt("AsyncFunction"),df=r=>r&&(Bn(r)||We(r))&&We(r.then)&&We(r.catch),I={isArray:dr,isArrayBuffer:au,isBuffer:Ih,isFormData:Vh,isArrayBufferView:Rh,isString:Nh,isNumber:iu,isBoolean:Dh,isObject:Bn,isPlainObject:pn,isUndefined:Nr,isDate:Lh,isFile:Mh,isBlob:Fh,isRegExp:tf,isFunction:We,isStream:Bh,isURLSearchParams:$h,isTypedArray:Wh,isFileList:Uh,forEach:Yr,merge:$s,extend:zh,trim:qh,stripBOM:Hh,inherits:Zh,toFlatObject:Kh,kindOf:Fn,kindOfTest:yt,endsWith:Yh,toArray:Jh,forEachEntry:Gh,matchAll:Qh,isHTMLForm:Xh,hasOwnProperty:bi,hasOwnProp:bi,reduceDescriptors:lu,freezeMethods:rf,toObjectSet:nf,toCamelCase:ef,noop:sf,toFiniteNumber:af,findKey:ou,global:uu,isContextDefined:cu,ALPHABET:du,generateString:of,isSpecCompliantForm:uf,toJSONObject:cf,isAsyncFn:lf,isThenable:df};function he(r,e,t,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),s&&(this.response=s)}I.inherits(he,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:I.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const hu=he.prototype,fu={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{fu[r]={value:r}});Object.defineProperties(he,fu);Object.defineProperty(hu,"isAxiosError",{value:!0});he.from=(r,e,t,n,s,a)=>{const i=Object.create(hu);return I.toFlatObject(r,i,function(u){return u!==Error.prototype},o=>o!=="isAxiosError"),he.call(i,r.message,e,t,n,s),i.cause=r,i.name=r.name,a&&Object.assign(i,a),i};const hf=null;function qs(r){return I.isPlainObject(r)||I.isArray(r)}function pu(r){return I.endsWith(r,"[]")?r.slice(0,-2):r}function vi(r,e,t){return r?r.concat(e).map(function(s,a){return s=pu(s),!t&&a?"["+s+"]":s}).join(t?".":""):e}function ff(r){return I.isArray(r)&&!r.some(qs)}const pf=I.toFlatObject(I,{},null,function(e){return/^is[A-Z]/.test(e)});function Vn(r,e,t){if(!I.isObject(r))throw new TypeError("target must be an object");e=e||new FormData,t=I.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,g){return!I.isUndefined(g[w])});const n=t.metaTokens,s=t.visitor||l,a=t.dots,i=t.indexes,u=(t.Blob||typeof Blob<"u"&&Blob)&&I.isSpecCompliantForm(e);if(!I.isFunction(s))throw new TypeError("visitor must be a function");function c(m){if(m===null)return"";if(I.isDate(m))return m.toISOString();if(!u&&I.isBlob(m))throw new he("Blob is not supported. Use a Buffer instead.");return I.isArrayBuffer(m)||I.isTypedArray(m)?u&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function l(m,w,g){let P=m;if(m&&!g&&typeof m=="object"){if(I.endsWith(w,"{}"))w=n?w:w.slice(0,-2),m=JSON.stringify(m);else if(I.isArray(m)&&ff(m)||(I.isFileList(m)||I.endsWith(w,"[]"))&&(P=I.toArray(m)))return w=pu(w),P.forEach(function(C,x){!(I.isUndefined(C)||C===null)&&e.append(i===!0?vi([w],x,a):i===null?w:w+"[]",c(C))}),!1}return qs(m)?!0:(e.append(vi(g,w,a),c(m)),!1)}const d=[],h=Object.assign(pf,{defaultVisitor:l,convertValue:c,isVisitable:qs});function b(m,w){if(!I.isUndefined(m)){if(d.indexOf(m)!==-1)throw Error("Circular reference detected in "+w.join("."));d.push(m),I.forEach(m,function(P,k){(!(I.isUndefined(P)||P===null)&&s.call(e,P,I.isString(k)?k.trim():k,w,h))===!0&&b(P,w?w.concat(k):[k])}),d.pop()}}if(!I.isObject(r))throw new TypeError("data must be an object");return b(r),e}function wi(r){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function ha(r,e){this._pairs=[],r&&Vn(r,this,e)}const mu=ha.prototype;mu.append=function(e,t){this._pairs.push([e,t])};mu.toString=function(e){const t=e?function(n){return e.call(this,n,wi)}:wi;return this._pairs.map(function(s){return t(s[0])+"="+t(s[1])},"").join("&")};function mf(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function yu(r,e,t){if(!e)return r;const n=t&&t.encode||mf,s=t&&t.serialize;let a;if(s?a=s(e,t):a=I.isURLSearchParams(e)?e.toString():new ha(e,t).toString(n),a){const i=r.indexOf("#");i!==-1&&(r=r.slice(0,i)),r+=(r.indexOf("?")===-1?"?":"&")+a}return r}class yf{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){I.forEach(this.handlers,function(n){n!==null&&e(n)})}}const Oi=yf,gu={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},gf=typeof URLSearchParams<"u"?URLSearchParams:ha,bf=typeof FormData<"u"?FormData:null,_f=typeof Blob<"u"?Blob:null,vf=(()=>{let r;return typeof navigator<"u"&&((r=navigator.product)==="ReactNative"||r==="NativeScript"||r==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),wf=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),lt={isBrowser:!0,classes:{URLSearchParams:gf,FormData:bf,Blob:_f},isStandardBrowserEnv:vf,isStandardBrowserWebWorkerEnv:wf,protocols:["http","https","file","blob","url","data"]};function Of(r,e){return Vn(r,new lt.classes.URLSearchParams,Object.assign({visitor:function(t,n,s,a){return lt.isNode&&I.isBuffer(t)?(this.append(n,t.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},e))}function Ef(r){return I.matchAll(/\w+|\[(\w*)]/g,r).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Af(r){const e={},t=Object.keys(r);let n;const s=t.length;let a;for(n=0;n<s;n++)a=t[n],e[a]=r[a];return e}function bu(r){function e(t,n,s,a){let i=t[a++];const o=Number.isFinite(+i),u=a>=t.length;return i=!i&&I.isArray(s)?s.length:i,u?(I.hasOwnProp(s,i)?s[i]=[s[i],n]:s[i]=n,!o):((!s[i]||!I.isObject(s[i]))&&(s[i]=[]),e(t,n,s[i],a)&&I.isArray(s[i])&&(s[i]=Af(s[i])),!o)}if(I.isFormData(r)&&I.isFunction(r.entries)){const t={};return I.forEachEntry(r,(n,s)=>{e(Ef(n),s,t,0)}),t}return null}const Pf={"Content-Type":void 0};function xf(r,e,t){if(I.isString(r))try{return(e||JSON.parse)(r),I.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(r)}const $n={transitional:gu,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",s=n.indexOf("application/json")>-1,a=I.isObject(e);if(a&&I.isHTMLForm(e)&&(e=new FormData(e)),I.isFormData(e))return s&&s?JSON.stringify(bu(e)):e;if(I.isArrayBuffer(e)||I.isBuffer(e)||I.isStream(e)||I.isFile(e)||I.isBlob(e))return e;if(I.isArrayBufferView(e))return e.buffer;if(I.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Of(e,this.formSerializer).toString();if((o=I.isFileList(e))||n.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Vn(o?{"files[]":e}:e,u&&new u,this.formSerializer)}}return a||s?(t.setContentType("application/json",!1),xf(e)):e}],transformResponse:[function(e){const t=this.transitional||$n.transitional,n=t&&t.forcedJSONParsing,s=this.responseType==="json";if(e&&I.isString(e)&&(n&&!this.responseType||s)){const i=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(o){if(i)throw o.name==="SyntaxError"?he.from(o,he.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:lt.classes.FormData,Blob:lt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};I.forEach(["delete","get","head"],function(e){$n.headers[e]={}});I.forEach(["post","put","patch"],function(e){$n.headers[e]=I.merge(Pf)});const fa=$n,Tf=I.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Sf=r=>{const e={};let t,n,s;return r&&r.split(`
`).forEach(function(i){s=i.indexOf(":"),t=i.substring(0,s).trim().toLowerCase(),n=i.substring(s+1).trim(),!(!t||e[t]&&Tf[t])&&(t==="set-cookie"?e[t]?e[t].push(n):e[t]=[n]:e[t]=e[t]?e[t]+", "+n:n)}),e},Ei=Symbol("internals");function mr(r){return r&&String(r).trim().toLowerCase()}function mn(r){return r===!1||r==null?r:I.isArray(r)?r.map(mn):String(r)}function Cf(r){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(r);)e[n[1]]=n[2];return e}const kf=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function Cs(r,e,t,n,s){if(I.isFunction(n))return n.call(this,e,t);if(s&&(e=t),!!I.isString(e)){if(I.isString(n))return e.indexOf(n)!==-1;if(I.isRegExp(n))return n.test(e)}}function jf(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function If(r,e){const t=I.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(r,n+t,{value:function(s,a,i){return this[n].call(this,e,s,a,i)},configurable:!0})})}class qn{constructor(e){e&&this.set(e)}set(e,t,n){const s=this;function a(o,u,c){const l=mr(u);if(!l)throw new Error("header name must be a non-empty string");const d=I.findKey(s,l);(!d||s[d]===void 0||c===!0||c===void 0&&s[d]!==!1)&&(s[d||u]=mn(o))}const i=(o,u)=>I.forEach(o,(c,l)=>a(c,l,u));return I.isPlainObject(e)||e instanceof this.constructor?i(e,t):I.isString(e)&&(e=e.trim())&&!kf(e)?i(Sf(e),t):e!=null&&a(t,e,n),this}get(e,t){if(e=mr(e),e){const n=I.findKey(this,e);if(n){const s=this[n];if(!t)return s;if(t===!0)return Cf(s);if(I.isFunction(t))return t.call(this,s,n);if(I.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=mr(e),e){const n=I.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||Cs(this,this[n],n,t)))}return!1}delete(e,t){const n=this;let s=!1;function a(i){if(i=mr(i),i){const o=I.findKey(n,i);o&&(!t||Cs(n,n[o],o,t))&&(delete n[o],s=!0)}}return I.isArray(e)?e.forEach(a):a(e),s}clear(e){const t=Object.keys(this);let n=t.length,s=!1;for(;n--;){const a=t[n];(!e||Cs(this,this[a],a,e,!0))&&(delete this[a],s=!0)}return s}normalize(e){const t=this,n={};return I.forEach(this,(s,a)=>{const i=I.findKey(n,a);if(i){t[i]=mn(s),delete t[a];return}const o=e?jf(a):String(a).trim();o!==a&&delete t[a],t[o]=mn(s),n[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return I.forEach(this,(n,s)=>{n!=null&&n!==!1&&(t[s]=e&&I.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(s=>n.set(s)),n}static accessor(e){const n=(this[Ei]=this[Ei]={accessors:{}}).accessors,s=this.prototype;function a(i){const o=mr(i);n[o]||(If(s,i),n[o]=!0)}return I.isArray(e)?e.forEach(a):a(e),this}}qn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);I.freezeMethods(qn.prototype);I.freezeMethods(qn);const wt=qn;function ks(r,e){const t=this||fa,n=e||t,s=wt.from(n.headers);let a=n.data;return I.forEach(r,function(o){a=o.call(t,a,s.normalize(),e?e.status:void 0)}),s.normalize(),a}function _u(r){return!!(r&&r.__CANCEL__)}function Jr(r,e,t){he.call(this,r??"canceled",he.ERR_CANCELED,e,t),this.name="CanceledError"}I.inherits(Jr,he,{__CANCEL__:!0});function Rf(r,e,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?r(t):e(new he("Request failed with status code "+t.status,[he.ERR_BAD_REQUEST,he.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}const Nf=lt.isStandardBrowserEnv?function(){return{write:function(t,n,s,a,i,o){const u=[];u.push(t+"="+encodeURIComponent(n)),I.isNumber(s)&&u.push("expires="+new Date(s).toGMTString()),I.isString(a)&&u.push("path="+a),I.isString(i)&&u.push("domain="+i),o===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(t){const n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Df(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function Lf(r,e){return e?r.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):r}function vu(r,e){return r&&!Df(e)?Lf(r,e):e}const Mf=lt.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function s(a){let i=a;return e&&(t.setAttribute("href",i),i=t.href),t.setAttribute("href",i),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return n=s(window.location.href),function(i){const o=I.isString(i)?s(i):i;return o.protocol===n.protocol&&o.host===n.host}}():function(){return function(){return!0}}();function Ff(r){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return e&&e[1]||""}function Uf(r,e){r=r||10;const t=new Array(r),n=new Array(r);let s=0,a=0,i;return e=e!==void 0?e:1e3,function(u){const c=Date.now(),l=n[a];i||(i=c),t[s]=u,n[s]=c;let d=a,h=0;for(;d!==s;)h+=t[d++],d=d%r;if(s=(s+1)%r,s===a&&(a=(a+1)%r),c-i<e)return;const b=l&&c-l;return b?Math.round(h*1e3/b):void 0}}function Ai(r,e){let t=0;const n=Uf(50,250);return s=>{const a=s.loaded,i=s.lengthComputable?s.total:void 0,o=a-t,u=n(o),c=a<=i;t=a;const l={loaded:a,total:i,progress:i?a/i:void 0,bytes:o,rate:u||void 0,estimated:u&&i&&c?(i-a)/u:void 0,event:s};l[e?"download":"upload"]=!0,r(l)}}const Bf=typeof XMLHttpRequest<"u",Vf=Bf&&function(r){return new Promise(function(t,n){let s=r.data;const a=wt.from(r.headers).normalize(),i=r.responseType;let o;function u(){r.cancelToken&&r.cancelToken.unsubscribe(o),r.signal&&r.signal.removeEventListener("abort",o)}I.isFormData(s)&&(lt.isStandardBrowserEnv||lt.isStandardBrowserWebWorkerEnv?a.setContentType(!1):a.setContentType("multipart/form-data;",!1));let c=new XMLHttpRequest;if(r.auth){const b=r.auth.username||"",m=r.auth.password?unescape(encodeURIComponent(r.auth.password)):"";a.set("Authorization","Basic "+btoa(b+":"+m))}const l=vu(r.baseURL,r.url);c.open(r.method.toUpperCase(),yu(l,r.params,r.paramsSerializer),!0),c.timeout=r.timeout;function d(){if(!c)return;const b=wt.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders()),w={data:!i||i==="text"||i==="json"?c.responseText:c.response,status:c.status,statusText:c.statusText,headers:b,config:r,request:c};Rf(function(P){t(P),u()},function(P){n(P),u()},w),c=null}if("onloadend"in c?c.onloadend=d:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(d)},c.onabort=function(){c&&(n(new he("Request aborted",he.ECONNABORTED,r,c)),c=null)},c.onerror=function(){n(new he("Network Error",he.ERR_NETWORK,r,c)),c=null},c.ontimeout=function(){let m=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const w=r.transitional||gu;r.timeoutErrorMessage&&(m=r.timeoutErrorMessage),n(new he(m,w.clarifyTimeoutError?he.ETIMEDOUT:he.ECONNABORTED,r,c)),c=null},lt.isStandardBrowserEnv){const b=(r.withCredentials||Mf(l))&&r.xsrfCookieName&&Nf.read(r.xsrfCookieName);b&&a.set(r.xsrfHeaderName,b)}s===void 0&&a.setContentType(null),"setRequestHeader"in c&&I.forEach(a.toJSON(),function(m,w){c.setRequestHeader(w,m)}),I.isUndefined(r.withCredentials)||(c.withCredentials=!!r.withCredentials),i&&i!=="json"&&(c.responseType=r.responseType),typeof r.onDownloadProgress=="function"&&c.addEventListener("progress",Ai(r.onDownloadProgress,!0)),typeof r.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",Ai(r.onUploadProgress)),(r.cancelToken||r.signal)&&(o=b=>{c&&(n(!b||b.type?new Jr(null,r,c):b),c.abort(),c=null)},r.cancelToken&&r.cancelToken.subscribe(o),r.signal&&(r.signal.aborted?o():r.signal.addEventListener("abort",o)));const h=Ff(l);if(h&&lt.protocols.indexOf(h)===-1){n(new he("Unsupported protocol "+h+":",he.ERR_BAD_REQUEST,r));return}c.send(s||null)})},yn={http:hf,xhr:Vf};I.forEach(yn,(r,e)=>{if(r){try{Object.defineProperty(r,"name",{value:e})}catch{}Object.defineProperty(r,"adapterName",{value:e})}});const $f={getAdapter:r=>{r=I.isArray(r)?r:[r];const{length:e}=r;let t,n;for(let s=0;s<e&&(t=r[s],!(n=I.isString(t)?yn[t.toLowerCase()]:t));s++);if(!n)throw n===!1?new he(`Adapter ${t} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(I.hasOwnProp(yn,t)?`Adapter '${t}' is not available in the build`:`Unknown adapter '${t}'`);if(!I.isFunction(n))throw new TypeError("adapter is not a function");return n},adapters:yn};function js(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new Jr(null,r)}function Pi(r){return js(r),r.headers=wt.from(r.headers),r.data=ks.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),$f.getAdapter(r.adapter||fa.adapter)(r).then(function(n){return js(r),n.data=ks.call(r,r.transformResponse,n),n.headers=wt.from(n.headers),n},function(n){return _u(n)||(js(r),n&&n.response&&(n.response.data=ks.call(r,r.transformResponse,n.response),n.response.headers=wt.from(n.response.headers))),Promise.reject(n)})}const xi=r=>r instanceof wt?r.toJSON():r;function Qt(r,e){e=e||{};const t={};function n(c,l,d){return I.isPlainObject(c)&&I.isPlainObject(l)?I.merge.call({caseless:d},c,l):I.isPlainObject(l)?I.merge({},l):I.isArray(l)?l.slice():l}function s(c,l,d){if(I.isUndefined(l)){if(!I.isUndefined(c))return n(void 0,c,d)}else return n(c,l,d)}function a(c,l){if(!I.isUndefined(l))return n(void 0,l)}function i(c,l){if(I.isUndefined(l)){if(!I.isUndefined(c))return n(void 0,c)}else return n(void 0,l)}function o(c,l,d){if(d in e)return n(c,l);if(d in r)return n(void 0,c)}const u={url:a,method:a,data:a,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(c,l)=>s(xi(c),xi(l),!0)};return I.forEach(Object.keys(Object.assign({},r,e)),function(l){const d=u[l]||s,h=d(r[l],e[l],l);I.isUndefined(h)&&d!==o||(t[l]=h)}),t}const wu="1.4.0",pa={};["object","boolean","number","function","string","symbol"].forEach((r,e)=>{pa[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});const Ti={};pa.transitional=function(e,t,n){function s(a,i){return"[Axios v"+wu+"] Transitional option '"+a+"'"+i+(n?". "+n:"")}return(a,i,o)=>{if(e===!1)throw new he(s(i," has been removed"+(t?" in "+t:"")),he.ERR_DEPRECATED);return t&&!Ti[i]&&(Ti[i]=!0,console.warn(s(i," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(a,i,o):!0}};function qf(r,e,t){if(typeof r!="object")throw new he("options must be an object",he.ERR_BAD_OPTION_VALUE);const n=Object.keys(r);let s=n.length;for(;s-- >0;){const a=n[s],i=e[a];if(i){const o=r[a],u=o===void 0||i(o,a,r);if(u!==!0)throw new he("option "+a+" must be "+u,he.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new he("Unknown option "+a,he.ERR_BAD_OPTION)}}const zs={assertOptions:qf,validators:pa},Pt=zs.validators;class En{constructor(e){this.defaults=e,this.interceptors={request:new Oi,response:new Oi}}request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Qt(this.defaults,t);const{transitional:n,paramsSerializer:s,headers:a}=t;n!==void 0&&zs.assertOptions(n,{silentJSONParsing:Pt.transitional(Pt.boolean),forcedJSONParsing:Pt.transitional(Pt.boolean),clarifyTimeoutError:Pt.transitional(Pt.boolean)},!1),s!=null&&(I.isFunction(s)?t.paramsSerializer={serialize:s}:zs.assertOptions(s,{encode:Pt.function,serialize:Pt.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i;i=a&&I.merge(a.common,a[t.method]),i&&I.forEach(["delete","get","head","post","put","patch","common"],m=>{delete a[m]}),t.headers=wt.concat(i,a);const o=[];let u=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(t)===!1||(u=u&&w.synchronous,o.unshift(w.fulfilled,w.rejected))});const c=[];this.interceptors.response.forEach(function(w){c.push(w.fulfilled,w.rejected)});let l,d=0,h;if(!u){const m=[Pi.bind(this),void 0];for(m.unshift.apply(m,o),m.push.apply(m,c),h=m.length,l=Promise.resolve(t);d<h;)l=l.then(m[d++],m[d++]);return l}h=o.length;let b=t;for(d=0;d<h;){const m=o[d++],w=o[d++];try{b=m(b)}catch(g){w.call(this,g);break}}try{l=Pi.call(this,b)}catch(m){return Promise.reject(m)}for(d=0,h=c.length;d<h;)l=l.then(c[d++],c[d++]);return l}getUri(e){e=Qt(this.defaults,e);const t=vu(e.baseURL,e.url);return yu(t,e.params,e.paramsSerializer)}}I.forEach(["delete","get","head","options"],function(e){En.prototype[e]=function(t,n){return this.request(Qt(n||{},{method:e,url:t,data:(n||{}).data}))}});I.forEach(["post","put","patch"],function(e){function t(n){return function(a,i,o){return this.request(Qt(o||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:i}))}}En.prototype[e]=t(),En.prototype[e+"Form"]=t(!0)});const gn=En;class ma{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(a){t=a});const n=this;this.promise.then(s=>{if(!n._listeners)return;let a=n._listeners.length;for(;a-- >0;)n._listeners[a](s);n._listeners=null}),this.promise.then=s=>{let a;const i=new Promise(o=>{n.subscribe(o),a=o}).then(s);return i.cancel=function(){n.unsubscribe(a)},i},e(function(a,i,o){n.reason||(n.reason=new Jr(a,i,o),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}static source(){let e;return{token:new ma(function(s){e=s}),cancel:e}}}const zf=ma;function Hf(r){return function(t){return r.apply(null,t)}}function Zf(r){return I.isObject(r)&&r.isAxiosError===!0}const Hs={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Hs).forEach(([r,e])=>{Hs[e]=r});const Kf=Hs;function Ou(r){const e=new gn(r),t=su(gn.prototype.request,e);return I.extend(t,gn.prototype,e,{allOwnKeys:!0}),I.extend(t,e,null,{allOwnKeys:!0}),t.create=function(s){return Ou(Qt(r,s))},t}const Pe=Ou(fa);Pe.Axios=gn;Pe.CanceledError=Jr;Pe.CancelToken=zf;Pe.isCancel=_u;Pe.VERSION=wu;Pe.toFormData=Vn;Pe.AxiosError=he;Pe.Cancel=Pe.CanceledError;Pe.all=function(e){return Promise.all(e)};Pe.spread=Hf;Pe.isAxiosError=Zf;Pe.mergeConfig=Qt;Pe.AxiosHeaders=wt;Pe.formToJSON=r=>bu(I.isHTMLForm(r)?new FormData(r):r);Pe.HttpStatusCode=Kf;Pe.default=Pe;const on=Pe,Zs="text/event-stream";async function Yf(r,e){const t=r.getReader();for(;;){const n=await t.read();if(n.done){e(new Uint8Array,!0);break}e(n.value)}}function Jf(r){let e,t,n,s=!1;return function(i,o){if(o){r(i,0,!0);return}e===void 0?(e=i,t=0,n=-1):e=Gf(e,i);const u=e.length;let c=0;for(;t<u;){s&&(e[t]===10&&(c=++t),s=!1);let l=-1;for(;t<u&&l===-1;++t)switch(e[t]){case 58:n===-1&&(n=t-c);break;case 13:s=!0;case 10:l=t;break}if(l===-1)break;r(e.subarray(c,l),n),c=t,n=-1}c===u?e=void 0:c!==0&&(e=e.subarray(c),t-=c)}}function Wf(r,e,t){let n=Is();const s=new TextDecoder;return function(i,o,u){if(u){Qf(n)||(r==null||r(n),n=Is());return}if(i.length===0)r==null||r(n),n=Is();else if(o>0){const c=s.decode(i.subarray(0,o)),l=o+(i[o+1]===32?2:1),d=s.decode(i.subarray(l));switch(c){case"data":n.data=n.data?n.data+`
`+d:d;break;case"event":n.event=d;break;case"id":e==null||e(n.id=d);break;case"retry":{const h=parseInt(d,10);Number.isNaN(h)||t==null||t(n.retry=h);break}}}}}function Gf(r,e){const t=new Uint8Array(r.length+e.length);return t.set(r),t.set(e,r.length),t}function Is(){return{data:"",event:"",id:"",retry:void 0}}function Qf(r){return r.data===""&&r.event===""&&r.id===""&&r.retry===void 0}function Xf(r){try{return JSON.stringify(r)}catch{return r}}function ep(r,e,t){const{validateStatus:n}=t.config;!t.status||!n||n(t.status)?r(t):e(bn(`Request failed with status code ${t.status} and body ${typeof t.data=="string"?t.data:Xf(t.data)}`,t.config,null,t.request,t))}function tp(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function rp(r,e){return e?r.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):r}function Si(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function np(r,e,t){if(!e)return r;var n;if(t)n=t(e);else if(up(e))n=e.toString();else{var s=[];Ci(e,function(o,u){o===null||typeof o>"u"||(Eu(o)?u=`${u}[]`:o=[o],Ci(o,function(l){op(l)?l=l.toISOString():ip(l)&&(l=JSON.stringify(l)),s.push(`${Si(u)}=${Si(l)}`)}))}),n=s.join("&")}if(n){var a=r.indexOf("#");a!==-1&&(r=r.slice(0,a)),r+=(r.indexOf("?")===-1?"?":"&")+n}return r}function sp(r,e){return r&&!tp(e)?rp(r,e):e}function ap(r){return typeof r>"u"}function ip(r){return r!==null&&typeof r=="object"}function op(r){return toString.call(r)==="[object Date]"}function up(r){return toString.call(r)==="[object URLSearchParams]"}function Eu(r){return Array.isArray(r)}function Ci(r,e){if(!(r===null||typeof r>"u"))if(typeof r!="object"&&(r=[r]),Eu(r))for(var t=0,n=r.length;t<n;t++)e.call(null,r[t],t,r);else for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.call(null,r[s],s,r)}function cp(r){return toString.call(r)==="[object FormData]"}function lp(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}async function dp(r){const e=fp(r),t=await hp(e,r);return new Promise((n,s)=>{t instanceof Error?s(t):Object.prototype.toString.call(r.settle)==="[object Function]"?r.settle(n,s,t):ep(n,s,t)})}async function hp(r,e){let t;try{t=await fetch(r)}catch(a){return a&&a.name==="AbortError"?bn("Request aborted",e,"ECONNABORTED",r):a&&a.name==="TimeoutError"?bn("Request timeout",e,"ECONNABORTED",r):bn("Network Error",e,"ERR_NETWORK",r)}const n={};t.headers.forEach((a,i)=>{n[i]=a});const s={ok:t.ok,status:t.status,statusText:t.statusText,headers:n,config:e,request:r};if(t.status>=200&&t.status!==204)if(e.responseType==="stream"){const a=t.headers.get("content-type");if(!(a!=null&&a.startsWith(Zs))){if(t.status>=400)return a!=null&&a.startsWith("application/json")?(s.data=await t.json(),s):(s.data=await t.text(),s);throw new Error(`Expected content-type to be ${Zs}, Actual: ${a}`)}await Yf(t.body,Jf(Wf(e.onmessage)))}else switch(e.responseType){case"arraybuffer":s.data=await t.arrayBuffer();break;case"blob":s.data=await t.blob();break;case"json":s.data=await t.json();break;case"formData":s.data=await t.formData();break;default:s.data=await t.text();break}return s}function fp(r){const e=new Headers(r.headers);if(r.auth){const i=r.auth.username||"",o=r.auth.password?decodeURI(encodeURIComponent(r.auth.password)):"";e.set("Authorization",`Basic ${btoa(`${i}:${o}`)}`)}const t=r.method.toUpperCase(),n={headers:e,method:t};t!=="GET"&&t!=="HEAD"&&(n.body=r.data,cp(n.body)&&lp()&&e.delete("Content-Type")),typeof n.body=="string"&&(n.body=new TextEncoder().encode(n.body)),r.mode&&(n.mode=r.mode),r.cache&&(n.cache=r.cache),r.integrity&&(n.integrity=r.integrity),r.redirect&&(n.redirect=r.redirect),r.referrer&&(n.referrer=r.referrer),r.timeout&&r.timeout>0&&(n.signal=AbortSignal.timeout(r.timeout)),r.signal&&(n.signal=r.signal),ap(r.withCredentials)||(n.credentials=r.withCredentials?"include":"omit"),r.responseType==="stream"&&n.headers.set("Accept",Zs);const s=sp(r.baseURL,r.url),a=np(s,r.params,r.paramsSerializer);return new Request(a,n)}function bn(r,e,t,n,s){if(on.AxiosError&&typeof on.AxiosError=="function")return new on.AxiosError(r,on.AxiosError[t],e,n,s);const a=new Error(r);return pp(a,e,t,n,s)}function pp(r,e,t,n,s){return r.config=e,t&&(r.code=t),r.request=n,r.response=s,r.isAxiosError=!0,r.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},r}const mp=(r,e)=>r.reduce((t,n,s)=>{const a=Math.floor(s/e),i=t[a]||[];return t[a]=i.concat([n]),t},[]);function yp(r){const{azureOpenAIApiDeploymentName:e,azureOpenAIApiInstanceName:t,azureOpenAIApiKey:n,azureOpenAIBasePath:s,basePath:a}=r;if(n&&s&&e)return`${s}/${e}`;if(n){if(!t)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!e)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${t}.openai.azure.com/openai/deployments/${e}`}return a}class Au extends Do{constructor(e,t){super(e??{}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"text-embedding-ada-002"}),Object.defineProperty(this,"batchSize",{enumerable:!0,configurable:!0,writable:!0,value:512}),Object.defineProperty(this,"stripNewLines",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const n=(e==null?void 0:e.openAIApiKey)??Se("OPENAI_API_KEY"),s=(e==null?void 0:e.azureOpenAIApiKey)??Se("AZURE_OPENAI_API_KEY");if(!s&&!n)throw new Error("OpenAI or Azure OpenAI API key not found");const a=(e==null?void 0:e.azureOpenAIApiInstanceName)??Se("AZURE_OPENAI_API_INSTANCE_NAME"),i=((e==null?void 0:e.azureOpenAIApiEmbeddingsDeploymentName)||(e==null?void 0:e.azureOpenAIApiDeploymentName))??(Se("AZURE_OPENAI_API_EMBEDDINGS_DEPLOYMENT_NAME")||Se("AZURE_OPENAI_API_DEPLOYMENT_NAME")),o=(e==null?void 0:e.azureOpenAIApiVersion)??Se("AZURE_OPENAI_API_VERSION");if(this.azureOpenAIBasePath=(e==null?void 0:e.azureOpenAIBasePath)??Se("AZURE_OPENAI_BASE_PATH"),this.modelName=(e==null?void 0:e.modelName)??this.modelName,this.batchSize=(e==null?void 0:e.batchSize)??(s?1:this.batchSize),this.stripNewLines=(e==null?void 0:e.stripNewLines)??this.stripNewLines,this.timeout=e==null?void 0:e.timeout,this.azureOpenAIApiVersion=o,this.azureOpenAIApiKey=s,this.azureOpenAIApiInstanceName=a,this.azureOpenAIApiDeploymentName=i,this.azureOpenAIApiKey){if(!this.azureOpenAIApiInstanceName)throw new Error("Azure OpenAI API instance name not found");if(!this.azureOpenAIApiDeploymentName)throw new Error("Azure OpenAI API deployment name not found");if(!this.azureOpenAIApiVersion)throw new Error("Azure OpenAI API version not found")}this.clientConfig={apiKey:n,...t}}async embedDocuments(e){const t=mp(this.stripNewLines?e.map(s=>s.replace(/\n/g," ")):e,this.batchSize),n=[];for(let s=0;s<t.length;s+=1){const a=t[s],{data:i}=await this.embeddingWithRetry({model:this.modelName,input:a});for(let o=0;o<a.length;o+=1)n.push(i.data[o].embedding)}return n}async embedQuery(e){const{data:t}=await this.embeddingWithRetry({model:this.modelName,input:this.stripNewLines?e.replace(/\n/g," "):e});return t.data[0].embedding}async embeddingWithRetry(e){if(!this.client){const n={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,basePath:this.clientConfig.basePath},s=yp(n),a=new Fs.Configuration({...this.clientConfig,basePath:s,baseOptions:{timeout:this.timeout,adapter:Mo()?void 0:dp,...this.clientConfig.baseOptions}});this.client=new Fs.OpenAIApi(a)}const t={};return this.azureOpenAIApiKey&&(t.headers={"api-key":this.azureOpenAIApiKey,...t.headers},t.params={"api-version":this.azureOpenAIApiVersion,...t.params}),this.caller.call(this.client.createEmbedding.bind(this.client),e,t)}}let un;const gp=new Uint8Array(16);function bp(){if(!un&&(un=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!un))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return un(gp)}const Ce=[];for(let r=0;r<256;++r)Ce.push((r+256).toString(16).slice(1));function _p(r,e=0){return(Ce[r[e+0]]+Ce[r[e+1]]+Ce[r[e+2]]+Ce[r[e+3]]+"-"+Ce[r[e+4]]+Ce[r[e+5]]+"-"+Ce[r[e+6]]+Ce[r[e+7]]+"-"+Ce[r[e+8]]+Ce[r[e+9]]+"-"+Ce[r[e+10]]+Ce[r[e+11]]+Ce[r[e+12]]+Ce[r[e+13]]+Ce[r[e+14]]+Ce[r[e+15]]).toLowerCase()}const vp=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ki={randomUUID:vp};function Lt(r,e,t){if(ki.randomUUID&&!e&&!r)return ki.randomUUID();r=r||{};const n=r.random||(r.rng||bp)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(let s=0;s<16;++s)e[t+s]=n[s];return e}return _p(n)}async function ya(r,e,t,n,s,a,i){const o=e.name,u=e.size,c=new Date;let l;const d=s,h=a,b=new Rr({chunkSize:d,chunkOverlap:h}),m=_t(ct,ut);let g=(await m.auth.getUser()).data.user.id;console.log("userID",g);let P;if(console.log("isUrl",i),i===!0){console.log("isUrl",i);const j=new FileReader;j.onload=async function(A){const S=A.target.result,y={pageContent:S.toString(),metadata:{file_sha1:l,file_size:u,file_name:o,chunk_size:s,chunk_overlap:a,date:c}};P=await b.splitDocuments([y]),console.log("splittedDocuments",P[0].user_id),l=await Io(S);const v=[];for(const H of P){const B={pageContent:H.pageContent,metadata:{file_sha1:l,file_size:u,file_name:o,chunk_size:s,chunk_overlap:a,date:c}};v.push(B)}const p=_t(ct,ut),O=new On({apiKey:jr});console.log("user_id",g);let T=new Ut(O,{client:p,queryName:"insert",tableName:"documents"});console.log("docs Metadata",v[0].user_id),T.addDocuments(v)},await j.readAsText(e)}else{const j=new File([e],o,{type:e.type});l=await nd(j);const S=await new t(j).load();P=await b.splitDocuments(S)}const k=[];for(const j of P){const A={pageContent:j.pageContent,metadata:{file_sha1:l,file_size:u,file_name:o,chunk_size:s,chunk_overlap:a,date:c}};k.push(A)}const C=new On({apiKey:jr});console.log("user_id",g);let x=new Ut(C,{client:m,tableName:"documents",queryName:"insert"});console.log("docsWithMetadata",k),x.addDocuments(k)}class Pu{async loadAndSplit(e=new Rr){const t=await this.load();return e.splitDocuments(t)}}class ga extends Pu{constructor(e){super(),Object.defineProperty(this,"filePathOrBlob",{enumerable:!0,configurable:!0,writable:!0,value:e})}async parse(e){return[e]}async load(){let e,t;if(typeof this.filePathOrBlob=="string"){const{readFile:s}=await ga.imports();e=await s(this.filePathOrBlob,"utf8"),t={source:this.filePathOrBlob}}else e=await this.filePathOrBlob.text(),t={source:"blob",blobType:this.filePathOrBlob.type};const n=await this.parse(e);return n.forEach((s,a)=>{if(typeof s!="string")throw new Error(`Expected string, at position ${a} got ${typeof s}`)}),n.map((s,a)=>new Ir({pageContent:s,metadata:n.length===1?t:{...t,line:a+1}}))}static async imports(){try{const{readFile:e}=await Ie(()=>import("./promises.0ef77ad7.js"),[]);return{readFile:e}}catch(e){throw console.error(e),new Error(`Failed to load fs/promises. TextLoader available only on environment 'node'. It appears you are running environment '${na()}'. See https://<link to docs> for alternatives.`)}}}function wp(r,e){return ya(r,e,ga,".txt",500,0)}class xu extends Pu{constructor(e,t={}){super(),Object.defineProperty(this,"filePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:"https://api.unstructured.io/general/v0/general"}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"strategy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof t=="string"?(this.filePath=t,this.apiUrl=e):(this.filePath=e,this.apiKey=t.apiKey,this.apiUrl=t.apiUrl??this.apiUrl,this.strategy=t.strategy??"hi_res")}async _partition(){const{readFile:e,basename:t}=await this.imports(),n=await e(this.filePath),s=t(this.filePath),a=new FormData;a.append("files",new Blob([n]),s),a.append("strategy",this.strategy);const i={"UNSTRUCTURED-API-KEY":this.apiKey??""},o=await fetch(this.apiUrl,{method:"POST",body:a,headers:i});if(!o.ok)throw new Error(`Failed to partition file ${this.filePath} with error ${o.status} and message ${await o.text()}`);const u=await o.json();if(!Array.isArray(u))throw new Error(`Expected partitioning request to return an array, but got ${u}`);return u.filter(c=>typeof c.text=="string")}async load(){const e=await this._partition(),t=[];for(const n of e){const{metadata:s,text:a}=n;t.push(new Ir({pageContent:a,metadata:{...s,category:n.type}}))}return t}async imports(){try{const{readFile:e}=await Ie(()=>import("./promises.0ef77ad7.js"),[]),{basename:t}=await Ie(()=>import("./__vite-browser-external_node_path.042c5bd1.js"),[]);return{readFile:e,basename:t}}catch(e){throw console.error(e),new Error(`Failed to load fs/promises. TextLoader available only on environment 'node'. It appears you are running environment '${na()}'. See https://<link to docs> for alternatives.`)}}}new Proxy({},{get(r,e){throw new Error(`Module "fs" has been externalized for browser compatibility. Cannot access "fs.${e}" in client code.  See http://vitejs.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)}});async function Op(r,e){return ya(r,e,xu)}async function Ep(r){try{const t=`/api?${new URLSearchParams({url:r}).toString()}`,n=await fetch(t,{method:"GET"});return n.status===200?await n.text():null}catch{return null}}class Ap extends Blob{constructor(e,t){super(e,t),this.name=t.name,this.lastModifiedDate=new Date}}function Pp(r,e){const t=xp(r)+".html";return new Ap([e],{type:"text/html",name:t})}function xp(r){return r=r.normalize("NFKD").replace(/[\u0300-\u036f]/g,""),r=r.replace(/[^\w\s-]/g,"").trim().toLowerCase(),r=r.replace(/[-\s]+/g,"-"),r}const ji={".txt":wp,".html":Op};async function Ii(r,e,t,n){Array.isArray(n)||(n=[n]),console.log(n);for(const s of n)await Sp(s,r)}async function Tp(r,e){const t=Io(e);let n=_t(ct,ut);const{data:s,error:a}=await n.from("documents").select("id").eq("metadata->>file_sha1",t);return a?(console.log(`Error retrieving data: ${a.message}`),!1):s.length>0}async function Sp(r,e,t){if(await Tp(e,r))return console.log(` ${r.name} is already in the database.`),!1;if(r.size<1)return console.log(` ${r.name} is empty.`),!1;{const n=`.${r.name.split(".").pop()}`;if(console.log(r.name,n),n in ji){const s=dn;let a=_t(ct,ut),i=new Au({openAIApiKey:s}),o=new Ut(i,{client:a,tableName:"documents"});return await ji[n](o,r),console.log(` ${r.name}`),!0}else return console.log(` ${r.name} is not a valid file type.`),!1}}async function Ri(r,e,t,n){const s=await Ep(n);console.log(s);const a=Pp(n,s);console.log(a),await ya(t,a,xu,".html",500,0,!0)}class Cp{}class Wr extends Cp{get lc_namespace(){return["langchain","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}constructor(e){var t;super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:typeof process<"u"?((t=process.env)==null?void 0:t.LANGCHAIN_CALLBACKS_BACKGROUND)!=="true":!0}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent)}copy(){return new this.constructor(this)}toJSON(){return rt.prototype.toJSON.call(this)}toJSONNotImplemented(){return rt.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class t extends Wr{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Lt()}),Object.assign(this,e)}}return new t}}var ba={exports:{}};ba.exports;(function(r){const t=(a=0)=>i=>`\x1B[${38+a};5;${i}m`,n=(a=0)=>(i,o,u)=>`\x1B[${38+a};2;${i};${o};${u}m`;function s(){const a=new Map,i={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};i.color.gray=i.color.blackBright,i.bgColor.bgGray=i.bgColor.bgBlackBright,i.color.grey=i.color.blackBright,i.bgColor.bgGrey=i.bgColor.bgBlackBright;for(const[o,u]of Object.entries(i)){for(const[c,l]of Object.entries(u))i[c]={open:`\x1B[${l[0]}m`,close:`\x1B[${l[1]}m`},u[c]=i[c],a.set(l[0],l[1]);Object.defineProperty(i,o,{value:u,enumerable:!1})}return Object.defineProperty(i,"codes",{value:a,enumerable:!1}),i.color.close="\x1B[39m",i.bgColor.close="\x1B[49m",i.color.ansi256=t(),i.color.ansi16m=n(),i.bgColor.ansi256=t(10),i.bgColor.ansi16m=n(10),Object.defineProperties(i,{rgbToAnsi256:{value:(o,u,c)=>o===u&&u===c?o<8?16:o>248?231:Math.round((o-8)/247*24)+232:16+36*Math.round(o/255*5)+6*Math.round(u/255*5)+Math.round(c/255*5),enumerable:!1},hexToRgb:{value:o=>{const u=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(o.toString(16));if(!u)return[0,0,0];let{colorString:c}=u.groups;c.length===3&&(c=c.split("").map(d=>d+d).join(""));const l=Number.parseInt(c,16);return[l>>16&255,l>>8&255,l&255]},enumerable:!1},hexToAnsi256:{value:o=>i.rgbToAnsi256(...i.hexToRgb(o)),enumerable:!1}}),i}Object.defineProperty(r,"exports",{enumerable:!0,get:s})})(ba);var kp=ba.exports;const Tu=Sn(kp);class _a extends Wr{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}_addChildRun(e,t){e.child_runs.push(t)}_startTrace(e){if(e.parent_run_id!==void 0){const t=this.runMap.get(e.parent_run_id);t&&this._addChildRun(t,e)}this.runMap.set(e.id,e)}async _endTrace(e){const t=e.parent_run_id!==void 0&&this.runMap.get(e.parent_run_id);t?t.child_execution_order=Math.max(t.child_execution_order,e.child_execution_order):await this.persistRun(e),this.runMap.delete(e.id)}_getExecutionOrder(e){const t=e!==void 0&&this.runMap.get(e);return t?t.child_execution_order+1:1}async handleLLMStart(e,t,n,s,a,i,o){var h;const u=this._getExecutionOrder(s),c=Date.now(),l=o?{...a,metadata:o}:a,d={id:n,name:e.id[e.id.length-1],parent_run_id:s,start_time:c,serialized:e,events:[{name:"start",time:c}],inputs:{prompts:t},execution_order:u,child_runs:[],child_execution_order:u,run_type:"llm",extra:l??{},tags:i||[]};this._startTrace(d),await((h=this.onLLMStart)==null?void 0:h.call(this,d))}async handleChatModelStart(e,t,n,s,a,i,o){var h;const u=this._getExecutionOrder(s),c=Date.now(),l=o?{...a,metadata:o}:a,d={id:n,name:e.id[e.id.length-1],parent_run_id:s,start_time:c,serialized:e,events:[{name:"start",time:c}],inputs:{messages:t},execution_order:u,child_runs:[],child_execution_order:u,run_type:"llm",extra:l??{},tags:i||[]};this._startTrace(d),await((h=this.onLLMStart)==null?void 0:h.call(this,d))}async handleLLMEnd(e,t){var s;const n=this.runMap.get(t);if(!n||(n==null?void 0:n.run_type)!=="llm")throw new Error("No LLM run to end.");n.end_time=Date.now(),n.outputs=e,n.events.push({name:"end",time:n.end_time}),await((s=this.onLLMEnd)==null?void 0:s.call(this,n)),await this._endTrace(n)}async handleLLMError(e,t){var s;const n=this.runMap.get(t);if(!n||(n==null?void 0:n.run_type)!=="llm")throw new Error("No LLM run to end.");n.end_time=Date.now(),n.error=e.message,n.events.push({name:"error",time:n.end_time}),await((s=this.onLLMError)==null?void 0:s.call(this,n)),await this._endTrace(n)}async handleChainStart(e,t,n,s,a,i){var l;const o=this._getExecutionOrder(s),u=Date.now(),c={id:n,name:e.id[e.id.length-1],parent_run_id:s,start_time:u,serialized:e,events:[{name:"start",time:u}],inputs:t,execution_order:o,child_execution_order:o,run_type:"chain",child_runs:[],extra:i?{metadata:i}:{},tags:a||[]};this._startTrace(c),await((l=this.onChainStart)==null?void 0:l.call(this,c))}async handleChainEnd(e,t){var s;const n=this.runMap.get(t);if(!n||(n==null?void 0:n.run_type)!=="chain")throw new Error("No chain run to end.");n.end_time=Date.now(),n.outputs=e,n.events.push({name:"end",time:n.end_time}),await((s=this.onChainEnd)==null?void 0:s.call(this,n)),await this._endTrace(n)}async handleChainError(e,t){var s;const n=this.runMap.get(t);if(!n||(n==null?void 0:n.run_type)!=="chain")throw new Error("No chain run to end.");n.end_time=Date.now(),n.error=e.message,n.events.push({name:"error",time:n.end_time}),await((s=this.onChainError)==null?void 0:s.call(this,n)),await this._endTrace(n)}async handleToolStart(e,t,n,s,a,i){var l;const o=this._getExecutionOrder(s),u=Date.now(),c={id:n,name:e.id[e.id.length-1],parent_run_id:s,start_time:u,serialized:e,events:[{name:"start",time:u}],inputs:{input:t},execution_order:o,child_execution_order:o,run_type:"tool",child_runs:[],extra:i?{metadata:i}:{},tags:a||[]};this._startTrace(c),await((l=this.onToolStart)==null?void 0:l.call(this,c))}async handleToolEnd(e,t){var s;const n=this.runMap.get(t);if(!n||(n==null?void 0:n.run_type)!=="tool")throw new Error("No tool run to end");n.end_time=Date.now(),n.outputs={output:e},n.events.push({name:"end",time:n.end_time}),await((s=this.onToolEnd)==null?void 0:s.call(this,n)),await this._endTrace(n)}async handleToolError(e,t){var s;const n=this.runMap.get(t);if(!n||(n==null?void 0:n.run_type)!=="tool")throw new Error("No tool run to end");n.end_time=Date.now(),n.error=e.message,n.events.push({name:"error",time:n.end_time}),await((s=this.onToolError)==null?void 0:s.call(this,n)),await this._endTrace(n)}async handleAgentAction(e,t){var a;const n=this.runMap.get(t);if(!n||(n==null?void 0:n.run_type)!=="chain")return;const s=n;s.actions=s.actions||[],s.actions.push(e),s.events.push({name:"agent_action",time:Date.now(),kwargs:{action:e}}),await((a=this.onAgentAction)==null?void 0:a.call(this,n))}async handleAgentEnd(e,t){var s;const n=this.runMap.get(t);!n||(n==null?void 0:n.run_type)!=="chain"||(n.events.push({name:"agent_end",time:Date.now(),kwargs:{action:e}}),await((s=this.onAgentEnd)==null?void 0:s.call(this,n)))}async handleText(e,t){var s;const n=this.runMap.get(t);!n||(n==null?void 0:n.run_type)!=="chain"||(n.events.push({name:"text",time:Date.now(),kwargs:{text:e}}),await((s=this.onText)==null?void 0:s.call(this,n)))}async handleLLMNewToken(e,t,n){var a;const s=this.runMap.get(n);!s||(s==null?void 0:s.run_type)!=="llm"||(s.events.push({name:"new_token",time:Date.now(),kwargs:{token:e,idx:t}}),await((a=this.onLLMNewToken)==null?void 0:a.call(this,s)))}}function Ke(r,e){return`${r.open}${e}${r.close}`}function xt(r,e){try{return JSON.stringify(r,null,2)}catch{return e}}function Zt(r){if(!r.end_time)return"";const e=r.end_time-r.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}const{color:tt}=Tu;class Ni extends _a{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){const t=[];let n=e;for(;n.parent_run_id;){const s=this.runMap.get(n.parent_run_id);if(s)t.push(s),n=s;else break}return t}getBreadcrumbs(e){const n=[...this.getParents(e).reverse(),e].map((s,a,i)=>{const o=`${s.execution_order}:${s.run_type}:${s.name}`;return a===i.length-1?Ke(Tu.bold,o):o}).join(" > ");return Ke(tt.grey,n)}onChainStart(e){const t=this.getBreadcrumbs(e);console.log(`${Ke(tt.green,"[chain/start]")} [${t}] Entering Chain run with input: ${xt(e.inputs,"[inputs]")}`)}onChainEnd(e){const t=this.getBreadcrumbs(e);console.log(`${Ke(tt.cyan,"[chain/end]")} [${t}] [${Zt(e)}] Exiting Chain run with output: ${xt(e.outputs,"[outputs]")}`)}onChainError(e){const t=this.getBreadcrumbs(e);console.log(`${Ke(tt.red,"[chain/error]")} [${t}] [${Zt(e)}] Chain run errored with error: ${xt(e.error,"[error]")}`)}onLLMStart(e){const t=this.getBreadcrumbs(e),n="prompts"in e.inputs?{prompts:e.inputs.prompts.map(s=>s.trim())}:e.inputs;console.log(`${Ke(tt.green,"[llm/start]")} [${t}] Entering LLM run with input: ${xt(n,"[inputs]")}`)}onLLMEnd(e){const t=this.getBreadcrumbs(e);console.log(`${Ke(tt.cyan,"[llm/end]")} [${t}] [${Zt(e)}] Exiting LLM run with output: ${xt(e.outputs,"[response]")}`)}onLLMError(e){const t=this.getBreadcrumbs(e);console.log(`${Ke(tt.red,"[llm/error]")} [${t}] [${Zt(e)}] LLM run errored with error: ${xt(e.error,"[error]")}`)}onToolStart(e){var n;const t=this.getBreadcrumbs(e);console.log(`${Ke(tt.green,"[tool/start]")} [${t}] Entering Tool run with input: "${(n=e.inputs.input)==null?void 0:n.trim()}"`)}onToolEnd(e){var n,s;const t=this.getBreadcrumbs(e);console.log(`${Ke(tt.cyan,"[tool/end]")} [${t}] [${Zt(e)}] Exiting Tool run with output: "${(s=(n=e.outputs)==null?void 0:n.output)==null?void 0:s.trim()}"`)}onToolError(e){const t=this.getBreadcrumbs(e);console.log(`${Ke(tt.red,"[tool/error]")} [${t}] [${Zt(e)}] Tool run errored with error: ${xt(e.error,"[error]")}`)}onAgentAction(e){const t=e,n=this.getBreadcrumbs(e);console.log(`${Ke(tt.blue,"[agent/action]")} [${n}] Agent selected action: ${xt(t.actions[t.actions.length-1],"[action]")}`)}}const jp=[400,401,403,404,405,406,407,408,409];class Ip{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6;const t="default"in vt?vt.default:vt;this.queue=new t({concurrency:this.maxConcurrency})}call(e,...t){return this.queue.add(()=>wo(()=>e(...t).catch(n=>{throw n instanceof Error?n:new Error(n)}),{onFailedAttempt(n){var a;if(n.message.startsWith("Cancel")||n.message.startsWith("TimeoutError")||n.message.startsWith("AbortError")||(n==null?void 0:n.code)==="ECONNABORTED")throw n;const s=(a=n==null?void 0:n.response)==null?void 0:a.status;if(s&&jp.includes(+s))throw n},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,t,...n){return e.signal?Promise.race([this.call(t,...n),new Promise((s,a)=>{var i;(i=e.signal)==null||i.addEventListener("abort",()=>{a(new Error("AbortError"))})})]):this.call(t,...n)}fetch(...e){return this.call(()=>fetch(...e).then(t=>t.ok?t:Promise.reject(t)))}}const Rp=()=>typeof window<"u"&&typeof window.document<"u",Np=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",Dp=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),Su=()=>typeof Deno<"u",Lp=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!Su(),Mp=()=>{let r;return Rp()?r="browser":Lp()?r="node":Np()?r="webworker":Dp()?r="jsdom":Su()?r="deno":r="other",r};let Rs;async function Fp(){return Rs===void 0&&(Rs={library:"langsmith",runtime:Mp()}),Rs}function Di(r){var e;try{return typeof process<"u"?(e=process.env)==null?void 0:e[r]:void 0}catch{return}}const Up=r=>{const t=r.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return t==="localhost"||t==="127.0.0.1"||t==="::1"},cn=async(r,e)=>{const t=await r.text();if(!r.ok)throw new Error(`Failed to ${e}: ${r.status} ${r.statusText} ${t}`)};class va{constructor(e={}){Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const t=va.getDefaultClientConfig();this.apiUrl=e.apiUrl??t.apiUrl,this.apiKey=e.apiKey??t.apiKey,this.validateApiKeyIfHosted(),this.timeout_ms=e.timeout_ms??4e3,this.caller=new Ip(e.callerOptions??{})}static getDefaultClientConfig(){return{apiUrl:Di("LANGCHAIN_ENDPOINT")??"http://localhost:1984",apiKey:Di("LANGCHAIN_API_KEY")}}validateApiKeyIfHosted(){if(!Up(this.apiUrl)&&!this.apiKey)throw new Error("API key must be provided when using hosted LangSmith API")}get headers(){const e={};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}async _get(e,t){const n=(t==null?void 0:t.toString())??"",s=`${this.apiUrl}${e}?${n}`,a=await this.caller.call(fetch,s,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!a.ok)throw new Error(`Failed to fetch ${e}: ${a.status} ${a.statusText}`);return a.json()}async createRun(e){const t={...this.headers,"Content-Type":"application/json"},n=e.extra??{},s=await Fp(),a=e.project_name;delete e.project_name;const i={session_name:a,...e,extra:{...e.extra,runtime:{...s,...n.runtime}}},o=await this.caller.call(fetch,`${this.apiUrl}/runs`,{method:"POST",headers:t,body:JSON.stringify(i),signal:AbortSignal.timeout(this.timeout_ms)});await cn(o,"create run")}async updateRun(e,t){const n={...this.headers,"Content-Type":"application/json"},s=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:n,body:JSON.stringify(t),signal:AbortSignal.timeout(this.timeout_ms)});await cn(s,"update run")}async readRun(e,{loadChildRuns:t}={loadChildRuns:!1}){let n=await this._get(`/runs/${e}`);return t&&n.child_run_ids&&(n=await this._loadChildRuns(n)),n}async _loadChildRuns(e){const t=await this.listRuns({id:e.child_run_ids}),n={},s={};t.sort((a,i)=>a.execution_order-i.execution_order);for(const a of t){if(a.parent_run_id===null||a.parent_run_id===void 0)throw new Error(`Child run ${a.id} has no parent`);a.parent_run_id in n||(n[a.parent_run_id]=[]),n[a.parent_run_id].push(a),s[a.id]=a}e.child_runs=n[e.id]||[];for(const a in n)a!==e.id&&(s[a].child_runs=n[a]);return e}async listRuns({projectId:e,projectName:t,executionOrder:n,runType:s,error:a,id:i,limit:o,offset:u}){const c=new URLSearchParams;let l=e;if(t){if(e)throw new Error("Only one of projectId or projectName may be given");l=(await this.readProject({projectName:t})).id}if(l&&c.append("session",l),n&&c.append("execution_order",n.toString()),s&&c.append("run_type",s),a!==void 0&&c.append("error",a.toString()),i!==void 0)for(const d of i)c.append("id",d);return o!==void 0&&c.append("limit",o.toString()),u!==void 0&&c.append("offset",u.toString()),this._get("/runs",c)}async deleteRun(e){const t=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await cn(t,"delete run")}async createProject({projectName:e,projectExtra:t,upsert:n}){const s=n?"?upsert=true":"",a=`${this.apiUrl}/sessions${s}`,i={name:e};t!==void 0&&(i.extra=t);const o=await this.caller.call(fetch,a,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(i),signal:AbortSignal.timeout(this.timeout_ms)}),u=await o.json();if(!o.ok)throw new Error(`Failed to create session ${e}: ${o.status} ${o.statusText}`);return u}async readProject({projectId:e,projectName:t}){let n="/sessions";const s=new URLSearchParams;if(e!==void 0&&t!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)n+=`/${e}`;else if(t!==void 0)s.append("name",t);else throw new Error("Must provide projectName or projectId");const a=await this._get(n,s);let i;if(Array.isArray(a)){if(a.length===0)throw new Error(`Project[id=${e}, name=${t}] not found`);i=a[0]}else i=a;return i}async listProjects(){return this._get("/sessions")}async deleteProject({projectId:e,projectName:t}){let n;if(e===void 0&&t===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&t!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?n=(await this.readProject({projectName:t})).id:n=e;const s=await this.caller.call(fetch,`${this.apiUrl}/sessions/${n}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await cn(s,`delete session ${n} (${t})`)}async uploadCsv({csvFile:e,fileName:t,inputKeys:n,outputKeys:s,description:a,dataType:i,name:o}){const u=`${this.apiUrl}/datasets/upload`,c=new FormData;c.append("file",e,t),n.forEach(h=>{c.append("input_keys",h)}),s.forEach(h=>{c.append("output_keys",h)}),a&&c.append("description",a),i&&c.append("data_type",i),o&&c.append("name",o);const l=await this.caller.call(fetch,u,{method:"POST",headers:this.headers,body:c,signal:AbortSignal.timeout(this.timeout_ms)});if(!l.ok){const h=await l.json();throw h.detail&&h.detail.includes("already exists")?new Error(`Dataset ${t} already exists`):new Error(`Failed to upload CSV: ${l.status} ${l.statusText}`)}return await l.json()}async createDataset(e,{description:t,dataType:n}={}){const s={name:e,description:t};n&&(s.data_type=n);const a=await this.caller.call(fetch,`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms)});if(!a.ok){const o=await a.json();throw o.detail&&o.detail.includes("already exists")?new Error(`Dataset ${e} already exists`):new Error(`Failed to create dataset ${a.status} ${a.statusText}`)}return await a.json()}async readDataset({datasetId:e,datasetName:t}){let n="/datasets";const s=new URLSearchParams({limit:"1"});if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)n+=`/${e}`;else if(t!==void 0)s.append("name",t);else throw new Error("Must provide datasetName or datasetId");const a=await this._get(n,s);let i;if(Array.isArray(a)){if(a.length===0)throw new Error(`Dataset[id=${e}, name=${t}] not found`);i=a[0]}else i=a;return i}async listDatasets({limit:e=100,offset:t=0}={}){const n="/datasets",s=new URLSearchParams({limit:e.toString(),offset:t.toString()}),a=await this._get(n,s);if(!Array.isArray(a))throw new Error(`Expected ${n} to return an array, but got ${a}`);return a}async deleteDataset({datasetId:e,datasetName:t}){let n="/datasets",s=e;if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(t!==void 0&&(s=(await this.readDataset({datasetName:t})).id),s!==void 0)n+=`/${s}`;else throw new Error("Must provide datasetName or datasetId");const a=await this.caller.call(fetch,this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!a.ok)throw new Error(`Failed to delete ${n}: ${a.status} ${a.statusText}`);await a.json()}async createExample(e,t,{datasetId:n,datasetName:s,createdAt:a}){let i=n;if(i===void 0&&s===void 0)throw new Error("Must provide either datasetName or datasetId");if(i!==void 0&&s!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");i===void 0&&(i=(await this.readDataset({datasetName:s})).id);const u={dataset_id:i,inputs:e,outputs:t,created_at:(a||new Date).toISOString()},c=await this.caller.call(fetch,`${this.apiUrl}/examples`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms)});if(!c.ok)throw new Error(`Failed to create example: ${c.status} ${c.statusText}`);return await c.json()}async readExample(e){const t=`/examples/${e}`;return await this._get(t)}async listExamples({datasetId:e,datasetName:t,limit:n,offset:s}={}){let a;if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)a=e;else if(t!==void 0)a=(await this.readDataset({datasetName:t})).id;else throw new Error("Must provide a datasetName or datasetId");const i=await this._get("/examples",new URLSearchParams({dataset:a,limit:(n==null?void 0:n.toString())??"100",offset:(s==null?void 0:s.toString())??"0"}));if(!Array.isArray(i))throw new Error(`Expected /examples to return an array, but got ${i}`);return i}async deleteExample(e){const t=`/examples/${e}`,n=await this.caller.call(fetch,this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!n.ok)throw new Error(`Failed to delete ${t}: ${n.status} ${n.statusText}`);await n.json()}async updateExample(e,t){const n=await this.caller.call(fetch,`${this.apiUrl}/examples/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(t),signal:AbortSignal.timeout(this.timeout_ms)});if(!n.ok)throw new Error(`Failed to update example ${e}: ${n.status} ${n.statusText}`);return await n.json()}async evaluateRun(e,t,{sourceInfo:n,loadChildRuns:s}={loadChildRuns:!1}){let a;if(typeof e=="string")a=await this.readRun(e,{loadChildRuns:s});else if(typeof e=="object"&&"id"in e)a=e;else throw new Error(`Invalid run type: ${typeof e}`);let i;a.reference_example_id!==null&&a.reference_example_id!==void 0&&(i=await this.readExample(a.reference_example_id));const o=await t.evaluateRun(a,i);let u=n??{};return o.evaluatorInfo&&(u={...u,...o.evaluatorInfo}),await this.createFeedback(a.id,o.key,{score:o.score,value:o.value,comment:o.comment,correction:o.correction,sourceInfo:u,feedbackSourceType:"MODEL"})}async createFeedback(e,t,{score:n,value:s,correction:a,comment:i,sourceInfo:o,feedbackSourceType:u="API"}){let c;if(u==="API")c={type:"api",metadata:o??{}};else if(u==="MODEL")c={type:"model",metadata:o??{}};else throw new Error(`Unknown feedback source type ${u}`);const l={id:Lt(),run_id:e,key:t,score:n,value:s,correction:a,comment:i,feedback_source:c},d=await this.caller.call(fetch,`${this.apiUrl}/feedback`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms)});if(!d.ok)throw new Error(`Failed to create feedback for run ${e}: ${d.status} ${d.statusText}`);return await d.json()}async readFeedback(e){const t=`/feedback/${e}`;return await this._get(t)}async deleteFeedback(e){const t=`/feedback/${e}`,n=await this.caller.call(fetch,this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!n.ok)throw new Error(`Failed to delete ${t}: ${n.status} ${n.statusText}`);await n.json()}async listFeedback({runIds:e,limit:t,offset:n}={}){const s=new URLSearchParams;return e&&s.append("run",e.join(",")),t!==void 0&&s.append("limit",t.toString()),n!==void 0&&s.append("offset",n.toString()),await this._get("/feedback",s)}}class Bp extends _a{constructor(e={}){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{exampleId:t,projectName:n,client:s}=e;this.projectName=n??Se("LANGCHAIN_PROJECT")??Se("LANGCHAIN_SESSION"),this.exampleId=t,this.client=s??new va({})}async _convertToCreate(e,t=void 0){return{...e,extra:{...e.extra,runtime:await hd()},child_runs:void 0,session_name:this.projectName,reference_example_id:e.parent_run_id?void 0:t}}async persistRun(e){}async _persistRunSingle(e){const t=await this._convertToCreate(e,this.exampleId);await this.client.createRun(t)}async _updateRunSingle(e){const t={end_time:e.end_time,error:e.error,outputs:e.outputs,events:e.events};await this.client.updateRun(e.id,t)}async onLLMStart(e){await this._persistRunSingle(e)}async onLLMEnd(e){await this._updateRunSingle(e)}async onLLMError(e){await this._updateRunSingle(e)}async onChainStart(e){await this._persistRunSingle(e)}async onChainEnd(e){await this._updateRunSingle(e)}async onChainError(e){await this._updateRunSingle(e)}async onToolStart(e){await this._persistRunSingle(e)}async onToolEnd(e){await this._updateRunSingle(e)}async onToolError(e){await this._updateRunSingle(e)}}function wa(r,e="Human",t="AI"){const n=[];for(const s of r){let a;if(s._getType()==="human")a=e;else if(s._getType()==="ai")a=t;else if(s._getType()==="system")a="System";else if(s._getType()==="function")a="Function";else if(s._getType()==="generic")a=s.role;else throw new Error(`Got unsupported message type: ${s}`);const i=s.name?`${s.name}, `:"";n.push(`${a}: ${i}${s.content}`)}return n.join(`
`)}class Vp extends _a{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"endpoint",{enumerable:!0,configurable:!0,writable:!0,value:Se("LANGCHAIN_ENDPOINT")||"http://localhost:1984"}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:{"Content-Type":"application/json"}}),Object.defineProperty(this,"session",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const e=Se("LANGCHAIN_API_KEY");e&&(this.headers["x-api-key"]=e)}async newSession(e){const t={start_time:Date.now(),name:e},n=await this.persistSession(t);return this.session=n,n}async loadSession(e){const t=`${this.endpoint}/sessions?name=${e}`;return this._handleSessionResponse(t)}async loadDefaultSession(){const e=`${this.endpoint}/sessions?name=default`;return this._handleSessionResponse(e)}async convertV2RunToRun(e){var a;const t=this.session??await this.loadDefaultSession(),n=e.serialized;let s;if(e.run_type==="llm"){const i=e.inputs.prompts?e.inputs.prompts:e.inputs.messages.map(u=>wa(u));s={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:n,type:e.run_type,session_id:t.id,prompts:i,response:e.outputs}}else if(e.run_type==="chain"){const i=await Promise.all(e.child_runs.map(u=>this.convertV2RunToRun(u)));s={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:n,type:e.run_type,session_id:t.id,inputs:e.inputs,outputs:e.outputs,child_llm_runs:i.filter(u=>u.type==="llm"),child_chain_runs:i.filter(u=>u.type==="chain"),child_tool_runs:i.filter(u=>u.type==="tool")}}else if(e.run_type==="tool"){const i=await Promise.all(e.child_runs.map(u=>this.convertV2RunToRun(u)));s={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:n,type:e.run_type,session_id:t.id,tool_input:e.inputs.input,output:(a=e.outputs)==null?void 0:a.output,action:JSON.stringify(n),child_llm_runs:i.filter(u=>u.type==="llm"),child_chain_runs:i.filter(u=>u.type==="chain"),child_tool_runs:i.filter(u=>u.type==="tool")}}else throw new Error(`Unknown run type: ${e.run_type}`);return s}async persistRun(e){let t,n;e.run_type!==void 0?n=await this.convertV2RunToRun(e):n=e,n.type==="llm"?t=`${this.endpoint}/llm-runs`:n.type==="chain"?t=`${this.endpoint}/chain-runs`:t=`${this.endpoint}/tool-runs`;const s=await fetch(t,{method:"POST",headers:this.headers,body:JSON.stringify(n)});s.ok||console.error(`Failed to persist run: ${s.status} ${s.statusText}`)}async persistSession(e){const t=`${this.endpoint}/sessions`,n=await fetch(t,{method:"POST",headers:this.headers,body:JSON.stringify(e)});return n.ok?{id:(await n.json()).id,...e}:(console.error(`Failed to persist session: ${n.status} ${n.statusText}, using default session.`),{id:1,...e})}async _handleSessionResponse(e){const t=await fetch(e,{method:"GET",headers:this.headers});let n;if(!t.ok)return console.error(`Failed to load session: ${t.status} ${t.statusText}`),n={id:1,start_time:Date.now()},this.session=n,n;const s=await t.json();return s.length===0?(n={id:1,start_time:Date.now()},this.session=n,n):([n]=s,this.session=n,n)}}async function $p(r){const e=new Vp;return r?await e.loadSession(r):await e.loadDefaultSession(),e}async function qp(){return new Bp}let Ns;function zp(){const r="default"in vt?vt.default:vt;return new r({autoStart:!0,concurrency:1})}async function Ve(r,e){e===!0?await r():(typeof Ns>"u"&&(Ns=zp()),Ns.add(r))}function Hp(r){return r?Array.isArray(r)||"name"in r?{callbacks:r}:r:{}}class Zp{setHandler(e){return this.setHandlers([e])}}class Oa{constructor(e,t,n,s,a,i,o,u){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:u})}async handleText(e){await Promise.all(this.handlers.map(t=>Ve(async()=>{var n;try{await((n=t.handleText)==null?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(s){console.error(`Error in handler ${t.constructor.name}, handleText: ${s}`)}},t.awaitHandlers)))}}class Li extends Oa{async handleLLMNewToken(e,t={prompt:0,completion:0}){await Promise.all(this.handlers.map(n=>Ve(async()=>{var s;if(!n.ignoreLLM)try{await((s=n.handleLLMNewToken)==null?void 0:s.call(n,e,t,this.runId,this._parentRunId,this.tags))}catch(a){console.error(`Error in handler ${n.constructor.name}, handleLLMNewToken: ${a}`)}},n.awaitHandlers)))}async handleLLMError(e){await Promise.all(this.handlers.map(t=>Ve(async()=>{var n;if(!t.ignoreLLM)try{await((n=t.handleLLMError)==null?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(s){console.error(`Error in handler ${t.constructor.name}, handleLLMError: ${s}`)}},t.awaitHandlers)))}async handleLLMEnd(e){await Promise.all(this.handlers.map(t=>Ve(async()=>{var n;if(!t.ignoreLLM)try{await((n=t.handleLLMEnd)==null?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(s){console.error(`Error in handler ${t.constructor.name}, handleLLMEnd: ${s}`)}},t.awaitHandlers)))}}class Kp extends Oa{getChild(e){const t=new St(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleChainError(e){await Promise.all(this.handlers.map(t=>Ve(async()=>{var n;if(!t.ignoreChain)try{await((n=t.handleChainError)==null?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(s){console.error(`Error in handler ${t.constructor.name}, handleChainError: ${s}`)}},t.awaitHandlers)))}async handleChainEnd(e){await Promise.all(this.handlers.map(t=>Ve(async()=>{var n;if(!t.ignoreChain)try{await((n=t.handleChainEnd)==null?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(s){console.error(`Error in handler ${t.constructor.name}, handleChainEnd: ${s}`)}},t.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(t=>Ve(async()=>{var n;if(!t.ignoreAgent)try{await((n=t.handleAgentAction)==null?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(s){console.error(`Error in handler ${t.constructor.name}, handleAgentAction: ${s}`)}},t.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(t=>Ve(async()=>{var n;if(!t.ignoreAgent)try{await((n=t.handleAgentEnd)==null?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(s){console.error(`Error in handler ${t.constructor.name}, handleAgentEnd: ${s}`)}},t.awaitHandlers)))}}class Yp extends Oa{getChild(e){const t=new St(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleToolError(e){await Promise.all(this.handlers.map(t=>Ve(async()=>{var n;if(!t.ignoreAgent)try{await((n=t.handleToolError)==null?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(s){console.error(`Error in handler ${t.constructor.name}, handleToolError: ${s}`)}},t.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(t=>Ve(async()=>{var n;if(!t.ignoreAgent)try{await((n=t.handleToolEnd)==null?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(s){console.error(`Error in handler ${t.constructor.name}, handleToolEnd: ${s}`)}},t.awaitHandlers)))}}class St extends Zp{constructor(e){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=[],this.inheritableHandlers=[],this._parentRunId=e}async handleLLMStart(e,t,n=void 0,s=void 0,a=void 0){return Promise.all(t.map(async i=>{const o=Lt();return await Promise.all(this.handlers.map(u=>Ve(async()=>{var c;if(!u.ignoreLLM)try{await((c=u.handleLLMStart)==null?void 0:c.call(u,e,[i],o,this._parentRunId,a,this.tags,this.metadata))}catch(l){console.error(`Error in handler ${u.constructor.name}, handleLLMStart: ${l}`)}},u.awaitHandlers))),new Li(o,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,t,n=void 0,s=void 0,a=void 0){return Promise.all(t.map(async i=>{const o=Lt();return await Promise.all(this.handlers.map(u=>Ve(async()=>{var c,l;if(!u.ignoreLLM)try{if(u.handleChatModelStart)await((c=u.handleChatModelStart)==null?void 0:c.call(u,e,[i],o,this._parentRunId,a,this.tags,this.metadata));else if(u.handleLLMStart){const d=wa(i);await((l=u.handleLLMStart)==null?void 0:l.call(u,e,[d],o,this._parentRunId,a,this.tags,this.metadata))}}catch(d){console.error(`Error in handler ${u.constructor.name}, handleLLMStart: ${d}`)}},u.awaitHandlers))),new Li(o,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,t,n=Lt()){return await Promise.all(this.handlers.map(s=>Ve(async()=>{var a;if(!s.ignoreChain)try{await((a=s.handleChainStart)==null?void 0:a.call(s,e,t,n,this._parentRunId,this.tags,this.metadata))}catch(i){console.error(`Error in handler ${s.constructor.name}, handleChainStart: ${i}`)}},s.awaitHandlers))),new Kp(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,t,n=Lt()){return await Promise.all(this.handlers.map(s=>Ve(async()=>{var a;if(!s.ignoreAgent)try{await((a=s.handleToolStart)==null?void 0:a.call(s,e,t,n,this._parentRunId,this.tags,this.metadata))}catch(i){console.error(`Error in handler ${s.constructor.name}, handleToolStart: ${i}`)}},s.awaitHandlers))),new Yp(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}addHandler(e,t=!0){this.handlers.push(e),t&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(t=>t!==e),this.inheritableHandlers=this.inheritableHandlers.filter(t=>t!==e)}setHandlers(e,t=!0){this.handlers=[],this.inheritableHandlers=[];for(const n of e)this.addHandler(n,t)}addTags(e,t=!0){this.removeTags(e),this.tags.push(...e),t&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(t=>!e.includes(t)),this.inheritableTags=this.inheritableTags.filter(t=>!e.includes(t))}addMetadata(e,t=!0){this.metadata={...this.metadata,...e},t&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(const t of Object.keys(e))delete this.metadata[t],delete this.inheritableMetadata[t]}copy(e=[],t=!0){const n=new St(this._parentRunId);for(const s of this.handlers){const a=this.inheritableHandlers.includes(s);n.addHandler(s,a)}for(const s of this.tags){const a=this.inheritableTags.includes(s);n.addTags([s],a)}for(const s of Object.keys(this.metadata)){const a=Object.keys(this.inheritableMetadata).includes(s);n.addMetadata({[s]:this.metadata[s]},a)}for(const s of e)n.handlers.filter(a=>a.name==="console_callback_handler").some(a=>a.name===s.name)||n.addHandler(s,t);return n}static fromHandlers(e){class t extends Wr{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Lt()}),Object.assign(this,e)}}const n=new this;return n.addHandler(new t),n}static async configure(e,t,n,s,a,i,o){let u;(e||t)&&(Array.isArray(e)||!e?(u=new St,u.setHandlers((e==null?void 0:e.map(Mi))??[],!0)):u=e,u=u.copy(Array.isArray(t)?t.map(Mi):t==null?void 0:t.handlers,!1));const c=Se("LANGCHAIN_VERBOSE")||(o==null?void 0:o.verbose),l=Se("LANGCHAIN_TRACING_V2")??!1,d=l||(Se("LANGCHAIN_TRACING")??!1);if(c||d){if(u||(u=new St),c&&!u.handlers.some(h=>h.name===Ni.prototype.name)){const h=new Ni;u.addHandler(h,!0)}if(d&&!u.handlers.some(h=>h.name==="langchain_tracer"))if(l)u.addHandler(await qp(),!0);else{const h=Se("LANGCHAIN_PROJECT")&&Se("LANGCHAIN_SESSION");u.addHandler(await $p(h),!0)}}return(n||s)&&u&&(u.addTags(n??[]),u.addTags(s??[],!1)),(a||i)&&u&&(u.addMetadata(a??{}),u.addMetadata(i??{},!1)),u}}function Mi(r){return"name"in r?r:Wr.fromMethods(r)}const Cu=r=>r.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":r.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":r.startsWith("gpt-4-32k")?"gpt-4-32k":r.startsWith("gpt-4-")?"gpt-4":r,Jp=r=>{switch(Cu(r)){case"gpt-3.5-turbo-16k":return 16384;case"gpt-3.5-turbo":return 4096;case"gpt-4-32k":return 32768;case"gpt-4":return 8192;case"text-davinci-003":return 4097;case"text-curie-001":return 2048;case"text-babbage-001":return 2048;case"text-ada-001":return 2048;case"code-davinci-002":return 8e3;case"code-cushman-001":return 2048;default:return 4097}},bb=async({prompt:r,modelName:e})=>{let t;try{t=(await To(e)).encode(r).length}catch{console.warn("Failed to calculate number of tokens, falling back to approximate count"),t=Math.ceil(r.length/4)}return Jp(e)-t},Wp=()=>!1;class ku extends rt{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??Wp(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}}class ju extends ku{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:e,callbackManager:t,...n}){super({callbacks:e??t,...n}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.caller=new ra(n??{})}async getNumTokens(e){let t=Math.ceil(e.length/4);if(!this._encoding)try{this._encoding=await To("modelName"in this?Cu(this.modelName):"gpt2")}catch(n){console.warn("Failed to calculate number of tokens, falling back to approximate count",n)}return this._encoding&&(t=this._encoding.encode(e).length),t}_identifyingParams(){return{}}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){const{_type:t,_model:n,...s}=e;if(n&&n!=="base_chat_model")throw new Error(`Cannot load LLM with model ${n}`);const a={openai:(await Ie(()=>import("./openai.16457f44.js"),["_app/immutable/chunks/openai.16457f44.js","_app/immutable/chunks/prompt-layer.00daf386.js"])).ChatOpenAI}[t];if(a===void 0)throw new Error(`Cannot load  LLM with type ${t}`);return new a(s)}}class Gr extends ku{get lc_namespace(){return["langchain","chains",this._chainType()]}constructor(e,t,n){if(arguments.length===1&&typeof e=="object"&&!("saveContext"in e)){const{memory:s,callbackManager:a,...i}=e;super({...i,callbacks:a??i.callbacks}),this.memory=s}else super({verbose:t,callbacks:n}),this.memory=e}_selectMemoryInputs(e){const t={...e};return"signal"in t&&delete t.signal,"timeout"in t&&delete t.timeout,t}serialize(){throw new Error("Method not implemented.")}async run(e,t){const n=this.inputKeys.filter(u=>{var c;return!((c=this.memory)!=null&&c.memoryKeys.includes(u))});if(!(n.length<=1))throw new Error(`Chain ${this._chainType()} expects multiple inputs, cannot use 'run' `);const a=n.length?{[n[0]]:e}:{},i=await this.call(a,t),o=Object.keys(i);if(o.length===1)return i[o[0]];throw new Error("return values have multiple keys, `run` only supported when one key currently")}async call(e,t,n){const s={...e};if(s.timeout&&!s.signal&&(s.signal=AbortSignal.timeout(s.timeout),delete s.timeout),this.memory!=null){const c=await this.memory.loadMemoryVariables(this._selectMemoryInputs(e));for(const[l,d]of Object.entries(c))s[l]=d}const a=Hp(t),i=await St.configure(a.callbacks,this.callbacks,a.tags||n,this.tags,a.metadata,this.metadata,{verbose:this.verbose}),o=await(i==null?void 0:i.handleChainStart(this.toJSON(),s));let u;try{u=await(e.signal?Promise.race([this._call(s,o),new Promise((c,l)=>{var d;(d=e.signal)==null||d.addEventListener("abort",()=>{l(new Error("AbortError"))})})]):this._call(s,o))}catch(c){throw await(o==null?void 0:o.handleChainError(c)),c}return this.memory!=null&&await this.memory.saveContext(this._selectMemoryInputs(e),u),await(o==null?void 0:o.handleChainEnd(u)),Object.defineProperty(u,Fo,{value:o?{runId:o==null?void 0:o.runId}:void 0,configurable:!0}),u}async apply(e,t){return Promise.all(e.map(async(n,s)=>this.call(n,t==null?void 0:t[s])))}static async deserialize(e,t={}){switch(e._type){case"llm_chain":{const{LLMChain:n}=await Ie(()=>Promise.resolve().then(()=>rm),void 0);return n.deserialize(e)}case"sequential_chain":{const{SequentialChain:n}=await Ie(()=>import("./sequential_chain.64f6b93e.js"),[]);return n.deserialize(e)}case"simple_sequential_chain":{const{SimpleSequentialChain:n}=await Ie(()=>import("./sequential_chain.64f6b93e.js"),[]);return n.deserialize(e)}case"stuff_documents_chain":{const{StuffDocumentsChain:n}=await Ie(()=>Promise.resolve().then(()=>Ds),void 0);return n.deserialize(e)}case"map_reduce_documents_chain":{const{MapReduceDocumentsChain:n}=await Ie(()=>Promise.resolve().then(()=>Ds),void 0);return n.deserialize(e)}case"refine_documents_chain":{const{RefineDocumentsChain:n}=await Ie(()=>Promise.resolve().then(()=>Ds),void 0);return n.deserialize(e)}case"vector_db_qa":{const{VectorDBQAChain:n}=await Ie(()=>import("./vector_db_qa.abd6c95a.js"),[]);return n.deserialize(e,t)}case"api_chain":{const{APIChain:n}=await Ie(()=>import("./api_chain.d87d0619.js"),[]);return n.deserialize(e)}default:throw new Error(`Invalid prompt type in config: ${e._type}`)}}}class Gp extends Vo{constructor(e){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts","base"]}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new Uo(this.value)]}}class Ea extends rt{get lc_attributes(){return{partialVariables:void 0}}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts",this._getPromptType()]}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"partialVariables",{enumerable:!0,configurable:!0,writable:!0,value:{}});const{inputVariables:t}=e;if(t.includes("stop"))throw new Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,e)}async mergePartialAndUserVariables(e){const t=this.partialVariables??{},n={};for(const[a,i]of Object.entries(t))typeof i=="string"?n[a]=i:n[a]=await i();return{...n,...e}}serialize(){throw new Error("Use .toJSON() instead")}static async deserialize(e){switch(e._type){case"prompt":{const{PromptTemplate:t}=await Ie(()=>Promise.resolve().then(()=>Fi),void 0);return t.deserialize(e)}case void 0:{const{PromptTemplate:t}=await Ie(()=>Promise.resolve().then(()=>Fi),void 0);return t.deserialize({...e,_type:"prompt"})}case"few_shot":{const{FewShotPromptTemplate:t}=await Ie(()=>import("./few_shot.5de2e2c4.js"),[]);return t.deserialize(e)}default:throw new Error(`Invalid prompt type in config: ${e._type}`)}}}class Qp extends Ea{async formatPromptValue(e){const t=await this.format(e);return new Gp(t)}}class Xp extends rt{parseResultWithPrompt(e,t,n){return this.parseResult(e,n)}}class em extends Xp{parseResult(e,t){return this.parse(e[0].text,t)}async parseWithPrompt(e,t,n){return this.parse(e,n)}_type(){throw new Error("_type not implemented")}}class tm extends em{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","default"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}parse(e){return Promise.resolve(e)}getFormatInstructions(){return""}}class ze extends Gr{get inputKeys(){return this.prompt.inputVariables}get outputKeys(){return[this.outputKey]}constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"llm",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"llmKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputKey",{enumerable:!0,configurable:!0,writable:!0,value:"text"}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt,this.llm=e.llm,this.llmKwargs=e.llmKwargs,this.outputKey=e.outputKey??this.outputKey,this.outputParser=e.outputParser??new tm,this.prompt.outputParser){if(e.outputParser)throw new Error("Cannot set both outputParser and prompt.outputParser");this.outputParser=this.prompt.outputParser}}_selectMemoryInputs(e){const t=super._selectMemoryInputs(e);for(const n of this.llm.callKeys)n in e&&delete t[n];return t}async _getFinalOutput(e,t,n){let s;return this.outputParser?s=await this.outputParser.parseResultWithPrompt(e,t,n==null?void 0:n.getChild()):s=e[0].text,s}call(e,t){return super.call(e,t)}async _call(e,t){const n={...e},s={...this.llmKwargs};for(const o of this.llm.callKeys)o in e&&(s[o]=e[o],delete n[o]);const a=await this.prompt.formatPromptValue(n),{generations:i}=await this.llm.generatePrompt([a],s,t==null?void 0:t.getChild());return{[this.outputKey]:await this._getFinalOutput(i[0],a,t)}}async predict(e,t){return(await this.call(e,t))[this.outputKey]}_chainType(){return"llm"}static async deserialize(e){const{llm:t,prompt:n}=e;if(!t)throw new Error("LLMChain must have llm");if(!n)throw new Error("LLMChain must have prompt");return new ze({llm:await ju.deserialize(t),prompt:await Ea.deserialize(n)})}serialize(){return{_type:`${this._chainType()}_chain`,llm:this.llm.serialize(),prompt:this.prompt.serialize()}}}const rm=Object.freeze(Object.defineProperty({__proto__:null,LLMChain:ze},Symbol.toStringTag,{value:"Module"})),Iu=r=>{const e=r.split(""),t=[],n=(a,i)=>{for(let o=i;o<e.length;o+=1)if(a.includes(e[o]))return o;return-1};let s=0;for(;s<e.length;)if(e[s]==="{"&&s+1<e.length&&e[s+1]==="{")t.push({type:"literal",text:"{"}),s+=2;else if(e[s]==="}"&&s+1<e.length&&e[s+1]==="}")t.push({type:"literal",text:"}"}),s+=2;else if(e[s]==="{"){const a=n("}",s);if(a<0)throw new Error("Unclosed '{' in template.");t.push({type:"variable",name:e.slice(s+1,a).join("")}),s=a+1}else{if(e[s]==="}")throw new Error("Single '}' in template.");{const a=n("{}",s),i=(a<0?e.slice(s):e.slice(s,a)).join("");t.push({type:"literal",text:i}),s=a<0?e.length:a}}return t},nm=(r,e)=>Iu(r).reduce((t,n)=>{if(n.type==="variable"){if(n.name in e)return t+e[n.name];throw new Error(`Missing value for input ${n.name}`)}return t+n.text},""),Ks={"f-string":nm,jinja2:(r,e)=>""},sm={"f-string":Iu,jinja2:r=>[]},Ru=(r,e,t)=>Ks[e](r,t),am=(r,e)=>sm[e](r),im=(r,e,t)=>{if(!(e in Ks)){const n=Object.keys(Ks);throw new Error(`Invalid template format. Got \`${e}\`;
                         should be one of ${n}`)}try{const n=t.reduce((s,a)=>(s[a]="foo",s),{});Ru(r,e,n)}catch(n){throw new Error(`Invalid prompt schema: ${n.message}`)}};class Re extends Qp{constructor(e){if(super(e),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,e),this.validateTemplate){let t=this.inputVariables;this.partialVariables&&(t=t.concat(Object.keys(this.partialVariables))),im(this.template,this.templateFormat,t)}}_getPromptType(){return"prompt"}async format(e){const t=await this.mergePartialAndUserVariables(e);return Ru(this.template,this.templateFormat,t)}static fromExamples(e,t,n,s=`

`,a=""){const i=[a,...e,t].join(s);return new Re({inputVariables:n,template:i})}static fromTemplate(e,{templateFormat:t="f-string",...n}={}){const s=new Set;return am(e,t).forEach(a=>{a.type==="variable"&&s.add(a.name)}),new Re({inputVariables:[...s],templateFormat:t,template:e,...n})}async partial(e){const t={...this};return t.inputVariables=this.inputVariables.filter(n=>!(n in e)),t.partialVariables={...this.partialVariables??{},...e},new Re(t)}serialize(){if(this.outputParser!==void 0)throw new Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static async deserialize(e){if(!e.template)throw new Error("Prompt template must have a template");return new Re({inputVariables:e.input_variables,template:e.template,templateFormat:e.template_format})}}const Fi=Object.freeze(Object.defineProperty({__proto__:null,PromptTemplate:Re},Symbol.toStringTag,{value:"Module"}));class hr extends Gr{get inputKeys(){return[this.inputKey,...this.llmChain.inputKeys].filter(e=>e!==this.documentVariableName)}get outputKeys(){return this.llmChain.outputKeys}constructor(e){super(e),Object.defineProperty(this,"llmChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"input_documents"}),Object.defineProperty(this,"documentVariableName",{enumerable:!0,configurable:!0,writable:!0,value:"context"}),this.llmChain=e.llmChain,this.documentVariableName=e.documentVariableName??this.documentVariableName,this.inputKey=e.inputKey??this.inputKey}_prepInputs(e){if(!(this.inputKey in e))throw new Error(`Document key ${this.inputKey} not found.`);const{[this.inputKey]:t,...n}=e,a=t.map(({pageContent:i})=>i).join(`

`);return{...n,[this.documentVariableName]:a}}async _call(e,t){return await this.llmChain.call(this._prepInputs(e),t==null?void 0:t.getChild("combine_documents"))}_chainType(){return"stuff_documents_chain"}static async deserialize(e){if(!e.llm_chain)throw new Error("Missing llm_chain");return new hr({llmChain:await ze.deserialize(e.llm_chain)})}serialize(){return{_type:this._chainType(),llm_chain:this.llmChain.serialize()}}}class zn extends Gr{get inputKeys(){return[this.inputKey,...this.combineDocumentChain.inputKeys]}get outputKeys(){return this.combineDocumentChain.outputKeys}constructor(e){super(e),Object.defineProperty(this,"llmChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"input_documents"}),Object.defineProperty(this,"documentVariableName",{enumerable:!0,configurable:!0,writable:!0,value:"context"}),Object.defineProperty(this,"returnIntermediateSteps",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:3e3}),Object.defineProperty(this,"maxIterations",{enumerable:!0,configurable:!0,writable:!0,value:10}),Object.defineProperty(this,"ensureMapStep",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"combineDocumentChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.llmChain=e.llmChain,this.combineDocumentChain=e.combineDocumentChain,this.documentVariableName=e.documentVariableName??this.documentVariableName,this.ensureMapStep=e.ensureMapStep??this.ensureMapStep,this.inputKey=e.inputKey??this.inputKey,this.maxTokens=e.maxTokens??this.maxTokens,this.maxIterations=e.maxIterations??this.maxIterations,this.returnIntermediateSteps=e.returnIntermediateSteps??!1}async _call(e,t){if(!(this.inputKey in e))throw new Error(`Document key ${this.inputKey} not found.`);const{[this.inputKey]:n,...s}=e;let a=n,i=[];for(let c=0;c<this.maxIterations;c+=1){const l=a.map(m=>({[this.documentVariableName]:m.pageContent,...s}));if(c!==0||!this.ensureMapStep){const m=await this.combineDocumentChain.llmChain.prompt.format(this.combineDocumentChain._prepInputs({[this.combineDocumentChain.inputKey]:a,...s}));if(await this.combineDocumentChain.llmChain.llm.getNumTokens(m)<this.maxTokens)break}const h=await this.llmChain.apply(l,t?Array.from({length:l.length},(m,w)=>t.getChild(`map_${w+1}`)):void 0),{outputKey:b}=this.llmChain;this.returnIntermediateSteps&&(i=i.concat(h.map(m=>m[b]))),a=h.map(m=>({pageContent:m[b],metadata:{}}))}const o={[this.combineDocumentChain.inputKey]:a,...s},u=await this.combineDocumentChain.call(o,t==null?void 0:t.getChild("combine_documents"));return this.returnIntermediateSteps?{...u,intermediateSteps:i}:u}_chainType(){return"map_reduce_documents_chain"}static async deserialize(e){if(!e.llm_chain)throw new Error("Missing llm_chain");if(!e.combine_document_chain)throw new Error("Missing combine_document_chain");return new zn({llmChain:await ze.deserialize(e.llm_chain),combineDocumentChain:await hr.deserialize(e.combine_document_chain)})}serialize(){return{_type:this._chainType(),llm_chain:this.llmChain.serialize(),combine_document_chain:this.combineDocumentChain.serialize()}}}class Hn extends Gr{get defaultDocumentPrompt(){return new Re({inputVariables:["page_content"],template:"{page_content}"})}get inputKeys(){return[...new Set([this.inputKey,...this.llmChain.inputKeys,...this.refineLLMChain.inputKeys])].filter(e=>e!==this.documentVariableName&&e!==this.initialResponseName)}get outputKeys(){return[this.outputKey]}constructor(e){super(e),Object.defineProperty(this,"llmChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"input_documents"}),Object.defineProperty(this,"outputKey",{enumerable:!0,configurable:!0,writable:!0,value:"output_text"}),Object.defineProperty(this,"documentVariableName",{enumerable:!0,configurable:!0,writable:!0,value:"context"}),Object.defineProperty(this,"initialResponseName",{enumerable:!0,configurable:!0,writable:!0,value:"existing_answer"}),Object.defineProperty(this,"refineLLMChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"documentPrompt",{enumerable:!0,configurable:!0,writable:!0,value:this.defaultDocumentPrompt}),this.llmChain=e.llmChain,this.refineLLMChain=e.refineLLMChain,this.documentVariableName=e.documentVariableName??this.documentVariableName,this.inputKey=e.inputKey??this.inputKey,this.outputKey=e.outputKey??this.outputKey,this.documentPrompt=e.documentPrompt??this.documentPrompt,this.initialResponseName=e.initialResponseName??this.initialResponseName}async _constructInitialInputs(e,t){const n={page_content:e.pageContent,...e.metadata},s={};return this.documentPrompt.inputVariables.forEach(o=>{s[o]=n[o]}),{...{[this.documentVariableName]:await this.documentPrompt.format({...s})},...t}}async _constructRefineInputs(e,t){const n={page_content:e.pageContent,...e.metadata},s={};this.documentPrompt.inputVariables.forEach(o=>{s[o]=n[o]});const a={[this.documentVariableName]:await this.documentPrompt.format({...s})};return{[this.initialResponseName]:t,...a}}async _call(e,t){if(!(this.inputKey in e))throw new Error(`Document key ${this.inputKey} not found.`);const{[this.inputKey]:n,...s}=e,a=n,i=await this._constructInitialInputs(a[0],s);let o=await this.llmChain.predict({...i},t==null?void 0:t.getChild("answer"));for(let u=1;u<a.length;u+=1){const l={...await this._constructRefineInputs(a[u],o),...s};o=await this.refineLLMChain.predict({...l},t==null?void 0:t.getChild("refine"))}return{[this.outputKey]:o}}_chainType(){return"refine_documents_chain"}static async deserialize(e){const t=e.llm_chain;if(!t)throw new Error("Missing llm_chain");const n=e.refine_llm_chain;if(!n)throw new Error("Missing refine_llm_chain");return new Hn({llmChain:await ze.deserialize(t),refineLLMChain:await ze.deserialize(n)})}serialize(){return{_type:this._chainType(),llm_chain:this.llmChain.serialize(),refine_llm_chain:this.refineLLMChain.serialize()}}}const Ds=Object.freeze(Object.defineProperty({__proto__:null,MapReduceDocumentsChain:zn,RefineDocumentsChain:Hn,StuffDocumentsChain:hr},Symbol.toStringTag,{value:"Module"}));class om extends rt{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}}class um extends Vo{constructor(e){Array.isArray(e)&&(e={messages:e}),super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return JSON.stringify(this.messages)}toChatMessages(){return this.messages}}class Aa extends om{constructor(e){"prompt"in e||(e={prompt:e}),super(e),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt}get inputVariables(){return this.prompt.inputVariables}async formatMessages(e){return[await this.format(e)]}}class cm extends Ea{constructor(e){super(e)}async format(e){return(await this.formatPromptValue(e)).toString()}async formatPromptValue(e){const t=await this.formatMessages(e);return new um(t)}}class Xt extends Aa{async format(e){return new Uo(await this.prompt.format(e))}static fromTemplate(e){return new this(Re.fromTemplate(e))}}class lm extends Aa{async format(e){return new Bo(await this.prompt.format(e))}static fromTemplate(e){return new this(Re.fromTemplate(e))}}class Zn extends Aa{async format(e){return new fd(await this.prompt.format(e))}static fromTemplate(e){return new this(Re.fromTemplate(e))}}class dt extends cm{get lc_aliases(){return{promptMessages:"messages"}}constructor(e){if(super(e),Object.defineProperty(this,"promptMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,e),this.validateTemplate){const t=new Set;for(const i of this.promptMessages)for(const o of i.inputVariables)t.add(o);const n=new Set(this.partialVariables?this.inputVariables.concat(Object.keys(this.partialVariables)):this.inputVariables),s=new Set([...n].filter(i=>!t.has(i)));if(s.size>0)throw new Error(`Input variables \`${[...s]}\` are not used in any of the prompt messages.`);const a=new Set([...t].filter(i=>!n.has(i)));if(a.size>0)throw new Error(`Input variables \`${[...a]}\` are used in prompt messages but not in the prompt template.`)}}_getPromptType(){return"chat"}async formatMessages(e){const t=await this.mergePartialAndUserVariables(e);let n=[];for(const s of this.promptMessages){const a=s.inputVariables.reduce((o,u)=>{if(!(u in t))throw new Error(`Missing value for input variable \`${u}\``);return o[u]=t[u],o},{}),i=await s.formatMessages(a);n=n.concat(i)}return n}async partial(e){const t={...this};return t.inputVariables=this.inputVariables.filter(n=>!(n in e)),t.partialVariables={...this.partialVariables??{},...e},new dt(t)}static fromPromptMessages(e){const t=e.reduce((a,i)=>a.concat(i instanceof dt?i.promptMessages:[i]),[]),n=e.reduce((a,i)=>i instanceof dt?Object.assign(a,i.partialVariables):a,Object.create(null)),s=new Set;for(const a of t)for(const i of a.inputVariables)i in n||s.add(i);return new dt({inputVariables:[...s],promptMessages:t,partialVariables:n})}}class dm{async getPromptAsync(e,t){return this.getPrompt(e).partial((t==null?void 0:t.partialVariables)??{})}}class Qr extends dm{constructor(e,t=[]){super(),Object.defineProperty(this,"defaultPrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"conditionals",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.defaultPrompt=e,this.conditionals=t}getPrompt(e){for(const[t,n]of this.conditionals)if(t(e))return n;return this.defaultPrompt}}function Xr(r){return r._modelType()==="base_chat_model"}const hm=new Re({template:`Use the following pieces of context to answer the question at the end. If you don't know the answer, just say that you don't know, don't try to make up an answer.

{context}

Question: {question}
Helpful Answer:`,inputVariables:["context","question"]}),fm=`Use the following pieces of context to answer the users question. 
If you don't know the answer, just say that you don't know, don't try to make up an answer.
----------------
{context}`,pm=[Zn.fromTemplate(fm),Xt.fromTemplate("{question}")],mm=dt.fromPromptMessages(pm),ym=new Qr(hm,[[Xr,mm]]),gm=`Use the following portion of a long document to see if any of the text is relevant to answer the question. 
Return any relevant text verbatim.
{context}
Question: {question}
Relevant text, if any:`,bm=Re.fromTemplate(gm),_m=`Use the following portion of a long document to see if any of the text is relevant to answer the question. 
Return any relevant text verbatim.
----------------
{context}`,vm=[Zn.fromTemplate(_m),Xt.fromTemplate("{question}")],wm=dt.fromPromptMessages(vm),Om=new Qr(bm,[[Xr,wm]]),Em=`Given the following extracted parts of a long document and a question, create a final answer. 
If you don't know the answer, just say that you don't know. Don't try to make up an answer.

QUESTION: Which state/country's law governs the interpretation of the contract?
=========
Content: This Agreement is governed by English law and the parties submit to the exclusive jurisdiction of the English courts in  relation to any dispute (contractual or non-contractual) concerning this Agreement save that either party may apply to any court for an  injunction or other relief to protect its Intellectual Property Rights.

Content: No Waiver. Failure or delay in exercising any right or remedy under this Agreement shall not constitute a waiver of such (or any other)  right or remedy.

11.7 Severability. The invalidity, illegality or unenforceability of any term (or part of a term) of this Agreement shall not affect the continuation  in force of the remainder of the term (if any) and this Agreement.

11.8 No Agency. Except as expressly stated otherwise, nothing in this Agreement shall create an agency, partnership or joint venture of any  kind between the parties.

11.9 No Third-Party Beneficiaries.

Content: (b) if Google believes, in good faith, that the Distributor has violated or caused Google to violate any Anti-Bribery Laws (as  defined in Clause 8.5) or that such a violation is reasonably likely to occur,
=========
FINAL ANSWER: This Agreement is governed by English law.

QUESTION: What did the president say about Michael Jackson?
=========
Content: Madam Speaker, Madam Vice President, our First Lady and Second Gentleman. Members of Congress and the Cabinet. Justices of the Supreme Court. My fellow Americans.  

Last year COVID-19 kept us apart. This year we are finally together again. 

Tonight, we meet as Democrats Republicans and Independents. But most importantly as Americans. 

With a duty to one another to the American people to the Constitution. 

And with an unwavering resolve that freedom will always triumph over tyranny. 

Six days ago, Russias Vladimir Putin sought to shake the foundations of the free world thinking he could make it bend to his menacing ways. But he badly miscalculated. 

He thought he could roll into Ukraine and the world would roll over. Instead he met a wall of strength he never imagined. 

He met the Ukrainian people. 

From President Zelenskyy to every Ukrainian, their fearlessness, their courage, their determination, inspires the world. 

Groups of citizens blocking tanks with their bodies. Everyone from students to retirees teachers turned soldiers defending their homeland.

Content: And we wont stop. 

We have lost so much to COVID-19. Time with one another. And worst of all, so much loss of life. 

Lets use this moment to reset. Lets stop looking at COVID-19 as a partisan dividing line and see it for what it is: A God-awful disease.  

Lets stop seeing each other as enemies, and start seeing each other for who we really are: Fellow Americans.  

We cant change how divided weve been. But we can change how we move forwardon COVID-19 and other issues we must face together. 

I recently visited the New York City Police Department days after the funerals of Officer Wilbert Mora and his partner, Officer Jason Rivera. 

They were responding to a 9-1-1 call when a man shot and killed them with a stolen gun. 

Officer Mora was 27 years old. 

Officer Rivera was 22. 

Both Dominican Americans whod grown up on the same streets they later chose to patrol as police officers. 

I spoke with their families and told them that we are forever in debt for their sacrifice, and we will carry on their mission to restore the trust and safety every community deserves.

Content: And a proud Ukrainian people, who have known 30 years  of independence, have repeatedly shown that they will not tolerate anyone who tries to take their country backwards.  

To all Americans, I will be honest with you, as Ive always promised. A Russian dictator, invading a foreign country, has costs around the world. 

And Im taking robust action to make sure the pain of our sanctions  is targeted at Russias economy. And I will use every tool at our disposal to protect American businesses and consumers. 

Tonight, I can announce that the United States has worked with 30 other countries to release 60 Million barrels of oil from reserves around the world.  

America will lead that effort, releasing 30 Million barrels from our own Strategic Petroleum Reserve. And we stand ready to do more if necessary, unified with our allies.  

These steps will help blunt gas prices here at home. And I know the news about whats happening can seem alarming. 

But I want you to know that we are going to be okay.

Content: More support for patients and families. 

To get there, I call on Congress to fund ARPA-H, the Advanced Research Projects Agency for Health. 

Its based on DARPAthe Defense Department project that led to the Internet, GPS, and so much more.  

ARPA-H will have a singular purposeto drive breakthroughs in cancer, Alzheimers, diabetes, and more. 

A unity agenda for the nation. 

We can do this. 

My fellow Americanstonight , we have gathered in a sacred spacethe citadel of our democracy. 

In this Capitol, generation after generation, Americans have debated great questions amid great strife, and have done great things. 

We have fought for freedom, expanded liberty, defeated totalitarianism and terror. 

And built the strongest, freest, and most prosperous nation the world has ever known. 

Now is the hour. 

Our moment of responsibility. 

Our test of resolve and conscience, of history itself. 

It is in this moment that our character is formed. Our purpose is found. Our future is forged. 

Well I know this nation.
=========
FINAL ANSWER: The president did not mention Michael Jackson.

QUESTION: {question}
=========
{summaries}
=========
FINAL ANSWER:`,Am=Re.fromTemplate(Em),Pm=`Given the following extracted parts of a long document and a question, create a final answer. 
If you don't know the answer, just say that you don't know. Don't try to make up an answer.
----------------
{summaries}`,xm=[Zn.fromTemplate(Pm),Xt.fromTemplate("{question}")],Tm=dt.fromPromptMessages(xm),Sm=new Qr(Am,[[Xr,Tm]]),Cm=`The original question is as follows: {question}
We have provided an existing answer: {existing_answer}
We have the opportunity to refine the existing answer
(only if needed) with some more context below.
------------
{context}
------------
Given the new context, refine the original answer to better answer the question. 
If the context isn't useful, return the original answer.`,km=new Re({inputVariables:["question","existing_answer","context"],template:Cm}),jm=`The original question is as follows: {question}
We have provided an existing answer: {existing_answer}
We have the opportunity to refine the existing answer
(only if needed) with some more context below.
------------
{context}
------------
Given the new context, refine the original answer to better answer the question. 
If the context isn't useful, return the original answer.`,Im=[Xt.fromTemplate("{question}"),lm.fromTemplate("{existing_answer}"),Xt.fromTemplate(jm)],Rm=dt.fromPromptMessages(Im),Nm=new Qr(km,[[Xr,Rm]]),Dm=`Context information is below. 
---------------------
{context}
---------------------
Given the context information and not prior knowledge, answer the question: {question}`,Lm=new Re({inputVariables:["context","question"],template:Dm}),Mm=`Context information is below. 
---------------------
{context}
---------------------
Given the context information and not prior knowledge, answer any questions`,Fm=[Zn.fromTemplate(Mm),Xt.fromTemplate("{question}")],Um=dt.fromPromptMessages(Fm),Bm=new Qr(Lm,[[Xr,Um]]),Vm=(r,e={type:"stuff"})=>{const{type:t}=e;if(t==="stuff")return $m(r,e);if(t==="map_reduce")return qm(r,e);if(t==="refine")return zm(r,e);throw new Error(`Invalid _type: ${t}`)};function $m(r,e={}){const{prompt:t=ym.getPrompt(r),verbose:n}=e,s=new ze({prompt:t,llm:r,verbose:n});return new hr({llmChain:s,verbose:n})}function qm(r,e={}){const{combineMapPrompt:t=Om.getPrompt(r),combinePrompt:n=Sm.getPrompt(r),verbose:s,returnIntermediateSteps:a}=e,i=new ze({prompt:t,llm:r,verbose:s}),o=new ze({prompt:n,llm:r,verbose:s}),u=new hr({llmChain:o,documentVariableName:"summaries",verbose:s});return new zn({llmChain:i,combineDocumentChain:u,returnIntermediateSteps:a,verbose:s})}function zm(r,e={}){const{questionPrompt:t=Bm.getPrompt(r),refinePrompt:n=Nm.getPrompt(r),verbose:s}=e,a=new ze({prompt:t,llm:r,verbose:s}),i=new ze({prompt:n,llm:r,verbose:s});return new Hn({llmChain:a,refineLLMChain:i,verbose:s})}const Hm=`Given the following conversation and a follow up question, rephrase the follow up question to be a standalone question.

Chat History:
{chat_history}
Follow Up Input: {question}
Standalone question:`;class Pa extends Gr{get inputKeys(){return[this.inputKey,this.chatHistoryKey]}get outputKeys(){return this.combineDocumentsChain.outputKeys.concat(this.returnSourceDocuments?["sourceDocuments"]:[])}constructor(e){super(e),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"question"}),Object.defineProperty(this,"chatHistoryKey",{enumerable:!0,configurable:!0,writable:!0,value:"chat_history"}),Object.defineProperty(this,"retriever",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"combineDocumentsChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"questionGeneratorChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSourceDocuments",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.retriever=e.retriever,this.combineDocumentsChain=e.combineDocumentsChain,this.questionGeneratorChain=e.questionGeneratorChain,this.inputKey=e.inputKey??this.inputKey,this.returnSourceDocuments=e.returnSourceDocuments??this.returnSourceDocuments}static getChatHistoryString(e){return Array.isArray(e)?e.map(t=>t._getType()==="human"?`Human: ${t.content}`:t._getType()==="ai"?`Assistant: ${t.content}`:`${t.content}`).join(`
`):e}async _call(e,t){if(!(this.inputKey in e))throw new Error(`Question key ${this.inputKey} not found.`);if(!(this.chatHistoryKey in e))throw new Error(`Chat history key ${this.chatHistoryKey} not found.`);const n=e[this.inputKey],s=Pa.getChatHistoryString(e[this.chatHistoryKey]);let a=n;if(s.length>0){const c=await this.questionGeneratorChain.call({question:n,chat_history:s},t==null?void 0:t.getChild("question_generator")),l=Object.keys(c);if(l.length===1)a=c[l[0]];else throw new Error("Return from llm chain has multiple values, only single values supported.")}const i=await this.retriever.getRelevantDocuments(a),o={question:a,input_documents:i,chat_history:s},u=await this.combineDocumentsChain.call(o,t==null?void 0:t.getChild("combine_documents"));return this.returnSourceDocuments?{...u,sourceDocuments:i}:u}_chainType(){return"conversational_retrieval_chain"}static async deserialize(e,t){throw new Error("Not implemented.")}serialize(){throw new Error("Not implemented.")}static fromLLM(e,t,n={}){const{questionGeneratorTemplate:s,qaTemplate:a,qaChainOptions:i={type:"stuff",prompt:a?Re.fromTemplate(a):void 0},questionGeneratorChainOptions:o,verbose:u,...c}=n,l=Vm(e,i),d=Re.fromTemplate((o==null?void 0:o.template)??s??Hm),h=new ze({prompt:d,llm:(o==null?void 0:o.llm)??e,verbose:u});return new this({retriever:t,combineDocumentsChain:l,questionGeneratorChain:h,verbose:u,...c})}}var fe;(function(r){r.assertEqual=s=>s;function e(s){}r.assertIs=e;function t(s){throw new Error}r.assertNever=t,r.arrayToEnum=s=>{const a={};for(const i of s)a[i]=i;return a},r.getValidEnumValues=s=>{const a=r.objectKeys(s).filter(o=>typeof s[s[o]]!="number"),i={};for(const o of a)i[o]=s[o];return r.objectValues(i)},r.objectValues=s=>r.objectKeys(s).map(function(a){return s[a]}),r.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const a=[];for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&a.push(i);return a},r.find=(s,a)=>{for(const i of s)if(a(i))return i},r.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,a=" | "){return s.map(i=>typeof i=="string"?`'${i}'`:i).join(a)}r.joinValues=n,r.jsonStringifyReplacer=(s,a)=>typeof a=="bigint"?a.toString():a})(fe||(fe={}));var An;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(An||(An={}));const z=fe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),gt=r=>{switch(typeof r){case"undefined":return z.undefined;case"string":return z.string;case"number":return isNaN(r)?z.nan:z.number;case"boolean":return z.boolean;case"function":return z.function;case"bigint":return z.bigint;case"symbol":return z.symbol;case"object":return Array.isArray(r)?z.array:r===null?z.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?z.promise:typeof Map<"u"&&r instanceof Map?z.map:typeof Set<"u"&&r instanceof Set?z.set:typeof Date<"u"&&r instanceof Date?z.date:z.object;default:return z.unknown}},M=fe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Nu=r=>JSON.stringify(r,null,2).replace(/"([^"]+)":/g,"$1:");class Ge extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(a){return a.message},n={_errors:[]},s=a=>{for(const i of a.issues)if(i.code==="invalid_union")i.unionErrors.map(s);else if(i.code==="invalid_return_type")s(i.returnTypeError);else if(i.code==="invalid_arguments")s(i.argumentsError);else if(i.path.length===0)n._errors.push(t(i));else{let o=n,u=0;for(;u<i.path.length;){const c=i.path[u];u===i.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(t(i))):o[c]=o[c]||{_errors:[]},o=o[c],u++}}};return s(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,fe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}Ge.create=r=>new Ge(r);const er=(r,e)=>{let t;switch(r.code){case M.invalid_type:r.received===z.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case M.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,fe.jsonStringifyReplacer)}`;break;case M.unrecognized_keys:t=`Unrecognized key(s) in object: ${fe.joinValues(r.keys,", ")}`;break;case M.invalid_union:t="Invalid input";break;case M.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${fe.joinValues(r.options)}`;break;case M.invalid_enum_value:t=`Invalid enum value. Expected ${fe.joinValues(r.options)}, received '${r.received}'`;break;case M.invalid_arguments:t="Invalid function arguments";break;case M.invalid_return_type:t="Invalid function return type";break;case M.invalid_date:t="Invalid date";break;case M.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:fe.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case M.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case M.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case M.custom:t="Invalid input";break;case M.invalid_intersection_types:t="Intersection results could not be merged";break;case M.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case M.not_finite:t="Number must be finite";break;default:t=e.defaultError,fe.assertNever(r)}return{message:t}};let Du=er;function Lu(r){Du=r}function Dr(){return Du}const Lr=r=>{const{data:e,path:t,errorMaps:n,issueData:s}=r,a=[...t,...s.path||[]],i={...s,path:a};let o="";const u=n.filter(c=>!!c).slice().reverse();for(const c of u)o=c(i,{data:e,defaultError:o}).message;return{...s,path:a,message:s.message||o}},Mu=[];function Z(r,e){const t=Lr({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Dr(),er].filter(n=>!!n)});r.common.issues.push(t)}class Ne{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const s of t){if(s.status==="aborted")return ae;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const s of t)n.push({key:await s.key,value:await s.value});return Ne.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const s of t){const{key:a,value:i}=s;if(a.status==="aborted"||i.status==="aborted")return ae;a.status==="dirty"&&e.dirty(),i.status==="dirty"&&e.dirty(),(typeof i.value<"u"||s.alwaysSet)&&(n[a.value]=i.value)}return{status:e.value,value:n}}}const ae=Object.freeze({status:"aborted"}),xa=r=>({status:"dirty",value:r}),Fe=r=>({status:"valid",value:r}),Pn=r=>r.status==="aborted",xn=r=>r.status==="dirty",Mr=r=>r.status==="valid",Fr=r=>typeof Promise<"u"&&r instanceof Promise;var X;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(X||(X={}));class ft{constructor(e,t,n,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Ui=(r,e)=>{if(Mr(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Ge(r.common.issues);return this._error=t,this._error}}};function oe(r){if(!r)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:s}=r;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(i,o)=>i.code!=="invalid_type"?{message:o.defaultError}:typeof o.data>"u"?{message:n??o.defaultError}:{message:t??o.defaultError},description:s}}class ie{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return gt(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:gt(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ne,ctx:{common:e.parent.common,data:e.data,parsedType:gt(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Fr(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const s={common:{issues:[],async:(n=t==null?void 0:t.async)!==null&&n!==void 0?n:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:gt(e)},a=this._parseSync({data:e,path:s.path,parent:s});return Ui(s,a)}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:gt(e)},s=this._parse({data:e,path:n.path,parent:n}),a=await(Fr(s)?s:Promise.resolve(s));return Ui(n,a)}refine(e,t){const n=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,a)=>{const i=e(s),o=()=>a.addIssue({code:M.custom,...n(s)});return typeof Promise<"u"&&i instanceof Promise?i.then(u=>u?!0:(o(),!1)):i?!0:(o(),!1)})}refinement(e,t){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof t=="function"?t(n,s):t),!1))}_refinement(e){return new He({schema:this,typeName:re.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ht.create(this,this._def)}nullable(){return It.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Qe.create(this,this._def)}promise(){return Vt.create(this,this._def)}or(e){return sr.create([this,e],this._def)}and(e){return ar.create(this,e,this._def)}transform(e){return new He({...oe(this._def),schema:this,typeName:re.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new lr({...oe(this._def),innerType:this,defaultValue:t,typeName:re.ZodDefault})}brand(){return new Ta({typeName:re.ZodBranded,type:this,...oe(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new $r({...oe(this._def),innerType:this,catchValue:t,typeName:re.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return fr.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Zm=/^c[^\s-]{8,}$/i,Km=/^[a-z][a-z0-9]*$/,Ym=/[0-9A-HJKMNP-TV-Z]{26}/,Jm=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,Wm=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,Gm=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,Qm=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,Xm=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ey=r=>r.precision?r.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${r.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${r.precision}}Z$`):r.precision===0?r.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):r.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function ty(r,e){return!!((e==="v4"||!e)&&Qm.test(r)||(e==="v6"||!e)&&Xm.test(r))}class Je extends ie{constructor(){super(...arguments),this._regex=(e,t,n)=>this.refinement(s=>e.test(s),{validation:t,code:M.invalid_string,...X.errToObj(n)}),this.nonempty=e=>this.min(1,X.errToObj(e)),this.trim=()=>new Je({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new Je({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new Je({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==z.string){const a=this._getOrReturnCtx(e);return Z(a,{code:M.invalid_type,expected:z.string,received:a.parsedType}),ae}const n=new Ne;let s;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(s=this._getOrReturnCtx(e,s),Z(s,{code:M.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")e.data.length>a.value&&(s=this._getOrReturnCtx(e,s),Z(s,{code:M.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){const i=e.data.length>a.value,o=e.data.length<a.value;(i||o)&&(s=this._getOrReturnCtx(e,s),i?Z(s,{code:M.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):o&&Z(s,{code:M.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")Wm.test(e.data)||(s=this._getOrReturnCtx(e,s),Z(s,{validation:"email",code:M.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")Gm.test(e.data)||(s=this._getOrReturnCtx(e,s),Z(s,{validation:"emoji",code:M.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")Jm.test(e.data)||(s=this._getOrReturnCtx(e,s),Z(s,{validation:"uuid",code:M.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")Zm.test(e.data)||(s=this._getOrReturnCtx(e,s),Z(s,{validation:"cuid",code:M.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")Km.test(e.data)||(s=this._getOrReturnCtx(e,s),Z(s,{validation:"cuid2",code:M.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")Ym.test(e.data)||(s=this._getOrReturnCtx(e,s),Z(s,{validation:"ulid",code:M.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Z(s,{validation:"url",code:M.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Z(s,{validation:"regex",code:M.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(s=this._getOrReturnCtx(e,s),Z(s,{code:M.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(s=this._getOrReturnCtx(e,s),Z(s,{code:M.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(s=this._getOrReturnCtx(e,s),Z(s,{code:M.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?ey(a).test(e.data)||(s=this._getOrReturnCtx(e,s),Z(s,{code:M.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="ip"?ty(e.data,a.version)||(s=this._getOrReturnCtx(e,s),Z(s,{validation:"ip",code:M.invalid_string,message:a.message}),n.dirty()):fe.assertNever(a);return{status:n.value,value:e.data}}_addCheck(e){return new Je({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...X.errToObj(e)})}url(e){return this._addCheck({kind:"url",...X.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...X.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...X.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...X.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...X.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...X.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...X.errToObj(e)})}datetime(e){var t;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,...X.errToObj(e==null?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...X.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...X.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...X.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...X.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...X.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...X.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...X.errToObj(t)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Je.create=r=>{var e;return new Je({checks:[],typeName:re.ZodString,coerce:(e=r==null?void 0:r.coerce)!==null&&e!==void 0?e:!1,...oe(r)})};function ry(r,e){const t=(r.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=t>n?t:n,a=parseInt(r.toFixed(s).replace(".","")),i=parseInt(e.toFixed(s).replace(".",""));return a%i/Math.pow(10,s)}class Ot extends ie{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==z.number){const a=this._getOrReturnCtx(e);return Z(a,{code:M.invalid_type,expected:z.number,received:a.parsedType}),ae}let n;const s=new Ne;for(const a of this._def.checks)a.kind==="int"?fe.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),Z(n,{code:M.invalid_type,expected:"integer",received:"float",message:a.message}),s.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),Z(n,{code:M.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),Z(n,{code:M.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="multipleOf"?ry(e.data,a.value)!==0&&(n=this._getOrReturnCtx(e,n),Z(n,{code:M.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),Z(n,{code:M.not_finite,message:a.message}),s.dirty()):fe.assertNever(a);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,X.toString(t))}gt(e,t){return this.setLimit("min",e,!1,X.toString(t))}lte(e,t){return this.setLimit("max",e,!0,X.toString(t))}lt(e,t){return this.setLimit("max",e,!1,X.toString(t))}setLimit(e,t,n,s){return new Ot({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:X.toString(s)}]})}_addCheck(e){return new Ot({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:X.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:X.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:X.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:X.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:X.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:X.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:X.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:X.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:X.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&fe.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Ot.create=r=>new Ot({checks:[],typeName:re.ZodNumber,coerce:(r==null?void 0:r.coerce)||!1,...oe(r)});class Et extends ie{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==z.bigint){const a=this._getOrReturnCtx(e);return Z(a,{code:M.invalid_type,expected:z.bigint,received:a.parsedType}),ae}let n;const s=new Ne;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),Z(n,{code:M.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),Z(n,{code:M.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),Z(n,{code:M.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):fe.assertNever(a);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,X.toString(t))}gt(e,t){return this.setLimit("min",e,!1,X.toString(t))}lte(e,t){return this.setLimit("max",e,!0,X.toString(t))}lt(e,t){return this.setLimit("max",e,!1,X.toString(t))}setLimit(e,t,n,s){return new Et({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:X.toString(s)}]})}_addCheck(e){return new Et({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:X.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:X.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:X.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:X.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:X.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Et.create=r=>{var e;return new Et({checks:[],typeName:re.ZodBigInt,coerce:(e=r==null?void 0:r.coerce)!==null&&e!==void 0?e:!1,...oe(r)})};class tr extends ie{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==z.boolean){const n=this._getOrReturnCtx(e);return Z(n,{code:M.invalid_type,expected:z.boolean,received:n.parsedType}),ae}return Fe(e.data)}}tr.create=r=>new tr({typeName:re.ZodBoolean,coerce:(r==null?void 0:r.coerce)||!1,...oe(r)});class kt extends ie{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==z.date){const a=this._getOrReturnCtx(e);return Z(a,{code:M.invalid_type,expected:z.date,received:a.parsedType}),ae}if(isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return Z(a,{code:M.invalid_date}),ae}const n=new Ne;let s;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(s=this._getOrReturnCtx(e,s),Z(s,{code:M.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(s=this._getOrReturnCtx(e,s),Z(s,{code:M.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):fe.assertNever(a);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new kt({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:X.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:X.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}kt.create=r=>new kt({checks:[],coerce:(r==null?void 0:r.coerce)||!1,typeName:re.ZodDate,...oe(r)});class Ur extends ie{_parse(e){if(this._getType(e)!==z.symbol){const n=this._getOrReturnCtx(e);return Z(n,{code:M.invalid_type,expected:z.symbol,received:n.parsedType}),ae}return Fe(e.data)}}Ur.create=r=>new Ur({typeName:re.ZodSymbol,...oe(r)});class rr extends ie{_parse(e){if(this._getType(e)!==z.undefined){const n=this._getOrReturnCtx(e);return Z(n,{code:M.invalid_type,expected:z.undefined,received:n.parsedType}),ae}return Fe(e.data)}}rr.create=r=>new rr({typeName:re.ZodUndefined,...oe(r)});class nr extends ie{_parse(e){if(this._getType(e)!==z.null){const n=this._getOrReturnCtx(e);return Z(n,{code:M.invalid_type,expected:z.null,received:n.parsedType}),ae}return Fe(e.data)}}nr.create=r=>new nr({typeName:re.ZodNull,...oe(r)});class Bt extends ie{constructor(){super(...arguments),this._any=!0}_parse(e){return Fe(e.data)}}Bt.create=r=>new Bt({typeName:re.ZodAny,...oe(r)});class Ct extends ie{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Fe(e.data)}}Ct.create=r=>new Ct({typeName:re.ZodUnknown,...oe(r)});class pt extends ie{_parse(e){const t=this._getOrReturnCtx(e);return Z(t,{code:M.invalid_type,expected:z.never,received:t.parsedType}),ae}}pt.create=r=>new pt({typeName:re.ZodNever,...oe(r)});class Br extends ie{_parse(e){if(this._getType(e)!==z.undefined){const n=this._getOrReturnCtx(e);return Z(n,{code:M.invalid_type,expected:z.void,received:n.parsedType}),ae}return Fe(e.data)}}Br.create=r=>new Br({typeName:re.ZodVoid,...oe(r)});class Qe extends ie{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),s=this._def;if(t.parsedType!==z.array)return Z(t,{code:M.invalid_type,expected:z.array,received:t.parsedType}),ae;if(s.exactLength!==null){const i=t.data.length>s.exactLength.value,o=t.data.length<s.exactLength.value;(i||o)&&(Z(t,{code:i?M.too_big:M.too_small,minimum:o?s.exactLength.value:void 0,maximum:i?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&(Z(t,{code:M.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(Z(t,{code:M.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((i,o)=>s.type._parseAsync(new ft(t,i,t.path,o)))).then(i=>Ne.mergeArray(n,i));const a=[...t.data].map((i,o)=>s.type._parseSync(new ft(t,i,t.path,o)));return Ne.mergeArray(n,a)}get element(){return this._def.type}min(e,t){return new Qe({...this._def,minLength:{value:e,message:X.toString(t)}})}max(e,t){return new Qe({...this._def,maxLength:{value:e,message:X.toString(t)}})}length(e,t){return new Qe({...this._def,exactLength:{value:e,message:X.toString(t)}})}nonempty(e){return this.min(1,e)}}Qe.create=(r,e)=>new Qe({type:r,minLength:null,maxLength:null,exactLength:null,typeName:re.ZodArray,...oe(e)});function Yt(r){if(r instanceof ge){const e={};for(const t in r.shape){const n=r.shape[t];e[t]=ht.create(Yt(n))}return new ge({...r._def,shape:()=>e})}else return r instanceof Qe?new Qe({...r._def,type:Yt(r.element)}):r instanceof ht?ht.create(Yt(r.unwrap())):r instanceof It?It.create(Yt(r.unwrap())):r instanceof nt?nt.create(r.items.map(e=>Yt(e))):r}class ge extends ie{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=fe.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==z.object){const c=this._getOrReturnCtx(e);return Z(c,{code:M.invalid_type,expected:z.object,received:c.parsedType}),ae}const{status:n,ctx:s}=this._processInputParams(e),{shape:a,keys:i}=this._getCached(),o=[];if(!(this._def.catchall instanceof pt&&this._def.unknownKeys==="strip"))for(const c in s.data)i.includes(c)||o.push(c);const u=[];for(const c of i){const l=a[c],d=s.data[c];u.push({key:{status:"valid",value:c},value:l._parse(new ft(s,d,s.path,c)),alwaysSet:c in s.data})}if(this._def.catchall instanceof pt){const c=this._def.unknownKeys;if(c==="passthrough")for(const l of o)u.push({key:{status:"valid",value:l},value:{status:"valid",value:s.data[l]}});else if(c==="strict")o.length>0&&(Z(s,{code:M.unrecognized_keys,keys:o}),n.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const l of o){const d=s.data[l];u.push({key:{status:"valid",value:l},value:c._parse(new ft(s,d,s.path,l)),alwaysSet:l in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const c=[];for(const l of u){const d=await l.key;c.push({key:d,value:await l.value,alwaysSet:l.alwaysSet})}return c}).then(c=>Ne.mergeObjectSync(n,c)):Ne.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return X.errToObj,new ge({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var s,a,i,o;const u=(i=(a=(s=this._def).errorMap)===null||a===void 0?void 0:a.call(s,t,n).message)!==null&&i!==void 0?i:n.defaultError;return t.code==="unrecognized_keys"?{message:(o=X.errToObj(e).message)!==null&&o!==void 0?o:u}:{message:u}}}:{}})}strip(){return new ge({...this._def,unknownKeys:"strip"})}passthrough(){return new ge({...this._def,unknownKeys:"passthrough"})}extend(e){return new ge({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ge({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:re.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ge({...this._def,catchall:e})}pick(e){const t={};return fe.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])}),new ge({...this._def,shape:()=>t})}omit(e){const t={};return fe.objectKeys(this.shape).forEach(n=>{e[n]||(t[n]=this.shape[n])}),new ge({...this._def,shape:()=>t})}deepPartial(){return Yt(this)}partial(e){const t={};return fe.objectKeys(this.shape).forEach(n=>{const s=this.shape[n];e&&!e[n]?t[n]=s:t[n]=s.optional()}),new ge({...this._def,shape:()=>t})}required(e){const t={};return fe.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])t[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof ht;)a=a._def.innerType;t[n]=a}}),new ge({...this._def,shape:()=>t})}keyof(){return Fu(fe.objectKeys(this.shape))}}ge.create=(r,e)=>new ge({shape:()=>r,unknownKeys:"strip",catchall:pt.create(),typeName:re.ZodObject,...oe(e)});ge.strictCreate=(r,e)=>new ge({shape:()=>r,unknownKeys:"strict",catchall:pt.create(),typeName:re.ZodObject,...oe(e)});ge.lazycreate=(r,e)=>new ge({shape:r,unknownKeys:"strip",catchall:pt.create(),typeName:re.ZodObject,...oe(e)});class sr extends ie{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function s(a){for(const o of a)if(o.result.status==="valid")return o.result;for(const o of a)if(o.result.status==="dirty")return t.common.issues.push(...o.ctx.common.issues),o.result;const i=a.map(o=>new Ge(o.ctx.common.issues));return Z(t,{code:M.invalid_union,unionErrors:i}),ae}if(t.common.async)return Promise.all(n.map(async a=>{const i={...t,common:{...t.common,issues:[]},parent:null};return{result:await a._parseAsync({data:t.data,path:t.path,parent:i}),ctx:i}})).then(s);{let a;const i=[];for(const u of n){const c={...t,common:{...t.common,issues:[]},parent:null},l=u._parseSync({data:t.data,path:t.path,parent:c});if(l.status==="valid")return l;l.status==="dirty"&&!a&&(a={result:l,ctx:c}),c.common.issues.length&&i.push(c.common.issues)}if(a)return t.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(u=>new Ge(u));return Z(t,{code:M.invalid_union,unionErrors:o}),ae}}get options(){return this._def.options}}sr.create=(r,e)=>new sr({options:r,typeName:re.ZodUnion,...oe(e)});const _n=r=>r instanceof or?_n(r.schema):r instanceof He?_n(r.innerType()):r instanceof ur?[r.value]:r instanceof At?r.options:r instanceof cr?Object.keys(r.enum):r instanceof lr?_n(r._def.innerType):r instanceof rr?[void 0]:r instanceof nr?[null]:null;class en extends ie{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==z.object)return Z(t,{code:M.invalid_type,expected:z.object,received:t.parsedType}),ae;const n=this.discriminator,s=t.data[n],a=this.optionsMap.get(s);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(Z(t,{code:M.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),ae)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const s=new Map;for(const a of t){const i=_n(a.shape[e]);if(!i)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of i){if(s.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);s.set(o,a)}}return new en({typeName:re.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...oe(n)})}}function Ys(r,e){const t=gt(r),n=gt(e);if(r===e)return{valid:!0,data:r};if(t===z.object&&n===z.object){const s=fe.objectKeys(e),a=fe.objectKeys(r).filter(o=>s.indexOf(o)!==-1),i={...r,...e};for(const o of a){const u=Ys(r[o],e[o]);if(!u.valid)return{valid:!1};i[o]=u.data}return{valid:!0,data:i}}else if(t===z.array&&n===z.array){if(r.length!==e.length)return{valid:!1};const s=[];for(let a=0;a<r.length;a++){const i=r[a],o=e[a],u=Ys(i,o);if(!u.valid)return{valid:!1};s.push(u.data)}return{valid:!0,data:s}}else return t===z.date&&n===z.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}class ar extends ie{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),s=(a,i)=>{if(Pn(a)||Pn(i))return ae;const o=Ys(a.value,i.value);return o.valid?((xn(a)||xn(i))&&t.dirty(),{status:t.value,value:o.data}):(Z(n,{code:M.invalid_intersection_types}),ae)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,i])=>s(a,i)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}ar.create=(r,e,t)=>new ar({left:r,right:e,typeName:re.ZodIntersection,...oe(t)});class nt extends ie{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==z.array)return Z(n,{code:M.invalid_type,expected:z.array,received:n.parsedType}),ae;if(n.data.length<this._def.items.length)return Z(n,{code:M.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ae;!this._def.rest&&n.data.length>this._def.items.length&&(Z(n,{code:M.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const a=[...n.data].map((i,o)=>{const u=this._def.items[o]||this._def.rest;return u?u._parse(new ft(n,i,n.path,o)):null}).filter(i=>!!i);return n.common.async?Promise.all(a).then(i=>Ne.mergeArray(t,i)):Ne.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new nt({...this._def,rest:e})}}nt.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new nt({items:r,typeName:re.ZodTuple,rest:null,...oe(e)})};class ir extends ie{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==z.object)return Z(n,{code:M.invalid_type,expected:z.object,received:n.parsedType}),ae;const s=[],a=this._def.keyType,i=this._def.valueType;for(const o in n.data)s.push({key:a._parse(new ft(n,o,n.path,o)),value:i._parse(new ft(n,n.data[o],n.path,o))});return n.common.async?Ne.mergeObjectAsync(t,s):Ne.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof ie?new ir({keyType:e,valueType:t,typeName:re.ZodRecord,...oe(n)}):new ir({keyType:Je.create(),valueType:e,typeName:re.ZodRecord,...oe(t)})}}class Vr extends ie{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==z.map)return Z(n,{code:M.invalid_type,expected:z.map,received:n.parsedType}),ae;const s=this._def.keyType,a=this._def.valueType,i=[...n.data.entries()].map(([o,u],c)=>({key:s._parse(new ft(n,o,n.path,[c,"key"])),value:a._parse(new ft(n,u,n.path,[c,"value"]))}));if(n.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const u of i){const c=await u.key,l=await u.value;if(c.status==="aborted"||l.status==="aborted")return ae;(c.status==="dirty"||l.status==="dirty")&&t.dirty(),o.set(c.value,l.value)}return{status:t.value,value:o}})}else{const o=new Map;for(const u of i){const c=u.key,l=u.value;if(c.status==="aborted"||l.status==="aborted")return ae;(c.status==="dirty"||l.status==="dirty")&&t.dirty(),o.set(c.value,l.value)}return{status:t.value,value:o}}}}Vr.create=(r,e,t)=>new Vr({valueType:e,keyType:r,typeName:re.ZodMap,...oe(t)});class jt extends ie{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==z.set)return Z(n,{code:M.invalid_type,expected:z.set,received:n.parsedType}),ae;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(Z(n,{code:M.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(Z(n,{code:M.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const a=this._def.valueType;function i(u){const c=new Set;for(const l of u){if(l.status==="aborted")return ae;l.status==="dirty"&&t.dirty(),c.add(l.value)}return{status:t.value,value:c}}const o=[...n.data.values()].map((u,c)=>a._parse(new ft(n,u,n.path,c)));return n.common.async?Promise.all(o).then(u=>i(u)):i(o)}min(e,t){return new jt({...this._def,minSize:{value:e,message:X.toString(t)}})}max(e,t){return new jt({...this._def,maxSize:{value:e,message:X.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}jt.create=(r,e)=>new jt({valueType:r,minSize:null,maxSize:null,typeName:re.ZodSet,...oe(e)});class Ft extends ie{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==z.function)return Z(t,{code:M.invalid_type,expected:z.function,received:t.parsedType}),ae;function n(o,u){return Lr({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Dr(),er].filter(c=>!!c),issueData:{code:M.invalid_arguments,argumentsError:u}})}function s(o,u){return Lr({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Dr(),er].filter(c=>!!c),issueData:{code:M.invalid_return_type,returnTypeError:u}})}const a={errorMap:t.common.contextualErrorMap},i=t.data;return this._def.returns instanceof Vt?Fe(async(...o)=>{const u=new Ge([]),c=await this._def.args.parseAsync(o,a).catch(h=>{throw u.addIssue(n(o,h)),u}),l=await i(...c);return await this._def.returns._def.type.parseAsync(l,a).catch(h=>{throw u.addIssue(s(l,h)),u})}):Fe((...o)=>{const u=this._def.args.safeParse(o,a);if(!u.success)throw new Ge([n(o,u.error)]);const c=i(...u.data),l=this._def.returns.safeParse(c,a);if(!l.success)throw new Ge([s(c,l.error)]);return l.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Ft({...this._def,args:nt.create(e).rest(Ct.create())})}returns(e){return new Ft({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new Ft({args:e||nt.create([]).rest(Ct.create()),returns:t||Ct.create(),typeName:re.ZodFunction,...oe(n)})}}class or extends ie{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}or.create=(r,e)=>new or({getter:r,typeName:re.ZodLazy,...oe(e)});class ur extends ie{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return Z(t,{received:t.data,code:M.invalid_literal,expected:this._def.value}),ae}return{status:"valid",value:e.data}}get value(){return this._def.value}}ur.create=(r,e)=>new ur({value:r,typeName:re.ZodLiteral,...oe(e)});function Fu(r,e){return new At({values:r,typeName:re.ZodEnum,...oe(e)})}class At extends ie{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return Z(t,{expected:fe.joinValues(n),received:t.parsedType,code:M.invalid_type}),ae}if(this._def.values.indexOf(e.data)===-1){const t=this._getOrReturnCtx(e),n=this._def.values;return Z(t,{received:t.data,code:M.invalid_enum_value,options:n}),ae}return Fe(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return At.create(e)}exclude(e){return At.create(this.options.filter(t=>!e.includes(t)))}}At.create=Fu;class cr extends ie{_parse(e){const t=fe.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==z.string&&n.parsedType!==z.number){const s=fe.objectValues(t);return Z(n,{expected:fe.joinValues(s),received:n.parsedType,code:M.invalid_type}),ae}if(t.indexOf(e.data)===-1){const s=fe.objectValues(t);return Z(n,{received:n.data,code:M.invalid_enum_value,options:s}),ae}return Fe(e.data)}get enum(){return this._def.values}}cr.create=(r,e)=>new cr({values:r,typeName:re.ZodNativeEnum,...oe(e)});class Vt extends ie{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==z.promise&&t.common.async===!1)return Z(t,{code:M.invalid_type,expected:z.promise,received:t.parsedType}),ae;const n=t.parsedType===z.promise?t.data:Promise.resolve(t.data);return Fe(n.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Vt.create=(r,e)=>new Vt({type:r,typeName:re.ZodPromise,...oe(e)});class He extends ie{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===re.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),s=this._def.effect||null;if(s.type==="preprocess"){const i=s.transform(n.data);return n.common.async?Promise.resolve(i).then(o=>this._def.schema._parseAsync({data:o,path:n.path,parent:n})):this._def.schema._parseSync({data:i,path:n.path,parent:n})}const a={addIssue:i=>{Z(n,i),i.fatal?t.abort():t.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),s.type==="refinement"){const i=o=>{const u=s.refinement(o,a);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?ae:(o.status==="dirty"&&t.dirty(),i(o.value),{status:t.value,value:o.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>o.status==="aborted"?ae:(o.status==="dirty"&&t.dirty(),i(o.value).then(()=>({status:t.value,value:o.value}))))}if(s.type==="transform")if(n.common.async===!1){const i=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Mr(i))return i;const o=s.transform(i.value,a);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(i=>Mr(i)?Promise.resolve(s.transform(i.value,a)).then(o=>({status:t.value,value:o})):i);fe.assertNever(s)}}He.create=(r,e,t)=>new He({schema:r,typeName:re.ZodEffects,effect:e,...oe(t)});He.createWithPreprocess=(r,e,t)=>new He({schema:e,effect:{type:"preprocess",transform:r},typeName:re.ZodEffects,...oe(t)});class ht extends ie{_parse(e){return this._getType(e)===z.undefined?Fe(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ht.create=(r,e)=>new ht({innerType:r,typeName:re.ZodOptional,...oe(e)});class It extends ie{_parse(e){return this._getType(e)===z.null?Fe(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}It.create=(r,e)=>new It({innerType:r,typeName:re.ZodNullable,...oe(e)});class lr extends ie{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===z.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}lr.create=(r,e)=>new lr({innerType:r,typeName:re.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...oe(e)});class $r extends ie{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Fr(s)?s.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Ge(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ge(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}$r.create=(r,e)=>new $r({innerType:r,typeName:re.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...oe(e)});class qr extends ie{_parse(e){if(this._getType(e)!==z.nan){const n=this._getOrReturnCtx(e);return Z(n,{code:M.invalid_type,expected:z.nan,received:n.parsedType}),ae}return{status:"valid",value:e.data}}}qr.create=r=>new qr({typeName:re.ZodNaN,...oe(r)});const Uu=Symbol("zod_brand");class Ta extends ie{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class fr extends ie{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?ae:a.status==="dirty"?(t.dirty(),xa(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?ae:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,t){return new fr({in:e,out:t,typeName:re.ZodPipeline})}}const Sa=(r,e={},t)=>r?Bt.create().superRefine((n,s)=>{var a,i;if(!r(n)){const o=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,u=(i=(a=o.fatal)!==null&&a!==void 0?a:t)!==null&&i!==void 0?i:!0,c=typeof o=="string"?{message:o}:o;s.addIssue({code:"custom",...c,fatal:u})}}):Bt.create(),Bu={object:ge.lazycreate};var re;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline"})(re||(re={}));const Vu=(r,e={message:`Input not instance of ${r.name}`})=>Sa(t=>t instanceof r,e),Ca=Je.create,ka=Ot.create,$u=qr.create,qu=Et.create,ja=tr.create,zu=kt.create,Hu=Ur.create,Zu=rr.create,Ku=nr.create,Yu=Bt.create,Ju=Ct.create,Wu=pt.create,Gu=Br.create,Qu=Qe.create,Xu=ge.create,ec=ge.strictCreate,tc=sr.create,rc=en.create,nc=ar.create,sc=nt.create,ac=ir.create,ic=Vr.create,oc=jt.create,uc=Ft.create,cc=or.create,lc=ur.create,dc=At.create,hc=cr.create,fc=Vt.create,Tn=He.create,pc=ht.create,mc=It.create,yc=He.createWithPreprocess,gc=fr.create,bc=()=>Ca().optional(),_c=()=>ka().optional(),vc=()=>ja().optional(),wc={string:r=>Je.create({...r,coerce:!0}),number:r=>Ot.create({...r,coerce:!0}),boolean:r=>tr.create({...r,coerce:!0}),bigint:r=>Et.create({...r,coerce:!0}),date:r=>kt.create({...r,coerce:!0})},Oc=ae;var Bi=Object.freeze({__proto__:null,defaultErrorMap:er,setErrorMap:Lu,getErrorMap:Dr,makeIssue:Lr,EMPTY_PATH:Mu,addIssueToContext:Z,ParseStatus:Ne,INVALID:ae,DIRTY:xa,OK:Fe,isAborted:Pn,isDirty:xn,isValid:Mr,isAsync:Fr,get util(){return fe},get objectUtil(){return An},ZodParsedType:z,getParsedType:gt,ZodType:ie,ZodString:Je,ZodNumber:Ot,ZodBigInt:Et,ZodBoolean:tr,ZodDate:kt,ZodSymbol:Ur,ZodUndefined:rr,ZodNull:nr,ZodAny:Bt,ZodUnknown:Ct,ZodNever:pt,ZodVoid:Br,ZodArray:Qe,ZodObject:ge,ZodUnion:sr,ZodDiscriminatedUnion:en,ZodIntersection:ar,ZodTuple:nt,ZodRecord:ir,ZodMap:Vr,ZodSet:jt,ZodFunction:Ft,ZodLazy:or,ZodLiteral:ur,ZodEnum:At,ZodNativeEnum:cr,ZodPromise:Vt,ZodEffects:He,ZodTransformer:He,ZodOptional:ht,ZodNullable:It,ZodDefault:lr,ZodCatch:$r,ZodNaN:qr,BRAND:Uu,ZodBranded:Ta,ZodPipeline:fr,custom:Sa,Schema:ie,ZodSchema:ie,late:Bu,get ZodFirstPartyTypeKind(){return re},coerce:wc,any:Yu,array:Qu,bigint:qu,boolean:ja,date:zu,discriminatedUnion:rc,effect:Tn,enum:dc,function:uc,instanceof:Vu,intersection:nc,lazy:cc,literal:lc,map:ic,nan:$u,nativeEnum:hc,never:Wu,null:Ku,nullable:mc,number:ka,object:Xu,oboolean:vc,onumber:_c,optional:pc,ostring:bc,pipeline:gc,preprocess:yc,promise:fc,record:ac,set:oc,strictObject:ec,string:Ca,symbol:Hu,transformer:Tn,tuple:sc,undefined:Zu,union:tc,unknown:Ju,void:Gu,NEVER:Oc,ZodIssueCode:M,quotelessJson:Nu,ZodError:Ge});const ny=Object.freeze(Object.defineProperty({__proto__:null,BRAND:Uu,DIRTY:xa,EMPTY_PATH:Mu,INVALID:ae,NEVER:Oc,OK:Fe,ParseStatus:Ne,Schema:ie,ZodAny:Bt,ZodArray:Qe,ZodBigInt:Et,ZodBoolean:tr,ZodBranded:Ta,ZodCatch:$r,ZodDate:kt,ZodDefault:lr,ZodDiscriminatedUnion:en,ZodEffects:He,ZodEnum:At,ZodError:Ge,get ZodFirstPartyTypeKind(){return re},ZodFunction:Ft,ZodIntersection:ar,ZodIssueCode:M,ZodLazy:or,ZodLiteral:ur,ZodMap:Vr,ZodNaN:qr,ZodNativeEnum:cr,ZodNever:pt,ZodNull:nr,ZodNullable:It,ZodNumber:Ot,ZodObject:ge,ZodOptional:ht,ZodParsedType:z,ZodPipeline:fr,ZodPromise:Vt,ZodRecord:ir,ZodSchema:ie,ZodSet:jt,ZodString:Je,ZodSymbol:Ur,ZodTransformer:He,ZodTuple:nt,ZodType:ie,ZodUndefined:rr,ZodUnion:sr,ZodUnknown:Ct,ZodVoid:Br,addIssueToContext:Z,any:Yu,array:Qu,bigint:qu,boolean:ja,coerce:wc,custom:Sa,date:zu,default:Bi,defaultErrorMap:er,discriminatedUnion:rc,effect:Tn,enum:dc,function:uc,getErrorMap:Dr,getParsedType:gt,instanceof:Vu,intersection:nc,isAborted:Pn,isAsync:Fr,isDirty:xn,isValid:Mr,late:Bu,lazy:cc,literal:lc,makeIssue:Lr,map:ic,nan:$u,nativeEnum:hc,never:Wu,null:Ku,nullable:mc,number:ka,object:Xu,get objectUtil(){return An},oboolean:vc,onumber:_c,optional:pc,ostring:bc,pipeline:gc,preprocess:yc,promise:fc,quotelessJson:Nu,record:ac,set:oc,setErrorMap:Lu,strictObject:ec,string:Ca,symbol:Hu,transformer:Tn,tuple:sc,undefined:Zu,union:tc,unknown:Ju,get util(){return fe},void:Gu,z:Bi},Symbol.toStringTag,{value:"Module"}));var sy={},Kn={},yr={};const Ia=al(ny);var Yn={};Object.defineProperty(Yn,"__esModule",{value:!0});Yn.parseAnyDef=void 0;function ay(){return{}}Yn.parseAnyDef=ay;var gr={},st={};Object.defineProperty(st,"__esModule",{value:!0});st.setResponseValueAndErrors=st.addErrorMessage=void 0;function Ec(r,e,t,n){n!=null&&n.errorMessages&&t&&(r.errorMessage=Object.assign(Object.assign({},r.errorMessage),{[e]:t}))}st.addErrorMessage=Ec;function iy(r,e,t,n,s){r[e]=t,Ec(r,e,n,s)}st.setResponseValueAndErrors=iy;var Vi;function oy(){if(Vi)return gr;Vi=1,Object.defineProperty(gr,"__esModule",{value:!0}),gr.parseArrayDef=void 0;const r=Ia,e=st,t=De();function n(s,a){var i,o;const u={type:"array"};return((o=(i=s.type)===null||i===void 0?void 0:i._def)===null||o===void 0?void 0:o.typeName)!==r.ZodFirstPartyTypeKind.ZodAny&&(u.items=(0,t.parseDef)(s.type._def,Object.assign(Object.assign({},a),{currentPath:[...a.currentPath,"items"]}))),s.minLength&&(0,e.setResponseValueAndErrors)(u,"minItems",s.minLength.value,s.minLength.message,a),s.maxLength&&(0,e.setResponseValueAndErrors)(u,"maxItems",s.maxLength.value,s.maxLength.message,a),s.exactLength&&((0,e.setResponseValueAndErrors)(u,"minItems",s.exactLength.value,s.exactLength.message,a),(0,e.setResponseValueAndErrors)(u,"maxItems",s.exactLength.value,s.exactLength.message,a)),u}return gr.parseArrayDef=n,gr}var Jn={};Object.defineProperty(Jn,"__esModule",{value:!0});Jn.parseBigintDef=void 0;const Nt=st;function uy(r,e){const t={type:"integer",format:"int64"};if(!r.checks)return t;for(const n of r.checks)switch(n.kind){case"min":e.target==="jsonSchema7"?n.inclusive?(0,Nt.setResponseValueAndErrors)(t,"minimum",n.value,n.message,e):(0,Nt.setResponseValueAndErrors)(t,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(t.exclusiveMinimum=!0),(0,Nt.setResponseValueAndErrors)(t,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?(0,Nt.setResponseValueAndErrors)(t,"maximum",n.value,n.message,e):(0,Nt.setResponseValueAndErrors)(t,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(t.exclusiveMaximum=!0),(0,Nt.setResponseValueAndErrors)(t,"maximum",n.value,n.message,e));break;case"multipleOf":(0,Nt.setResponseValueAndErrors)(t,"multipleOf",n.value,n.message,e);break}return t}Jn.parseBigintDef=uy;var Wn={};Object.defineProperty(Wn,"__esModule",{value:!0});Wn.parseBooleanDef=void 0;function cy(){return{type:"boolean"}}Wn.parseBooleanDef=cy;var br={},$i;function ly(){if($i)return br;$i=1,Object.defineProperty(br,"__esModule",{value:!0}),br.parseBrandedDef=void 0;const r=De();function e(t,n){return(0,r.parseDef)(t.type._def,n)}return br.parseBrandedDef=e,br}var _r={},qi;function dy(){if(qi)return _r;qi=1,Object.defineProperty(_r,"__esModule",{value:!0}),_r.parseCatchDef=void 0;const r=De(),e=(t,n)=>(0,r.parseDef)(t.innerType._def,n);return _r.parseCatchDef=e,_r}var Gn={};Object.defineProperty(Gn,"__esModule",{value:!0});Gn.parseDateDef=void 0;const zi=st;function hy(r,e){return e.dateStrategy=="integer"?fy(r,e):{type:"string",format:"date-time"}}Gn.parseDateDef=hy;const fy=(r,e)=>{const t={type:"integer",format:"unix-time"};for(const n of r.checks)switch(n.kind){case"min":e.target==="jsonSchema7"&&(0,zi.setResponseValueAndErrors)(t,"minimum",n.value,n.message,e);break;case"max":e.target==="jsonSchema7"&&(0,zi.setResponseValueAndErrors)(t,"maximum",n.value,n.message,e);break}return t};var vr={},Hi;function py(){if(Hi)return vr;Hi=1,Object.defineProperty(vr,"__esModule",{value:!0}),vr.parseDefaultDef=void 0;const r=De();function e(t,n){return Object.assign(Object.assign({},(0,r.parseDef)(t.innerType._def,n)),{default:t.defaultValue()})}return vr.parseDefaultDef=e,vr}var wr={},Zi;function my(){if(Zi)return wr;Zi=1,Object.defineProperty(wr,"__esModule",{value:!0}),wr.parseEffectsDef=void 0;const r=De();function e(t,n){return n.effectStrategy==="input"?(0,r.parseDef)(t.schema._def,n):{}}return wr.parseEffectsDef=e,wr}var Qn={};Object.defineProperty(Qn,"__esModule",{value:!0});Qn.parseEnumDef=void 0;function yy(r){return{type:"string",enum:r.values}}Qn.parseEnumDef=yy;var Or={},Ki;function gy(){if(Ki)return Or;Ki=1;var r=ot&&ot.__rest||function(s,a){var i={};for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&a.indexOf(o)<0&&(i[o]=s[o]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(s);u<o.length;u++)a.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(s,o[u])&&(i[o[u]]=s[o[u]]);return i};Object.defineProperty(Or,"__esModule",{value:!0}),Or.parseIntersectionDef=void 0;const e=De(),t=s=>"type"in s&&s.type==="string"?!1:"allOf"in s;function n(s,a){const i=[(0,e.parseDef)(s.left._def,Object.assign(Object.assign({},a),{currentPath:[...a.currentPath,"allOf","0"]})),(0,e.parseDef)(s.right._def,Object.assign(Object.assign({},a),{currentPath:[...a.currentPath,"allOf","1"]}))].filter(c=>!!c);let o=a.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const u=[];return i.forEach(c=>{if(t(c))u.push(...c.allOf),c.unevaluatedProperties===void 0&&(o=void 0);else{let l=c;"additionalProperties"in c&&c.additionalProperties===!1?l=r(c,["additionalProperties"]):o=void 0,u.push(l)}}),u.length?Object.assign({allOf:u},o):void 0}return Or.parseIntersectionDef=n,Or}var Xn={};Object.defineProperty(Xn,"__esModule",{value:!0});Xn.parseLiteralDef=void 0;function by(r,e){const t=typeof r.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(r.value)?"array":"object"}:e.target==="openApi3"?{type:t==="bigint"?"integer":t,enum:[r.value]}:{type:t==="bigint"?"integer":t,const:r.value}}Xn.parseLiteralDef=by;var Er={},Yi;function _y(){if(Yi)return Er;Yi=1,Object.defineProperty(Er,"__esModule",{value:!0}),Er.parseMapDef=void 0;const r=De();function e(t,n){const s=(0,r.parseDef)(t.keyType._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"items","items","0"]}))||{},a=(0,r.parseDef)(t.valueType._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"items","items","1"]}))||{};return{type:"array",maxItems:125,items:{type:"array",items:[s,a],minItems:2,maxItems:2}}}return Er.parseMapDef=e,Er}var es={};Object.defineProperty(es,"__esModule",{value:!0});es.parseNativeEnumDef=void 0;function vy(r){const e=r.values,n=Object.keys(r.values).filter(a=>typeof e[e[a]]!="number").map(a=>e[a]),s=Array.from(new Set(n.map(a=>typeof a)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:n}}es.parseNativeEnumDef=vy;var ts={};Object.defineProperty(ts,"__esModule",{value:!0});ts.parseNeverDef=void 0;function wy(){return{not:{}}}ts.parseNeverDef=wy;var rs={};Object.defineProperty(rs,"__esModule",{value:!0});rs.parseNullDef=void 0;function Oy(r){return r.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}rs.parseNullDef=Oy;var Ar={},Ls={},Ji;function Ac(){return Ji||(Ji=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseUnionDef=r.primitiveMappings=void 0;const e=De();r.primitiveMappings={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function t(s,a){if(a.target==="openApi3")return n(s,a);const i=s.options instanceof Map?Array.from(s.options.values()):s.options;if(i.every(o=>o._def.typeName in r.primitiveMappings&&(!o._def.checks||!o._def.checks.length))){const o=i.reduce((u,c)=>{const l=r.primitiveMappings[c._def.typeName];return l&&!u.includes(l)?[...u,l]:u},[]);return{type:o.length>1?o:o[0]}}else if(i.every(o=>o._def.typeName==="ZodLiteral"&&!o.description)){const o=i.reduce((u,c)=>{const l=typeof c._def.value;switch(l){case"string":case"number":case"boolean":return[...u,l];case"bigint":return[...u,"integer"];case"object":if(c._def.value===null)return[...u,"null"];case"symbol":case"undefined":case"function":default:return u}},[]);if(o.length===i.length){const u=o.filter((c,l,d)=>d.indexOf(c)===l);return{type:u.length>1?u:u[0],enum:i.reduce((c,l)=>c.includes(l._def.value)?c:[...c,l._def.value],[])}}}else if(i.every(o=>o._def.typeName==="ZodEnum"))return{type:"string",enum:i.reduce((o,u)=>[...o,...u._def.values.filter(c=>!o.includes(c))],[])};return n(s,a)}r.parseUnionDef=t;const n=(s,a)=>{const i=(s.options instanceof Map?Array.from(s.options.values()):s.options).map((o,u)=>(0,e.parseDef)(o._def,Object.assign(Object.assign({},a),{currentPath:[...a.currentPath,"anyOf",`${u}`]}))).filter(o=>!!o&&(!a.strictUnions||typeof o=="object"&&Object.keys(o).length>0));return i.length?{anyOf:i}:void 0}}(Ls)),Ls}var Wi;function Ey(){if(Wi)return Ar;Wi=1,Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.parseNullableDef=void 0;const r=De(),e=Ac();function t(n,s){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(n.innerType._def.typeName)&&(!n.innerType._def.checks||!n.innerType._def.checks.length))return s.target==="openApi3"?{type:e.primitiveMappings[n.innerType._def.typeName],nullable:!0}:{type:[e.primitiveMappings[n.innerType._def.typeName],"null"]};if(s.target==="openApi3"){const i=(0,r.parseDef)(n.innerType._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath]}));return i&&Object.assign(Object.assign({},i),{nullable:!0})}const a=(0,r.parseDef)(n.innerType._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"anyOf","0"]}));return a&&{anyOf:[a,{type:"null"}]}}return Ar.parseNullableDef=t,Ar}var ns={};Object.defineProperty(ns,"__esModule",{value:!0});ns.parseNumberDef=void 0;const Tt=st;function Ay(r,e){const t={type:"number"};if(!r.checks)return t;for(const n of r.checks)switch(n.kind){case"int":t.type="integer",(0,Tt.addErrorMessage)(t,"type",n.message,e);break;case"min":e.target==="jsonSchema7"?n.inclusive?(0,Tt.setResponseValueAndErrors)(t,"minimum",n.value,n.message,e):(0,Tt.setResponseValueAndErrors)(t,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(t.exclusiveMinimum=!0),(0,Tt.setResponseValueAndErrors)(t,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?(0,Tt.setResponseValueAndErrors)(t,"maximum",n.value,n.message,e):(0,Tt.setResponseValueAndErrors)(t,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(t.exclusiveMaximum=!0),(0,Tt.setResponseValueAndErrors)(t,"maximum",n.value,n.message,e));break;case"multipleOf":(0,Tt.setResponseValueAndErrors)(t,"multipleOf",n.value,n.message,e);break}return t}ns.parseNumberDef=Ay;var Dt={},Gi;function Py(){if(Gi)return Dt;Gi=1,Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.parseObjectDef=Dt.parseObjectDefX=void 0;const r=De();function e(n,s){var a,i;Object.keys(n.shape()).reduce((u,c)=>{let l=n.shape()[c];const d=l.isOptional();d||(l=Object.assign({},l._def.innerSchema));const h=(0,r.parseDef)(l._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"properties",c],propertyPath:[...s.currentPath,"properties",c]}));return h!==void 0&&(u.properties[c]=h,d||(u.required||(u.required=[]),u.required.push(c))),u},{type:"object",properties:{},additionalProperties:n.catchall._def.typeName==="ZodNever"?n.unknownKeys==="passthrough":(a=(0,r.parseDef)(n.catchall._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"additionalProperties"]})))!==null&&a!==void 0?a:!0});const o=Object.assign(Object.assign({type:"object"},Object.entries(n.shape()).reduce((u,[c,l])=>{if(l===void 0||l._def===void 0)return u;const d=(0,r.parseDef)(l._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"properties",c],propertyPath:[...s.currentPath,"properties",c]}));return d===void 0?u:{properties:Object.assign(Object.assign({},u.properties),{[c]:d}),required:l.isOptional()?u.required:[...u.required,c]}},{properties:{},required:[]})),{additionalProperties:n.catchall._def.typeName==="ZodNever"?n.unknownKeys==="passthrough":(i=(0,r.parseDef)(n.catchall._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"additionalProperties"]})))!==null&&i!==void 0?i:!0});return o.required.length||delete o.required,o}Dt.parseObjectDefX=e;function t(n,s){var a;const i=Object.assign(Object.assign({type:"object"},Object.entries(n.shape()).reduce((o,[u,c])=>{if(c===void 0||c._def===void 0)return o;const l=(0,r.parseDef)(c._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"properties",u],propertyPath:[...s.currentPath,"properties",u]}));return l===void 0?o:{properties:Object.assign(Object.assign({},o.properties),{[u]:l}),required:c.isOptional()?o.required:[...o.required,u]}},{properties:{},required:[]})),{additionalProperties:n.catchall._def.typeName==="ZodNever"?n.unknownKeys==="passthrough":(a=(0,r.parseDef)(n.catchall._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"additionalProperties"]})))!==null&&a!==void 0?a:!0});return i.required.length||delete i.required,i}return Dt.parseObjectDef=t,Dt}var Pr={},Qi;function xy(){if(Qi)return Pr;Qi=1,Object.defineProperty(Pr,"__esModule",{value:!0}),Pr.parseOptionalDef=void 0;const r=De(),e=(t,n)=>{var s;if(n.currentPath.toString()===((s=n.propertyPath)===null||s===void 0?void 0:s.toString()))return(0,r.parseDef)(t.innerType._def,n);const a=(0,r.parseDef)(t.innerType._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"anyOf","1"]}));return a?{anyOf:[{not:{}},a]}:{}};return Pr.parseOptionalDef=e,Pr}var xr={},Xi;function Ty(){if(Xi)return xr;Xi=1,Object.defineProperty(xr,"__esModule",{value:!0}),xr.parsePipelineDef=void 0;const r=De(),e=(t,n)=>{if(n.pipeStrategy==="input")return(0,r.parseDef)(t.in._def,n);const s=(0,r.parseDef)(t.in._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"allOf","0"]})),a=(0,r.parseDef)(t.out._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"allOf",s?"1":"0"]}));return{allOf:[s,a].filter(i=>i!==void 0)}};return xr.parsePipelineDef=e,xr}var Tr={},eo;function Sy(){if(eo)return Tr;eo=1,Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.parsePromiseDef=void 0;const r=De();function e(t,n){return(0,r.parseDef)(t.type._def,n)}return Tr.parsePromiseDef=e,Tr}var Sr={},Ra={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseStringDef=r.emojiPattern=r.ulidPattern=r.cuid2Pattern=r.cuidPattern=r.emailPattern=void 0;const e=st;r.emailPattern='^(([^<>()[\\]\\\\.,;:\\s@\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\"]+)*)|(\\".+\\"))@((\\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\])|(\\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\\.[A-Za-z]{2,})+))$',r.cuidPattern="^c[^\\s-]{8,}$",r.cuid2Pattern="^[a-z][a-z0-9]*$",r.ulidPattern="/[0-9A-HJKMNP-TV-Z]{26}/",r.emojiPattern="/^(p{Extended_Pictographic}|p{Emoji_Component})+$/u";function t(i,o){const u={type:"string"};if(i.checks)for(const c of i.checks)switch(c.kind){case"min":(0,e.setResponseValueAndErrors)(u,"minLength",typeof u.minLength=="number"?Math.max(u.minLength,c.value):c.value,c.message,o);break;case"max":(0,e.setResponseValueAndErrors)(u,"maxLength",typeof u.maxLength=="number"?Math.min(u.maxLength,c.value):c.value,c.message,o);break;case"email":switch(o.emailStrategy){case"format:email":s(u,"email",c.message,o);break;case"format:idn-email":s(u,"idn-email",c.message,o);break;case"pattern:zod":a(u,r.emailPattern,c.message,o);break}break;case"url":s(u,"uri",c.message,o);break;case"uuid":s(u,"uuid",c.message,o);break;case"regex":a(u,c.regex.source,c.message,o);break;case"cuid":a(u,r.cuidPattern,c.message,o);break;case"cuid2":a(u,r.cuid2Pattern,c.message,o);break;case"startsWith":a(u,"^"+n(c.value),c.message,o);break;case"endsWith":a(u,n(c.value)+"$",c.message,o);break;case"datetime":s(u,"date-time",c.message,o);break;case"length":(0,e.setResponseValueAndErrors)(u,"minLength",typeof u.minLength=="number"?Math.max(u.minLength,c.value):c.value,c.message,o),(0,e.setResponseValueAndErrors)(u,"maxLength",typeof u.maxLength=="number"?Math.min(u.maxLength,c.value):c.value,c.message,o);break;case"includes":{a(u,n(c.value),c.message,o);break}case"ip":{c.version!=="v6"&&s(u,"ipv4",c.message,o),c.version!=="v4"&&s(u,"ipv6",c.message,o);break}case"emoji":a(u,r.emojiPattern,c.message,o);break;case"ulid":{a(u,r.ulidPattern,c.message,o);break}}return u}r.parseStringDef=t;const n=i=>Array.from(i).map(o=>/[a-zA-Z0-9]/.test(o)?o:`\\${o}`).join(""),s=(i,o,u,c)=>{var l;i.format||!((l=i.anyOf)===null||l===void 0)&&l.some(d=>d.format)?(i.anyOf||(i.anyOf=[]),i.format&&(i.anyOf.push(Object.assign({format:i.format},i.errorMessage&&c.errorMessages&&{errorMessage:{format:i.errorMessage.format}})),delete i.format,i.errorMessage&&(delete i.errorMessage.format,Object.keys(i.errorMessage).length===0&&delete i.errorMessage)),i.anyOf.push(Object.assign({format:o},u&&c.errorMessages&&{errorMessage:{format:u}}))):(0,e.setResponseValueAndErrors)(i,"format",o,u,c)},a=(i,o,u,c)=>{var l;i.pattern||!((l=i.allOf)===null||l===void 0)&&l.some(d=>d.pattern)?(i.allOf||(i.allOf=[]),i.pattern&&(i.allOf.push(Object.assign({pattern:i.pattern},i.errorMessage&&c.errorMessages&&{errorMessage:{pattern:i.errorMessage.pattern}})),delete i.pattern,i.errorMessage&&(delete i.errorMessage.pattern,Object.keys(i.errorMessage).length===0&&delete i.errorMessage)),i.allOf.push(Object.assign({pattern:o},u&&c.errorMessages&&{errorMessage:{pattern:u}}))):(0,e.setResponseValueAndErrors)(i,"pattern",o,u,c)}})(Ra);var to;function Cy(){if(to)return Sr;to=1,Object.defineProperty(Sr,"__esModule",{value:!0}),Sr.parseRecordDef=void 0;const r=Ia,e=De(),t=Ra;function n(s,a){var i,o,u,c,l;if(a.target==="openApi3"&&((i=s.keyType)===null||i===void 0?void 0:i._def.typeName)===r.ZodFirstPartyTypeKind.ZodEnum)return{type:"object",required:s.keyType._def.values,properties:s.keyType._def.values.reduce((h,b)=>{var m;return Object.assign(Object.assign({},h),{[b]:(m=(0,e.parseDef)(s.valueType._def,Object.assign(Object.assign({},a),{currentPath:[...a.currentPath,"properties",b]})))!==null&&m!==void 0?m:{}})},{}),additionalProperties:!1};const d={type:"object",additionalProperties:(o=(0,e.parseDef)(s.valueType._def,Object.assign(Object.assign({},a),{currentPath:[...a.currentPath,"additionalProperties"]})))!==null&&o!==void 0?o:{}};if(a.target==="openApi3")return d;if(((u=s.keyType)===null||u===void 0?void 0:u._def.typeName)===r.ZodFirstPartyTypeKind.ZodString&&(!((c=s.keyType._def.checks)===null||c===void 0)&&c.length)){const h=Object.entries((0,t.parseStringDef)(s.keyType._def,a)).reduce((b,[m,w])=>m==="type"?b:Object.assign(Object.assign({},b),{[m]:w}),{});return Object.assign(Object.assign({},d),{propertyNames:h})}else if(((l=s.keyType)===null||l===void 0?void 0:l._def.typeName)===r.ZodFirstPartyTypeKind.ZodEnum)return Object.assign(Object.assign({},d),{propertyNames:{enum:s.keyType._def.values}});return d}return Sr.parseRecordDef=n,Sr}var Cr={},ro;function ky(){if(ro)return Cr;ro=1,Object.defineProperty(Cr,"__esModule",{value:!0}),Cr.parseSetDef=void 0;const r=st,e=De();function t(n,s){const i={type:"array",uniqueItems:!0,items:(0,e.parseDef)(n.valueType._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"items"]}))};return n.minSize&&(0,r.setResponseValueAndErrors)(i,"minItems",n.minSize.value,n.minSize.message,s),n.maxSize&&(0,r.setResponseValueAndErrors)(i,"maxItems",n.maxSize.value,n.maxSize.message,s),i}return Cr.parseSetDef=t,Cr}var kr={},no;function jy(){if(no)return kr;no=1,Object.defineProperty(kr,"__esModule",{value:!0}),kr.parseTupleDef=void 0;const r=De();function e(t,n){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((s,a)=>(0,r.parseDef)(s._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"items",`${a}`]}))).reduce((s,a)=>a===void 0?s:[...s,a],[]),additionalItems:(0,r.parseDef)(t.rest._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"additionalItems"]}))}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((s,a)=>(0,r.parseDef)(s._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"items",`${a}`]}))).reduce((s,a)=>a===void 0?s:[...s,a],[])}}return kr.parseTupleDef=e,kr}var ss={};Object.defineProperty(ss,"__esModule",{value:!0});ss.parseUndefinedDef=void 0;function Iy(){return{not:{}}}ss.parseUndefinedDef=Iy;var as={};Object.defineProperty(as,"__esModule",{value:!0});as.parseUnknownDef=void 0;function Ry(){return{}}as.parseUnknownDef=Ry;var so;function De(){if(so)return yr;so=1,Object.defineProperty(yr,"__esModule",{value:!0}),yr.parseDef=void 0;const r=Ia,e=Yn,t=oy(),n=Jn,s=Wn,a=ly(),i=dy(),o=Gn,u=py(),c=my(),l=Qn,d=gy(),h=Xn,b=_y(),m=es,w=ts,g=rs,P=Ey(),k=ns,C=Py(),x=xy(),j=Ty(),A=Sy(),S=Cy(),y=ky(),v=Ra,p=jy(),O=ss,T=Ac(),H=as;function B(L,q,V=!1){const ue=q.seen.get(L);if(ue&&!V){const pe=Q(ue,q);if(pe!==void 0)return pe}const K={def:L,path:q.currentPath,jsonSchema:void 0};q.seen.set(L,K);const Ee=ne(L,L.typeName,q);return Ee&&te(L,q,Ee),K.jsonSchema=Ee,Ee}yr.parseDef=B;const Q=(L,q)=>{switch(q.$refStrategy){case"root":return{$ref:L.path.length===0?"":L.path.length===1?`${L.path[0]}/`:L.path.join("/")};case"relative":return{$ref:F(q.currentPath,L.path)};case"none":return L.path.length<q.currentPath.length&&L.path.every((V,ue)=>q.currentPath[ue]===V)?(console.warn(`Recursive reference detected at ${q.currentPath.join("/")}! Defaulting to any`),{}):void 0;case"seen":return L.path.length<q.currentPath.length&&L.path.every((V,ue)=>q.currentPath[ue]===V)?(console.warn(`Recursive reference detected at ${q.currentPath.join("/")}! Defaulting to any`),{}):L.jsonSchema}},F=(L,q)=>{let V=0;for(;V<L.length&&V<q.length&&L[V]===q[V];V++);return[(L.length-V).toString(),...q.slice(V)].join("/")},ne=(L,q,V)=>{switch(q){case r.ZodFirstPartyTypeKind.ZodString:return(0,v.parseStringDef)(L,V);case r.ZodFirstPartyTypeKind.ZodNumber:return(0,k.parseNumberDef)(L,V);case r.ZodFirstPartyTypeKind.ZodObject:return(0,C.parseObjectDef)(L,V);case r.ZodFirstPartyTypeKind.ZodBigInt:return(0,n.parseBigintDef)(L,V);case r.ZodFirstPartyTypeKind.ZodBoolean:return(0,s.parseBooleanDef)();case r.ZodFirstPartyTypeKind.ZodDate:return(0,o.parseDateDef)(L,V);case r.ZodFirstPartyTypeKind.ZodUndefined:return(0,O.parseUndefinedDef)();case r.ZodFirstPartyTypeKind.ZodNull:return(0,g.parseNullDef)(V);case r.ZodFirstPartyTypeKind.ZodArray:return(0,t.parseArrayDef)(L,V);case r.ZodFirstPartyTypeKind.ZodUnion:case r.ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return(0,T.parseUnionDef)(L,V);case r.ZodFirstPartyTypeKind.ZodIntersection:return(0,d.parseIntersectionDef)(L,V);case r.ZodFirstPartyTypeKind.ZodTuple:return(0,p.parseTupleDef)(L,V);case r.ZodFirstPartyTypeKind.ZodRecord:return(0,S.parseRecordDef)(L,V);case r.ZodFirstPartyTypeKind.ZodLiteral:return(0,h.parseLiteralDef)(L,V);case r.ZodFirstPartyTypeKind.ZodEnum:return(0,l.parseEnumDef)(L);case r.ZodFirstPartyTypeKind.ZodNativeEnum:return(0,m.parseNativeEnumDef)(L);case r.ZodFirstPartyTypeKind.ZodNullable:return(0,P.parseNullableDef)(L,V);case r.ZodFirstPartyTypeKind.ZodOptional:return(0,x.parseOptionalDef)(L,V);case r.ZodFirstPartyTypeKind.ZodMap:return(0,b.parseMapDef)(L,V);case r.ZodFirstPartyTypeKind.ZodSet:return(0,y.parseSetDef)(L,V);case r.ZodFirstPartyTypeKind.ZodLazy:return B(L.getter()._def,V);case r.ZodFirstPartyTypeKind.ZodPromise:return(0,A.parsePromiseDef)(L,V);case r.ZodFirstPartyTypeKind.ZodNaN:case r.ZodFirstPartyTypeKind.ZodNever:return(0,w.parseNeverDef)();case r.ZodFirstPartyTypeKind.ZodEffects:return(0,c.parseEffectsDef)(L,V);case r.ZodFirstPartyTypeKind.ZodAny:return(0,e.parseAnyDef)();case r.ZodFirstPartyTypeKind.ZodUnknown:return(0,H.parseUnknownDef)();case r.ZodFirstPartyTypeKind.ZodDefault:return(0,u.parseDefaultDef)(L,V);case r.ZodFirstPartyTypeKind.ZodBranded:return(0,a.parseBrandedDef)(L,V);case r.ZodFirstPartyTypeKind.ZodCatch:return(0,i.parseCatchDef)(L,V);case r.ZodFirstPartyTypeKind.ZodPipeline:return(0,j.parsePipelineDef)(L,V);case r.ZodFirstPartyTypeKind.ZodFunction:case r.ZodFirstPartyTypeKind.ZodVoid:case r.ZodFirstPartyTypeKind.ZodSymbol:return;default:return(ue=>{})()}},te=(L,q,V)=>(L.description&&(V.description=L.description,q.markdownDescription&&(V.markdownDescription=L.description)),V);return yr}var is={},Pc={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.getDefaultOptions=r.defaultOptions=void 0,r.defaultOptions={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"string",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,emailStrategy:"format:email"};const e=t=>typeof t=="string"?Object.assign(Object.assign({},r.defaultOptions),{name:t}):Object.assign(Object.assign({},r.defaultOptions),t);r.getDefaultOptions=e})(Pc);Object.defineProperty(is,"__esModule",{value:!0});is.getRefs=void 0;const Ny=Pc,Dy=r=>{const e=(0,Ny.getDefaultOptions)(r),t=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return Object.assign(Object.assign({},e),{currentPath:t,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([n,s])=>[s._def,{def:s._def,path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))})};is.getRefs=Dy;Object.defineProperty(Kn,"__esModule",{value:!0});Kn.zodToJsonSchema=void 0;const ao=De(),Ly=is,My=(r,e)=>{var t;const n=(0,Ly.getRefs)(e),s=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((u,[c,l])=>{var d;return Object.assign(Object.assign({},u),{[c]:(d=(0,ao.parseDef)(l._def,Object.assign(Object.assign({},n),{currentPath:[...n.basePath,n.definitionPath,c]}),!0))!==null&&d!==void 0?d:{}})},{}):void 0,a=typeof e=="string"?e:e==null?void 0:e.name,i=(t=(0,ao.parseDef)(r._def,a===void 0?n:Object.assign(Object.assign({},n),{currentPath:[...n.basePath,n.definitionPath,a]}),!1))!==null&&t!==void 0?t:{},o=a===void 0?s?Object.assign(Object.assign({},i),{[n.definitionPath]:s}):i:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,a].join("/"),[n.definitionPath]:Object.assign(Object.assign({},s),{[a]:i})};return n.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":n.target==="jsonSchema2019-09"&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),o};Kn.zodToJsonSchema=My;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.zodToJsonSchema=void 0;const e=Kn;Object.defineProperty(r,"zodToJsonSchema",{enumerable:!0,get:function(){return e.zodToJsonSchema}}),r.default=e.zodToJsonSchema})(sy);/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function xc(r){return typeof r>"u"||r===null}function Fy(r){return typeof r=="object"&&r!==null}function Uy(r){return Array.isArray(r)?r:xc(r)?[]:[r]}function By(r,e){var t,n,s,a;if(e)for(a=Object.keys(e),t=0,n=a.length;t<n;t+=1)s=a[t],r[s]=e[s];return r}function Vy(r,e){var t="",n;for(n=0;n<e;n+=1)t+=r;return t}function $y(r){return r===0&&Number.NEGATIVE_INFINITY===1/r}var qy=xc,zy=Fy,Hy=Uy,Zy=Vy,Ky=$y,Yy=By,Na={isNothing:qy,isObject:zy,toArray:Hy,repeat:Zy,isNegativeZero:Ky,extend:Yy};function Tc(r,e){var t="",n=r.reason||"(unknown reason)";return r.mark?(r.mark.name&&(t+='in "'+r.mark.name+'" '),t+="("+(r.mark.line+1)+":"+(r.mark.column+1)+")",!e&&r.mark.snippet&&(t+=`

`+r.mark.snippet),n+" "+t):n}function zr(r,e){Error.call(this),this.name="YAMLException",this.reason=r,this.mark=e,this.message=Tc(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}zr.prototype=Object.create(Error.prototype);zr.prototype.constructor=zr;zr.prototype.toString=function(e){return this.name+": "+Tc(this,e)};var Mt=zr,Jy=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Wy=["scalar","sequence","mapping"];function Gy(r){var e={};return r!==null&&Object.keys(r).forEach(function(t){r[t].forEach(function(n){e[String(n)]=t})}),e}function Qy(r,e){if(e=e||{},Object.keys(e).forEach(function(t){if(Jy.indexOf(t)===-1)throw new Mt('Unknown option "'+t+'" is met in definition of "'+r+'" YAML type.')}),this.options=e,this.tag=r,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(t){return t},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=Gy(e.styleAliases||null),Wy.indexOf(this.kind)===-1)throw new Mt('Unknown kind "'+this.kind+'" is specified for "'+r+'" YAML type.')}var Me=Qy;function io(r,e){var t=[];return r[e].forEach(function(n){var s=t.length;t.forEach(function(a,i){a.tag===n.tag&&a.kind===n.kind&&a.multi===n.multi&&(s=i)}),t[s]=n}),t}function Xy(){var r={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,t;function n(s){s.multi?(r.multi[s.kind].push(s),r.multi.fallback.push(s)):r[s.kind][s.tag]=r.fallback[s.tag]=s}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(n);return r}function Js(r){return this.extend(r)}Js.prototype.extend=function(e){var t=[],n=[];if(e instanceof Me)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new Mt("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");t.forEach(function(a){if(!(a instanceof Me))throw new Mt("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(a.loadKind&&a.loadKind!=="scalar")throw new Mt("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(a.multi)throw new Mt("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(a){if(!(a instanceof Me))throw new Mt("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var s=Object.create(Js.prototype);return s.implicit=(this.implicit||[]).concat(t),s.explicit=(this.explicit||[]).concat(n),s.compiledImplicit=io(s,"implicit"),s.compiledExplicit=io(s,"explicit"),s.compiledTypeMap=Xy(s.compiledImplicit,s.compiledExplicit),s};var eg=Js,tg=new Me("tag:yaml.org,2002:str",{kind:"scalar",construct:function(r){return r!==null?r:""}}),rg=new Me("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(r){return r!==null?r:[]}}),ng=new Me("tag:yaml.org,2002:map",{kind:"mapping",construct:function(r){return r!==null?r:{}}}),sg=new eg({explicit:[tg,rg,ng]});function ag(r){if(r===null)return!0;var e=r.length;return e===1&&r==="~"||e===4&&(r==="null"||r==="Null"||r==="NULL")}function ig(){return null}function og(r){return r===null}var ug=new Me("tag:yaml.org,2002:null",{kind:"scalar",resolve:ag,construct:ig,predicate:og,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function cg(r){if(r===null)return!1;var e=r.length;return e===4&&(r==="true"||r==="True"||r==="TRUE")||e===5&&(r==="false"||r==="False"||r==="FALSE")}function lg(r){return r==="true"||r==="True"||r==="TRUE"}function dg(r){return Object.prototype.toString.call(r)==="[object Boolean]"}var hg=new Me("tag:yaml.org,2002:bool",{kind:"scalar",resolve:cg,construct:lg,predicate:dg,represent:{lowercase:function(r){return r?"true":"false"},uppercase:function(r){return r?"TRUE":"FALSE"},camelcase:function(r){return r?"True":"False"}},defaultStyle:"lowercase"});function fg(r){return 48<=r&&r<=57||65<=r&&r<=70||97<=r&&r<=102}function pg(r){return 48<=r&&r<=55}function mg(r){return 48<=r&&r<=57}function yg(r){if(r===null)return!1;var e=r.length,t=0,n=!1,s;if(!e)return!1;if(s=r[t],(s==="-"||s==="+")&&(s=r[++t]),s==="0"){if(t+1===e)return!0;if(s=r[++t],s==="b"){for(t++;t<e;t++)if(s=r[t],s!=="_"){if(s!=="0"&&s!=="1")return!1;n=!0}return n&&s!=="_"}if(s==="x"){for(t++;t<e;t++)if(s=r[t],s!=="_"){if(!fg(r.charCodeAt(t)))return!1;n=!0}return n&&s!=="_"}if(s==="o"){for(t++;t<e;t++)if(s=r[t],s!=="_"){if(!pg(r.charCodeAt(t)))return!1;n=!0}return n&&s!=="_"}}if(s==="_")return!1;for(;t<e;t++)if(s=r[t],s!=="_"){if(!mg(r.charCodeAt(t)))return!1;n=!0}return!(!n||s==="_")}function gg(r){var e=r,t=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(t=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return t*parseInt(e.slice(2),2);if(e[1]==="x")return t*parseInt(e.slice(2),16);if(e[1]==="o")return t*parseInt(e.slice(2),8)}return t*parseInt(e,10)}function bg(r){return Object.prototype.toString.call(r)==="[object Number]"&&r%1===0&&!Na.isNegativeZero(r)}var _g=new Me("tag:yaml.org,2002:int",{kind:"scalar",resolve:yg,construct:gg,predicate:bg,represent:{binary:function(r){return r>=0?"0b"+r.toString(2):"-0b"+r.toString(2).slice(1)},octal:function(r){return r>=0?"0o"+r.toString(8):"-0o"+r.toString(8).slice(1)},decimal:function(r){return r.toString(10)},hexadecimal:function(r){return r>=0?"0x"+r.toString(16).toUpperCase():"-0x"+r.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),vg=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function wg(r){return!(r===null||!vg.test(r)||r[r.length-1]==="_")}function Og(r){var e,t;return e=r.replace(/_/g,"").toLowerCase(),t=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?t===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:t*parseFloat(e,10)}var Eg=/^[-+]?[0-9]+e/;function Ag(r,e){var t;if(isNaN(r))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===r)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===r)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Na.isNegativeZero(r))return"-0.0";return t=r.toString(10),Eg.test(t)?t.replace("e",".e"):t}function Pg(r){return Object.prototype.toString.call(r)==="[object Number]"&&(r%1!==0||Na.isNegativeZero(r))}var xg=new Me("tag:yaml.org,2002:float",{kind:"scalar",resolve:wg,construct:Og,predicate:Pg,represent:Ag,defaultStyle:"lowercase"}),Tg=sg.extend({implicit:[ug,hg,_g,xg]}),Sg=Tg,Sc=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Cc=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Cg(r){return r===null?!1:Sc.exec(r)!==null||Cc.exec(r)!==null}function kg(r){var e,t,n,s,a,i,o,u=0,c=null,l,d,h;if(e=Sc.exec(r),e===null&&(e=Cc.exec(r)),e===null)throw new Error("Date resolve error");if(t=+e[1],n=+e[2]-1,s=+e[3],!e[4])return new Date(Date.UTC(t,n,s));if(a=+e[4],i=+e[5],o=+e[6],e[7]){for(u=e[7].slice(0,3);u.length<3;)u+="0";u=+u}return e[9]&&(l=+e[10],d=+(e[11]||0),c=(l*60+d)*6e4,e[9]==="-"&&(c=-c)),h=new Date(Date.UTC(t,n,s,a,i,o,u)),c&&h.setTime(h.getTime()-c),h}function jg(r){return r.toISOString()}var Ig=new Me("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Cg,construct:kg,instanceOf:Date,represent:jg});function Rg(r){return r==="<<"||r===null}var Ng=new Me("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Rg}),Da=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Dg(r){if(r===null)return!1;var e,t,n=0,s=r.length,a=Da;for(t=0;t<s;t++)if(e=a.indexOf(r.charAt(t)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function Lg(r){var e,t,n=r.replace(/[\r\n=]/g,""),s=n.length,a=Da,i=0,o=[];for(e=0;e<s;e++)e%4===0&&e&&(o.push(i>>16&255),o.push(i>>8&255),o.push(i&255)),i=i<<6|a.indexOf(n.charAt(e));return t=s%4*6,t===0?(o.push(i>>16&255),o.push(i>>8&255),o.push(i&255)):t===18?(o.push(i>>10&255),o.push(i>>2&255)):t===12&&o.push(i>>4&255),new Uint8Array(o)}function Mg(r){var e="",t=0,n,s,a=r.length,i=Da;for(n=0;n<a;n++)n%3===0&&n&&(e+=i[t>>18&63],e+=i[t>>12&63],e+=i[t>>6&63],e+=i[t&63]),t=(t<<8)+r[n];return s=a%3,s===0?(e+=i[t>>18&63],e+=i[t>>12&63],e+=i[t>>6&63],e+=i[t&63]):s===2?(e+=i[t>>10&63],e+=i[t>>4&63],e+=i[t<<2&63],e+=i[64]):s===1&&(e+=i[t>>2&63],e+=i[t<<4&63],e+=i[64],e+=i[64]),e}function Fg(r){return Object.prototype.toString.call(r)==="[object Uint8Array]"}var Ug=new Me("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Dg,construct:Lg,predicate:Fg,represent:Mg}),Bg=Object.prototype.hasOwnProperty,Vg=Object.prototype.toString;function $g(r){if(r===null)return!0;var e=[],t,n,s,a,i,o=r;for(t=0,n=o.length;t<n;t+=1){if(s=o[t],i=!1,Vg.call(s)!=="[object Object]")return!1;for(a in s)if(Bg.call(s,a))if(!i)i=!0;else return!1;if(!i)return!1;if(e.indexOf(a)===-1)e.push(a);else return!1}return!0}function qg(r){return r!==null?r:[]}var zg=new Me("tag:yaml.org,2002:omap",{kind:"sequence",resolve:$g,construct:qg}),Hg=Object.prototype.toString;function Zg(r){if(r===null)return!0;var e,t,n,s,a,i=r;for(a=new Array(i.length),e=0,t=i.length;e<t;e+=1){if(n=i[e],Hg.call(n)!=="[object Object]"||(s=Object.keys(n),s.length!==1))return!1;a[e]=[s[0],n[s[0]]]}return!0}function Kg(r){if(r===null)return[];var e,t,n,s,a,i=r;for(a=new Array(i.length),e=0,t=i.length;e<t;e+=1)n=i[e],s=Object.keys(n),a[e]=[s[0],n[s[0]]];return a}var Yg=new Me("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Zg,construct:Kg}),Jg=Object.prototype.hasOwnProperty;function Wg(r){if(r===null)return!0;var e,t=r;for(e in t)if(Jg.call(t,e)&&t[e]!==null)return!1;return!0}function Gg(r){return r!==null?r:{}}var Qg=new Me("tag:yaml.org,2002:set",{kind:"mapping",resolve:Wg,construct:Gg});Sg.extend({implicit:[Ig,Ng],explicit:[Ug,zg,Yg,Qg]});function oo(r){return r===48?"\0":r===97?"\x07":r===98?"\b":r===116||r===9?"	":r===110?`
`:r===118?"\v":r===102?"\f":r===114?"\r":r===101?"\x1B":r===32?" ":r===34?'"':r===47?"/":r===92?"\\":r===78?"":r===95?"":r===76?"\u2028":r===80?"\u2029":""}var Xg=new Array(256),eb=new Array(256);for(var Kt=0;Kt<256;Kt++)Xg[Kt]=oo(Kt)?1:0,eb[Kt]=oo(Kt);function ln(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var kc={exports:{}};(function(r,e){(function(t){r.exports=t()})(function(){return function t(n,s,a){function i(c,l){if(!s[c]){if(!n[c]){var d=typeof ln=="function"&&ln;if(!l&&d)return d(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+c+"'")}l=s[c]={exports:{}},n[c][0].call(l.exports,function(h){var b=n[c][1][h];return i(b||h)},l,l.exports,t,n,s,a)}return s[c].exports}for(var o=typeof ln=="function"&&ln,u=0;u<a.length;u++)i(a[u]);return i}({1:[function(t,n,s){(function(a,i,o,u,c,l,d,h,b){var m=t("crypto");function w(A,S){S=k(A,S);var y;return(y=S.algorithm!=="passthrough"?m.createHash(S.algorithm):new j).write===void 0&&(y.write=y.update,y.end=y.update),x(S,y).dispatch(A),y.update||y.end(""),y.digest?y.digest(S.encoding==="buffer"?void 0:S.encoding):(A=y.read(),S.encoding!=="buffer"?A.toString(S.encoding):A)}(s=n.exports=w).sha1=function(A){return w(A)},s.keys=function(A){return w(A,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},s.MD5=function(A){return w(A,{algorithm:"md5",encoding:"hex"})},s.keysMD5=function(A){return w(A,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var g=m.getHashes?m.getHashes().slice():["sha1","md5"],P=(g.push("passthrough"),["buffer","hex","binary","base64"]);function k(A,S){var y={};if(y.algorithm=(S=S||{}).algorithm||"sha1",y.encoding=S.encoding||"hex",y.excludeValues=!!S.excludeValues,y.algorithm=y.algorithm.toLowerCase(),y.encoding=y.encoding.toLowerCase(),y.ignoreUnknown=S.ignoreUnknown===!0,y.respectType=S.respectType!==!1,y.respectFunctionNames=S.respectFunctionNames!==!1,y.respectFunctionProperties=S.respectFunctionProperties!==!1,y.unorderedArrays=S.unorderedArrays===!0,y.unorderedSets=S.unorderedSets!==!1,y.unorderedObjects=S.unorderedObjects!==!1,y.replacer=S.replacer||void 0,y.excludeKeys=S.excludeKeys||void 0,A===void 0)throw new Error("Object argument required.");for(var v=0;v<g.length;++v)g[v].toLowerCase()===y.algorithm.toLowerCase()&&(y.algorithm=g[v]);if(g.indexOf(y.algorithm)===-1)throw new Error('Algorithm "'+y.algorithm+'"  not supported. supported values: '+g.join(", "));if(P.indexOf(y.encoding)===-1&&y.algorithm!=="passthrough")throw new Error('Encoding "'+y.encoding+'"  not supported. supported values: '+P.join(", "));return y}function C(A){if(typeof A=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(A))!=null}function x(A,S,y){y=y||[];function v(p){return S.update?S.update(p,"utf8"):S.write(p,"utf8")}return{dispatch:function(p){return this["_"+((p=A.replacer?A.replacer(p):p)===null?"null":typeof p)](p)},_object:function(p){var O,T=Object.prototype.toString.call(p),H=/\[object (.*)\]/i.exec(T);if(H=(H=H?H[1]:"unknown:["+T+"]").toLowerCase(),0<=(T=y.indexOf(p)))return this.dispatch("[CIRCULAR:"+T+"]");if(y.push(p),o!==void 0&&o.isBuffer&&o.isBuffer(p))return v("buffer:"),v(p);if(H==="object"||H==="function"||H==="asyncfunction")return T=Object.keys(p),A.unorderedObjects&&(T=T.sort()),A.respectType===!1||C(p)||T.splice(0,0,"prototype","__proto__","constructor"),A.excludeKeys&&(T=T.filter(function(B){return!A.excludeKeys(B)})),v("object:"+T.length+":"),O=this,T.forEach(function(B){O.dispatch(B),v(":"),A.excludeValues||O.dispatch(p[B]),v(",")});if(!this["_"+H]){if(A.ignoreUnknown)return v("["+H+"]");throw new Error('Unknown object type "'+H+'"')}this["_"+H](p)},_array:function(p,B){B=B!==void 0?B:A.unorderedArrays!==!1;var T=this;if(v("array:"+p.length+":"),!B||p.length<=1)return p.forEach(function(Q){return T.dispatch(Q)});var H=[],B=p.map(function(Q){var F=new j,ne=y.slice();return x(A,F,ne).dispatch(Q),H=H.concat(ne.slice(y.length)),F.read().toString()});return y=y.concat(H),B.sort(),this._array(B,!1)},_date:function(p){return v("date:"+p.toJSON())},_symbol:function(p){return v("symbol:"+p.toString())},_error:function(p){return v("error:"+p.toString())},_boolean:function(p){return v("bool:"+p.toString())},_string:function(p){v("string:"+p.length+":"),v(p.toString())},_function:function(p){v("fn:"),C(p)?this.dispatch("[native]"):this.dispatch(p.toString()),A.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(p.name)),A.respectFunctionProperties&&this._object(p)},_number:function(p){return v("number:"+p.toString())},_xml:function(p){return v("xml:"+p.toString())},_null:function(){return v("Null")},_undefined:function(){return v("Undefined")},_regexp:function(p){return v("regex:"+p.toString())},_uint8array:function(p){return v("uint8array:"),this.dispatch(Array.prototype.slice.call(p))},_uint8clampedarray:function(p){return v("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(p))},_int8array:function(p){return v("int8array:"),this.dispatch(Array.prototype.slice.call(p))},_uint16array:function(p){return v("uint16array:"),this.dispatch(Array.prototype.slice.call(p))},_int16array:function(p){return v("int16array:"),this.dispatch(Array.prototype.slice.call(p))},_uint32array:function(p){return v("uint32array:"),this.dispatch(Array.prototype.slice.call(p))},_int32array:function(p){return v("int32array:"),this.dispatch(Array.prototype.slice.call(p))},_float32array:function(p){return v("float32array:"),this.dispatch(Array.prototype.slice.call(p))},_float64array:function(p){return v("float64array:"),this.dispatch(Array.prototype.slice.call(p))},_arraybuffer:function(p){return v("arraybuffer:"),this.dispatch(new Uint8Array(p))},_url:function(p){return v("url:"+p.toString())},_map:function(p){return v("map:"),p=Array.from(p),this._array(p,A.unorderedSets!==!1)},_set:function(p){return v("set:"),p=Array.from(p),this._array(p,A.unorderedSets!==!1)},_file:function(p){return v("file:"),this.dispatch([p.name,p.size,p.type,p.lastModfied])},_blob:function(){if(A.ignoreUnknown)return v("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return v("domwindow")},_bigint:function(p){return v("bigint:"+p.toString())},_process:function(){return v("process")},_timer:function(){return v("timer")},_pipe:function(){return v("pipe")},_tcp:function(){return v("tcp")},_udp:function(){return v("udp")},_tty:function(){return v("tty")},_statwatcher:function(){return v("statwatcher")},_securecontext:function(){return v("securecontext")},_connection:function(){return v("connection")},_zlib:function(){return v("zlib")},_context:function(){return v("context")},_nodescript:function(){return v("nodescript")},_httpparser:function(){return v("httpparser")},_dataview:function(){return v("dataview")},_signal:function(){return v("signal")},_fsevent:function(){return v("fsevent")},_tlswrap:function(){return v("tlswrap")}}}function j(){return{buf:"",write:function(A){this.buf+=A},end:function(A){this.buf+=A},read:function(){return this.buf}}}s.writeToStream=function(A,S,y){return y===void 0&&(y=S,S={}),x(S=k(A,S),y).dispatch(A)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(t,n,s){(function(a,i,o,u,c,l,d,h,b){(function(m){var w=typeof Uint8Array<"u"?Uint8Array:Array,g="+".charCodeAt(0),P="/".charCodeAt(0),k="0".charCodeAt(0),C="a".charCodeAt(0),x="A".charCodeAt(0),j="-".charCodeAt(0),A="_".charCodeAt(0);function S(y){return y=y.charCodeAt(0),y===g||y===j?62:y===P||y===A?63:y<k?-1:y<k+10?y-k+26+26:y<x+26?y-x:y<C+26?y-C+26:void 0}m.toByteArray=function(y){var v,p;if(0<y.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var O=y.length,O=y.charAt(O-2)==="="?2:y.charAt(O-1)==="="?1:0,T=new w(3*y.length/4-O),H=0<O?y.length-4:y.length,B=0;function Q(F){T[B++]=F}for(v=0;v<H;v+=4,0)Q((16711680&(p=S(y.charAt(v))<<18|S(y.charAt(v+1))<<12|S(y.charAt(v+2))<<6|S(y.charAt(v+3))))>>16),Q((65280&p)>>8),Q(255&p);return O==2?Q(255&(p=S(y.charAt(v))<<2|S(y.charAt(v+1))>>4)):O==1&&(Q((p=S(y.charAt(v))<<10|S(y.charAt(v+1))<<4|S(y.charAt(v+2))>>2)>>8&255),Q(255&p)),T},m.fromByteArray=function(y){var v,p,O,T,H=y.length%3,B="";function Q(F){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(F)}for(v=0,O=y.length-H;v<O;v+=3)p=(y[v]<<16)+(y[v+1]<<8)+y[v+2],B+=Q((T=p)>>18&63)+Q(T>>12&63)+Q(T>>6&63)+Q(63&T);switch(H){case 1:B=(B+=Q((p=y[y.length-1])>>2))+Q(p<<4&63)+"==";break;case 2:B=(B=(B+=Q((p=(y[y.length-2]<<8)+y[y.length-1])>>10))+Q(p>>4&63))+Q(p<<2&63)+"="}return B}})(s===void 0?this.base64js={}:s)}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(t,n,s){(function(a,i,g,u,c,l,d,h,b){var m=t("base64-js"),w=t("ieee754");function g(f,_,E){if(!(this instanceof g))return new g(f,_,E);var R,D,U,ce,we=typeof f;if(_==="base64"&&we=="string")for(f=(ce=f).trim?ce.trim():ce.replace(/^\s+|\s+$/g,"");f.length%4!=0;)f+="=";if(we=="number")R=te(f);else if(we=="string")R=g.byteLength(f,_);else{if(we!="object")throw new Error("First argument needs to be a number, array or string.");R=te(f.length)}if(g._useTypedArrays?D=g._augment(new Uint8Array(R)):((D=this).length=R,D._isBuffer=!0),g._useTypedArrays&&typeof f.byteLength=="number")D._set(f);else if(L(ce=f)||g.isBuffer(ce)||ce&&typeof ce=="object"&&typeof ce.length=="number")for(U=0;U<R;U++)g.isBuffer(f)?D[U]=f.readUInt8(U):D[U]=f[U];else if(we=="string")D.write(f,0,_);else if(we=="number"&&!g._useTypedArrays&&!E)for(U=0;U<R;U++)D[U]=0;return D}function P(f,_,E,R){return g._charsWritten=K(function(D){for(var U=[],ce=0;ce<D.length;ce++)U.push(255&D.charCodeAt(ce));return U}(_),f,E,R)}function k(f,_,E,R){return g._charsWritten=K(function(D){for(var U,ce,we=[],xe=0;xe<D.length;xe++)ce=D.charCodeAt(xe),U=ce>>8,ce=ce%256,we.push(ce),we.push(U);return we}(_),f,E,R)}function C(f,_,E){var R="";E=Math.min(f.length,E);for(var D=_;D<E;D++)R+=String.fromCharCode(f[D]);return R}function x(f,_,E,U){U||(N(typeof E=="boolean","missing or invalid endian"),N(_!=null,"missing offset"),N(_+1<f.length,"Trying to read beyond buffer length"));var D,U=f.length;if(!(U<=_))return E?(D=f[_],_+1<U&&(D|=f[_+1]<<8)):(D=f[_]<<8,_+1<U&&(D|=f[_+1])),D}function j(f,_,E,U){U||(N(typeof E=="boolean","missing or invalid endian"),N(_!=null,"missing offset"),N(_+3<f.length,"Trying to read beyond buffer length"));var D,U=f.length;if(!(U<=_))return E?(_+2<U&&(D=f[_+2]<<16),_+1<U&&(D|=f[_+1]<<8),D|=f[_],_+3<U&&(D+=f[_+3]<<24>>>0)):(_+1<U&&(D=f[_+1]<<16),_+2<U&&(D|=f[_+2]<<8),_+3<U&&(D|=f[_+3]),D+=f[_]<<24>>>0),D}function A(f,_,E,R){if(R||(N(typeof E=="boolean","missing or invalid endian"),N(_!=null,"missing offset"),N(_+1<f.length,"Trying to read beyond buffer length")),!(f.length<=_))return R=x(f,_,E,!0),32768&R?-1*(65535-R+1):R}function S(f,_,E,R){if(R||(N(typeof E=="boolean","missing or invalid endian"),N(_!=null,"missing offset"),N(_+3<f.length,"Trying to read beyond buffer length")),!(f.length<=_))return R=j(f,_,E,!0),2147483648&R?-1*(4294967295-R+1):R}function y(f,_,E,R){return R||(N(typeof E=="boolean","missing or invalid endian"),N(_+3<f.length,"Trying to read beyond buffer length")),w.read(f,_,E,23,4)}function v(f,_,E,R){return R||(N(typeof E=="boolean","missing or invalid endian"),N(_+7<f.length,"Trying to read beyond buffer length")),w.read(f,_,E,52,8)}function p(f,_,E,R,D){if(D||(N(_!=null,"missing value"),N(typeof R=="boolean","missing or invalid endian"),N(E!=null,"missing offset"),N(E+1<f.length,"trying to write beyond buffer length"),pe(_,65535)),D=f.length,!(D<=E))for(var U=0,ce=Math.min(D-E,2);U<ce;U++)f[E+U]=(_&255<<8*(R?U:1-U))>>>8*(R?U:1-U)}function O(f,_,E,R,D){if(D||(N(_!=null,"missing value"),N(typeof R=="boolean","missing or invalid endian"),N(E!=null,"missing offset"),N(E+3<f.length,"trying to write beyond buffer length"),pe(_,4294967295)),D=f.length,!(D<=E))for(var U=0,ce=Math.min(D-E,4);U<ce;U++)f[E+U]=_>>>8*(R?U:3-U)&255}function T(f,_,E,R,D){D||(N(_!=null,"missing value"),N(typeof R=="boolean","missing or invalid endian"),N(E!=null,"missing offset"),N(E+1<f.length,"Trying to write beyond buffer length"),ve(_,32767,-32768)),f.length<=E||p(f,0<=_?_:65535+_+1,E,R,D)}function H(f,_,E,R,D){D||(N(_!=null,"missing value"),N(typeof R=="boolean","missing or invalid endian"),N(E!=null,"missing offset"),N(E+3<f.length,"Trying to write beyond buffer length"),ve(_,2147483647,-2147483648)),f.length<=E||O(f,0<=_?_:4294967295+_+1,E,R,D)}function B(f,_,E,R,D){D||(N(_!=null,"missing value"),N(typeof R=="boolean","missing or invalid endian"),N(E!=null,"missing offset"),N(E+3<f.length,"Trying to write beyond buffer length"),me(_,34028234663852886e22,-34028234663852886e22)),f.length<=E||w.write(f,_,E,R,23,4)}function Q(f,_,E,R,D){D||(N(_!=null,"missing value"),N(typeof R=="boolean","missing or invalid endian"),N(E!=null,"missing offset"),N(E+7<f.length,"Trying to write beyond buffer length"),me(_,17976931348623157e292,-17976931348623157e292)),f.length<=E||w.write(f,_,E,R,52,8)}s.Buffer=g,s.SlowBuffer=g,s.INSPECT_MAX_BYTES=50,g.poolSize=8192,g._useTypedArrays=function(){try{var f=new ArrayBuffer(0),_=new Uint8Array(f);return _.foo=function(){return 42},_.foo()===42&&typeof _.subarray=="function"}catch{return!1}}(),g.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},g.isBuffer=function(f){return!(f==null||!f._isBuffer)},g.byteLength=function(f,_){var E;switch(f+="",_||"utf8"){case"hex":E=f.length/2;break;case"utf8":case"utf-8":E=V(f).length;break;case"ascii":case"binary":case"raw":E=f.length;break;case"base64":E=ue(f).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":E=2*f.length;break;default:throw new Error("Unknown encoding")}return E},g.concat=function(f,_){if(N(L(f),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),f.length===0)return new g(0);if(f.length===1)return f[0];if(typeof _!="number")for(D=_=0;D<f.length;D++)_+=f[D].length;for(var E=new g(_),R=0,D=0;D<f.length;D++){var U=f[D];U.copy(E,R),R+=U.length}return E},g.prototype.write=function(f,_,E,R){isFinite(_)?isFinite(E)||(R=E,E=void 0):(xe=R,R=_,_=E,E=xe),_=Number(_)||0;var D,U,ce,we,xe=this.length-_;switch((!E||xe<(E=Number(E)))&&(E=xe),R=String(R||"utf8").toLowerCase()){case"hex":D=function(et,Ue,Be,Te){Be=Number(Be)||0;var Ae=et.length-Be;(!Te||Ae<(Te=Number(Te)))&&(Te=Ae),N((Ae=Ue.length)%2==0,"Invalid hex string"),Ae/2<Te&&(Te=Ae/2);for(var $t=0;$t<Te;$t++){var Fa=parseInt(Ue.substr(2*$t,2),16);N(!isNaN(Fa),"Invalid hex string"),et[Be+$t]=Fa}return g._charsWritten=2*$t,$t}(this,f,_,E);break;case"utf8":case"utf-8":U=this,ce=_,we=E,D=g._charsWritten=K(V(f),U,ce,we);break;case"ascii":case"binary":D=P(this,f,_,E);break;case"base64":U=this,ce=_,we=E,D=g._charsWritten=K(ue(f),U,ce,we);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":D=k(this,f,_,E);break;default:throw new Error("Unknown encoding")}return D},g.prototype.toString=function(f,_,E){var R,D,U,ce,we=this;if(f=String(f||"utf8").toLowerCase(),_=Number(_)||0,(E=E!==void 0?Number(E):we.length)===_)return"";switch(f){case"hex":R=function(xe,et,Ue){var Be=xe.length;(!et||et<0)&&(et=0),(!Ue||Ue<0||Be<Ue)&&(Ue=Be);for(var Te="",Ae=et;Ae<Ue;Ae++)Te+=q(xe[Ae]);return Te}(we,_,E);break;case"utf8":case"utf-8":R=function(xe,et,Ue){var Be="",Te="";Ue=Math.min(xe.length,Ue);for(var Ae=et;Ae<Ue;Ae++)xe[Ae]<=127?(Be+=Ee(Te)+String.fromCharCode(xe[Ae]),Te=""):Te+="%"+xe[Ae].toString(16);return Be+Ee(Te)}(we,_,E);break;case"ascii":case"binary":R=C(we,_,E);break;case"base64":D=we,ce=E,R=(U=_)===0&&ce===D.length?m.fromByteArray(D):m.fromByteArray(D.slice(U,ce));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":R=function(xe,et,Ue){for(var Be=xe.slice(et,Ue),Te="",Ae=0;Ae<Be.length;Ae+=2)Te+=String.fromCharCode(Be[Ae]+256*Be[Ae+1]);return Te}(we,_,E);break;default:throw new Error("Unknown encoding")}return R},g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},g.prototype.copy=function(f,_,E,R){if(_=_||0,(R=R||R===0?R:this.length)!==(E=E||0)&&f.length!==0&&this.length!==0){N(E<=R,"sourceEnd < sourceStart"),N(0<=_&&_<f.length,"targetStart out of bounds"),N(0<=E&&E<this.length,"sourceStart out of bounds"),N(0<=R&&R<=this.length,"sourceEnd out of bounds"),R>this.length&&(R=this.length);var D=(R=f.length-_<R-E?f.length-_+E:R)-E;if(D<100||!g._useTypedArrays)for(var U=0;U<D;U++)f[U+_]=this[U+E];else f._set(this.subarray(E,E+D),_)}},g.prototype.slice=function(f,_){var E=this.length;if(f=ne(f,E,0),_=ne(_,E,E),g._useTypedArrays)return g._augment(this.subarray(f,_));for(var R=_-f,D=new g(R,void 0,!0),U=0;U<R;U++)D[U]=this[U+f];return D},g.prototype.get=function(f){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(f)},g.prototype.set=function(f,_){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(f,_)},g.prototype.readUInt8=function(f,_){if(_||(N(f!=null,"missing offset"),N(f<this.length,"Trying to read beyond buffer length")),!(f>=this.length))return this[f]},g.prototype.readUInt16LE=function(f,_){return x(this,f,!0,_)},g.prototype.readUInt16BE=function(f,_){return x(this,f,!1,_)},g.prototype.readUInt32LE=function(f,_){return j(this,f,!0,_)},g.prototype.readUInt32BE=function(f,_){return j(this,f,!1,_)},g.prototype.readInt8=function(f,_){if(_||(N(f!=null,"missing offset"),N(f<this.length,"Trying to read beyond buffer length")),!(f>=this.length))return 128&this[f]?-1*(255-this[f]+1):this[f]},g.prototype.readInt16LE=function(f,_){return A(this,f,!0,_)},g.prototype.readInt16BE=function(f,_){return A(this,f,!1,_)},g.prototype.readInt32LE=function(f,_){return S(this,f,!0,_)},g.prototype.readInt32BE=function(f,_){return S(this,f,!1,_)},g.prototype.readFloatLE=function(f,_){return y(this,f,!0,_)},g.prototype.readFloatBE=function(f,_){return y(this,f,!1,_)},g.prototype.readDoubleLE=function(f,_){return v(this,f,!0,_)},g.prototype.readDoubleBE=function(f,_){return v(this,f,!1,_)},g.prototype.writeUInt8=function(f,_,E){E||(N(f!=null,"missing value"),N(_!=null,"missing offset"),N(_<this.length,"trying to write beyond buffer length"),pe(f,255)),_>=this.length||(this[_]=f)},g.prototype.writeUInt16LE=function(f,_,E){p(this,f,_,!0,E)},g.prototype.writeUInt16BE=function(f,_,E){p(this,f,_,!1,E)},g.prototype.writeUInt32LE=function(f,_,E){O(this,f,_,!0,E)},g.prototype.writeUInt32BE=function(f,_,E){O(this,f,_,!1,E)},g.prototype.writeInt8=function(f,_,E){E||(N(f!=null,"missing value"),N(_!=null,"missing offset"),N(_<this.length,"Trying to write beyond buffer length"),ve(f,127,-128)),_>=this.length||(0<=f?this.writeUInt8(f,_,E):this.writeUInt8(255+f+1,_,E))},g.prototype.writeInt16LE=function(f,_,E){T(this,f,_,!0,E)},g.prototype.writeInt16BE=function(f,_,E){T(this,f,_,!1,E)},g.prototype.writeInt32LE=function(f,_,E){H(this,f,_,!0,E)},g.prototype.writeInt32BE=function(f,_,E){H(this,f,_,!1,E)},g.prototype.writeFloatLE=function(f,_,E){B(this,f,_,!0,E)},g.prototype.writeFloatBE=function(f,_,E){B(this,f,_,!1,E)},g.prototype.writeDoubleLE=function(f,_,E){Q(this,f,_,!0,E)},g.prototype.writeDoubleBE=function(f,_,E){Q(this,f,_,!1,E)},g.prototype.fill=function(f,_,E){if(_=_||0,E=E||this.length,N(typeof(f=typeof(f=f||0)=="string"?f.charCodeAt(0):f)=="number"&&!isNaN(f),"value is not a number"),N(_<=E,"end < start"),E!==_&&this.length!==0){N(0<=_&&_<this.length,"start out of bounds"),N(0<=E&&E<=this.length,"end out of bounds");for(var R=_;R<E;R++)this[R]=f}},g.prototype.inspect=function(){for(var f=[],_=this.length,E=0;E<_;E++)if(f[E]=q(this[E]),E===s.INSPECT_MAX_BYTES){f[E+1]="...";break}return"<Buffer "+f.join(" ")+">"},g.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(g._useTypedArrays)return new g(this).buffer;for(var f=new Uint8Array(this.length),_=0,E=f.length;_<E;_+=1)f[_]=this[_];return f.buffer};var F=g.prototype;function ne(f,_,E){return typeof f!="number"?E:_<=(f=~~f)?_:0<=f||0<=(f+=_)?f:0}function te(f){return(f=~~Math.ceil(+f))<0?0:f}function L(f){return(Array.isArray||function(_){return Object.prototype.toString.call(_)==="[object Array]"})(f)}function q(f){return f<16?"0"+f.toString(16):f.toString(16)}function V(f){for(var _=[],E=0;E<f.length;E++){var R=f.charCodeAt(E);if(R<=127)_.push(f.charCodeAt(E));else for(var D=E,U=(55296<=R&&R<=57343&&E++,encodeURIComponent(f.slice(D,E+1)).substr(1).split("%")),ce=0;ce<U.length;ce++)_.push(parseInt(U[ce],16))}return _}function ue(f){return m.toByteArray(f)}function K(f,_,E,R){for(var D=0;D<R&&!(D+E>=_.length||D>=f.length);D++)_[D+E]=f[D];return D}function Ee(f){try{return decodeURIComponent(f)}catch{return String.fromCharCode(65533)}}function pe(f,_){N(typeof f=="number","cannot write a non-number as a number"),N(0<=f,"specified a negative value for writing an unsigned value"),N(f<=_,"value is larger than maximum value for type"),N(Math.floor(f)===f,"value has a fractional component")}function ve(f,_,E){N(typeof f=="number","cannot write a non-number as a number"),N(f<=_,"value larger than maximum allowed value"),N(E<=f,"value smaller than minimum allowed value"),N(Math.floor(f)===f,"value has a fractional component")}function me(f,_,E){N(typeof f=="number","cannot write a non-number as a number"),N(f<=_,"value larger than maximum allowed value"),N(E<=f,"value smaller than minimum allowed value")}function N(f,_){if(!f)throw new Error(_||"Failed assertion")}g._augment=function(f){return f._isBuffer=!0,f._get=f.get,f._set=f.set,f.get=F.get,f.set=F.set,f.write=F.write,f.toString=F.toString,f.toLocaleString=F.toString,f.toJSON=F.toJSON,f.copy=F.copy,f.slice=F.slice,f.readUInt8=F.readUInt8,f.readUInt16LE=F.readUInt16LE,f.readUInt16BE=F.readUInt16BE,f.readUInt32LE=F.readUInt32LE,f.readUInt32BE=F.readUInt32BE,f.readInt8=F.readInt8,f.readInt16LE=F.readInt16LE,f.readInt16BE=F.readInt16BE,f.readInt32LE=F.readInt32LE,f.readInt32BE=F.readInt32BE,f.readFloatLE=F.readFloatLE,f.readFloatBE=F.readFloatBE,f.readDoubleLE=F.readDoubleLE,f.readDoubleBE=F.readDoubleBE,f.writeUInt8=F.writeUInt8,f.writeUInt16LE=F.writeUInt16LE,f.writeUInt16BE=F.writeUInt16BE,f.writeUInt32LE=F.writeUInt32LE,f.writeUInt32BE=F.writeUInt32BE,f.writeInt8=F.writeInt8,f.writeInt16LE=F.writeInt16LE,f.writeInt16BE=F.writeInt16BE,f.writeInt32LE=F.writeInt32LE,f.writeInt32BE=F.writeInt32BE,f.writeFloatLE=F.writeFloatLE,f.writeFloatBE=F.writeFloatBE,f.writeDoubleLE=F.writeDoubleLE,f.writeDoubleBE=F.writeDoubleBE,f.fill=F.fill,f.inspect=F.inspect,f.toArrayBuffer=F.toArrayBuffer,f}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(t,n,s){(function(a,i,m,u,c,l,d,h,b){var m=t("buffer").Buffer,w=4,g=new m(w);g.fill(0),n.exports={hash:function(P,k,C,x){for(var j=k(function(p,O){p.length%w!=0&&(T=p.length+(w-p.length%w),p=m.concat([p,g],T));for(var T,H=[],B=O?p.readInt32BE:p.readInt32LE,Q=0;Q<p.length;Q+=w)H.push(B.call(p,Q));return H}(P=m.isBuffer(P)?P:new m(P),x),8*P.length),k=x,A=new m(C),S=k?A.writeInt32BE:A.writeInt32LE,y=0;y<j.length;y++)S.call(A,j[y],4*y,!0);return A}}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(t,n,s){(function(a,i,m,u,c,l,d,h,b){var m=t("buffer").Buffer,w=t("./sha"),g=t("./sha256"),P=t("./rng"),k={sha1:w,sha256:g,md5:t("./md5")},C=64,x=new m(C);function j(p,O){var T=k[p=p||"sha1"],H=[];return T||A("algorithm:",p,"is not yet supported"),{update:function(B){return m.isBuffer(B)||(B=new m(B)),H.push(B),B.length,this},digest:function(B){var Q=m.concat(H),Q=O?function(F,ne,te){m.isBuffer(ne)||(ne=new m(ne)),m.isBuffer(te)||(te=new m(te)),ne.length>C?ne=F(ne):ne.length<C&&(ne=m.concat([ne,x],C));for(var L=new m(C),q=new m(C),V=0;V<C;V++)L[V]=54^ne[V],q[V]=92^ne[V];return te=F(m.concat([L,te])),F(m.concat([q,te]))}(T,O,Q):T(Q);return H=null,B?Q.toString(B):Q}}}function A(){var p=[].slice.call(arguments).join(" ");throw new Error([p,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}x.fill(0),s.createHash=function(p){return j(p)},s.createHmac=j,s.randomBytes=function(p,O){if(!O||!O.call)return new m(P(p));try{O.call(this,void 0,new m(P(p)))}catch(T){O(T)}};var S,y=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],v=function(p){s[p]=function(){A("sorry,",p,"is not implemented yet")}};for(S in y)v(y[S])}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(t,n,s){(function(a,i,o,u,c,l,d,h,b){var m=t("./helpers");function w(A,S){A[S>>5]|=128<<S%32,A[14+(S+64>>>9<<4)]=S;for(var y=1732584193,v=-271733879,p=-1732584194,O=271733878,T=0;T<A.length;T+=16){var H=y,B=v,Q=p,F=O,y=P(y,v,p,O,A[T+0],7,-680876936),O=P(O,y,v,p,A[T+1],12,-389564586),p=P(p,O,y,v,A[T+2],17,606105819),v=P(v,p,O,y,A[T+3],22,-1044525330);y=P(y,v,p,O,A[T+4],7,-176418897),O=P(O,y,v,p,A[T+5],12,1200080426),p=P(p,O,y,v,A[T+6],17,-1473231341),v=P(v,p,O,y,A[T+7],22,-45705983),y=P(y,v,p,O,A[T+8],7,1770035416),O=P(O,y,v,p,A[T+9],12,-1958414417),p=P(p,O,y,v,A[T+10],17,-42063),v=P(v,p,O,y,A[T+11],22,-1990404162),y=P(y,v,p,O,A[T+12],7,1804603682),O=P(O,y,v,p,A[T+13],12,-40341101),p=P(p,O,y,v,A[T+14],17,-1502002290),y=k(y,v=P(v,p,O,y,A[T+15],22,1236535329),p,O,A[T+1],5,-165796510),O=k(O,y,v,p,A[T+6],9,-1069501632),p=k(p,O,y,v,A[T+11],14,643717713),v=k(v,p,O,y,A[T+0],20,-373897302),y=k(y,v,p,O,A[T+5],5,-701558691),O=k(O,y,v,p,A[T+10],9,38016083),p=k(p,O,y,v,A[T+15],14,-660478335),v=k(v,p,O,y,A[T+4],20,-405537848),y=k(y,v,p,O,A[T+9],5,568446438),O=k(O,y,v,p,A[T+14],9,-1019803690),p=k(p,O,y,v,A[T+3],14,-187363961),v=k(v,p,O,y,A[T+8],20,1163531501),y=k(y,v,p,O,A[T+13],5,-1444681467),O=k(O,y,v,p,A[T+2],9,-51403784),p=k(p,O,y,v,A[T+7],14,1735328473),y=C(y,v=k(v,p,O,y,A[T+12],20,-1926607734),p,O,A[T+5],4,-378558),O=C(O,y,v,p,A[T+8],11,-2022574463),p=C(p,O,y,v,A[T+11],16,1839030562),v=C(v,p,O,y,A[T+14],23,-35309556),y=C(y,v,p,O,A[T+1],4,-1530992060),O=C(O,y,v,p,A[T+4],11,1272893353),p=C(p,O,y,v,A[T+7],16,-155497632),v=C(v,p,O,y,A[T+10],23,-1094730640),y=C(y,v,p,O,A[T+13],4,681279174),O=C(O,y,v,p,A[T+0],11,-358537222),p=C(p,O,y,v,A[T+3],16,-722521979),v=C(v,p,O,y,A[T+6],23,76029189),y=C(y,v,p,O,A[T+9],4,-640364487),O=C(O,y,v,p,A[T+12],11,-421815835),p=C(p,O,y,v,A[T+15],16,530742520),y=x(y,v=C(v,p,O,y,A[T+2],23,-995338651),p,O,A[T+0],6,-198630844),O=x(O,y,v,p,A[T+7],10,1126891415),p=x(p,O,y,v,A[T+14],15,-1416354905),v=x(v,p,O,y,A[T+5],21,-57434055),y=x(y,v,p,O,A[T+12],6,1700485571),O=x(O,y,v,p,A[T+3],10,-1894986606),p=x(p,O,y,v,A[T+10],15,-1051523),v=x(v,p,O,y,A[T+1],21,-2054922799),y=x(y,v,p,O,A[T+8],6,1873313359),O=x(O,y,v,p,A[T+15],10,-30611744),p=x(p,O,y,v,A[T+6],15,-1560198380),v=x(v,p,O,y,A[T+13],21,1309151649),y=x(y,v,p,O,A[T+4],6,-145523070),O=x(O,y,v,p,A[T+11],10,-1120210379),p=x(p,O,y,v,A[T+2],15,718787259),v=x(v,p,O,y,A[T+9],21,-343485551),y=j(y,H),v=j(v,B),p=j(p,Q),O=j(O,F)}return Array(y,v,p,O)}function g(A,S,y,v,p,O){return j((S=j(j(S,A),j(v,O)))<<p|S>>>32-p,y)}function P(A,S,y,v,p,O,T){return g(S&y|~S&v,A,S,p,O,T)}function k(A,S,y,v,p,O,T){return g(S&v|y&~v,A,S,p,O,T)}function C(A,S,y,v,p,O,T){return g(S^y^v,A,S,p,O,T)}function x(A,S,y,v,p,O,T){return g(y^(S|~v),A,S,p,O,T)}function j(A,S){var y=(65535&A)+(65535&S);return(A>>16)+(S>>16)+(y>>16)<<16|65535&y}n.exports=function(A){return m.hash(A,w,16)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(t,n,s){(function(a,i,o,u,c,l,d,h,b){n.exports=function(m){for(var w,g=new Array(m),P=0;P<m;P++)!(3&P)&&(w=4294967296*Math.random()),g[P]=w>>>((3&P)<<3)&255;return g}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(t,n,s){(function(a,i,o,u,c,l,d,h,b){var m=t("./helpers");function w(k,C){k[C>>5]|=128<<24-C%32,k[15+(C+64>>9<<4)]=C;for(var x,j,A,S=Array(80),y=1732584193,v=-271733879,p=-1732584194,O=271733878,T=-1009589776,H=0;H<k.length;H+=16){for(var B=y,Q=v,F=p,ne=O,te=T,L=0;L<80;L++){S[L]=L<16?k[H+L]:P(S[L-3]^S[L-8]^S[L-14]^S[L-16],1);var q=g(g(P(y,5),(q=v,j=p,A=O,(x=L)<20?q&j|~q&A:!(x<40)&&x<60?q&j|q&A|j&A:q^j^A)),g(g(T,S[L]),(x=L)<20?1518500249:x<40?1859775393:x<60?-1894007588:-899497514)),T=O,O=p,p=P(v,30),v=y,y=q}y=g(y,B),v=g(v,Q),p=g(p,F),O=g(O,ne),T=g(T,te)}return Array(y,v,p,O,T)}function g(k,C){var x=(65535&k)+(65535&C);return(k>>16)+(C>>16)+(x>>16)<<16|65535&x}function P(k,C){return k<<C|k>>>32-C}n.exports=function(k){return m.hash(k,w,20,!0)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(t,n,s){(function(a,i,o,u,c,l,d,h,b){function m(C,x){var j=(65535&C)+(65535&x);return(C>>16)+(x>>16)+(j>>16)<<16|65535&j}function w(C,x){var j,A=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),S=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),y=new Array(64);C[x>>5]|=128<<24-x%32,C[15+(x+64>>9<<4)]=x;for(var v,p,O=0;O<C.length;O+=16){for(var T=S[0],H=S[1],B=S[2],Q=S[3],F=S[4],ne=S[5],te=S[6],L=S[7],q=0;q<64;q++)y[q]=q<16?C[q+O]:m(m(m((p=y[q-2],P(p,17)^P(p,19)^k(p,10)),y[q-7]),(p=y[q-15],P(p,7)^P(p,18)^k(p,3))),y[q-16]),j=m(m(m(m(L,P(p=F,6)^P(p,11)^P(p,25)),F&ne^~F&te),A[q]),y[q]),v=m(P(v=T,2)^P(v,13)^P(v,22),T&H^T&B^H&B),L=te,te=ne,ne=F,F=m(Q,j),Q=B,B=H,H=T,T=m(j,v);S[0]=m(T,S[0]),S[1]=m(H,S[1]),S[2]=m(B,S[2]),S[3]=m(Q,S[3]),S[4]=m(F,S[4]),S[5]=m(ne,S[5]),S[6]=m(te,S[6]),S[7]=m(L,S[7])}return S}var g=t("./helpers"),P=function(C,x){return C>>>x|C<<32-x},k=function(C,x){return C>>>x};n.exports=function(C){return g.hash(C,w,32,!0)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(t,n,s){(function(a,i,o,u,c,l,d,h,b){s.read=function(m,w,g,P,O){var C,x,j=8*O-P-1,A=(1<<j)-1,S=A>>1,y=-7,v=g?O-1:0,p=g?-1:1,O=m[w+v];for(v+=p,C=O&(1<<-y)-1,O>>=-y,y+=j;0<y;C=256*C+m[w+v],v+=p,y-=8);for(x=C&(1<<-y)-1,C>>=-y,y+=P;0<y;x=256*x+m[w+v],v+=p,y-=8);if(C===0)C=1-S;else{if(C===A)return x?NaN:1/0*(O?-1:1);x+=Math.pow(2,P),C-=S}return(O?-1:1)*x*Math.pow(2,C-P)},s.write=function(m,w,g,P,k,T){var x,j,A=8*T-k-1,S=(1<<A)-1,y=S>>1,v=k===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=P?0:T-1,O=P?1:-1,T=w<0||w===0&&1/w<0?1:0;for(w=Math.abs(w),isNaN(w)||w===1/0?(j=isNaN(w)?1:0,x=S):(x=Math.floor(Math.log(w)/Math.LN2),w*(P=Math.pow(2,-x))<1&&(x--,P*=2),2<=(w+=1<=x+y?v/P:v*Math.pow(2,1-y))*P&&(x++,P/=2),S<=x+y?(j=0,x=S):1<=x+y?(j=(w*P-1)*Math.pow(2,k),x+=y):(j=w*Math.pow(2,y-1)*Math.pow(2,k),x=0));8<=k;m[g+p]=255&j,p+=O,j/=256,k-=8);for(x=x<<k|j,A+=k;0<A;m[g+p]=255&x,p+=O,x/=256,A-=8);m[g+p-O]|=128*T}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(t,n,s){(function(a,i,o,u,c,l,d,h,b){var m,w,g;function P(){}(a=n.exports={}).nextTick=(w=typeof window<"u"&&window.setImmediate,g=typeof window<"u"&&window.postMessage&&window.addEventListener,w?function(k){return window.setImmediate(k)}:g?(m=[],window.addEventListener("message",function(k){var C=k.source;C!==window&&C!==null||k.data!=="process-tick"||(k.stopPropagation(),0<m.length&&m.shift()())},!0),function(k){m.push(k),window.postMessage("process-tick","*")}):function(k){setTimeout(k,0)}),a.title="browser",a.browser=!0,a.env={},a.argv=[],a.on=P,a.addListener=P,a.once=P,a.off=P,a.removeListener=P,a.removeAllListeners=P,a.emit=P,a.binding=function(k){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(k){throw new Error("process.chdir is not supported")}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)})})(kc);var tb=kc.exports;const rb=Sn(tb),uo=(...r)=>rb(r.join("_")),nb=new Map;class La extends md{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,t){return Promise.resolve(this.cache.get(uo(e,t))??null)}async update(e,t,n){this.cache.set(uo(e,t),n)}static global(){return new La(nb)}}class sb extends ju{constructor({cache:e,concurrency:t,...n}){super(t?{maxConcurrency:t,...n}:n),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","llms",this._llmType()]}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof e=="object"?this.cache=e:e?this.cache=La.global():this.cache=void 0}async generatePrompt(e,t,n){const s=e.map(a=>a.toString());return this.generate(s,t,n)}invocationParams(e){return{}}_flattenLLMResult(e){const t=[];for(let n=0;n<e.generations.length;n+=1){const s=e.generations[n];if(n===0)t.push({generations:[s],llmOutput:e.llmOutput});else{const a=e.llmOutput?{...e.llmOutput,tokenUsage:{}}:void 0;t.push({generations:[s],llmOutput:a})}}return t}async _generateUncached(e,t,n){const s=await St.configure(n.callbacks,this.callbacks,n.tags,this.tags,n.metadata,this.metadata,{verbose:this.verbose}),a={options:t,invocation_params:this==null?void 0:this.invocationParams(t)},i=await(s==null?void 0:s.handleLLMStart(this.toJSON(),e,void 0,void 0,a));let o;try{o=await this._generate(e,t,i==null?void 0:i[0])}catch(l){throw await Promise.all((i??[]).map(d=>d==null?void 0:d.handleLLMError(l))),l}const u=this._flattenLLMResult(o);await Promise.all((i??[]).map((l,d)=>l==null?void 0:l.handleLLMEnd(u[d])));const c=(i==null?void 0:i.map(l=>l.runId))||void 0;return Object.defineProperty(o,Fo,{value:c?{runIds:c}:void 0,configurable:!0}),o}async generate(e,t,n){if(!Array.isArray(e))throw new Error("Argument 'prompts' is expected to be a string[]");let s;Array.isArray(t)?s={stop:t}:t!=null&&t.timeout&&!t.signal?s={...t,signal:AbortSignal.timeout(t.timeout)}:s=t??{};const a={tags:s.tags,metadata:s.metadata,callbacks:s.callbacks??n};if(delete s.tags,delete s.metadata,delete s.callbacks,!this.cache)return this._generateUncached(e,s,a);const{cache:i}=this,o=this.serialize();o.stop=s.stop??o.stop;const u=`${Object.entries(o).sort()}`,c=[],l=await Promise.all(e.map(async(h,b)=>{const m=await i.lookup(h,u);return m||c.push(b),m}));let d={};if(c.length>0){const h=await this._generateUncached(c.map(b=>e[b]),s,a);await Promise.all(h.generations.map(async(b,m)=>{const w=c[m];return l[w]=b,i.update(e[w],u,b)})),d=h.llmOutput??{}}return{generations:l,llmOutput:d}}async call(e,t,n){const{generations:s}=await this.generate([e],t??{},n);return s[0][0].text}async predict(e,t,n){return this.call(e,t,n)}async predictMessages(e,t,n){const s=wa(e),a=await this.call(s,t,n);return new Bo(a)}_identifyingParams(){return{}}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}_modelType(){return"base_llm"}static async deserialize(e){const{_type:t,_model:n,...s}=e;if(n&&n!=="base_llm")throw new Error(`Cannot load LLM with model ${n}`);const a={openai:(await Ie(()=>import("./openai.0bf199bd.js"),["_app/immutable/chunks/openai.0bf199bd.js","_app/immutable/chunks/prompt-layer.00daf386.js"])).OpenAI}[t];if(a===void 0)throw new Error(`Cannot load  LLM with type ${t}`);return new a(s)}}class ab extends sb{async _generate(e,t,n){return{generations:await Promise.all(e.map((a,i)=>this._call(a,{...t,promptIndex:i},n).then(o=>[{text:o}])))}}}class Ma extends ab{get lc_secrets(){return{apiKey:"HUGGINGFACEHUB_API_KEY"}}constructor(e){if(super(e??{}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"gpt2"}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topK",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.model=(e==null?void 0:e.model)??this.model,this.temperature=(e==null?void 0:e.temperature)??this.temperature,this.maxTokens=(e==null?void 0:e.maxTokens)??this.maxTokens,this.topP=(e==null?void 0:e.topP)??this.topP,this.topK=(e==null?void 0:e.topK)??this.topK,this.frequencyPenalty=(e==null?void 0:e.frequencyPenalty)??this.frequencyPenalty,this.apiKey=(e==null?void 0:e.apiKey)??Se("HUGGINGFACEHUB_API_KEY"),!this.apiKey)throw new Error("Please set an API key for HuggingFace Hub in the environment variable HUGGINGFACEHUB_API_KEY or in the apiKey field of the HuggingFaceInference constructor.")}_llmType(){return"hf"}async _call(e,t){const{HfInference:n}=await Ma.imports(),s=new n(this.apiKey);return(await this.caller.callWithOptions({signal:t.signal},s.textGeneration.bind(s),{model:this.model,parameters:{return_full_text:!1,temperature:this.temperature,max_new_tokens:this.maxTokens,top_p:this.topP,top_k:this.topK,repetition_penalty:this.frequencyPenalty},inputs:e})).generated_text}static async imports(){try{const{HfInference:e}=await Ie(()=>Promise.resolve().then(()=>ud),void 0);return{HfInference:e}}catch{throw new Error("Please install huggingface as a dependency with, e.g. `yarn add @huggingface/inference`")}}}async function co(r,e,t,n,s){const a=s;console.log("model",t);const i=new Ma({apiKey:r,model:"tiiuae/falcon-7b-instruct",maxTokens:5e3}),u=await Pa.fromLLM(i,e.asRetriever(),{returnSourceDocuments:!0}).call({question:a,chat_history:[]});return console.log("result",u),console.log(u.text),u.text}function Ws(r){r.from("documents").select("name:metadata->>file_name, size:metadata->>file_size",{count:"exact"}).then(e=>{const n=e.data.reduce((i,o)=>(i.find(c=>c.name===o.name)||i.push(o),i),[]);n.sort((i,o)=>parseInt(o.size)-parseInt(i.size));const s=n.length,a=n.reduce((i,o)=>i+parseInt(o.size),0);console.log("Total Documents:",s),console.log("Total Size (bytes):",a),n.forEach(i=>{`${i.name}`,console.log(`**${i.name}** (${i.size} bytes)`),console.log("")})}).catch(e=>{console.error("Error:",e)})}const{console:ib}=mo,Jt="src/lib/AuthCheck.svelte";function jc(r){let e,t,n=r[5].message+"",s;const a={c:function(){e=W("p"),t=Wt("Error: "),s=Wt(n),this.h()},l:function(o){e=G(o,"P",{class:!0});var u=be(e);t=Gt(u,"Error: "),s=Gt(u,n),u.forEach(se),this.h()},h:function(){Y(e,"class","text-center text-danger"),J(e,Jt,42,2,839)},m:function(o,u){_e(o,e,u),$(e,t),$(e,s)},p:bt,i:bt,o:bt,d:function(o){o&&se(e)}};return Ze("SvelteRegisterBlock",{block:a,id:jc.name,type:"catch",source:"(31:0) {:catch error}",ctx:r}),a}function Ic(r){let e,t,n,s;const a=[Nc,Rc],i=[];function o(c,l){var d;return(d=c[4])!=null&&d.user?0:1}e=o(r),t=i[e]=a[e](r);const u={c:function(){t.c(),n=vn()},l:function(l){t.l(l),n=vn()},m:function(l,d){i[e].m(l,d),_e(l,n,d),s=!0},p:function(l,d){t.p(l,d)},i:function(l){s||(Zr(t),s=!0)},o:function(l){Hr(t),s=!1},d:function(l){l&&se(n),i[e].d(l)}};return Ze("SvelteRegisterBlock",{block:u,id:Ic.name,type:"then",source:"(19:0) {:then session}",ctx:r}),u}function Rc(r){let e,t="You must be signed in to view this page",n,s,a,i="Login",o,u,c="Register";const l={c:function(){e=W("p"),e.textContent=t,n=le(),s=W("div"),a=W("a"),a.textContent=i,o=le(),u=W("a"),u.textContent=c,this.h()},l:function(h){e=G(h,"P",{class:!0,"data-svelte-h":!0}),ye(e)!=="svelte-b4gom2"&&(e.textContent=t),n=de(h),s=G(h,"DIV",{class:!0});var b=be(s);a=G(b,"A",{href:!0,class:!0,"data-svelte-h":!0}),ye(a)!=="svelte-f0ojl5"&&(a.textContent=i),o=de(b),u=G(b,"A",{href:!0,class:!0,"data-svelte-h":!0}),ye(u)!=="svelte-ruuhj7"&&(u.textContent=c),b.forEach(se),this.h()},h:function(){Y(e,"class","text-center text-danger"),J(e,Jt,33,4,559),Y(a,"href","/login"),Y(a,"class","btn btn-primary"),J(a,Jt,37,6,687),Y(u,"href","/register"),Y(u,"class","btn btn-secondary"),J(u,Jt,38,6,744),Y(s,"class","auth-buttons"),J(s,Jt,36,4,654)},m:function(h,b){_e(h,e,b),_e(h,n,b),_e(h,s,b),$(s,a),$(s,o),$(s,u)},p:bt,i:bt,o:bt,d:function(h){h&&(se(e),se(n),se(s))}};return Ze("SvelteRegisterBlock",{block:l,id:Rc.name,type:"else",source:"(22:2) {:else}",ctx:r}),l}function Nc(r){let e;const t=r[2].default,n=Zc(t,r,r[1],null),s={c:function(){n&&n.c()},l:function(i){n&&n.l(i)},m:function(i,o){n&&n.m(i,o),e=!0},p:function(i,o){n&&n.p&&(!e||o&2)&&Kc(n,t,i,i[1],e?Jc(t,i[1],o,null):Yc(i[1]),null)},i:function(i){e||(Zr(n,i),e=!0)},o:function(i){Hr(n,i),e=!1},d:function(i){n&&n.d(i)}};return Ze("SvelteRegisterBlock",{block:s,id:Nc.name,type:"if",source:"(20:2) {#if session?.user}",ctx:r}),s}function Dc(r){let e,t="Loading...";const n={c:function(){e=W("p"),e.textContent=t,this.h()},l:function(a){e=G(a,"P",{"data-svelte-h":!0}),ye(e)!=="svelte-qdsr2u"&&(e.textContent=t),this.h()},h:function(){J(e,Jt,28,2,476)},m:function(a,i){_e(a,e,i)},p:bt,i:bt,o:bt,d:function(a){a&&se(e)}};return Ze("SvelteRegisterBlock",{block:n,id:Dc.name,type:"pending",source:"(17:25)    <p>Loading...</p> {:then session}",ctx:r}),n}function Gs(r){let e,t,n={ctx:r,current:null,token:null,hasCatch:!0,pending:Dc,then:Ic,catch:jc,value:4,error:5,blocks:[,,,]};il(r[0](),n);const s={c:function(){e=vn(),n.block.c()},l:function(i){e=vn(),n.block.l(i)},m:function(i,o){_e(i,e,o),n.block.m(i,n.anchor=o),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p:function(i,[o]){r=i,ol(n,r,o)},i:function(i){t||(Zr(n.block),t=!0)},o:function(i){for(let o=0;o<3;o+=1){const u=n.blocks[o];Hr(u)}t=!1},d:function(i){i&&se(e),n.block.d(i),n.token=null,n=null}};return Ze("SvelteRegisterBlock",{block:s,id:Gs.name,type:"component",source:"",ctx:r}),s}function ob(r,e,t){let{$$slots:n={},$$scope:s}=e;po("AuthCheck",n,["default"]);const a=_t(ct,ut),i=async()=>{const{data:{session:u},error:c}=await a.auth.getSession();return c?(console.log(c),null):u},o=[];return Object.keys(e).forEach(u=>{!~o.indexOf(u)&&u.slice(0,2)!=="$$"&&u!=="slot"&&ib.warn(`<AuthCheck> was created with unknown prop '${u}'`)}),r.$$set=u=>{"$$scope"in u&&t(1,s=u.$$scope)},r.$capture_state=()=>({createClient:_t,PUBLIC_SUPABASE_KEY:ut,PUBLIC_SUPABASE_URL:ct,supabaseClient:a,getSessionData:i}),[i,s,n]}class Lc extends ho{constructor(e){super(e),fo(this,e,ob,Gs,lo,{}),Ze("SvelteRegisterComponent",{component:this,tagName:"AuthCheck",options:e,id:Gs.name})}}const{console:ub}=mo,ee="src/routes/+page.svelte";function Mc(r){let e,t,n="Configuration",s,a,i=Ws(r[4])+"",o;const u={c:function(){e=W("div"),t=W("h2"),t.textContent=n,s=le(),a=W("div"),o=Wt(i),this.h()},l:function(l){e=G(l,"DIV",{class:!0});var d=be(e);t=G(d,"H2",{"data-svelte-h":!0}),ye(t)!=="svelte-bx2tqs"&&(t.textContent=n),d.forEach(se),s=de(l),a=G(l,"DIV",{class:!0});var h=be(a);o=Gt(h,i),h.forEach(se),this.h()},h:function(){J(t,ee,261,10,6870),Y(e,"class","sidebar"),J(e,ee,260,8,6838),Y(a,"class","content"),J(a,ee,266,8,7057)},m:function(l,d){_e(l,e,d),$(e,t),_e(l,s,d),_e(l,a,d),$(a,o)},p:function(l,d){d[0]&16&&i!==(i=Ws(l[4])+"")&&wn(o,i)},d:function(l){l&&(se(e),se(s),se(a))}};return Ze("SvelteRegisterBlock",{block:u,id:Mc.name,type:"if",source:"(208:34) ",ctx:r}),u}function Fc(r){let e,t,n="Configuration",s,a,i="Choose your model and temperature for asking questions.",o,u,c,l="Model",d,h,b,m="tiiuae/falcon-7b-instruct",w,g="meta-llama/Llama-2-70b-chat-hf",P,k="OpenAssistant/oasst-sft-4-pythia-12b-epoch-3.5",C,x,j,A="Temperature",S,y,v,p,O,T,H,B,Q,F,ne="Ask the AI",te,L,q="Generated Text:",V,ue,K="",Ee,pe;const ve={c:function(){e=W("div"),t=W("h2"),t.textContent=n,s=le(),a=W("p"),a.textContent=i,o=le(),u=W("div"),c=W("label"),c.textContent=l,d=le(),h=W("select"),b=W("option"),b.textContent=m,w=W("option"),w.textContent=g,P=W("option"),P.textContent=k,C=le(),x=W("div"),j=W("label"),j.textContent=A,S=le(),y=W("input"),v=le(),p=W("span"),O=Wt(r[9]),T=le(),H=W("div"),B=W("textarea"),Q=le(),F=W("button"),F.textContent=ne,te=le(),L=W("p"),L.textContent=q,V=le(),ue=W("div"),ue.innerHTML=K,this.h()},l:function(N){e=G(N,"DIV",{class:!0});var f=be(e);t=G(f,"H2",{"data-svelte-h":!0}),ye(t)!=="svelte-bx2tqs"&&(t.textContent=n),s=de(f),a=G(f,"P",{"data-svelte-h":!0}),ye(a)!=="svelte-1o6n24x"&&(a.textContent=i),o=de(f),u=G(f,"DIV",{class:!0});var _=be(u);c=G(_,"LABEL",{for:!0,"data-svelte-h":!0}),ye(c)!=="svelte-6cjlpw"&&(c.textContent=l),d=de(_),h=G(_,"SELECT",{id:!0});var E=be(h);b=G(E,"OPTION",{"data-svelte-h":!0}),ye(b)!=="svelte-h4r1ny"&&(b.textContent=m),w=G(E,"OPTION",{"data-svelte-h":!0}),ye(w)!=="svelte-153lf52"&&(w.textContent=g),P=G(E,"OPTION",{"data-svelte-h":!0}),ye(P)!=="svelte-1ww46wk"&&(P.textContent=k),E.forEach(se),_.forEach(se),C=de(f),x=G(f,"DIV",{class:!0});var R=be(x);j=G(R,"LABEL",{for:!0,"data-svelte-h":!0}),ye(j)!=="svelte-11sobei"&&(j.textContent=A),S=de(R),y=G(R,"INPUT",{type:!0,id:!0,min:!0,max:!0,step:!0}),v=de(R),p=G(R,"SPAN",{});var D=be(p);O=Gt(D,r[9]),D.forEach(se),R.forEach(se),f.forEach(se),T=de(N),H=G(N,"DIV",{class:!0});var U=be(H);B=G(U,"TEXTAREA",{}),be(B).forEach(se),Q=de(U),F=G(U,"BUTTON",{class:!0,"data-svelte-h":!0}),ye(F)!=="svelte-lwgic4"&&(F.textContent=ne),U.forEach(se),te=de(N),L=G(N,"P",{"data-svelte-h":!0}),ye(L)!=="svelte-50blvq"&&(L.textContent=q),V=de(N),ue=G(N,"DIV",{id:!0,"data-svelte-h":!0}),ye(ue)!=="svelte-sbt6pq"&&(ue.innerHTML=K),this.h()},h:function(){J(t,ee,217,10,5231),J(a,ee,218,10,5264),Y(c,"for","model"),J(c,ee,220,12,5370),b.__value="tiiuae/falcon-7b-instruct",Le(b,b.__value),J(b,ee,222,14,5469),w.__value="meta-llama/Llama-2-70b-chat-hf",Le(w,w.__value),J(w,ee,225,14,5592),P.__value="OpenAssistant/oasst-sft-4-pythia-12b-epoch-3.5",Le(P,P.__value),J(P,ee,228,14,5725),Y(h,"id","model"),r[8]===void 0&&Wc(()=>r[26].call(h)),J(h,ee,221,12,5415),Y(u,"class","select"),J(u,ee,219,10,5337),Y(j,"for","temperature"),J(j,ee,234,12,5958),Y(y,"type","range"),Y(y,"id","temperature"),Y(y,"min","0.1"),Y(y,"max","1.0"),Y(y,"step","0.2"),J(y,ee,235,12,6015),J(p,ee,243,12,6220),Y(x,"class","slider"),J(x,ee,233,10,5925),Y(e,"class","sidebar"),J(e,ee,216,8,5199),J(B,ee,249,10,6380),Y(F,"class","btn btn-primary"),J(F,ee,250,10,6425),Y(H,"class","content"),J(H,ee,248,8,6348),J(L,ee,254,8,6557),Y(ue,"id","displayTextContainer"),J(ue,ee,255,8,6588)},m:function(N,f){_e(N,e,f),$(e,t),$(e,s),$(e,a),$(e,o),$(e,u),$(u,c),$(u,d),$(u,h),$(h,b),$(h,w),$(h,P),Ba(h,r[8],!0),$(e,C),$(e,x),$(x,j),$(x,S),$(x,y),Le(y,r[9]),$(x,v),$(x,p),$(p,O),_e(N,T,f),_e(N,H,f),$(H,B),Le(B,r[3]),$(H,Q),$(H,F),_e(N,te,f),_e(N,L,f),_e(N,V,f),_e(N,ue,f),Ee||(pe=[je(h,"change",r[26]),je(y,"change",r[27]),je(y,"input",r[27]),je(B,"input",r[28]),je(F,"click",r[29],!1,!1,!1,!1)],Ee=!0)},p:function(N,f){f[0]&256&&Ba(h,N[8]),f[0]&512&&Le(y,N[9]),f[0]&512&&wn(O,N[9]),f[0]&8&&Le(B,N[3])},d:function(N){N&&(se(e),se(T),se(H),se(te),se(L),se(V),se(ue)),Ee=!1,Xs(pe)}};return Ze("SvelteRegisterBlock",{block:ve,id:Fc.name,type:"if",source:"(164:48) ",ctx:r}),ve}function Uc(r){let e,t,n="Configuration",s,a,i="Choose your chunk size and overlap for adding knowledge.",o,u,c,l="Chunk Size",d,h,b,m,w,g,P,k,C="Chunk Overlap",x,j,A,S,y,v,p,O,T,H,B,Q="Upload Files",F,ne,te,L,q,V="Add the URL to the database",ue,K;const Ee={c:function(){e=W("div"),t=W("h2"),t.textContent=n,s=le(),a=W("p"),a.textContent=i,o=le(),u=W("div"),c=W("label"),c.textContent=l,d=le(),h=W("input"),b=le(),m=W("span"),w=Wt(r[6]),g=le(),P=W("div"),k=W("label"),k.textContent=C,x=le(),j=W("input"),A=le(),S=W("span"),y=Wt(r[7]),v=le(),p=W("div"),O=W("div"),T=W("input"),H=le(),B=W("button"),B.textContent=Q,F=le(),ne=W("div"),te=W("textarea"),L=le(),q=W("button"),q.textContent=V,this.h()},l:function(ve){e=G(ve,"DIV",{class:!0});var me=be(e);t=G(me,"H2",{"data-svelte-h":!0}),ye(t)!=="svelte-bx2tqs"&&(t.textContent=n),s=de(me),a=G(me,"P",{"data-svelte-h":!0}),ye(a)!=="svelte-gxt4ze"&&(a.textContent=i),o=de(me),u=G(me,"DIV",{class:!0});var N=be(u);c=G(N,"LABEL",{for:!0,"data-svelte-h":!0}),ye(c)!=="svelte-xcnf9x"&&(c.textContent=l),d=de(N),h=G(N,"INPUT",{type:!0,id:!0,min:!0,max:!0,step:!0}),b=de(N),m=G(N,"SPAN",{});var f=be(m);w=Gt(f,r[6]),f.forEach(se),N.forEach(se),g=de(me),P=G(me,"DIV",{class:!0});var _=be(P);k=G(_,"LABEL",{for:!0,"data-svelte-h":!0}),ye(k)!=="svelte-1yjlqk5"&&(k.textContent=C),x=de(_),j=G(_,"INPUT",{type:!0,id:!0,min:!0,max:!0,step:!0}),A=de(_),S=G(_,"SPAN",{});var E=be(S);y=Gt(E,r[7]),E.forEach(se),_.forEach(se),me.forEach(se),v=de(ve),p=G(ve,"DIV",{class:!0});var R=be(p);O=G(R,"DIV",{class:!0});var D=be(O);T=G(D,"INPUT",{type:!0}),H=de(D),B=G(D,"BUTTON",{class:!0,"data-svelte-h":!0}),ye(B)!=="svelte-1lezrl1"&&(B.textContent=Q),D.forEach(se),F=de(R),ne=G(R,"DIV",{class:!0});var U=be(ne);te=G(U,"TEXTAREA",{}),be(te).forEach(se),L=de(U),q=G(U,"BUTTON",{class:!0,"data-svelte-h":!0}),ye(q)!=="svelte-q0tma6"&&(q.textContent=V),U.forEach(se),R.forEach(se),this.h()},h:function(){J(t,ee,158,10,3253),J(a,ee,159,10,3286),Y(c,"for","chunk-size"),J(c,ee,161,12,3393),Y(h,"type","range"),Y(h,"id","chunk-size"),Y(h,"min","100"),Y(h,"max","1000"),Y(h,"step","50"),J(h,ee,162,12,3448),J(m,ee,170,12,3650),Y(u,"class","slider"),J(u,ee,160,10,3360),Y(k,"for","chunk-overlap"),J(k,ee,173,12,3736),Y(j,"type","range"),Y(j,"id","chunk-overlap"),Y(j,"min","0"),Y(j,"max","100"),Y(j,"step","10"),J(j,ee,174,12,3797),J(S,ee,182,12,4002),Y(P,"class","slider"),J(P,ee,172,10,3703),Y(e,"class","sidebar"),J(e,ee,157,8,3221),Y(T,"type","file"),T.multiple=!0,J(T,ee,189,12,4204),Y(B,"class","btn btn-primary"),J(B,ee,190,12,4266),Y(O,"class","file-uploader"),J(O,ee,188,10,4164),J(te,ee,198,12,4537),Y(q,"class","btn btn-primary"),J(q,ee,199,12,4579),Y(ne,"class","url-uploader"),J(ne,ee,197,10,4498),Y(p,"class","content"),J(p,ee,187,8,4132)},m:function(ve,me){_e(ve,e,me),$(e,t),$(e,s),$(e,a),$(e,o),$(e,u),$(u,c),$(u,d),$(u,h),Le(h,r[6]),$(u,b),$(u,m),$(m,w),$(e,g),$(e,P),$(P,k),$(P,x),$(P,j),Le(j,r[7]),$(P,A),$(P,S),$(S,y),_e(ve,v,me),_e(ve,p,me),$(p,O),$(O,T),$(O,H),$(O,B),$(p,F),$(p,ne),$(ne,te),Le(te,r[2]),$(ne,L),$(ne,q),ue||(K=[je(h,"change",r[21]),je(h,"input",r[21]),je(j,"change",r[22]),je(j,"input",r[22]),je(T,"change",r[16],!1,!1,!1,!1),je(B,"click",r[23],!1,!1,!1,!1),je(te,"input",r[24]),je(q,"click",r[25],!1,!1,!1,!1)],ue=!0)},p:function(ve,me){me[0]&64&&Le(h,ve[6]),me[0]&64&&wn(w,ve[6]),me[0]&128&&Le(j,ve[7]),me[0]&128&&wn(y,ve[7]),me[0]&4&&Le(te,ve[2])},d:function(ve){ve&&(se(e),se(v),se(p)),ue=!1,Xs(K)}};return Ze("SvelteRegisterBlock",{block:Ee,id:Uc.name,type:"if",source:'(105:6) {#if mode === \\"Add Knowledge\\"}',ctx:r}),Ee}function Bc(r){let e,t,n,s=" James ",a,i,o=`He will remember everything you tell him and answer your questions.
        (Please let me know if I have to discipline him. He's still learning,
        and any feedback is welcome!)`,u,c,l,d,h,b,m="Add Knowledge",w,g,P,k,C="Chat with your Brain",x,j,A,S,y="Forget",v,p,O,T="Logout",H,B,Q;function F(q,V){if(q[0]==="Add Knowledge")return Uc;if(q[0]==="Chat with your Brain")return Fc;if(q[0]==="Forget")return Mc}let ne=F(r),te=ne&&ne(r);H=Xc(r[18][0]);const L={c:function(){e=W("div"),t=W("div"),n=W("h1"),n.textContent=s,a=le(),i=W("p"),i.textContent=o,u=le(),c=W("div"),l=W("div"),d=W("input"),h=le(),b=W("label"),b.textContent=m,w=le(),g=W("input"),P=le(),k=W("label"),k.textContent=C,x=le(),j=W("input"),A=le(),S=W("label"),S.textContent=y,v=le(),te&&te.c(),p=le(),O=W("button"),O.textContent=T,this.h()},l:function(V){e=G(V,"DIV",{class:!0});var ue=be(e);t=G(ue,"DIV",{class:!0});var K=be(t);n=G(K,"H1",{"data-svelte-h":!0}),ye(n)!=="svelte-la326"&&(n.textContent=s),a=de(K),i=G(K,"P",{"data-svelte-h":!0}),ye(i)!=="svelte-101ewg4"&&(i.textContent=o),K.forEach(se),u=de(ue),c=G(ue,"DIV",{class:!0});var Ee=be(c);l=G(Ee,"DIV",{class:!0});var pe=be(l);d=G(pe,"INPUT",{type:!0,id:!0}),h=de(pe),b=G(pe,"LABEL",{for:!0,"data-svelte-h":!0}),ye(b)!=="svelte-112aynz"&&(b.textContent=m),w=de(pe),g=G(pe,"INPUT",{type:!0,id:!0}),P=de(pe),k=G(pe,"LABEL",{for:!0,"data-svelte-h":!0}),ye(k)!=="svelte-41acxd"&&(k.textContent=C),x=de(pe),j=G(pe,"INPUT",{type:!0,id:!0}),A=de(pe),S=G(pe,"LABEL",{for:!0,"data-svelte-h":!0}),ye(S)!=="svelte-1h6y6ie"&&(S.textContent=y),pe.forEach(se),v=de(Ee),te&&te.l(Ee),Ee.forEach(se),ue.forEach(se),p=de(V),O=G(V,"BUTTON",{class:!0,"data-svelte-h":!0}),ye(O)!=="svelte-1hqql7h"&&(O.textContent=T),this.h()},h:function(){J(n,ee,124,6,2186),J(i,ee,125,6,2217),Y(t,"class","app-header"),J(t,ee,123,4,2155),Y(d,"type","radio"),d.__value="Add Knowledge",Le(d,d.__value),Y(d,"id","add-knowledge"),J(d,ee,135,8,2569),Y(b,"for","add-knowledge"),J(b,ee,141,8,2707),Y(g,"type","radio"),g.__value="Chat with your Brain",Le(g,g.__value),Y(g,"id","chat-with-brain"),J(g,ee,143,8,2765),Y(k,"for","chat-with-brain"),J(k,ee,149,8,2912),Y(j,"type","radio"),j.__value="Forget",Le(j,j.__value),Y(j,"id","forget"),J(j,ee,151,8,2979),Y(S,"for","forget"),J(S,ee,152,8,3055),Y(l,"class","action-selection"),J(l,ee,134,6,2530),Y(c,"class","app-content"),J(c,ee,132,4,2440),Y(e,"class","app-container"),J(e,ee,122,2,2123),Y(O,"class","btn btn-secondary"),J(O,ee,272,2,7156),H.p(d,g,j)},m:function(V,ue){_e(V,e,ue),$(e,t),$(t,n),$(t,a),$(t,i),$(e,u),$(e,c),$(c,l),$(l,d),d.checked=d.__value===r[0],$(l,h),$(l,b),$(l,w),$(l,g),g.checked=g.__value===r[0],$(l,P),$(l,k),$(l,x),$(l,j),j.checked=j.__value===r[0],$(l,A),$(l,S),$(c,v),te&&te.m(c,null),_e(V,p,ue),_e(V,O,ue),B||(Q=[je(d,"change",r[17]),je(g,"change",r[19]),je(j,"change",r[20]),je(O,"click",r[30],!1,!1,!1,!1)],B=!0)},p:function(V,ue){ue[0]&1&&(d.checked=d.__value===V[0]),ue[0]&1&&(g.checked=g.__value===V[0]),ue[0]&1&&(j.checked=j.__value===V[0]),ne===(ne=F(V))&&te?te.p(V,ue):(te&&te.d(1),te=ne&&ne(V),te&&(te.c(),te.m(c,null)))},d:function(V){V&&(se(e),se(p),se(O)),te&&te.d(),H.r(),B=!1,Xs(Q)}};return Ze("SvelteRegisterBlock",{block:L,id:Bc.name,type:"slot",source:"(71:0) <AuthCheck>",ctx:r}),L}function Qs(r){let e,t;e=new Lc({props:{$$slots:{default:[Bc]},$$scope:{ctx:r}},$$inline:!0});const n={c:function(){el(e.$$.fragment)},l:function(a){tl(e.$$.fragment,a)},m:function(a,i){rl(e,a,i),t=!0},p:function(a,i){const o={};i[0]&1023|i[1]&4&&(o.$$scope={dirty:i,ctx:a}),e.$set(o)},i:function(a){t||(Zr(e.$$.fragment,a),t=!0)},o:function(a){Hr(e.$$.fragment,a),t=!1},d:function(a){nl(e,a)}};return Ze("SvelteRegisterBlock",{block:n,id:Qs.name,type:"component",source:"",ctx:r}),n}function cb(r,e,t){let n,s,a,i,{$$slots:o={},$$scope:u}=e;po("Page",o,[]);let c,l=pr("tiiuae/falcon-7b-instruct");rn(l,"model"),nn(r,l,K=>t(8,a=K));let d=pr(.2);rn(d,"temperature"),nn(r,d,K=>t(9,i=K));let h=pr(500);rn(h,"chunkSize"),nn(r,h,K=>t(6,n=K));let b=pr(0);rn(b,"chunkOverlap"),nn(r,b,K=>t(7,s=K));let m,w,g="",P,k,C,x="";async function j(){const{error:K}=await P.auth.signOut();K?console.log(K):window.location.reload()}async function A(){let K=await co(jr,k,l,d,g);const Ee=document.getElementById("displayTextContainer");Ee.textContent=K}Ua(()=>{t(4,P=_t(ct,ut)),console.log("public_supabase_url",ct),console.log("public_supabase_key",ut);const K=_t(ct,ut);C=new On({apiKey:jr}),t(5,k=new Ut(C,{client:K,tableName:"documents"}))});async function S(K){t(1,m=K.target.files[0])}const y=[];Object.keys(e).forEach(K=>{!~y.indexOf(K)&&K.slice(0,2)!=="$$"&&K!=="slot"&&ub.warn(`<Page> was created with unknown prop '${K}'`)});const v=[[]];function p(){c=this.__value,t(0,c)}function O(){c=this.__value,t(0,c)}function T(){c=this.__value,t(0,c)}function H(){n=os(this.value),h.set(n)}function B(){s=os(this.value),b.set(s)}const Q=()=>Ii(P,dn,k,m);function F(){w=this.value,t(2,w)}const ne=()=>Ri(P,dn,k,w);function te(){a=sl(this),l.set(a)}function L(){i=os(this.value),d.set(i)}function q(){g=this.value,t(3,g)}const V=()=>A(),ue=()=>j();return r.$capture_state=()=>({onMount:Ua,file_uploader:Ii,url_uploader:Ri,chatWithDoc:co,brain:Ws,createClient:_t,OpenAIEmbeddings:Au,SupabaseVectorStore:Ut,writable:pr,HuggingFaceInferenceEmbeddings:On,PUBLIC_SUPABASE_KEY:ut,PUBLIC_SUPABASE_URL:ct,PUBLIC_HUGGINGFACE_API_KEY:jr,PUBLIC_OPENAI_API_KEY:dn,AuthCheck:Lc,mode:c,model:l,temperature:d,chunkSize:h,chunkOverlap:b,files:m,url:w,question:g,supabase:P,vector:k,embeddings:C,retrievedText:x,signOutUser:j,getAIResponse:A,upload:S,$chunkSize:n,$chunkOverlap:s,$model:a,$temperature:i}),r.$inject_state=K=>{"mode"in K&&t(0,c=K.mode),"model"in K&&t(10,l=K.model),"temperature"in K&&t(11,d=K.temperature),"chunkSize"in K&&t(12,h=K.chunkSize),"chunkOverlap"in K&&t(13,b=K.chunkOverlap),"files"in K&&t(1,m=K.files),"url"in K&&t(2,w=K.url),"question"in K&&t(3,g=K.question),"supabase"in K&&t(4,P=K.supabase),"vector"in K&&t(5,k=K.vector),"embeddings"in K&&(C=K.embeddings),"retrievedText"in K&&(x=K.retrievedText)},e&&"$$inject"in e&&r.$inject_state(e.$$inject),[c,m,w,g,P,k,n,s,a,i,l,d,h,b,j,A,S,p,v,O,T,H,B,Q,F,ne,te,L,q,V,ue]}class _b extends ho{constructor(e){super(e),fo(this,e,cb,Qs,lo,{},null,[-1,-1]),Ze("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:Qs.name})}}export{Bo as A,Gr as B,St as C,Uo as H,ze as L,Re as P,Fo as R,fd as S,ab as a,yp as b,sb as c,Fs as d,mp as e,dp as f,Se as g,bb as h,Mo as i,Qp as j,im as k,$m as l,ju as m,Cu as n,gb as o,_b as p,Ru as r,sy as z};
