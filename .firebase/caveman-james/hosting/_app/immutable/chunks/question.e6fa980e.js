import{g as ti,T as ri,d as Rn,c as sr}from"./_commonjs-dynamic-modules.5fcb8f34.js";import{a as xa,E as ni,g as le,i as ai,b as ft,_ as dt,p as si,c as ii,R as Pa,B as Aa,d as Ta,e as oi,f as ui,h as ci,H as li,S as di}from"./NavBar.74969093.js";import{g as Sa,_ as ge,d as fi,e as Dn,c as pi,P as hi,a as mi,b as yi}from"./public.79d73255.js";const ir={},gi=new xa({});async function bi(r,e){return r in ir||(ir[r]=gi.fetch(`https://tiktoken.pages.dev/js/${r}.json`,{signal:e==null?void 0:e.signal}).then(t=>t.json()).catch(t=>{throw delete ir[r],t})),new ri(await ir[r],e==null?void 0:e.extendedSpecialTokens)}async function ka(r,e){return bi(ti(r),e)}function ja(r,e){return function(){return r.apply(e,arguments)}}const{toString:_i}=Object.prototype,{getPrototypeOf:on}=Object,vr=(r=>e=>{const t=_i.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),De=r=>(r=r.toLowerCase(),e=>vr(e)===r),Er=r=>e=>typeof e===r,{isArray:Pt}=Array,Vt=Er("undefined");function wi(r){return r!==null&&!Vt(r)&&r.constructor!==null&&!Vt(r.constructor)&&Ee(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const Ia=De("ArrayBuffer");function vi(r){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&Ia(r.buffer),e}const Ei=Er("string"),Ee=Er("function"),Na=Er("number"),Or=r=>r!==null&&typeof r=="object",Oi=r=>r===!0||r===!1,lr=r=>{if(vr(r)!=="object")return!1;const e=on(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},xi=De("Date"),Pi=De("File"),Ai=De("Blob"),Ti=De("FileList"),Si=r=>Or(r)&&Ee(r.pipe),ki=r=>{let e;return r&&(typeof FormData=="function"&&r instanceof FormData||Ee(r.append)&&((e=vr(r))==="formdata"||e==="object"&&Ee(r.toString)&&r.toString()==="[object FormData]"))},ji=De("URLSearchParams"),Ii=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function er(r,e,{allOwnKeys:t=!1}={}){if(r===null||typeof r>"u")return;let n,a;if(typeof r!="object"&&(r=[r]),Pt(r))for(n=0,a=r.length;n<a;n++)e.call(null,r[n],n,r);else{const s=t?Object.getOwnPropertyNames(r):Object.keys(r),i=s.length;let o;for(n=0;n<i;n++)o=s[n],e.call(null,r[o],o,r)}}function Ca(r,e){e=e.toLowerCase();const t=Object.keys(r);let n=t.length,a;for(;n-- >0;)if(a=t[n],e===a.toLowerCase())return a;return null}const Ra=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Da=r=>!Vt(r)&&r!==Ra;function Xr(){const{caseless:r}=Da(this)&&this||{},e={},t=(n,a)=>{const s=r&&Ca(e,a)||a;lr(e[s])&&lr(n)?e[s]=Xr(e[s],n):lr(n)?e[s]=Xr({},n):Pt(n)?e[s]=n.slice():e[s]=n};for(let n=0,a=arguments.length;n<a;n++)arguments[n]&&er(arguments[n],t);return e}const Ni=(r,e,t,{allOwnKeys:n}={})=>(er(e,(a,s)=>{t&&Ee(a)?r[s]=ja(a,t):r[s]=a},{allOwnKeys:n}),r),Ci=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),Ri=(r,e,t,n)=>{r.prototype=Object.create(e.prototype,n),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:e.prototype}),t&&Object.assign(r.prototype,t)},Di=(r,e,t,n)=>{let a,s,i;const o={};if(e=e||{},r==null)return e;do{for(a=Object.getOwnPropertyNames(r),s=a.length;s-- >0;)i=a[s],(!n||n(i,r,e))&&!o[i]&&(e[i]=r[i],o[i]=!0);r=t!==!1&&on(r)}while(r&&(!t||t(r,e))&&r!==Object.prototype);return e},Li=(r,e,t)=>{r=String(r),(t===void 0||t>r.length)&&(t=r.length),t-=e.length;const n=r.indexOf(e,t);return n!==-1&&n===t},Mi=r=>{if(!r)return null;if(Pt(r))return r;let e=r.length;if(!Na(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=r[e];return t},$i=(r=>e=>r&&e instanceof r)(typeof Uint8Array<"u"&&on(Uint8Array)),Bi=(r,e)=>{const n=(r&&r[Symbol.iterator]).call(r);let a;for(;(a=n.next())&&!a.done;){const s=a.value;e.call(r,s[0],s[1])}},Ui=(r,e)=>{let t;const n=[];for(;(t=r.exec(e))!==null;)n.push(t);return n},Zi=De("HTMLFormElement"),Fi=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,a){return n.toUpperCase()+a}),Ln=(({hasOwnProperty:r})=>(e,t)=>r.call(e,t))(Object.prototype),Vi=De("RegExp"),La=(r,e)=>{const t=Object.getOwnPropertyDescriptors(r),n={};er(t,(a,s)=>{e(a,s,r)!==!1&&(n[s]=a)}),Object.defineProperties(r,n)},zi=r=>{La(r,(e,t)=>{if(Ee(r)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=r[t];if(Ee(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},Ki=(r,e)=>{const t={},n=a=>{a.forEach(s=>{t[s]=!0})};return Pt(r)?n(r):n(String(r).split(e)),t},qi=()=>{},Hi=(r,e)=>(r=+r,Number.isFinite(r)?r:e),Vr="abcdefghijklmnopqrstuvwxyz",Mn="0123456789",Ma={DIGIT:Mn,ALPHA:Vr,ALPHA_DIGIT:Vr+Vr.toUpperCase()+Mn},Yi=(r=16,e=Ma.ALPHA_DIGIT)=>{let t="";const{length:n}=e;for(;r--;)t+=e[Math.random()*n|0];return t};function Ji(r){return!!(r&&Ee(r.append)&&r[Symbol.toStringTag]==="FormData"&&r[Symbol.iterator])}const Wi=r=>{const e=new Array(10),t=(n,a)=>{if(Or(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[a]=n;const s=Pt(n)?[]:{};return er(n,(i,o)=>{const u=t(i,a+1);!Vt(u)&&(s[o]=u)}),e[a]=void 0,s}}return n};return t(r,0)},Gi=De("AsyncFunction"),Xi=r=>r&&(Or(r)||Ee(r))&&Ee(r.then)&&Ee(r.catch),x={isArray:Pt,isArrayBuffer:Ia,isBuffer:wi,isFormData:ki,isArrayBufferView:vi,isString:Ei,isNumber:Na,isBoolean:Oi,isObject:Or,isPlainObject:lr,isUndefined:Vt,isDate:xi,isFile:Pi,isBlob:Ai,isRegExp:Vi,isFunction:Ee,isStream:Si,isURLSearchParams:ji,isTypedArray:$i,isFileList:Ti,forEach:er,merge:Xr,extend:Ni,trim:Ii,stripBOM:Ci,inherits:Ri,toFlatObject:Di,kindOf:vr,kindOfTest:De,endsWith:Li,toArray:Mi,forEachEntry:Bi,matchAll:Ui,isHTMLForm:Zi,hasOwnProperty:Ln,hasOwnProp:Ln,reduceDescriptors:La,freezeMethods:zi,toObjectSet:Ki,toCamelCase:Fi,noop:qi,toFiniteNumber:Hi,findKey:Ca,global:Ra,isContextDefined:Da,ALPHABET:Ma,generateString:Yi,isSpecCompliantForm:Ji,toJSONObject:Wi,isAsyncFn:Gi,isThenable:Xi};function Q(r,e,t,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),a&&(this.response=a)}x.inherits(Q,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:x.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const $a=Q.prototype,Ba={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{Ba[r]={value:r}});Object.defineProperties(Q,Ba);Object.defineProperty($a,"isAxiosError",{value:!0});Q.from=(r,e,t,n,a,s)=>{const i=Object.create($a);return x.toFlatObject(r,i,function(u){return u!==Error.prototype},o=>o!=="isAxiosError"),Q.call(i,r.message,e,t,n,a),i.cause=r,i.name=r.name,s&&Object.assign(i,s),i};const Qi=null;function Qr(r){return x.isPlainObject(r)||x.isArray(r)}function Ua(r){return x.endsWith(r,"[]")?r.slice(0,-2):r}function $n(r,e,t){return r?r.concat(e).map(function(a,s){return a=Ua(a),!t&&s?"["+a+"]":a}).join(t?".":""):e}function eo(r){return x.isArray(r)&&!r.some(Qr)}const to=x.toFlatObject(x,{},null,function(e){return/^is[A-Z]/.test(e)});function xr(r,e,t){if(!x.isObject(r))throw new TypeError("target must be an object");e=e||new FormData,t=x.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(P,E){return!x.isUndefined(E[P])});const n=t.metaTokens,a=t.visitor||f,s=t.dots,i=t.indexes,u=(t.Blob||typeof Blob<"u"&&Blob)&&x.isSpecCompliantForm(e);if(!x.isFunction(a))throw new TypeError("visitor must be a function");function c(b){if(b===null)return"";if(x.isDate(b))return b.toISOString();if(!u&&x.isBlob(b))throw new Q("Blob is not supported. Use a Buffer instead.");return x.isArrayBuffer(b)||x.isTypedArray(b)?u&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function f(b,P,E){let S=b;if(b&&!E&&typeof b=="object"){if(x.endsWith(P,"{}"))P=n?P:P.slice(0,-2),b=JSON.stringify(b);else if(x.isArray(b)&&eo(b)||(x.isFileList(b)||x.endsWith(P,"[]"))&&(S=x.toArray(b)))return P=Ua(P),S.forEach(function(N,I){!(x.isUndefined(N)||N===null)&&e.append(i===!0?$n([P],I,s):i===null?P:P+"[]",c(N))}),!1}return Qr(b)?!0:(e.append($n(E,P,s),c(b)),!1)}const w=[],j=Object.assign(to,{defaultVisitor:f,convertValue:c,isVisitable:Qr});function U(b,P){if(!x.isUndefined(b)){if(w.indexOf(b)!==-1)throw Error("Circular reference detected in "+P.join("."));w.push(b),x.forEach(b,function(S,C){(!(x.isUndefined(S)||S===null)&&a.call(e,S,x.isString(C)?C.trim():C,P,j))===!0&&U(S,P?P.concat(C):[C])}),w.pop()}}if(!x.isObject(r))throw new TypeError("data must be an object");return U(r),e}function Bn(r){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function un(r,e){this._pairs=[],r&&xr(r,this,e)}const Za=un.prototype;Za.append=function(e,t){this._pairs.push([e,t])};Za.toString=function(e){const t=e?function(n){return e.call(this,n,Bn)}:Bn;return this._pairs.map(function(a){return t(a[0])+"="+t(a[1])},"").join("&")};function ro(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Fa(r,e,t){if(!e)return r;const n=t&&t.encode||ro,a=t&&t.serialize;let s;if(a?s=a(e,t):s=x.isURLSearchParams(e)?e.toString():new un(e,t).toString(n),s){const i=r.indexOf("#");i!==-1&&(r=r.slice(0,i)),r+=(r.indexOf("?")===-1?"?":"&")+s}return r}class no{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){x.forEach(this.handlers,function(n){n!==null&&e(n)})}}const Un=no,Va={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ao=typeof URLSearchParams<"u"?URLSearchParams:un,so=typeof FormData<"u"?FormData:null,io=typeof Blob<"u"?Blob:null,oo=(()=>{let r;return typeof navigator<"u"&&((r=navigator.product)==="ReactNative"||r==="NativeScript"||r==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),uo=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),je={isBrowser:!0,classes:{URLSearchParams:ao,FormData:so,Blob:io},isStandardBrowserEnv:oo,isStandardBrowserWebWorkerEnv:uo,protocols:["http","https","file","blob","url","data"]};function co(r,e){return xr(r,new je.classes.URLSearchParams,Object.assign({visitor:function(t,n,a,s){return je.isNode&&x.isBuffer(t)?(this.append(n,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function lo(r){return x.matchAll(/\w+|\[(\w*)]/g,r).map(e=>e[0]==="[]"?"":e[1]||e[0])}function fo(r){const e={},t=Object.keys(r);let n;const a=t.length;let s;for(n=0;n<a;n++)s=t[n],e[s]=r[s];return e}function za(r){function e(t,n,a,s){let i=t[s++];const o=Number.isFinite(+i),u=s>=t.length;return i=!i&&x.isArray(a)?a.length:i,u?(x.hasOwnProp(a,i)?a[i]=[a[i],n]:a[i]=n,!o):((!a[i]||!x.isObject(a[i]))&&(a[i]=[]),e(t,n,a[i],s)&&x.isArray(a[i])&&(a[i]=fo(a[i])),!o)}if(x.isFormData(r)&&x.isFunction(r.entries)){const t={};return x.forEachEntry(r,(n,a)=>{e(lo(n),a,t,0)}),t}return null}const po={"Content-Type":void 0};function ho(r,e,t){if(x.isString(r))try{return(e||JSON.parse)(r),x.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(r)}const Pr={transitional:Va,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",a=n.indexOf("application/json")>-1,s=x.isObject(e);if(s&&x.isHTMLForm(e)&&(e=new FormData(e)),x.isFormData(e))return a&&a?JSON.stringify(za(e)):e;if(x.isArrayBuffer(e)||x.isBuffer(e)||x.isStream(e)||x.isFile(e)||x.isBlob(e))return e;if(x.isArrayBufferView(e))return e.buffer;if(x.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return co(e,this.formSerializer).toString();if((o=x.isFileList(e))||n.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return xr(o?{"files[]":e}:e,u&&new u,this.formSerializer)}}return s||a?(t.setContentType("application/json",!1),ho(e)):e}],transformResponse:[function(e){const t=this.transitional||Pr.transitional,n=t&&t.forcedJSONParsing,a=this.responseType==="json";if(e&&x.isString(e)&&(n&&!this.responseType||a)){const i=!(t&&t.silentJSONParsing)&&a;try{return JSON.parse(e)}catch(o){if(i)throw o.name==="SyntaxError"?Q.from(o,Q.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:je.classes.FormData,Blob:je.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};x.forEach(["delete","get","head"],function(e){Pr.headers[e]={}});x.forEach(["post","put","patch"],function(e){Pr.headers[e]=x.merge(po)});const cn=Pr,mo=x.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),yo=r=>{const e={};let t,n,a;return r&&r.split(`
`).forEach(function(i){a=i.indexOf(":"),t=i.substring(0,a).trim().toLowerCase(),n=i.substring(a+1).trim(),!(!t||e[t]&&mo[t])&&(t==="set-cookie"?e[t]?e[t].push(n):e[t]=[n]:e[t]=e[t]?e[t]+", "+n:n)}),e},Zn=Symbol("internals");function Tt(r){return r&&String(r).trim().toLowerCase()}function dr(r){return r===!1||r==null?r:x.isArray(r)?r.map(dr):String(r)}function go(r){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(r);)e[n[1]]=n[2];return e}const bo=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function zr(r,e,t,n,a){if(x.isFunction(n))return n.call(this,e,t);if(a&&(e=t),!!x.isString(e)){if(x.isString(n))return e.indexOf(n)!==-1;if(x.isRegExp(n))return n.test(e)}}function _o(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function wo(r,e){const t=x.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(r,n+t,{value:function(a,s,i){return this[n].call(this,e,a,s,i)},configurable:!0})})}class Ar{constructor(e){e&&this.set(e)}set(e,t,n){const a=this;function s(o,u,c){const f=Tt(u);if(!f)throw new Error("header name must be a non-empty string");const w=x.findKey(a,f);(!w||a[w]===void 0||c===!0||c===void 0&&a[w]!==!1)&&(a[w||u]=dr(o))}const i=(o,u)=>x.forEach(o,(c,f)=>s(c,f,u));return x.isPlainObject(e)||e instanceof this.constructor?i(e,t):x.isString(e)&&(e=e.trim())&&!bo(e)?i(yo(e),t):e!=null&&s(t,e,n),this}get(e,t){if(e=Tt(e),e){const n=x.findKey(this,e);if(n){const a=this[n];if(!t)return a;if(t===!0)return go(a);if(x.isFunction(t))return t.call(this,a,n);if(x.isRegExp(t))return t.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Tt(e),e){const n=x.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||zr(this,this[n],n,t)))}return!1}delete(e,t){const n=this;let a=!1;function s(i){if(i=Tt(i),i){const o=x.findKey(n,i);o&&(!t||zr(n,n[o],o,t))&&(delete n[o],a=!0)}}return x.isArray(e)?e.forEach(s):s(e),a}clear(e){const t=Object.keys(this);let n=t.length,a=!1;for(;n--;){const s=t[n];(!e||zr(this,this[s],s,e,!0))&&(delete this[s],a=!0)}return a}normalize(e){const t=this,n={};return x.forEach(this,(a,s)=>{const i=x.findKey(n,s);if(i){t[i]=dr(a),delete t[s];return}const o=e?_o(s):String(s).trim();o!==s&&delete t[s],t[o]=dr(a),n[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return x.forEach(this,(n,a)=>{n!=null&&n!==!1&&(t[a]=e&&x.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(a=>n.set(a)),n}static accessor(e){const n=(this[Zn]=this[Zn]={accessors:{}}).accessors,a=this.prototype;function s(i){const o=Tt(i);n[o]||(wo(a,i),n[o]=!0)}return x.isArray(e)?e.forEach(s):s(e),this}}Ar.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);x.freezeMethods(Ar.prototype);x.freezeMethods(Ar);const Me=Ar;function Kr(r,e){const t=this||cn,n=e||t,a=Me.from(n.headers);let s=n.data;return x.forEach(r,function(o){s=o.call(t,s,a.normalize(),e?e.status:void 0)}),a.normalize(),s}function Ka(r){return!!(r&&r.__CANCEL__)}function tr(r,e,t){Q.call(this,r??"canceled",Q.ERR_CANCELED,e,t),this.name="CanceledError"}x.inherits(tr,Q,{__CANCEL__:!0});function vo(r,e,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?r(t):e(new Q("Request failed with status code "+t.status,[Q.ERR_BAD_REQUEST,Q.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}const Eo=je.isStandardBrowserEnv?function(){return{write:function(t,n,a,s,i,o){const u=[];u.push(t+"="+encodeURIComponent(n)),x.isNumber(a)&&u.push("expires="+new Date(a).toGMTString()),x.isString(s)&&u.push("path="+s),x.isString(i)&&u.push("domain="+i),o===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(t){const n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Oo(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function xo(r,e){return e?r.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):r}function qa(r,e){return r&&!Oo(e)?xo(r,e):e}const Po=je.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function a(s){let i=s;return e&&(t.setAttribute("href",i),i=t.href),t.setAttribute("href",i),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return n=a(window.location.href),function(i){const o=x.isString(i)?a(i):i;return o.protocol===n.protocol&&o.host===n.host}}():function(){return function(){return!0}}();function Ao(r){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return e&&e[1]||""}function To(r,e){r=r||10;const t=new Array(r),n=new Array(r);let a=0,s=0,i;return e=e!==void 0?e:1e3,function(u){const c=Date.now(),f=n[s];i||(i=c),t[a]=u,n[a]=c;let w=s,j=0;for(;w!==a;)j+=t[w++],w=w%r;if(a=(a+1)%r,a===s&&(s=(s+1)%r),c-i<e)return;const U=f&&c-f;return U?Math.round(j*1e3/U):void 0}}function Fn(r,e){let t=0;const n=To(50,250);return a=>{const s=a.loaded,i=a.lengthComputable?a.total:void 0,o=s-t,u=n(o),c=s<=i;t=s;const f={loaded:s,total:i,progress:i?s/i:void 0,bytes:o,rate:u||void 0,estimated:u&&i&&c?(i-s)/u:void 0,event:a};f[e?"download":"upload"]=!0,r(f)}}const So=typeof XMLHttpRequest<"u",ko=So&&function(r){return new Promise(function(t,n){let a=r.data;const s=Me.from(r.headers).normalize(),i=r.responseType;let o;function u(){r.cancelToken&&r.cancelToken.unsubscribe(o),r.signal&&r.signal.removeEventListener("abort",o)}x.isFormData(a)&&(je.isStandardBrowserEnv||je.isStandardBrowserWebWorkerEnv?s.setContentType(!1):s.setContentType("multipart/form-data;",!1));let c=new XMLHttpRequest;if(r.auth){const U=r.auth.username||"",b=r.auth.password?unescape(encodeURIComponent(r.auth.password)):"";s.set("Authorization","Basic "+btoa(U+":"+b))}const f=qa(r.baseURL,r.url);c.open(r.method.toUpperCase(),Fa(f,r.params,r.paramsSerializer),!0),c.timeout=r.timeout;function w(){if(!c)return;const U=Me.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders()),P={data:!i||i==="text"||i==="json"?c.responseText:c.response,status:c.status,statusText:c.statusText,headers:U,config:r,request:c};vo(function(S){t(S),u()},function(S){n(S),u()},P),c=null}if("onloadend"in c?c.onloadend=w:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(w)},c.onabort=function(){c&&(n(new Q("Request aborted",Q.ECONNABORTED,r,c)),c=null)},c.onerror=function(){n(new Q("Network Error",Q.ERR_NETWORK,r,c)),c=null},c.ontimeout=function(){let b=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const P=r.transitional||Va;r.timeoutErrorMessage&&(b=r.timeoutErrorMessage),n(new Q(b,P.clarifyTimeoutError?Q.ETIMEDOUT:Q.ECONNABORTED,r,c)),c=null},je.isStandardBrowserEnv){const U=(r.withCredentials||Po(f))&&r.xsrfCookieName&&Eo.read(r.xsrfCookieName);U&&s.set(r.xsrfHeaderName,U)}a===void 0&&s.setContentType(null),"setRequestHeader"in c&&x.forEach(s.toJSON(),function(b,P){c.setRequestHeader(P,b)}),x.isUndefined(r.withCredentials)||(c.withCredentials=!!r.withCredentials),i&&i!=="json"&&(c.responseType=r.responseType),typeof r.onDownloadProgress=="function"&&c.addEventListener("progress",Fn(r.onDownloadProgress,!0)),typeof r.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",Fn(r.onUploadProgress)),(r.cancelToken||r.signal)&&(o=U=>{c&&(n(!U||U.type?new tr(null,r,c):U),c.abort(),c=null)},r.cancelToken&&r.cancelToken.subscribe(o),r.signal&&(r.signal.aborted?o():r.signal.addEventListener("abort",o)));const j=Ao(f);if(j&&je.protocols.indexOf(j)===-1){n(new Q("Unsupported protocol "+j+":",Q.ERR_BAD_REQUEST,r));return}c.send(a||null)})},fr={http:Qi,xhr:ko};x.forEach(fr,(r,e)=>{if(r){try{Object.defineProperty(r,"name",{value:e})}catch{}Object.defineProperty(r,"adapterName",{value:e})}});const jo={getAdapter:r=>{r=x.isArray(r)?r:[r];const{length:e}=r;let t,n;for(let a=0;a<e&&(t=r[a],!(n=x.isString(t)?fr[t.toLowerCase()]:t));a++);if(!n)throw n===!1?new Q(`Adapter ${t} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(x.hasOwnProp(fr,t)?`Adapter '${t}' is not available in the build`:`Unknown adapter '${t}'`);if(!x.isFunction(n))throw new TypeError("adapter is not a function");return n},adapters:fr};function qr(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new tr(null,r)}function Vn(r){return qr(r),r.headers=Me.from(r.headers),r.data=Kr.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),jo.getAdapter(r.adapter||cn.adapter)(r).then(function(n){return qr(r),n.data=Kr.call(r,r.transformResponse,n),n.headers=Me.from(n.headers),n},function(n){return Ka(n)||(qr(r),n&&n.response&&(n.response.data=Kr.call(r,r.transformResponse,n.response),n.response.headers=Me.from(n.response.headers))),Promise.reject(n)})}const zn=r=>r instanceof Me?r.toJSON():r;function pt(r,e){e=e||{};const t={};function n(c,f,w){return x.isPlainObject(c)&&x.isPlainObject(f)?x.merge.call({caseless:w},c,f):x.isPlainObject(f)?x.merge({},f):x.isArray(f)?f.slice():f}function a(c,f,w){if(x.isUndefined(f)){if(!x.isUndefined(c))return n(void 0,c,w)}else return n(c,f,w)}function s(c,f){if(!x.isUndefined(f))return n(void 0,f)}function i(c,f){if(x.isUndefined(f)){if(!x.isUndefined(c))return n(void 0,c)}else return n(void 0,f)}function o(c,f,w){if(w in e)return n(c,f);if(w in r)return n(void 0,c)}const u={url:s,method:s,data:s,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(c,f)=>a(zn(c),zn(f),!0)};return x.forEach(Object.keys(Object.assign({},r,e)),function(f){const w=u[f]||a,j=w(r[f],e[f],f);x.isUndefined(j)&&w!==o||(t[f]=j)}),t}const Ha="1.4.0",ln={};["object","boolean","number","function","string","symbol"].forEach((r,e)=>{ln[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});const Kn={};ln.transitional=function(e,t,n){function a(s,i){return"[Axios v"+Ha+"] Transitional option '"+s+"'"+i+(n?". "+n:"")}return(s,i,o)=>{if(e===!1)throw new Q(a(i," has been removed"+(t?" in "+t:"")),Q.ERR_DEPRECATED);return t&&!Kn[i]&&(Kn[i]=!0,console.warn(a(i," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,i,o):!0}};function Io(r,e,t){if(typeof r!="object")throw new Q("options must be an object",Q.ERR_BAD_OPTION_VALUE);const n=Object.keys(r);let a=n.length;for(;a-- >0;){const s=n[a],i=e[s];if(i){const o=r[s],u=o===void 0||i(o,s,r);if(u!==!0)throw new Q("option "+s+" must be "+u,Q.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Q("Unknown option "+s,Q.ERR_BAD_OPTION)}}const en={assertOptions:Io,validators:ln},Ze=en.validators;class yr{constructor(e){this.defaults=e,this.interceptors={request:new Un,response:new Un}}request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=pt(this.defaults,t);const{transitional:n,paramsSerializer:a,headers:s}=t;n!==void 0&&en.assertOptions(n,{silentJSONParsing:Ze.transitional(Ze.boolean),forcedJSONParsing:Ze.transitional(Ze.boolean),clarifyTimeoutError:Ze.transitional(Ze.boolean)},!1),a!=null&&(x.isFunction(a)?t.paramsSerializer={serialize:a}:en.assertOptions(a,{encode:Ze.function,serialize:Ze.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i;i=s&&x.merge(s.common,s[t.method]),i&&x.forEach(["delete","get","head","post","put","patch","common"],b=>{delete s[b]}),t.headers=Me.concat(i,s);const o=[];let u=!0;this.interceptors.request.forEach(function(P){typeof P.runWhen=="function"&&P.runWhen(t)===!1||(u=u&&P.synchronous,o.unshift(P.fulfilled,P.rejected))});const c=[];this.interceptors.response.forEach(function(P){c.push(P.fulfilled,P.rejected)});let f,w=0,j;if(!u){const b=[Vn.bind(this),void 0];for(b.unshift.apply(b,o),b.push.apply(b,c),j=b.length,f=Promise.resolve(t);w<j;)f=f.then(b[w++],b[w++]);return f}j=o.length;let U=t;for(w=0;w<j;){const b=o[w++],P=o[w++];try{U=b(U)}catch(E){P.call(this,E);break}}try{f=Vn.call(this,U)}catch(b){return Promise.reject(b)}for(w=0,j=c.length;w<j;)f=f.then(c[w++],c[w++]);return f}getUri(e){e=pt(this.defaults,e);const t=qa(e.baseURL,e.url);return Fa(t,e.params,e.paramsSerializer)}}x.forEach(["delete","get","head","options"],function(e){yr.prototype[e]=function(t,n){return this.request(pt(n||{},{method:e,url:t,data:(n||{}).data}))}});x.forEach(["post","put","patch"],function(e){function t(n){return function(s,i,o){return this.request(pt(o||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:i}))}}yr.prototype[e]=t(),yr.prototype[e+"Form"]=t(!0)});const pr=yr;class dn{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const n=this;this.promise.then(a=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](a);n._listeners=null}),this.promise.then=a=>{let s;const i=new Promise(o=>{n.subscribe(o),s=o}).then(a);return i.cancel=function(){n.unsubscribe(s)},i},e(function(s,i,o){n.reason||(n.reason=new tr(s,i,o),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}static source(){let e;return{token:new dn(function(a){e=a}),cancel:e}}}const No=dn;function Co(r){return function(t){return r.apply(null,t)}}function Ro(r){return x.isObject(r)&&r.isAxiosError===!0}const tn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(tn).forEach(([r,e])=>{tn[e]=r});const Do=tn;function Ya(r){const e=new pr(r),t=ja(pr.prototype.request,e);return x.extend(t,pr.prototype,e,{allOwnKeys:!0}),x.extend(t,e,null,{allOwnKeys:!0}),t.create=function(a){return Ya(pt(r,a))},t}const se=Ya(cn);se.Axios=pr;se.CanceledError=tr;se.CancelToken=No;se.isCancel=Ka;se.VERSION=Ha;se.toFormData=xr;se.AxiosError=Q;se.Cancel=se.CanceledError;se.all=function(e){return Promise.all(e)};se.spread=Co;se.isAxiosError=Ro;se.mergeConfig=pt;se.AxiosHeaders=Me;se.formToJSON=r=>za(x.isHTMLForm(r)?new FormData(r):r);se.HttpStatusCode=Do;se.default=se;const or=se,rn="text/event-stream";async function Lo(r,e){const t=r.getReader();for(;;){const n=await t.read();if(n.done){e(new Uint8Array,!0);break}e(n.value)}}function Mo(r){let e,t,n,a=!1;return function(i,o){if(o){r(i,0,!0);return}e===void 0?(e=i,t=0,n=-1):e=Bo(e,i);const u=e.length;let c=0;for(;t<u;){a&&(e[t]===10&&(c=++t),a=!1);let f=-1;for(;t<u&&f===-1;++t)switch(e[t]){case 58:n===-1&&(n=t-c);break;case 13:a=!0;case 10:f=t;break}if(f===-1)break;r(e.subarray(c,f),n),c=t,n=-1}c===u?e=void 0:c!==0&&(e=e.subarray(c),t-=c)}}function $o(r,e,t){let n=Hr();const a=new TextDecoder;return function(i,o,u){if(u){Uo(n)||(r==null||r(n),n=Hr());return}if(i.length===0)r==null||r(n),n=Hr();else if(o>0){const c=a.decode(i.subarray(0,o)),f=o+(i[o+1]===32?2:1),w=a.decode(i.subarray(f));switch(c){case"data":n.data=n.data?n.data+`
`+w:w;break;case"event":n.event=w;break;case"id":e==null||e(n.id=w);break;case"retry":{const j=parseInt(w,10);Number.isNaN(j)||t==null||t(n.retry=j);break}}}}}function Bo(r,e){const t=new Uint8Array(r.length+e.length);return t.set(r),t.set(e,r.length),t}function Hr(){return{data:"",event:"",id:"",retry:void 0}}function Uo(r){return r.data===""&&r.event===""&&r.id===""&&r.retry===void 0}function Zo(r){try{return JSON.stringify(r)}catch{return r}}function Fo(r,e,t){const{validateStatus:n}=t.config;!t.status||!n||n(t.status)?r(t):e(hr(`Request failed with status code ${t.status} and body ${typeof t.data=="string"?t.data:Zo(t.data)}`,t.config,null,t.request,t))}function Vo(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function zo(r,e){return e?r.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):r}function qn(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ko(r,e,t){if(!e)return r;var n;if(t)n=t(e);else if(Wo(e))n=e.toString();else{var a=[];Hn(e,function(o,u){o===null||typeof o>"u"||(Ja(o)?u=`${u}[]`:o=[o],Hn(o,function(f){Jo(f)?f=f.toISOString():Yo(f)&&(f=JSON.stringify(f)),a.push(`${qn(u)}=${qn(f)}`)}))}),n=a.join("&")}if(n){var s=r.indexOf("#");s!==-1&&(r=r.slice(0,s)),r+=(r.indexOf("?")===-1?"?":"&")+n}return r}function qo(r,e){return r&&!Vo(e)?zo(r,e):e}function Ho(r){return typeof r>"u"}function Yo(r){return r!==null&&typeof r=="object"}function Jo(r){return toString.call(r)==="[object Date]"}function Wo(r){return toString.call(r)==="[object URLSearchParams]"}function Ja(r){return Array.isArray(r)}function Hn(r,e){if(!(r===null||typeof r>"u"))if(typeof r!="object"&&(r=[r]),Ja(r))for(var t=0,n=r.length;t<n;t++)e.call(null,r[t],t,r);else for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&e.call(null,r[a],a,r)}function Go(r){return toString.call(r)==="[object FormData]"}function Xo(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}async function Qo(r){const e=tu(r),t=await eu(e,r);return new Promise((n,a)=>{t instanceof Error?a(t):Object.prototype.toString.call(r.settle)==="[object Function]"?r.settle(n,a,t):Fo(n,a,t)})}async function eu(r,e){let t;try{t=await fetch(r)}catch(s){return s&&s.name==="AbortError"?hr("Request aborted",e,"ECONNABORTED",r):s&&s.name==="TimeoutError"?hr("Request timeout",e,"ECONNABORTED",r):hr("Network Error",e,"ERR_NETWORK",r)}const n={};t.headers.forEach((s,i)=>{n[i]=s});const a={ok:t.ok,status:t.status,statusText:t.statusText,headers:n,config:e,request:r};if(t.status>=200&&t.status!==204)if(e.responseType==="stream"){const s=t.headers.get("content-type");if(!(s!=null&&s.startsWith(rn))){if(t.status>=400)return s!=null&&s.startsWith("application/json")?(a.data=await t.json(),a):(a.data=await t.text(),a);throw new Error(`Expected content-type to be ${rn}, Actual: ${s}`)}await Lo(t.body,Mo($o(e.onmessage)))}else switch(e.responseType){case"arraybuffer":a.data=await t.arrayBuffer();break;case"blob":a.data=await t.blob();break;case"json":a.data=await t.json();break;case"formData":a.data=await t.formData();break;default:a.data=await t.text();break}return a}function tu(r){const e=new Headers(r.headers);if(r.auth){const i=r.auth.username||"",o=r.auth.password?decodeURI(encodeURIComponent(r.auth.password)):"";e.set("Authorization",`Basic ${btoa(`${i}:${o}`)}`)}const t=r.method.toUpperCase(),n={headers:e,method:t};t!=="GET"&&t!=="HEAD"&&(n.body=r.data,Go(n.body)&&Xo()&&e.delete("Content-Type")),typeof n.body=="string"&&(n.body=new TextEncoder().encode(n.body)),r.mode&&(n.mode=r.mode),r.cache&&(n.cache=r.cache),r.integrity&&(n.integrity=r.integrity),r.redirect&&(n.redirect=r.redirect),r.referrer&&(n.referrer=r.referrer),r.timeout&&r.timeout>0&&(n.signal=AbortSignal.timeout(r.timeout)),r.signal&&(n.signal=r.signal),Ho(r.withCredentials)||(n.credentials=r.withCredentials?"include":"omit"),r.responseType==="stream"&&n.headers.set("Accept",rn);const a=qo(r.baseURL,r.url),s=Ko(a,r.params,r.paramsSerializer);return new Request(s,n)}function hr(r,e,t,n,a){if(or.AxiosError&&typeof or.AxiosError=="function")return new or.AxiosError(r,or.AxiosError[t],e,n,a);const s=new Error(r);return ru(s,e,t,n,a)}function ru(r,e,t,n,a){return r.config=e,t&&(r.code=t),r.request=n,r.response=a,r.isAxiosError=!0,r.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},r}const nu=(r,e)=>r.reduce((t,n,a)=>{const s=Math.floor(a/e),i=t[s]||[];return t[s]=i.concat([n]),t},[]);function au(r){const{azureOpenAIApiDeploymentName:e,azureOpenAIApiInstanceName:t,azureOpenAIApiKey:n,azureOpenAIBasePath:a,basePath:s}=r;if(n&&a&&e)return`${a}/${e}`;if(n){if(!t)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!e)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${t}.openai.azure.com/openai/deployments/${e}`}return s}class bd extends ni{constructor(e,t){super(e??{}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"text-embedding-ada-002"}),Object.defineProperty(this,"batchSize",{enumerable:!0,configurable:!0,writable:!0,value:512}),Object.defineProperty(this,"stripNewLines",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const n=(e==null?void 0:e.openAIApiKey)??le("OPENAI_API_KEY"),a=(e==null?void 0:e.azureOpenAIApiKey)??le("AZURE_OPENAI_API_KEY");if(!a&&!n)throw new Error("OpenAI or Azure OpenAI API key not found");const s=(e==null?void 0:e.azureOpenAIApiInstanceName)??le("AZURE_OPENAI_API_INSTANCE_NAME"),i=((e==null?void 0:e.azureOpenAIApiEmbeddingsDeploymentName)||(e==null?void 0:e.azureOpenAIApiDeploymentName))??(le("AZURE_OPENAI_API_EMBEDDINGS_DEPLOYMENT_NAME")||le("AZURE_OPENAI_API_DEPLOYMENT_NAME")),o=(e==null?void 0:e.azureOpenAIApiVersion)??le("AZURE_OPENAI_API_VERSION");if(this.azureOpenAIBasePath=(e==null?void 0:e.azureOpenAIBasePath)??le("AZURE_OPENAI_BASE_PATH"),this.modelName=(e==null?void 0:e.modelName)??this.modelName,this.batchSize=(e==null?void 0:e.batchSize)??(a?1:this.batchSize),this.stripNewLines=(e==null?void 0:e.stripNewLines)??this.stripNewLines,this.timeout=e==null?void 0:e.timeout,this.azureOpenAIApiVersion=o,this.azureOpenAIApiKey=a,this.azureOpenAIApiInstanceName=s,this.azureOpenAIApiDeploymentName=i,this.azureOpenAIApiKey){if(!this.azureOpenAIApiInstanceName)throw new Error("Azure OpenAI API instance name not found");if(!this.azureOpenAIApiDeploymentName)throw new Error("Azure OpenAI API deployment name not found");if(!this.azureOpenAIApiVersion)throw new Error("Azure OpenAI API version not found")}this.clientConfig={apiKey:n,...t}}async embedDocuments(e){const t=nu(this.stripNewLines?e.map(a=>a.replace(/\n/g," ")):e,this.batchSize),n=[];for(let a=0;a<t.length;a+=1){const s=t[a],{data:i}=await this.embeddingWithRetry({model:this.modelName,input:s});for(let o=0;o<s.length;o+=1)n.push(i.data[o].embedding)}return n}async embedQuery(e){const{data:t}=await this.embeddingWithRetry({model:this.modelName,input:this.stripNewLines?e.replace(/\n/g," "):e});return t.data[0].embedding}async embeddingWithRetry(e){if(!this.client){const n={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,basePath:this.clientConfig.basePath},a=au(n),s=new Rn.Configuration({...this.clientConfig,basePath:a,baseOptions:{timeout:this.timeout,adapter:ai()?void 0:Qo,...this.clientConfig.baseOptions}});this.client=new Rn.OpenAIApi(s)}const t={};return this.azureOpenAIApiKey&&(t.headers={"api-key":this.azureOpenAIApiKey,...t.headers},t.params={"api-version":this.azureOpenAIApiVersion,...t.params}),this.caller.call(this.client.createEmbedding.bind(this.client),e,t)}}let ur;const su=new Uint8Array(16);function iu(){if(!ur&&(ur=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ur))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ur(su)}const ce=[];for(let r=0;r<256;++r)ce.push((r+256).toString(16).slice(1));function ou(r,e=0){return(ce[r[e+0]]+ce[r[e+1]]+ce[r[e+2]]+ce[r[e+3]]+"-"+ce[r[e+4]]+ce[r[e+5]]+"-"+ce[r[e+6]]+ce[r[e+7]]+"-"+ce[r[e+8]]+ce[r[e+9]]+"-"+ce[r[e+10]]+ce[r[e+11]]+ce[r[e+12]]+ce[r[e+13]]+ce[r[e+14]]+ce[r[e+15]]).toLowerCase()}const uu=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Yn={randomUUID:uu};function et(r,e,t){if(Yn.randomUUID&&!e&&!r)return Yn.randomUUID();r=r||{};const n=r.random||(r.rng||iu)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(let a=0;a<16;++a)e[t+a]=n[a];return e}return ou(n)}class cu{}class rr extends cu{get lc_namespace(){return["langchain","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}constructor(e){var t;super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:typeof process<"u"?((t=process.env)==null?void 0:t.LANGCHAIN_CALLBACKS_BACKGROUND)!=="true":!0}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent)}copy(){return new this.constructor(this)}toJSON(){return ft.prototype.toJSON.call(this)}toJSONNotImplemented(){return ft.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class t extends rr{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:et()}),Object.assign(this,e)}}return new t}}var fn={exports:{}};fn.exports;(function(r){const t=(s=0)=>i=>`\x1B[${38+s};5;${i}m`,n=(s=0)=>(i,o,u)=>`\x1B[${38+s};2;${i};${o};${u}m`;function a(){const s=new Map,i={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};i.color.gray=i.color.blackBright,i.bgColor.bgGray=i.bgColor.bgBlackBright,i.color.grey=i.color.blackBright,i.bgColor.bgGrey=i.bgColor.bgBlackBright;for(const[o,u]of Object.entries(i)){for(const[c,f]of Object.entries(u))i[c]={open:`\x1B[${f[0]}m`,close:`\x1B[${f[1]}m`},u[c]=i[c],s.set(f[0],f[1]);Object.defineProperty(i,o,{value:u,enumerable:!1})}return Object.defineProperty(i,"codes",{value:s,enumerable:!1}),i.color.close="\x1B[39m",i.bgColor.close="\x1B[49m",i.color.ansi256=t(),i.color.ansi16m=n(),i.bgColor.ansi256=t(10),i.bgColor.ansi16m=n(10),Object.defineProperties(i,{rgbToAnsi256:{value:(o,u,c)=>o===u&&u===c?o<8?16:o>248?231:Math.round((o-8)/247*24)+232:16+36*Math.round(o/255*5)+6*Math.round(u/255*5)+Math.round(c/255*5),enumerable:!1},hexToRgb:{value:o=>{const u=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(o.toString(16));if(!u)return[0,0,0];let{colorString:c}=u.groups;c.length===3&&(c=c.split("").map(w=>w+w).join(""));const f=Number.parseInt(c,16);return[f>>16&255,f>>8&255,f&255]},enumerable:!1},hexToAnsi256:{value:o=>i.rgbToAnsi256(...i.hexToRgb(o)),enumerable:!1}}),i}Object.defineProperty(r,"exports",{enumerable:!0,get:a})})(fn);var lu=fn.exports;const Wa=Sa(lu);class pn extends rr{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}_addChildRun(e,t){e.child_runs.push(t)}_startTrace(e){if(e.parent_run_id!==void 0){const t=this.runMap.get(e.parent_run_id);t&&this._addChildRun(t,e)}this.runMap.set(e.id,e)}async _endTrace(e){const t=e.parent_run_id!==void 0&&this.runMap.get(e.parent_run_id);t?t.child_execution_order=Math.max(t.child_execution_order,e.child_execution_order):await this.persistRun(e),this.runMap.delete(e.id)}_getExecutionOrder(e){const t=e!==void 0&&this.runMap.get(e);return t?t.child_execution_order+1:1}async handleLLMStart(e,t,n,a,s,i,o){var j;const u=this._getExecutionOrder(a),c=Date.now(),f=o?{...s,metadata:o}:s,w={id:n,name:e.id[e.id.length-1],parent_run_id:a,start_time:c,serialized:e,events:[{name:"start",time:c}],inputs:{prompts:t},execution_order:u,child_runs:[],child_execution_order:u,run_type:"llm",extra:f??{},tags:i||[]};this._startTrace(w),await((j=this.onLLMStart)==null?void 0:j.call(this,w))}async handleChatModelStart(e,t,n,a,s,i,o){var j;const u=this._getExecutionOrder(a),c=Date.now(),f=o?{...s,metadata:o}:s,w={id:n,name:e.id[e.id.length-1],parent_run_id:a,start_time:c,serialized:e,events:[{name:"start",time:c}],inputs:{messages:t},execution_order:u,child_runs:[],child_execution_order:u,run_type:"llm",extra:f??{},tags:i||[]};this._startTrace(w),await((j=this.onLLMStart)==null?void 0:j.call(this,w))}async handleLLMEnd(e,t){var a;const n=this.runMap.get(t);if(!n||(n==null?void 0:n.run_type)!=="llm")throw new Error("No LLM run to end.");n.end_time=Date.now(),n.outputs=e,n.events.push({name:"end",time:n.end_time}),await((a=this.onLLMEnd)==null?void 0:a.call(this,n)),await this._endTrace(n)}async handleLLMError(e,t){var a;const n=this.runMap.get(t);if(!n||(n==null?void 0:n.run_type)!=="llm")throw new Error("No LLM run to end.");n.end_time=Date.now(),n.error=e.message,n.events.push({name:"error",time:n.end_time}),await((a=this.onLLMError)==null?void 0:a.call(this,n)),await this._endTrace(n)}async handleChainStart(e,t,n,a,s,i){var f;const o=this._getExecutionOrder(a),u=Date.now(),c={id:n,name:e.id[e.id.length-1],parent_run_id:a,start_time:u,serialized:e,events:[{name:"start",time:u}],inputs:t,execution_order:o,child_execution_order:o,run_type:"chain",child_runs:[],extra:i?{metadata:i}:{},tags:s||[]};this._startTrace(c),await((f=this.onChainStart)==null?void 0:f.call(this,c))}async handleChainEnd(e,t){var a;const n=this.runMap.get(t);if(!n||(n==null?void 0:n.run_type)!=="chain")throw new Error("No chain run to end.");n.end_time=Date.now(),n.outputs=e,n.events.push({name:"end",time:n.end_time}),await((a=this.onChainEnd)==null?void 0:a.call(this,n)),await this._endTrace(n)}async handleChainError(e,t){var a;const n=this.runMap.get(t);if(!n||(n==null?void 0:n.run_type)!=="chain")throw new Error("No chain run to end.");n.end_time=Date.now(),n.error=e.message,n.events.push({name:"error",time:n.end_time}),await((a=this.onChainError)==null?void 0:a.call(this,n)),await this._endTrace(n)}async handleToolStart(e,t,n,a,s,i){var f;const o=this._getExecutionOrder(a),u=Date.now(),c={id:n,name:e.id[e.id.length-1],parent_run_id:a,start_time:u,serialized:e,events:[{name:"start",time:u}],inputs:{input:t},execution_order:o,child_execution_order:o,run_type:"tool",child_runs:[],extra:i?{metadata:i}:{},tags:s||[]};this._startTrace(c),await((f=this.onToolStart)==null?void 0:f.call(this,c))}async handleToolEnd(e,t){var a;const n=this.runMap.get(t);if(!n||(n==null?void 0:n.run_type)!=="tool")throw new Error("No tool run to end");n.end_time=Date.now(),n.outputs={output:e},n.events.push({name:"end",time:n.end_time}),await((a=this.onToolEnd)==null?void 0:a.call(this,n)),await this._endTrace(n)}async handleToolError(e,t){var a;const n=this.runMap.get(t);if(!n||(n==null?void 0:n.run_type)!=="tool")throw new Error("No tool run to end");n.end_time=Date.now(),n.error=e.message,n.events.push({name:"error",time:n.end_time}),await((a=this.onToolError)==null?void 0:a.call(this,n)),await this._endTrace(n)}async handleAgentAction(e,t){var s;const n=this.runMap.get(t);if(!n||(n==null?void 0:n.run_type)!=="chain")return;const a=n;a.actions=a.actions||[],a.actions.push(e),a.events.push({name:"agent_action",time:Date.now(),kwargs:{action:e}}),await((s=this.onAgentAction)==null?void 0:s.call(this,n))}async handleAgentEnd(e,t){var a;const n=this.runMap.get(t);!n||(n==null?void 0:n.run_type)!=="chain"||(n.events.push({name:"agent_end",time:Date.now(),kwargs:{action:e}}),await((a=this.onAgentEnd)==null?void 0:a.call(this,n)))}async handleText(e,t){var a;const n=this.runMap.get(t);!n||(n==null?void 0:n.run_type)!=="chain"||(n.events.push({name:"text",time:Date.now(),kwargs:{text:e}}),await((a=this.onText)==null?void 0:a.call(this,n)))}async handleLLMNewToken(e,t,n){var s;const a=this.runMap.get(n);!a||(a==null?void 0:a.run_type)!=="llm"||(a.events.push({name:"new_token",time:Date.now(),kwargs:{token:e,idx:t}}),await((s=this.onLLMNewToken)==null?void 0:s.call(this,a)))}}function we(r,e){return`${r.open}${e}${r.close}`}function Fe(r,e){try{return JSON.stringify(r,null,2)}catch{return e}}function ot(r){if(!r.end_time)return"";const e=r.end_time-r.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}const{color:Ae}=Wa;class Jn extends pn{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){const t=[];let n=e;for(;n.parent_run_id;){const a=this.runMap.get(n.parent_run_id);if(a)t.push(a),n=a;else break}return t}getBreadcrumbs(e){const n=[...this.getParents(e).reverse(),e].map((a,s,i)=>{const o=`${a.execution_order}:${a.run_type}:${a.name}`;return s===i.length-1?we(Wa.bold,o):o}).join(" > ");return we(Ae.grey,n)}onChainStart(e){const t=this.getBreadcrumbs(e);console.log(`${we(Ae.green,"[chain/start]")} [${t}] Entering Chain run with input: ${Fe(e.inputs,"[inputs]")}`)}onChainEnd(e){const t=this.getBreadcrumbs(e);console.log(`${we(Ae.cyan,"[chain/end]")} [${t}] [${ot(e)}] Exiting Chain run with output: ${Fe(e.outputs,"[outputs]")}`)}onChainError(e){const t=this.getBreadcrumbs(e);console.log(`${we(Ae.red,"[chain/error]")} [${t}] [${ot(e)}] Chain run errored with error: ${Fe(e.error,"[error]")}`)}onLLMStart(e){const t=this.getBreadcrumbs(e),n="prompts"in e.inputs?{prompts:e.inputs.prompts.map(a=>a.trim())}:e.inputs;console.log(`${we(Ae.green,"[llm/start]")} [${t}] Entering LLM run with input: ${Fe(n,"[inputs]")}`)}onLLMEnd(e){const t=this.getBreadcrumbs(e);console.log(`${we(Ae.cyan,"[llm/end]")} [${t}] [${ot(e)}] Exiting LLM run with output: ${Fe(e.outputs,"[response]")}`)}onLLMError(e){const t=this.getBreadcrumbs(e);console.log(`${we(Ae.red,"[llm/error]")} [${t}] [${ot(e)}] LLM run errored with error: ${Fe(e.error,"[error]")}`)}onToolStart(e){var n;const t=this.getBreadcrumbs(e);console.log(`${we(Ae.green,"[tool/start]")} [${t}] Entering Tool run with input: "${(n=e.inputs.input)==null?void 0:n.trim()}"`)}onToolEnd(e){var n,a;const t=this.getBreadcrumbs(e);console.log(`${we(Ae.cyan,"[tool/end]")} [${t}] [${ot(e)}] Exiting Tool run with output: "${(a=(n=e.outputs)==null?void 0:n.output)==null?void 0:a.trim()}"`)}onToolError(e){const t=this.getBreadcrumbs(e);console.log(`${we(Ae.red,"[tool/error]")} [${t}] [${ot(e)}] Tool run errored with error: ${Fe(e.error,"[error]")}`)}onAgentAction(e){const t=e,n=this.getBreadcrumbs(e);console.log(`${we(Ae.blue,"[agent/action]")} [${n}] Agent selected action: ${Fe(t.actions[t.actions.length-1],"[action]")}`)}}const du=[400,401,403,404,405,406,407,408,409];class fu{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6;const t="default"in dt?dt.default:dt;this.queue=new t({concurrency:this.maxConcurrency})}call(e,...t){return this.queue.add(()=>si(()=>e(...t).catch(n=>{throw n instanceof Error?n:new Error(n)}),{onFailedAttempt(n){var s;if(n.message.startsWith("Cancel")||n.message.startsWith("TimeoutError")||n.message.startsWith("AbortError")||(n==null?void 0:n.code)==="ECONNABORTED")throw n;const a=(s=n==null?void 0:n.response)==null?void 0:s.status;if(a&&du.includes(+a))throw n},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,t,...n){return e.signal?Promise.race([this.call(t,...n),new Promise((a,s)=>{var i;(i=e.signal)==null||i.addEventListener("abort",()=>{s(new Error("AbortError"))})})]):this.call(t,...n)}fetch(...e){return this.call(()=>fetch(...e).then(t=>t.ok?t:Promise.reject(t)))}}const pu=()=>typeof window<"u"&&typeof window.document<"u",hu=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",mu=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),Ga=()=>typeof Deno<"u",yu=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!Ga(),gu=()=>{let r;return pu()?r="browser":yu()?r="node":hu()?r="webworker":mu()?r="jsdom":Ga()?r="deno":r="other",r};let Yr;async function bu(){return Yr===void 0&&(Yr={library:"langsmith",runtime:gu()}),Yr}function Wn(r){var e;try{return typeof process<"u"?(e=process.env)==null?void 0:e[r]:void 0}catch{return}}const _u=r=>{const t=r.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return t==="localhost"||t==="127.0.0.1"||t==="::1"},cr=async(r,e)=>{const t=await r.text();if(!r.ok)throw new Error(`Failed to ${e}: ${r.status} ${r.statusText} ${t}`)};class hn{constructor(e={}){Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const t=hn.getDefaultClientConfig();this.apiUrl=e.apiUrl??t.apiUrl,this.apiKey=e.apiKey??t.apiKey,this.validateApiKeyIfHosted(),this.timeout_ms=e.timeout_ms??4e3,this.caller=new fu(e.callerOptions??{})}static getDefaultClientConfig(){return{apiUrl:Wn("LANGCHAIN_ENDPOINT")??"http://localhost:1984",apiKey:Wn("LANGCHAIN_API_KEY")}}validateApiKeyIfHosted(){if(!_u(this.apiUrl)&&!this.apiKey)throw new Error("API key must be provided when using hosted LangSmith API")}get headers(){const e={};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}async _get(e,t){const n=(t==null?void 0:t.toString())??"",a=`${this.apiUrl}${e}?${n}`,s=await this.caller.call(fetch,a,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!s.ok)throw new Error(`Failed to fetch ${e}: ${s.status} ${s.statusText}`);return s.json()}async createRun(e){const t={...this.headers,"Content-Type":"application/json"},n=e.extra??{},a=await bu(),s=e.project_name;delete e.project_name;const i={session_name:s,...e,extra:{...e.extra,runtime:{...a,...n.runtime}}},o=await this.caller.call(fetch,`${this.apiUrl}/runs`,{method:"POST",headers:t,body:JSON.stringify(i),signal:AbortSignal.timeout(this.timeout_ms)});await cr(o,"create run")}async updateRun(e,t){const n={...this.headers,"Content-Type":"application/json"},a=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:n,body:JSON.stringify(t),signal:AbortSignal.timeout(this.timeout_ms)});await cr(a,"update run")}async readRun(e,{loadChildRuns:t}={loadChildRuns:!1}){let n=await this._get(`/runs/${e}`);return t&&n.child_run_ids&&(n=await this._loadChildRuns(n)),n}async _loadChildRuns(e){const t=await this.listRuns({id:e.child_run_ids}),n={},a={};t.sort((s,i)=>s.execution_order-i.execution_order);for(const s of t){if(s.parent_run_id===null||s.parent_run_id===void 0)throw new Error(`Child run ${s.id} has no parent`);s.parent_run_id in n||(n[s.parent_run_id]=[]),n[s.parent_run_id].push(s),a[s.id]=s}e.child_runs=n[e.id]||[];for(const s in n)s!==e.id&&(a[s].child_runs=n[s]);return e}async listRuns({projectId:e,projectName:t,executionOrder:n,runType:a,error:s,id:i,limit:o,offset:u}){const c=new URLSearchParams;let f=e;if(t){if(e)throw new Error("Only one of projectId or projectName may be given");f=(await this.readProject({projectName:t})).id}if(f&&c.append("session",f),n&&c.append("execution_order",n.toString()),a&&c.append("run_type",a),s!==void 0&&c.append("error",s.toString()),i!==void 0)for(const w of i)c.append("id",w);return o!==void 0&&c.append("limit",o.toString()),u!==void 0&&c.append("offset",u.toString()),this._get("/runs",c)}async deleteRun(e){const t=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await cr(t,"delete run")}async createProject({projectName:e,projectExtra:t,upsert:n}){const a=n?"?upsert=true":"",s=`${this.apiUrl}/sessions${a}`,i={name:e};t!==void 0&&(i.extra=t);const o=await this.caller.call(fetch,s,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(i),signal:AbortSignal.timeout(this.timeout_ms)}),u=await o.json();if(!o.ok)throw new Error(`Failed to create session ${e}: ${o.status} ${o.statusText}`);return u}async readProject({projectId:e,projectName:t}){let n="/sessions";const a=new URLSearchParams;if(e!==void 0&&t!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)n+=`/${e}`;else if(t!==void 0)a.append("name",t);else throw new Error("Must provide projectName or projectId");const s=await this._get(n,a);let i;if(Array.isArray(s)){if(s.length===0)throw new Error(`Project[id=${e}, name=${t}] not found`);i=s[0]}else i=s;return i}async listProjects(){return this._get("/sessions")}async deleteProject({projectId:e,projectName:t}){let n;if(e===void 0&&t===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&t!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?n=(await this.readProject({projectName:t})).id:n=e;const a=await this.caller.call(fetch,`${this.apiUrl}/sessions/${n}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await cr(a,`delete session ${n} (${t})`)}async uploadCsv({csvFile:e,fileName:t,inputKeys:n,outputKeys:a,description:s,dataType:i,name:o}){const u=`${this.apiUrl}/datasets/upload`,c=new FormData;c.append("file",e,t),n.forEach(j=>{c.append("input_keys",j)}),a.forEach(j=>{c.append("output_keys",j)}),s&&c.append("description",s),i&&c.append("data_type",i),o&&c.append("name",o);const f=await this.caller.call(fetch,u,{method:"POST",headers:this.headers,body:c,signal:AbortSignal.timeout(this.timeout_ms)});if(!f.ok){const j=await f.json();throw j.detail&&j.detail.includes("already exists")?new Error(`Dataset ${t} already exists`):new Error(`Failed to upload CSV: ${f.status} ${f.statusText}`)}return await f.json()}async createDataset(e,{description:t,dataType:n}={}){const a={name:e,description:t};n&&(a.data_type=n);const s=await this.caller.call(fetch,`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms)});if(!s.ok){const o=await s.json();throw o.detail&&o.detail.includes("already exists")?new Error(`Dataset ${e} already exists`):new Error(`Failed to create dataset ${s.status} ${s.statusText}`)}return await s.json()}async readDataset({datasetId:e,datasetName:t}){let n="/datasets";const a=new URLSearchParams({limit:"1"});if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)n+=`/${e}`;else if(t!==void 0)a.append("name",t);else throw new Error("Must provide datasetName or datasetId");const s=await this._get(n,a);let i;if(Array.isArray(s)){if(s.length===0)throw new Error(`Dataset[id=${e}, name=${t}] not found`);i=s[0]}else i=s;return i}async listDatasets({limit:e=100,offset:t=0}={}){const n="/datasets",a=new URLSearchParams({limit:e.toString(),offset:t.toString()}),s=await this._get(n,a);if(!Array.isArray(s))throw new Error(`Expected ${n} to return an array, but got ${s}`);return s}async deleteDataset({datasetId:e,datasetName:t}){let n="/datasets",a=e;if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(t!==void 0&&(a=(await this.readDataset({datasetName:t})).id),a!==void 0)n+=`/${a}`;else throw new Error("Must provide datasetName or datasetId");const s=await this.caller.call(fetch,this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!s.ok)throw new Error(`Failed to delete ${n}: ${s.status} ${s.statusText}`);await s.json()}async createExample(e,t,{datasetId:n,datasetName:a,createdAt:s}){let i=n;if(i===void 0&&a===void 0)throw new Error("Must provide either datasetName or datasetId");if(i!==void 0&&a!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");i===void 0&&(i=(await this.readDataset({datasetName:a})).id);const u={dataset_id:i,inputs:e,outputs:t,created_at:(s||new Date).toISOString()},c=await this.caller.call(fetch,`${this.apiUrl}/examples`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms)});if(!c.ok)throw new Error(`Failed to create example: ${c.status} ${c.statusText}`);return await c.json()}async readExample(e){const t=`/examples/${e}`;return await this._get(t)}async listExamples({datasetId:e,datasetName:t,limit:n,offset:a}={}){let s;if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)s=e;else if(t!==void 0)s=(await this.readDataset({datasetName:t})).id;else throw new Error("Must provide a datasetName or datasetId");const i=await this._get("/examples",new URLSearchParams({dataset:s,limit:(n==null?void 0:n.toString())??"100",offset:(a==null?void 0:a.toString())??"0"}));if(!Array.isArray(i))throw new Error(`Expected /examples to return an array, but got ${i}`);return i}async deleteExample(e){const t=`/examples/${e}`,n=await this.caller.call(fetch,this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!n.ok)throw new Error(`Failed to delete ${t}: ${n.status} ${n.statusText}`);await n.json()}async updateExample(e,t){const n=await this.caller.call(fetch,`${this.apiUrl}/examples/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(t),signal:AbortSignal.timeout(this.timeout_ms)});if(!n.ok)throw new Error(`Failed to update example ${e}: ${n.status} ${n.statusText}`);return await n.json()}async evaluateRun(e,t,{sourceInfo:n,loadChildRuns:a}={loadChildRuns:!1}){let s;if(typeof e=="string")s=await this.readRun(e,{loadChildRuns:a});else if(typeof e=="object"&&"id"in e)s=e;else throw new Error(`Invalid run type: ${typeof e}`);let i;s.reference_example_id!==null&&s.reference_example_id!==void 0&&(i=await this.readExample(s.reference_example_id));const o=await t.evaluateRun(s,i);let u=n??{};return o.evaluatorInfo&&(u={...u,...o.evaluatorInfo}),await this.createFeedback(s.id,o.key,{score:o.score,value:o.value,comment:o.comment,correction:o.correction,sourceInfo:u,feedbackSourceType:"MODEL"})}async createFeedback(e,t,{score:n,value:a,correction:s,comment:i,sourceInfo:o,feedbackSourceType:u="API"}){let c;if(u==="API")c={type:"api",metadata:o??{}};else if(u==="MODEL")c={type:"model",metadata:o??{}};else throw new Error(`Unknown feedback source type ${u}`);const f={id:et(),run_id:e,key:t,score:n,value:a,correction:s,comment:i,feedback_source:c},w=await this.caller.call(fetch,`${this.apiUrl}/feedback`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(f),signal:AbortSignal.timeout(this.timeout_ms)});if(!w.ok)throw new Error(`Failed to create feedback for run ${e}: ${w.status} ${w.statusText}`);return await w.json()}async readFeedback(e){const t=`/feedback/${e}`;return await this._get(t)}async deleteFeedback(e){const t=`/feedback/${e}`,n=await this.caller.call(fetch,this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!n.ok)throw new Error(`Failed to delete ${t}: ${n.status} ${n.statusText}`);await n.json()}async listFeedback({runIds:e,limit:t,offset:n}={}){const a=new URLSearchParams;return e&&a.append("run",e.join(",")),t!==void 0&&a.append("limit",t.toString()),n!==void 0&&a.append("offset",n.toString()),await this._get("/feedback",a)}}class wu extends pn{constructor(e={}){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{exampleId:t,projectName:n,client:a}=e;this.projectName=n??le("LANGCHAIN_PROJECT")??le("LANGCHAIN_SESSION"),this.exampleId=t,this.client=a??new hn({})}async _convertToCreate(e,t=void 0){return{...e,extra:{...e.extra,runtime:await ii()},child_runs:void 0,session_name:this.projectName,reference_example_id:e.parent_run_id?void 0:t}}async persistRun(e){}async _persistRunSingle(e){const t=await this._convertToCreate(e,this.exampleId);await this.client.createRun(t)}async _updateRunSingle(e){const t={end_time:e.end_time,error:e.error,outputs:e.outputs,events:e.events};await this.client.updateRun(e.id,t)}async onLLMStart(e){await this._persistRunSingle(e)}async onLLMEnd(e){await this._updateRunSingle(e)}async onLLMError(e){await this._updateRunSingle(e)}async onChainStart(e){await this._persistRunSingle(e)}async onChainEnd(e){await this._updateRunSingle(e)}async onChainError(e){await this._updateRunSingle(e)}async onToolStart(e){await this._persistRunSingle(e)}async onToolEnd(e){await this._updateRunSingle(e)}async onToolError(e){await this._updateRunSingle(e)}}function mn(r,e="Human",t="AI"){const n=[];for(const a of r){let s;if(a._getType()==="human")s=e;else if(a._getType()==="ai")s=t;else if(a._getType()==="system")s="System";else if(a._getType()==="function")s="Function";else if(a._getType()==="generic")s=a.role;else throw new Error(`Got unsupported message type: ${a}`);const i=a.name?`${a.name}, `:"";n.push(`${s}: ${i}${a.content}`)}return n.join(`
`)}class vu extends pn{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"endpoint",{enumerable:!0,configurable:!0,writable:!0,value:le("LANGCHAIN_ENDPOINT")||"http://localhost:1984"}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:{"Content-Type":"application/json"}}),Object.defineProperty(this,"session",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const e=le("LANGCHAIN_API_KEY");e&&(this.headers["x-api-key"]=e)}async newSession(e){const t={start_time:Date.now(),name:e},n=await this.persistSession(t);return this.session=n,n}async loadSession(e){const t=`${this.endpoint}/sessions?name=${e}`;return this._handleSessionResponse(t)}async loadDefaultSession(){const e=`${this.endpoint}/sessions?name=default`;return this._handleSessionResponse(e)}async convertV2RunToRun(e){var s;const t=this.session??await this.loadDefaultSession(),n=e.serialized;let a;if(e.run_type==="llm"){const i=e.inputs.prompts?e.inputs.prompts:e.inputs.messages.map(u=>mn(u));a={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:n,type:e.run_type,session_id:t.id,prompts:i,response:e.outputs}}else if(e.run_type==="chain"){const i=await Promise.all(e.child_runs.map(u=>this.convertV2RunToRun(u)));a={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:n,type:e.run_type,session_id:t.id,inputs:e.inputs,outputs:e.outputs,child_llm_runs:i.filter(u=>u.type==="llm"),child_chain_runs:i.filter(u=>u.type==="chain"),child_tool_runs:i.filter(u=>u.type==="tool")}}else if(e.run_type==="tool"){const i=await Promise.all(e.child_runs.map(u=>this.convertV2RunToRun(u)));a={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:n,type:e.run_type,session_id:t.id,tool_input:e.inputs.input,output:(s=e.outputs)==null?void 0:s.output,action:JSON.stringify(n),child_llm_runs:i.filter(u=>u.type==="llm"),child_chain_runs:i.filter(u=>u.type==="chain"),child_tool_runs:i.filter(u=>u.type==="tool")}}else throw new Error(`Unknown run type: ${e.run_type}`);return a}async persistRun(e){let t,n;e.run_type!==void 0?n=await this.convertV2RunToRun(e):n=e,n.type==="llm"?t=`${this.endpoint}/llm-runs`:n.type==="chain"?t=`${this.endpoint}/chain-runs`:t=`${this.endpoint}/tool-runs`;const a=await fetch(t,{method:"POST",headers:this.headers,body:JSON.stringify(n)});a.ok||console.error(`Failed to persist run: ${a.status} ${a.statusText}`)}async persistSession(e){const t=`${this.endpoint}/sessions`,n=await fetch(t,{method:"POST",headers:this.headers,body:JSON.stringify(e)});return n.ok?{id:(await n.json()).id,...e}:(console.error(`Failed to persist session: ${n.status} ${n.statusText}, using default session.`),{id:1,...e})}async _handleSessionResponse(e){const t=await fetch(e,{method:"GET",headers:this.headers});let n;if(!t.ok)return console.error(`Failed to load session: ${t.status} ${t.statusText}`),n={id:1,start_time:Date.now()},this.session=n,n;const a=await t.json();return a.length===0?(n={id:1,start_time:Date.now()},this.session=n,n):([n]=a,this.session=n,n)}}async function Eu(r){const e=new vu;return r?await e.loadSession(r):await e.loadDefaultSession(),e}async function Ou(){return new wu}let Jr;function xu(){const r="default"in dt?dt.default:dt;return new r({autoStart:!0,concurrency:1})}async function be(r,e){e===!0?await r():(typeof Jr>"u"&&(Jr=xu()),Jr.add(r))}function Pu(r){return r?Array.isArray(r)||"name"in r?{callbacks:r}:r:{}}class Au{setHandler(e){return this.setHandlers([e])}}class yn{constructor(e,t,n,a,s,i,o,u){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:u})}async handleText(e){await Promise.all(this.handlers.map(t=>be(async()=>{var n;try{await((n=t.handleText)==null?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(a){console.error(`Error in handler ${t.constructor.name}, handleText: ${a}`)}},t.awaitHandlers)))}}class Gn extends yn{async handleLLMNewToken(e,t={prompt:0,completion:0}){await Promise.all(this.handlers.map(n=>be(async()=>{var a;if(!n.ignoreLLM)try{await((a=n.handleLLMNewToken)==null?void 0:a.call(n,e,t,this.runId,this._parentRunId,this.tags))}catch(s){console.error(`Error in handler ${n.constructor.name}, handleLLMNewToken: ${s}`)}},n.awaitHandlers)))}async handleLLMError(e){await Promise.all(this.handlers.map(t=>be(async()=>{var n;if(!t.ignoreLLM)try{await((n=t.handleLLMError)==null?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(a){console.error(`Error in handler ${t.constructor.name}, handleLLMError: ${a}`)}},t.awaitHandlers)))}async handleLLMEnd(e){await Promise.all(this.handlers.map(t=>be(async()=>{var n;if(!t.ignoreLLM)try{await((n=t.handleLLMEnd)==null?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(a){console.error(`Error in handler ${t.constructor.name}, handleLLMEnd: ${a}`)}},t.awaitHandlers)))}}class Tu extends yn{getChild(e){const t=new ze(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleChainError(e){await Promise.all(this.handlers.map(t=>be(async()=>{var n;if(!t.ignoreChain)try{await((n=t.handleChainError)==null?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(a){console.error(`Error in handler ${t.constructor.name}, handleChainError: ${a}`)}},t.awaitHandlers)))}async handleChainEnd(e){await Promise.all(this.handlers.map(t=>be(async()=>{var n;if(!t.ignoreChain)try{await((n=t.handleChainEnd)==null?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(a){console.error(`Error in handler ${t.constructor.name}, handleChainEnd: ${a}`)}},t.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(t=>be(async()=>{var n;if(!t.ignoreAgent)try{await((n=t.handleAgentAction)==null?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(a){console.error(`Error in handler ${t.constructor.name}, handleAgentAction: ${a}`)}},t.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(t=>be(async()=>{var n;if(!t.ignoreAgent)try{await((n=t.handleAgentEnd)==null?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(a){console.error(`Error in handler ${t.constructor.name}, handleAgentEnd: ${a}`)}},t.awaitHandlers)))}}class Su extends yn{getChild(e){const t=new ze(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleToolError(e){await Promise.all(this.handlers.map(t=>be(async()=>{var n;if(!t.ignoreAgent)try{await((n=t.handleToolError)==null?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(a){console.error(`Error in handler ${t.constructor.name}, handleToolError: ${a}`)}},t.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(t=>be(async()=>{var n;if(!t.ignoreAgent)try{await((n=t.handleToolEnd)==null?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(a){console.error(`Error in handler ${t.constructor.name}, handleToolEnd: ${a}`)}},t.awaitHandlers)))}}class ze extends Au{constructor(e){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=[],this.inheritableHandlers=[],this._parentRunId=e}async handleLLMStart(e,t,n=void 0,a=void 0,s=void 0){return Promise.all(t.map(async i=>{const o=et();return await Promise.all(this.handlers.map(u=>be(async()=>{var c;if(!u.ignoreLLM)try{await((c=u.handleLLMStart)==null?void 0:c.call(u,e,[i],o,this._parentRunId,s,this.tags,this.metadata))}catch(f){console.error(`Error in handler ${u.constructor.name}, handleLLMStart: ${f}`)}},u.awaitHandlers))),new Gn(o,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,t,n=void 0,a=void 0,s=void 0){return Promise.all(t.map(async i=>{const o=et();return await Promise.all(this.handlers.map(u=>be(async()=>{var c,f;if(!u.ignoreLLM)try{if(u.handleChatModelStart)await((c=u.handleChatModelStart)==null?void 0:c.call(u,e,[i],o,this._parentRunId,s,this.tags,this.metadata));else if(u.handleLLMStart){const w=mn(i);await((f=u.handleLLMStart)==null?void 0:f.call(u,e,[w],o,this._parentRunId,s,this.tags,this.metadata))}}catch(w){console.error(`Error in handler ${u.constructor.name}, handleLLMStart: ${w}`)}},u.awaitHandlers))),new Gn(o,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,t,n=et()){return await Promise.all(this.handlers.map(a=>be(async()=>{var s;if(!a.ignoreChain)try{await((s=a.handleChainStart)==null?void 0:s.call(a,e,t,n,this._parentRunId,this.tags,this.metadata))}catch(i){console.error(`Error in handler ${a.constructor.name}, handleChainStart: ${i}`)}},a.awaitHandlers))),new Tu(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,t,n=et()){return await Promise.all(this.handlers.map(a=>be(async()=>{var s;if(!a.ignoreAgent)try{await((s=a.handleToolStart)==null?void 0:s.call(a,e,t,n,this._parentRunId,this.tags,this.metadata))}catch(i){console.error(`Error in handler ${a.constructor.name}, handleToolStart: ${i}`)}},a.awaitHandlers))),new Su(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}addHandler(e,t=!0){this.handlers.push(e),t&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(t=>t!==e),this.inheritableHandlers=this.inheritableHandlers.filter(t=>t!==e)}setHandlers(e,t=!0){this.handlers=[],this.inheritableHandlers=[];for(const n of e)this.addHandler(n,t)}addTags(e,t=!0){this.removeTags(e),this.tags.push(...e),t&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(t=>!e.includes(t)),this.inheritableTags=this.inheritableTags.filter(t=>!e.includes(t))}addMetadata(e,t=!0){this.metadata={...this.metadata,...e},t&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(const t of Object.keys(e))delete this.metadata[t],delete this.inheritableMetadata[t]}copy(e=[],t=!0){const n=new ze(this._parentRunId);for(const a of this.handlers){const s=this.inheritableHandlers.includes(a);n.addHandler(a,s)}for(const a of this.tags){const s=this.inheritableTags.includes(a);n.addTags([a],s)}for(const a of Object.keys(this.metadata)){const s=Object.keys(this.inheritableMetadata).includes(a);n.addMetadata({[a]:this.metadata[a]},s)}for(const a of e)n.handlers.filter(s=>s.name==="console_callback_handler").some(s=>s.name===a.name)||n.addHandler(a,t);return n}static fromHandlers(e){class t extends rr{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:et()}),Object.assign(this,e)}}const n=new this;return n.addHandler(new t),n}static async configure(e,t,n,a,s,i,o){let u;(e||t)&&(Array.isArray(e)||!e?(u=new ze,u.setHandlers((e==null?void 0:e.map(Xn))??[],!0)):u=e,u=u.copy(Array.isArray(t)?t.map(Xn):t==null?void 0:t.handlers,!1));const c=le("LANGCHAIN_VERBOSE")||(o==null?void 0:o.verbose),f=le("LANGCHAIN_TRACING_V2")??!1,w=f||(le("LANGCHAIN_TRACING")??!1);if(c||w){if(u||(u=new ze),c&&!u.handlers.some(j=>j.name===Jn.prototype.name)){const j=new Jn;u.addHandler(j,!0)}if(w&&!u.handlers.some(j=>j.name==="langchain_tracer"))if(f)u.addHandler(await Ou(),!0);else{const j=le("LANGCHAIN_PROJECT")&&le("LANGCHAIN_SESSION");u.addHandler(await Eu(j),!0)}}return(n||a)&&u&&(u.addTags(n??[]),u.addTags(a??[],!1)),(s||i)&&u&&(u.addMetadata(s??{}),u.addMetadata(i??{},!1)),u}}function Xn(r){return"name"in r?r:rr.fromMethods(r)}const Xa=r=>r.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":r.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":r.startsWith("gpt-4-32k")?"gpt-4-32k":r.startsWith("gpt-4-")?"gpt-4":r,ku=r=>{switch(Xa(r)){case"gpt-3.5-turbo-16k":return 16384;case"gpt-3.5-turbo":return 4096;case"gpt-4-32k":return 32768;case"gpt-4":return 8192;case"text-davinci-003":return 4097;case"text-curie-001":return 2048;case"text-babbage-001":return 2048;case"text-ada-001":return 2048;case"code-davinci-002":return 8e3;case"code-cushman-001":return 2048;default:return 4097}},_d=async({prompt:r,modelName:e})=>{let t;try{t=(await ka(e)).encode(r).length}catch{console.warn("Failed to calculate number of tokens, falling back to approximate count"),t=Math.ceil(r.length/4)}return ku(e)-t},ju=()=>!1;class Qa extends ft{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??ju(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}}class es extends Qa{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:e,callbackManager:t,...n}){super({callbacks:e??t,...n}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.caller=new xa(n??{})}async getNumTokens(e){let t=Math.ceil(e.length/4);if(!this._encoding)try{this._encoding=await ka("modelName"in this?Xa(this.modelName):"gpt2")}catch(n){console.warn("Failed to calculate number of tokens, falling back to approximate count",n)}return this._encoding&&(t=this._encoding.encode(e).length),t}_identifyingParams(){return{}}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){const{_type:t,_model:n,...a}=e;if(n&&n!=="base_chat_model")throw new Error(`Cannot load LLM with model ${n}`);const s={openai:(await ge(()=>import("./openai.68831566.js"),["_app/immutable/chunks/openai.68831566.js","_app/immutable/chunks/_commonjs-dynamic-modules.5fcb8f34.js","_app/immutable/chunks/public.79d73255.js","_app/immutable/chunks/NavBar.74969093.js","_app/immutable/chunks/scheduler.2364b0ad.js","_app/immutable/chunks/index.e0615928.js","_app/immutable/chunks/globals.7f7f1b26.js","_app/immutable/assets/NavBar.ffbd0f32.css","_app/immutable/chunks/prompt-layer.00daf386.js"])).ChatOpenAI}[t];if(s===void 0)throw new Error(`Cannot load  LLM with type ${t}`);return new s(a)}}class Tr extends Qa{get lc_namespace(){return["langchain","chains",this._chainType()]}constructor(e,t,n){if(arguments.length===1&&typeof e=="object"&&!("saveContext"in e)){const{memory:a,callbackManager:s,...i}=e;super({...i,callbacks:s??i.callbacks}),this.memory=a}else super({verbose:t,callbacks:n}),this.memory=e}_selectMemoryInputs(e){const t={...e};return"signal"in t&&delete t.signal,"timeout"in t&&delete t.timeout,t}serialize(){throw new Error("Method not implemented.")}async run(e,t){const n=this.inputKeys.filter(u=>{var c;return!((c=this.memory)!=null&&c.memoryKeys.includes(u))});if(!(n.length<=1))throw new Error(`Chain ${this._chainType()} expects multiple inputs, cannot use 'run' `);const s=n.length?{[n[0]]:e}:{},i=await this.call(s,t),o=Object.keys(i);if(o.length===1)return i[o[0]];throw new Error("return values have multiple keys, `run` only supported when one key currently")}async call(e,t,n){const a={...e};if(a.timeout&&!a.signal&&(a.signal=AbortSignal.timeout(a.timeout),delete a.timeout),this.memory!=null){const c=await this.memory.loadMemoryVariables(this._selectMemoryInputs(e));for(const[f,w]of Object.entries(c))a[f]=w}const s=Pu(t),i=await ze.configure(s.callbacks,this.callbacks,s.tags||n,this.tags,s.metadata,this.metadata,{verbose:this.verbose}),o=await(i==null?void 0:i.handleChainStart(this.toJSON(),a));let u;try{u=await(e.signal?Promise.race([this._call(a,o),new Promise((c,f)=>{var w;(w=e.signal)==null||w.addEventListener("abort",()=>{f(new Error("AbortError"))})})]):this._call(a,o))}catch(c){throw await(o==null?void 0:o.handleChainError(c)),c}return this.memory!=null&&await this.memory.saveContext(this._selectMemoryInputs(e),u),await(o==null?void 0:o.handleChainEnd(u)),Object.defineProperty(u,Pa,{value:o?{runId:o==null?void 0:o.runId}:void 0,configurable:!0}),u}async apply(e,t){return Promise.all(e.map(async(n,a)=>this.call(n,t==null?void 0:t[a])))}static async deserialize(e,t={}){switch(e._type){case"llm_chain":{const{LLMChain:n}=await ge(()=>Promise.resolve().then(()=>Lu),void 0);return n.deserialize(e)}case"sequential_chain":{const{SequentialChain:n}=await ge(()=>import("./sequential_chain.f9177248.js"),[]);return n.deserialize(e)}case"simple_sequential_chain":{const{SimpleSequentialChain:n}=await ge(()=>import("./sequential_chain.f9177248.js"),[]);return n.deserialize(e)}case"stuff_documents_chain":{const{StuffDocumentsChain:n}=await ge(()=>Promise.resolve().then(()=>Wr),void 0);return n.deserialize(e)}case"map_reduce_documents_chain":{const{MapReduceDocumentsChain:n}=await ge(()=>Promise.resolve().then(()=>Wr),void 0);return n.deserialize(e)}case"refine_documents_chain":{const{RefineDocumentsChain:n}=await ge(()=>Promise.resolve().then(()=>Wr),void 0);return n.deserialize(e)}case"vector_db_qa":{const{VectorDBQAChain:n}=await ge(()=>import("./vector_db_qa.c436724a.js"),[]);return n.deserialize(e,t)}case"api_chain":{const{APIChain:n}=await ge(()=>import("./api_chain.cc077624.js"),[]);return n.deserialize(e)}default:throw new Error(`Invalid prompt type in config: ${e._type}`)}}}class Iu extends Aa{constructor(e){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts","base"]}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new Ta(this.value)]}}class gn extends ft{get lc_attributes(){return{partialVariables:void 0}}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts",this._getPromptType()]}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"partialVariables",{enumerable:!0,configurable:!0,writable:!0,value:{}});const{inputVariables:t}=e;if(t.includes("stop"))throw new Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,e)}async mergePartialAndUserVariables(e){const t=this.partialVariables??{},n={};for(const[s,i]of Object.entries(t))typeof i=="string"?n[s]=i:n[s]=await i();return{...n,...e}}serialize(){throw new Error("Use .toJSON() instead")}static async deserialize(e){switch(e._type){case"prompt":{const{PromptTemplate:t}=await ge(()=>Promise.resolve().then(()=>Qn),void 0);return t.deserialize(e)}case void 0:{const{PromptTemplate:t}=await ge(()=>Promise.resolve().then(()=>Qn),void 0);return t.deserialize({...e,_type:"prompt"})}case"few_shot":{const{FewShotPromptTemplate:t}=await ge(()=>import("./few_shot.40bb5875.js"),[]);return t.deserialize(e)}default:throw new Error(`Invalid prompt type in config: ${e._type}`)}}}class Nu extends gn{async formatPromptValue(e){const t=await this.format(e);return new Iu(t)}}class Cu extends ft{parseResultWithPrompt(e,t,n){return this.parseResult(e,n)}}class Ru extends Cu{parseResult(e,t){return this.parse(e[0].text,t)}async parseWithPrompt(e,t,n){return this.parse(e,n)}_type(){throw new Error("_type not implemented")}}class Du extends Ru{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","default"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}parse(e){return Promise.resolve(e)}getFormatInstructions(){return""}}class qe extends Tr{get inputKeys(){return this.prompt.inputVariables}get outputKeys(){return[this.outputKey]}constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"llm",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"llmKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputKey",{enumerable:!0,configurable:!0,writable:!0,value:"text"}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt,this.llm=e.llm,this.llmKwargs=e.llmKwargs,this.outputKey=e.outputKey??this.outputKey,this.outputParser=e.outputParser??new Du,this.prompt.outputParser){if(e.outputParser)throw new Error("Cannot set both outputParser and prompt.outputParser");this.outputParser=this.prompt.outputParser}}_selectMemoryInputs(e){const t=super._selectMemoryInputs(e);for(const n of this.llm.callKeys)n in e&&delete t[n];return t}async _getFinalOutput(e,t,n){let a;return this.outputParser?a=await this.outputParser.parseResultWithPrompt(e,t,n==null?void 0:n.getChild()):a=e[0].text,a}call(e,t){return super.call(e,t)}async _call(e,t){const n={...e},a={...this.llmKwargs};for(const o of this.llm.callKeys)o in e&&(a[o]=e[o],delete n[o]);const s=await this.prompt.formatPromptValue(n),{generations:i}=await this.llm.generatePrompt([s],a,t==null?void 0:t.getChild());return{[this.outputKey]:await this._getFinalOutput(i[0],s,t)}}async predict(e,t){return(await this.call(e,t))[this.outputKey]}_chainType(){return"llm"}static async deserialize(e){const{llm:t,prompt:n}=e;if(!t)throw new Error("LLMChain must have llm");if(!n)throw new Error("LLMChain must have prompt");return new qe({llm:await es.deserialize(t),prompt:await gn.deserialize(n)})}serialize(){return{_type:`${this._chainType()}_chain`,llm:this.llm.serialize(),prompt:this.prompt.serialize()}}}const Lu=Object.freeze(Object.defineProperty({__proto__:null,LLMChain:qe},Symbol.toStringTag,{value:"Module"})),ts=r=>{const e=r.split(""),t=[],n=(s,i)=>{for(let o=i;o<e.length;o+=1)if(s.includes(e[o]))return o;return-1};let a=0;for(;a<e.length;)if(e[a]==="{"&&a+1<e.length&&e[a+1]==="{")t.push({type:"literal",text:"{"}),a+=2;else if(e[a]==="}"&&a+1<e.length&&e[a+1]==="}")t.push({type:"literal",text:"}"}),a+=2;else if(e[a]==="{"){const s=n("}",a);if(s<0)throw new Error("Unclosed '{' in template.");t.push({type:"variable",name:e.slice(a+1,s).join("")}),a=s+1}else{if(e[a]==="}")throw new Error("Single '}' in template.");{const s=n("{}",a),i=(s<0?e.slice(a):e.slice(a,s)).join("");t.push({type:"literal",text:i}),a=s<0?e.length:s}}return t},Mu=(r,e)=>ts(r).reduce((t,n)=>{if(n.type==="variable"){if(n.name in e)return t+e[n.name];throw new Error(`Missing value for input ${n.name}`)}return t+n.text},""),nn={"f-string":Mu,jinja2:(r,e)=>""},$u={"f-string":ts,jinja2:r=>[]},rs=(r,e,t)=>nn[e](r,t),Bu=(r,e)=>$u[e](r),Uu=(r,e,t)=>{if(!(e in nn)){const n=Object.keys(nn);throw new Error(`Invalid template format. Got \`${e}\`;
                         should be one of ${n}`)}try{const n=t.reduce((a,s)=>(a[s]="foo",a),{});rs(r,e,n)}catch(n){throw new Error(`Invalid prompt schema: ${n.message}`)}};class Ie extends Nu{constructor(e){if(super(e),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,e),this.validateTemplate){let t=this.inputVariables;this.partialVariables&&(t=t.concat(Object.keys(this.partialVariables))),Uu(this.template,this.templateFormat,t)}}_getPromptType(){return"prompt"}async format(e){const t=await this.mergePartialAndUserVariables(e);return rs(this.template,this.templateFormat,t)}static fromExamples(e,t,n,a=`

`,s=""){const i=[s,...e,t].join(a);return new Ie({inputVariables:n,template:i})}static fromTemplate(e,{templateFormat:t="f-string",...n}={}){const a=new Set;return Bu(e,t).forEach(s=>{s.type==="variable"&&a.add(s.name)}),new Ie({inputVariables:[...a],templateFormat:t,template:e,...n})}async partial(e){const t={...this};return t.inputVariables=this.inputVariables.filter(n=>!(n in e)),t.partialVariables={...this.partialVariables??{},...e},new Ie(t)}serialize(){if(this.outputParser!==void 0)throw new Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static async deserialize(e){if(!e.template)throw new Error("Prompt template must have a template");return new Ie({inputVariables:e.input_variables,template:e.template,templateFormat:e.template_format})}}const Qn=Object.freeze(Object.defineProperty({__proto__:null,PromptTemplate:Ie},Symbol.toStringTag,{value:"Module"}));class nr extends Tr{get inputKeys(){return[this.inputKey,...this.llmChain.inputKeys].filter(e=>e!==this.documentVariableName)}get outputKeys(){return this.llmChain.outputKeys}constructor(e){super(e),Object.defineProperty(this,"llmChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"input_documents"}),Object.defineProperty(this,"documentVariableName",{enumerable:!0,configurable:!0,writable:!0,value:"context"}),this.llmChain=e.llmChain,this.documentVariableName=e.documentVariableName??this.documentVariableName,this.inputKey=e.inputKey??this.inputKey}_prepInputs(e){if(!(this.inputKey in e))throw new Error(`Document key ${this.inputKey} not found.`);const{[this.inputKey]:t,...n}=e,s=t.map(({pageContent:i})=>i).join(`

`);return{...n,[this.documentVariableName]:s}}async _call(e,t){return await this.llmChain.call(this._prepInputs(e),t==null?void 0:t.getChild("combine_documents"))}_chainType(){return"stuff_documents_chain"}static async deserialize(e){if(!e.llm_chain)throw new Error("Missing llm_chain");return new nr({llmChain:await qe.deserialize(e.llm_chain)})}serialize(){return{_type:this._chainType(),llm_chain:this.llmChain.serialize()}}}class bn extends Tr{get inputKeys(){return[this.inputKey,...this.combineDocumentChain.inputKeys]}get outputKeys(){return this.combineDocumentChain.outputKeys}constructor(e){super(e),Object.defineProperty(this,"llmChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"input_documents"}),Object.defineProperty(this,"documentVariableName",{enumerable:!0,configurable:!0,writable:!0,value:"context"}),Object.defineProperty(this,"returnIntermediateSteps",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:3e3}),Object.defineProperty(this,"maxIterations",{enumerable:!0,configurable:!0,writable:!0,value:10}),Object.defineProperty(this,"ensureMapStep",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"combineDocumentChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.llmChain=e.llmChain,this.combineDocumentChain=e.combineDocumentChain,this.documentVariableName=e.documentVariableName??this.documentVariableName,this.ensureMapStep=e.ensureMapStep??this.ensureMapStep,this.inputKey=e.inputKey??this.inputKey,this.maxTokens=e.maxTokens??this.maxTokens,this.maxIterations=e.maxIterations??this.maxIterations,this.returnIntermediateSteps=e.returnIntermediateSteps??!1}async _call(e,t){if(!(this.inputKey in e))throw new Error(`Document key ${this.inputKey} not found.`);const{[this.inputKey]:n,...a}=e;let s=n,i=[];for(let c=0;c<this.maxIterations;c+=1){const f=s.map(b=>({[this.documentVariableName]:b.pageContent,...a}));if(c!==0||!this.ensureMapStep){const b=await this.combineDocumentChain.llmChain.prompt.format(this.combineDocumentChain._prepInputs({[this.combineDocumentChain.inputKey]:s,...a}));if(await this.combineDocumentChain.llmChain.llm.getNumTokens(b)<this.maxTokens)break}const j=await this.llmChain.apply(f,t?Array.from({length:f.length},(b,P)=>t.getChild(`map_${P+1}`)):void 0),{outputKey:U}=this.llmChain;this.returnIntermediateSteps&&(i=i.concat(j.map(b=>b[U]))),s=j.map(b=>({pageContent:b[U],metadata:{}}))}const o={[this.combineDocumentChain.inputKey]:s,...a},u=await this.combineDocumentChain.call(o,t==null?void 0:t.getChild("combine_documents"));return this.returnIntermediateSteps?{...u,intermediateSteps:i}:u}_chainType(){return"map_reduce_documents_chain"}static async deserialize(e){if(!e.llm_chain)throw new Error("Missing llm_chain");if(!e.combine_document_chain)throw new Error("Missing combine_document_chain");return new bn({llmChain:await qe.deserialize(e.llm_chain),combineDocumentChain:await nr.deserialize(e.combine_document_chain)})}serialize(){return{_type:this._chainType(),llm_chain:this.llmChain.serialize(),combine_document_chain:this.combineDocumentChain.serialize()}}}class _n extends Tr{get defaultDocumentPrompt(){return new Ie({inputVariables:["page_content"],template:"{page_content}"})}get inputKeys(){return[...new Set([this.inputKey,...this.llmChain.inputKeys,...this.refineLLMChain.inputKeys])].filter(e=>e!==this.documentVariableName&&e!==this.initialResponseName)}get outputKeys(){return[this.outputKey]}constructor(e){super(e),Object.defineProperty(this,"llmChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"input_documents"}),Object.defineProperty(this,"outputKey",{enumerable:!0,configurable:!0,writable:!0,value:"output_text"}),Object.defineProperty(this,"documentVariableName",{enumerable:!0,configurable:!0,writable:!0,value:"context"}),Object.defineProperty(this,"initialResponseName",{enumerable:!0,configurable:!0,writable:!0,value:"existing_answer"}),Object.defineProperty(this,"refineLLMChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"documentPrompt",{enumerable:!0,configurable:!0,writable:!0,value:this.defaultDocumentPrompt}),this.llmChain=e.llmChain,this.refineLLMChain=e.refineLLMChain,this.documentVariableName=e.documentVariableName??this.documentVariableName,this.inputKey=e.inputKey??this.inputKey,this.outputKey=e.outputKey??this.outputKey,this.documentPrompt=e.documentPrompt??this.documentPrompt,this.initialResponseName=e.initialResponseName??this.initialResponseName}async _constructInitialInputs(e,t){const n={page_content:e.pageContent,...e.metadata},a={};return this.documentPrompt.inputVariables.forEach(o=>{a[o]=n[o]}),{...{[this.documentVariableName]:await this.documentPrompt.format({...a})},...t}}async _constructRefineInputs(e,t){const n={page_content:e.pageContent,...e.metadata},a={};this.documentPrompt.inputVariables.forEach(o=>{a[o]=n[o]});const s={[this.documentVariableName]:await this.documentPrompt.format({...a})};return{[this.initialResponseName]:t,...s}}async _call(e,t){if(!(this.inputKey in e))throw new Error(`Document key ${this.inputKey} not found.`);const{[this.inputKey]:n,...a}=e,s=n,i=await this._constructInitialInputs(s[0],a);let o=await this.llmChain.predict({...i},t==null?void 0:t.getChild("answer"));for(let u=1;u<s.length;u+=1){const f={...await this._constructRefineInputs(s[u],o),...a};o=await this.refineLLMChain.predict({...f},t==null?void 0:t.getChild("refine"))}return{[this.outputKey]:o}}_chainType(){return"refine_documents_chain"}static async deserialize(e){const t=e.llm_chain;if(!t)throw new Error("Missing llm_chain");const n=e.refine_llm_chain;if(!n)throw new Error("Missing refine_llm_chain");return new _n({llmChain:await qe.deserialize(t),refineLLMChain:await qe.deserialize(n)})}serialize(){return{_type:this._chainType(),llm_chain:this.llmChain.serialize(),refine_llm_chain:this.refineLLMChain.serialize()}}}const Wr=Object.freeze(Object.defineProperty({__proto__:null,MapReduceDocumentsChain:bn,RefineDocumentsChain:_n,StuffDocumentsChain:nr},Symbol.toStringTag,{value:"Module"}));class Zu extends ft{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}}class Fu extends Aa{constructor(e){Array.isArray(e)&&(e={messages:e}),super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return JSON.stringify(this.messages)}toChatMessages(){return this.messages}}class ns extends Zu{constructor(e){"prompt"in e||(e={prompt:e}),super(e),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt}get inputVariables(){return this.prompt.inputVariables}async formatMessages(e){return[await this.format(e)]}}class Vu extends gn{constructor(e){super(e)}async format(e){return(await this.formatPromptValue(e)).toString()}async formatPromptValue(e){const t=await this.formatMessages(e);return new Fu(t)}}class zu extends ns{async format(e){return new Ta(await this.prompt.format(e))}static fromTemplate(e){return new this(Ie.fromTemplate(e))}}class Ku extends ns{async format(e){return new oi(await this.prompt.format(e))}static fromTemplate(e){return new this(Ie.fromTemplate(e))}}class lt extends Vu{get lc_aliases(){return{promptMessages:"messages"}}constructor(e){if(super(e),Object.defineProperty(this,"promptMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,e),this.validateTemplate){const t=new Set;for(const i of this.promptMessages)for(const o of i.inputVariables)t.add(o);const n=new Set(this.partialVariables?this.inputVariables.concat(Object.keys(this.partialVariables)):this.inputVariables),a=new Set([...n].filter(i=>!t.has(i)));if(a.size>0)throw new Error(`Input variables \`${[...a]}\` are not used in any of the prompt messages.`);const s=new Set([...t].filter(i=>!n.has(i)));if(s.size>0)throw new Error(`Input variables \`${[...s]}\` are used in prompt messages but not in the prompt template.`)}}_getPromptType(){return"chat"}async formatMessages(e){const t=await this.mergePartialAndUserVariables(e);let n=[];for(const a of this.promptMessages){const s=a.inputVariables.reduce((o,u)=>{if(!(u in t))throw new Error(`Missing value for input variable \`${u}\``);return o[u]=t[u],o},{}),i=await a.formatMessages(s);n=n.concat(i)}return n}async partial(e){const t={...this};return t.inputVariables=this.inputVariables.filter(n=>!(n in e)),t.partialVariables={...this.partialVariables??{},...e},new lt(t)}static fromPromptMessages(e){const t=e.reduce((s,i)=>s.concat(i instanceof lt?i.promptMessages:[i]),[]),n=e.reduce((s,i)=>i instanceof lt?Object.assign(s,i.partialVariables):s,Object.create(null)),a=new Set;for(const s of t)for(const i of s.inputVariables)i in n||a.add(i);return new lt({inputVariables:[...a],promptMessages:t,partialVariables:n})}}class qu{async getPromptAsync(e,t){return this.getPrompt(e).partial((t==null?void 0:t.partialVariables)??{})}}class Hu extends qu{constructor(e,t=[]){super(),Object.defineProperty(this,"defaultPrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"conditionals",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.defaultPrompt=e,this.conditionals=t}getPrompt(e){for(const[t,n]of this.conditionals)if(t(e))return n;return this.defaultPrompt}}function Yu(r){return r._modelType()==="base_chat_model"}const Ju=new Ie({template:`Use the following pieces of context to answer the question at the end. If you don't know the answer, just say that you don't know, don't try to make up an answer.

{context}

Question: {question}
Helpful Answer:`,inputVariables:["context","question"]}),Wu=`Use the following pieces of context to answer the users question. 
If you don't know the answer, just say that you don't know, don't try to make up an answer.
----------------
{context}`,Gu=[Ku.fromTemplate(Wu),zu.fromTemplate("{question}")],Xu=lt.fromPromptMessages(Gu),Qu=new Hu(Ju,[[Yu,Xu]]);function ec(r,e={}){const{prompt:t=Qu.getPrompt(r),verbose:n}=e,a=new qe({prompt:t,llm:r,verbose:n});return new nr({llmChain:a,verbose:n})}var ee;(function(r){r.assertEqual=a=>a;function e(a){}r.assertIs=e;function t(a){throw new Error}r.assertNever=t,r.arrayToEnum=a=>{const s={};for(const i of a)s[i]=i;return s},r.getValidEnumValues=a=>{const s=r.objectKeys(a).filter(o=>typeof a[a[o]]!="number"),i={};for(const o of s)i[o]=a[o];return r.objectValues(i)},r.objectValues=a=>r.objectKeys(a).map(function(s){return a[s]}),r.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const s=[];for(const i in a)Object.prototype.hasOwnProperty.call(a,i)&&s.push(i);return s},r.find=(a,s)=>{for(const i of a)if(s(i))return i},r.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function n(a,s=" | "){return a.map(i=>typeof i=="string"?`'${i}'`:i).join(s)}r.joinValues=n,r.jsonStringifyReplacer=(a,s)=>typeof s=="bigint"?s.toString():s})(ee||(ee={}));var gr;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(gr||(gr={}));const M=ee.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Le=r=>{switch(typeof r){case"undefined":return M.undefined;case"string":return M.string;case"number":return isNaN(r)?M.nan:M.number;case"boolean":return M.boolean;case"function":return M.function;case"bigint":return M.bigint;case"symbol":return M.symbol;case"object":return Array.isArray(r)?M.array:r===null?M.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?M.promise:typeof Map<"u"&&r instanceof Map?M.map:typeof Set<"u"&&r instanceof Set?M.set:typeof Date<"u"&&r instanceof Date?M.date:M.object;default:return M.unknown}},k=ee.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),as=r=>JSON.stringify(r,null,2).replace(/"([^"]+)":/g,"$1:");class Oe extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(s){return s.message},n={_errors:[]},a=s=>{for(const i of s.issues)if(i.code==="invalid_union")i.unionErrors.map(a);else if(i.code==="invalid_return_type")a(i.returnTypeError);else if(i.code==="invalid_arguments")a(i.argumentsError);else if(i.path.length===0)n._errors.push(t(i));else{let o=n,u=0;for(;u<i.path.length;){const c=i.path[u];u===i.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(t(i))):o[c]=o[c]||{_errors:[]},o=o[c],u++}}};return a(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,ee.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const a of this.issues)a.path.length>0?(t[a.path[0]]=t[a.path[0]]||[],t[a.path[0]].push(e(a))):n.push(e(a));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}Oe.create=r=>new Oe(r);const ht=(r,e)=>{let t;switch(r.code){case k.invalid_type:r.received===M.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case k.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,ee.jsonStringifyReplacer)}`;break;case k.unrecognized_keys:t=`Unrecognized key(s) in object: ${ee.joinValues(r.keys,", ")}`;break;case k.invalid_union:t="Invalid input";break;case k.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${ee.joinValues(r.options)}`;break;case k.invalid_enum_value:t=`Invalid enum value. Expected ${ee.joinValues(r.options)}, received '${r.received}'`;break;case k.invalid_arguments:t="Invalid function arguments";break;case k.invalid_return_type:t="Invalid function return type";break;case k.invalid_date:t="Invalid date";break;case k.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:ee.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case k.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case k.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case k.custom:t="Invalid input";break;case k.invalid_intersection_types:t="Intersection results could not be merged";break;case k.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case k.not_finite:t="Number must be finite";break;default:t=e.defaultError,ee.assertNever(r)}return{message:t}};let ss=ht;function is(r){ss=r}function zt(){return ss}const Kt=r=>{const{data:e,path:t,errorMaps:n,issueData:a}=r,s=[...t,...a.path||[]],i={...a,path:s};let o="";const u=n.filter(c=>!!c).slice().reverse();for(const c of u)o=c(i,{data:e,defaultError:o}).message;return{...a,path:s,message:a.message||o}},os=[];function $(r,e){const t=Kt({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,zt(),ht].filter(n=>!!n)});r.common.issues.push(t)}class de{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const a of t){if(a.status==="aborted")return H;a.status==="dirty"&&e.dirty(),n.push(a.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const a of t)n.push({key:await a.key,value:await a.value});return de.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const a of t){const{key:s,value:i}=a;if(s.status==="aborted"||i.status==="aborted")return H;s.status==="dirty"&&e.dirty(),i.status==="dirty"&&e.dirty(),(typeof i.value<"u"||a.alwaysSet)&&(n[s.value]=i.value)}return{status:e.value,value:n}}}const H=Object.freeze({status:"aborted"}),wn=r=>({status:"dirty",value:r}),he=r=>({status:"valid",value:r}),br=r=>r.status==="aborted",_r=r=>r.status==="dirty",qt=r=>r.status==="valid",Ht=r=>typeof Promise<"u"&&r instanceof Promise;var Z;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Z||(Z={}));class Ce{constructor(e,t,n,a){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const ea=(r,e)=>{if(qt(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Oe(r.common.issues);return this._error=t,this._error}}};function G(r){if(!r)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:a}=r;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:a}:{errorMap:(i,o)=>i.code!=="invalid_type"?{message:o.defaultError}:typeof o.data>"u"?{message:n??o.defaultError}:{message:t??o.defaultError},description:a}}class W{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Le(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Le(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new de,ctx:{common:e.parent.common,data:e.data,parsedType:Le(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Ht(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const a={common:{issues:[],async:(n=t==null?void 0:t.async)!==null&&n!==void 0?n:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Le(e)},s=this._parseSync({data:e,path:a.path,parent:a});return ea(a,s)}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Le(e)},a=this._parse({data:e,path:n.path,parent:n}),s=await(Ht(a)?a:Promise.resolve(a));return ea(n,s)}refine(e,t){const n=a=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(a):t;return this._refinement((a,s)=>{const i=e(a),o=()=>s.addIssue({code:k.custom,...n(a)});return typeof Promise<"u"&&i instanceof Promise?i.then(u=>u?!0:(o(),!1)):i?!0:(o(),!1)})}refinement(e,t){return this._refinement((n,a)=>e(n)?!0:(a.addIssue(typeof t=="function"?t(n,a):t),!1))}_refinement(e){return new _e({schema:this,typeName:q.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Ne.create(this,this._def)}nullable(){return Je.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return xe.create(this,this._def)}promise(){return at.create(this,this._def)}or(e){return bt.create([this,e],this._def)}and(e){return _t.create(this,e,this._def)}transform(e){return new _e({...G(this._def),schema:this,typeName:q.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new xt({...G(this._def),innerType:this,defaultValue:t,typeName:q.ZodDefault})}brand(){return new vn({typeName:q.ZodBranded,type:this,...G(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Gt({...G(this._def),innerType:this,catchValue:t,typeName:q.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return At.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const tc=/^c[^\s-]{8,}$/i,rc=/^[a-z][a-z0-9]*$/,nc=/[0-9A-HJKMNP-TV-Z]{26}/,ac=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,sc=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,ic=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,oc=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,uc=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,cc=r=>r.precision?r.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${r.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${r.precision}}Z$`):r.precision===0?r.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):r.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function lc(r,e){return!!((e==="v4"||!e)&&oc.test(r)||(e==="v6"||!e)&&uc.test(r))}class ve extends W{constructor(){super(...arguments),this._regex=(e,t,n)=>this.refinement(a=>e.test(a),{validation:t,code:k.invalid_string,...Z.errToObj(n)}),this.nonempty=e=>this.min(1,Z.errToObj(e)),this.trim=()=>new ve({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new ve({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new ve({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==M.string){const s=this._getOrReturnCtx(e);return $(s,{code:k.invalid_type,expected:M.string,received:s.parsedType}),H}const n=new de;let a;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(a=this._getOrReturnCtx(e,a),$(a,{code:k.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")e.data.length>s.value&&(a=this._getOrReturnCtx(e,a),$(a,{code:k.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){const i=e.data.length>s.value,o=e.data.length<s.value;(i||o)&&(a=this._getOrReturnCtx(e,a),i?$(a,{code:k.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):o&&$(a,{code:k.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")sc.test(e.data)||(a=this._getOrReturnCtx(e,a),$(a,{validation:"email",code:k.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")ic.test(e.data)||(a=this._getOrReturnCtx(e,a),$(a,{validation:"emoji",code:k.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")ac.test(e.data)||(a=this._getOrReturnCtx(e,a),$(a,{validation:"uuid",code:k.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")tc.test(e.data)||(a=this._getOrReturnCtx(e,a),$(a,{validation:"cuid",code:k.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")rc.test(e.data)||(a=this._getOrReturnCtx(e,a),$(a,{validation:"cuid2",code:k.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")nc.test(e.data)||(a=this._getOrReturnCtx(e,a),$(a,{validation:"ulid",code:k.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),$(a,{validation:"url",code:k.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),$(a,{validation:"regex",code:k.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(a=this._getOrReturnCtx(e,a),$(a,{code:k.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(a=this._getOrReturnCtx(e,a),$(a,{code:k.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(a=this._getOrReturnCtx(e,a),$(a,{code:k.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?cc(s).test(e.data)||(a=this._getOrReturnCtx(e,a),$(a,{code:k.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="ip"?lc(e.data,s.version)||(a=this._getOrReturnCtx(e,a),$(a,{validation:"ip",code:k.invalid_string,message:s.message}),n.dirty()):ee.assertNever(s);return{status:n.value,value:e.data}}_addCheck(e){return new ve({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Z.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Z.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Z.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Z.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Z.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Z.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Z.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Z.errToObj(e)})}datetime(e){var t;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,...Z.errToObj(e==null?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Z.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...Z.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Z.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Z.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Z.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Z.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Z.errToObj(t)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}ve.create=r=>{var e;return new ve({checks:[],typeName:q.ZodString,coerce:(e=r==null?void 0:r.coerce)!==null&&e!==void 0?e:!1,...G(r)})};function dc(r,e){const t=(r.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,a=t>n?t:n,s=parseInt(r.toFixed(a).replace(".","")),i=parseInt(e.toFixed(a).replace(".",""));return s%i/Math.pow(10,a)}class $e extends W{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==M.number){const s=this._getOrReturnCtx(e);return $(s,{code:k.invalid_type,expected:M.number,received:s.parsedType}),H}let n;const a=new de;for(const s of this._def.checks)s.kind==="int"?ee.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),$(n,{code:k.invalid_type,expected:"integer",received:"float",message:s.message}),a.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),$(n,{code:k.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),a.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),$(n,{code:k.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),a.dirty()):s.kind==="multipleOf"?dc(e.data,s.value)!==0&&(n=this._getOrReturnCtx(e,n),$(n,{code:k.not_multiple_of,multipleOf:s.value,message:s.message}),a.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),$(n,{code:k.not_finite,message:s.message}),a.dirty()):ee.assertNever(s);return{status:a.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Z.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Z.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Z.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Z.toString(t))}setLimit(e,t,n,a){return new $e({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Z.toString(a)}]})}_addCheck(e){return new $e({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Z.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Z.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Z.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Z.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Z.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Z.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Z.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Z.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Z.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ee.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}$e.create=r=>new $e({checks:[],typeName:q.ZodNumber,coerce:(r==null?void 0:r.coerce)||!1,...G(r)});class Be extends W{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==M.bigint){const s=this._getOrReturnCtx(e);return $(s,{code:k.invalid_type,expected:M.bigint,received:s.parsedType}),H}let n;const a=new de;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),$(n,{code:k.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),a.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),$(n,{code:k.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),a.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),$(n,{code:k.not_multiple_of,multipleOf:s.value,message:s.message}),a.dirty()):ee.assertNever(s);return{status:a.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Z.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Z.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Z.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Z.toString(t))}setLimit(e,t,n,a){return new Be({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Z.toString(a)}]})}_addCheck(e){return new Be({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Z.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Z.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Z.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Z.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Z.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Be.create=r=>{var e;return new Be({checks:[],typeName:q.ZodBigInt,coerce:(e=r==null?void 0:r.coerce)!==null&&e!==void 0?e:!1,...G(r)})};class mt extends W{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==M.boolean){const n=this._getOrReturnCtx(e);return $(n,{code:k.invalid_type,expected:M.boolean,received:n.parsedType}),H}return he(e.data)}}mt.create=r=>new mt({typeName:q.ZodBoolean,coerce:(r==null?void 0:r.coerce)||!1,...G(r)});class He extends W{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==M.date){const s=this._getOrReturnCtx(e);return $(s,{code:k.invalid_type,expected:M.date,received:s.parsedType}),H}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return $(s,{code:k.invalid_date}),H}const n=new de;let a;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(a=this._getOrReturnCtx(e,a),$(a,{code:k.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(a=this._getOrReturnCtx(e,a),$(a,{code:k.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):ee.assertNever(s);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new He({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Z.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Z.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}He.create=r=>new He({checks:[],coerce:(r==null?void 0:r.coerce)||!1,typeName:q.ZodDate,...G(r)});class Yt extends W{_parse(e){if(this._getType(e)!==M.symbol){const n=this._getOrReturnCtx(e);return $(n,{code:k.invalid_type,expected:M.symbol,received:n.parsedType}),H}return he(e.data)}}Yt.create=r=>new Yt({typeName:q.ZodSymbol,...G(r)});class yt extends W{_parse(e){if(this._getType(e)!==M.undefined){const n=this._getOrReturnCtx(e);return $(n,{code:k.invalid_type,expected:M.undefined,received:n.parsedType}),H}return he(e.data)}}yt.create=r=>new yt({typeName:q.ZodUndefined,...G(r)});class gt extends W{_parse(e){if(this._getType(e)!==M.null){const n=this._getOrReturnCtx(e);return $(n,{code:k.invalid_type,expected:M.null,received:n.parsedType}),H}return he(e.data)}}gt.create=r=>new gt({typeName:q.ZodNull,...G(r)});class nt extends W{constructor(){super(...arguments),this._any=!0}_parse(e){return he(e.data)}}nt.create=r=>new nt({typeName:q.ZodAny,...G(r)});class Ke extends W{constructor(){super(...arguments),this._unknown=!0}_parse(e){return he(e.data)}}Ke.create=r=>new Ke({typeName:q.ZodUnknown,...G(r)});class Re extends W{_parse(e){const t=this._getOrReturnCtx(e);return $(t,{code:k.invalid_type,expected:M.never,received:t.parsedType}),H}}Re.create=r=>new Re({typeName:q.ZodNever,...G(r)});class Jt extends W{_parse(e){if(this._getType(e)!==M.undefined){const n=this._getOrReturnCtx(e);return $(n,{code:k.invalid_type,expected:M.void,received:n.parsedType}),H}return he(e.data)}}Jt.create=r=>new Jt({typeName:q.ZodVoid,...G(r)});class xe extends W{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),a=this._def;if(t.parsedType!==M.array)return $(t,{code:k.invalid_type,expected:M.array,received:t.parsedType}),H;if(a.exactLength!==null){const i=t.data.length>a.exactLength.value,o=t.data.length<a.exactLength.value;(i||o)&&($(t,{code:i?k.too_big:k.too_small,minimum:o?a.exactLength.value:void 0,maximum:i?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(a.minLength!==null&&t.data.length<a.minLength.value&&($(t,{code:k.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),a.maxLength!==null&&t.data.length>a.maxLength.value&&($(t,{code:k.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((i,o)=>a.type._parseAsync(new Ce(t,i,t.path,o)))).then(i=>de.mergeArray(n,i));const s=[...t.data].map((i,o)=>a.type._parseSync(new Ce(t,i,t.path,o)));return de.mergeArray(n,s)}get element(){return this._def.type}min(e,t){return new xe({...this._def,minLength:{value:e,message:Z.toString(t)}})}max(e,t){return new xe({...this._def,maxLength:{value:e,message:Z.toString(t)}})}length(e,t){return new xe({...this._def,exactLength:{value:e,message:Z.toString(t)}})}nonempty(e){return this.min(1,e)}}xe.create=(r,e)=>new xe({type:r,minLength:null,maxLength:null,exactLength:null,typeName:q.ZodArray,...G(e)});function ct(r){if(r instanceof re){const e={};for(const t in r.shape){const n=r.shape[t];e[t]=Ne.create(ct(n))}return new re({...r._def,shape:()=>e})}else return r instanceof xe?new xe({...r._def,type:ct(r.element)}):r instanceof Ne?Ne.create(ct(r.unwrap())):r instanceof Je?Je.create(ct(r.unwrap())):r instanceof Te?Te.create(r.items.map(e=>ct(e))):r}class re extends W{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=ee.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==M.object){const c=this._getOrReturnCtx(e);return $(c,{code:k.invalid_type,expected:M.object,received:c.parsedType}),H}const{status:n,ctx:a}=this._processInputParams(e),{shape:s,keys:i}=this._getCached(),o=[];if(!(this._def.catchall instanceof Re&&this._def.unknownKeys==="strip"))for(const c in a.data)i.includes(c)||o.push(c);const u=[];for(const c of i){const f=s[c],w=a.data[c];u.push({key:{status:"valid",value:c},value:f._parse(new Ce(a,w,a.path,c)),alwaysSet:c in a.data})}if(this._def.catchall instanceof Re){const c=this._def.unknownKeys;if(c==="passthrough")for(const f of o)u.push({key:{status:"valid",value:f},value:{status:"valid",value:a.data[f]}});else if(c==="strict")o.length>0&&($(a,{code:k.unrecognized_keys,keys:o}),n.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const f of o){const w=a.data[f];u.push({key:{status:"valid",value:f},value:c._parse(new Ce(a,w,a.path,f)),alwaysSet:f in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const c=[];for(const f of u){const w=await f.key;c.push({key:w,value:await f.value,alwaysSet:f.alwaysSet})}return c}).then(c=>de.mergeObjectSync(n,c)):de.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return Z.errToObj,new re({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var a,s,i,o;const u=(i=(s=(a=this._def).errorMap)===null||s===void 0?void 0:s.call(a,t,n).message)!==null&&i!==void 0?i:n.defaultError;return t.code==="unrecognized_keys"?{message:(o=Z.errToObj(e).message)!==null&&o!==void 0?o:u}:{message:u}}}:{}})}strip(){return new re({...this._def,unknownKeys:"strip"})}passthrough(){return new re({...this._def,unknownKeys:"passthrough"})}extend(e){return new re({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new re({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:q.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new re({...this._def,catchall:e})}pick(e){const t={};return ee.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])}),new re({...this._def,shape:()=>t})}omit(e){const t={};return ee.objectKeys(this.shape).forEach(n=>{e[n]||(t[n]=this.shape[n])}),new re({...this._def,shape:()=>t})}deepPartial(){return ct(this)}partial(e){const t={};return ee.objectKeys(this.shape).forEach(n=>{const a=this.shape[n];e&&!e[n]?t[n]=a:t[n]=a.optional()}),new re({...this._def,shape:()=>t})}required(e){const t={};return ee.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])t[n]=this.shape[n];else{let s=this.shape[n];for(;s instanceof Ne;)s=s._def.innerType;t[n]=s}}),new re({...this._def,shape:()=>t})}keyof(){return us(ee.objectKeys(this.shape))}}re.create=(r,e)=>new re({shape:()=>r,unknownKeys:"strip",catchall:Re.create(),typeName:q.ZodObject,...G(e)});re.strictCreate=(r,e)=>new re({shape:()=>r,unknownKeys:"strict",catchall:Re.create(),typeName:q.ZodObject,...G(e)});re.lazycreate=(r,e)=>new re({shape:r,unknownKeys:"strip",catchall:Re.create(),typeName:q.ZodObject,...G(e)});class bt extends W{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function a(s){for(const o of s)if(o.result.status==="valid")return o.result;for(const o of s)if(o.result.status==="dirty")return t.common.issues.push(...o.ctx.common.issues),o.result;const i=s.map(o=>new Oe(o.ctx.common.issues));return $(t,{code:k.invalid_union,unionErrors:i}),H}if(t.common.async)return Promise.all(n.map(async s=>{const i={...t,common:{...t.common,issues:[]},parent:null};return{result:await s._parseAsync({data:t.data,path:t.path,parent:i}),ctx:i}})).then(a);{let s;const i=[];for(const u of n){const c={...t,common:{...t.common,issues:[]},parent:null},f=u._parseSync({data:t.data,path:t.path,parent:c});if(f.status==="valid")return f;f.status==="dirty"&&!s&&(s={result:f,ctx:c}),c.common.issues.length&&i.push(c.common.issues)}if(s)return t.common.issues.push(...s.ctx.common.issues),s.result;const o=i.map(u=>new Oe(u));return $(t,{code:k.invalid_union,unionErrors:o}),H}}get options(){return this._def.options}}bt.create=(r,e)=>new bt({options:r,typeName:q.ZodUnion,...G(e)});const mr=r=>r instanceof vt?mr(r.schema):r instanceof _e?mr(r.innerType()):r instanceof Et?[r.value]:r instanceof Ue?r.options:r instanceof Ot?Object.keys(r.enum):r instanceof xt?mr(r._def.innerType):r instanceof yt?[void 0]:r instanceof gt?[null]:null;class ar extends W{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==M.object)return $(t,{code:k.invalid_type,expected:M.object,received:t.parsedType}),H;const n=this.discriminator,a=t.data[n],s=this.optionsMap.get(a);return s?t.common.async?s._parseAsync({data:t.data,path:t.path,parent:t}):s._parseSync({data:t.data,path:t.path,parent:t}):($(t,{code:k.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),H)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const a=new Map;for(const s of t){const i=mr(s.shape[e]);if(!i)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of i){if(a.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);a.set(o,s)}}return new ar({typeName:q.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:a,...G(n)})}}function an(r,e){const t=Le(r),n=Le(e);if(r===e)return{valid:!0,data:r};if(t===M.object&&n===M.object){const a=ee.objectKeys(e),s=ee.objectKeys(r).filter(o=>a.indexOf(o)!==-1),i={...r,...e};for(const o of s){const u=an(r[o],e[o]);if(!u.valid)return{valid:!1};i[o]=u.data}return{valid:!0,data:i}}else if(t===M.array&&n===M.array){if(r.length!==e.length)return{valid:!1};const a=[];for(let s=0;s<r.length;s++){const i=r[s],o=e[s],u=an(i,o);if(!u.valid)return{valid:!1};a.push(u.data)}return{valid:!0,data:a}}else return t===M.date&&n===M.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}class _t extends W{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),a=(s,i)=>{if(br(s)||br(i))return H;const o=an(s.value,i.value);return o.valid?((_r(s)||_r(i))&&t.dirty(),{status:t.value,value:o.data}):($(n,{code:k.invalid_intersection_types}),H)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([s,i])=>a(s,i)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}_t.create=(r,e,t)=>new _t({left:r,right:e,typeName:q.ZodIntersection,...G(t)});class Te extends W{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==M.array)return $(n,{code:k.invalid_type,expected:M.array,received:n.parsedType}),H;if(n.data.length<this._def.items.length)return $(n,{code:k.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),H;!this._def.rest&&n.data.length>this._def.items.length&&($(n,{code:k.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const s=[...n.data].map((i,o)=>{const u=this._def.items[o]||this._def.rest;return u?u._parse(new Ce(n,i,n.path,o)):null}).filter(i=>!!i);return n.common.async?Promise.all(s).then(i=>de.mergeArray(t,i)):de.mergeArray(t,s)}get items(){return this._def.items}rest(e){return new Te({...this._def,rest:e})}}Te.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Te({items:r,typeName:q.ZodTuple,rest:null,...G(e)})};class wt extends W{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==M.object)return $(n,{code:k.invalid_type,expected:M.object,received:n.parsedType}),H;const a=[],s=this._def.keyType,i=this._def.valueType;for(const o in n.data)a.push({key:s._parse(new Ce(n,o,n.path,o)),value:i._parse(new Ce(n,n.data[o],n.path,o))});return n.common.async?de.mergeObjectAsync(t,a):de.mergeObjectSync(t,a)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof W?new wt({keyType:e,valueType:t,typeName:q.ZodRecord,...G(n)}):new wt({keyType:ve.create(),valueType:e,typeName:q.ZodRecord,...G(t)})}}class Wt extends W{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==M.map)return $(n,{code:k.invalid_type,expected:M.map,received:n.parsedType}),H;const a=this._def.keyType,s=this._def.valueType,i=[...n.data.entries()].map(([o,u],c)=>({key:a._parse(new Ce(n,o,n.path,[c,"key"])),value:s._parse(new Ce(n,u,n.path,[c,"value"]))}));if(n.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const u of i){const c=await u.key,f=await u.value;if(c.status==="aborted"||f.status==="aborted")return H;(c.status==="dirty"||f.status==="dirty")&&t.dirty(),o.set(c.value,f.value)}return{status:t.value,value:o}})}else{const o=new Map;for(const u of i){const c=u.key,f=u.value;if(c.status==="aborted"||f.status==="aborted")return H;(c.status==="dirty"||f.status==="dirty")&&t.dirty(),o.set(c.value,f.value)}return{status:t.value,value:o}}}}Wt.create=(r,e,t)=>new Wt({valueType:e,keyType:r,typeName:q.ZodMap,...G(t)});class Ye extends W{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==M.set)return $(n,{code:k.invalid_type,expected:M.set,received:n.parsedType}),H;const a=this._def;a.minSize!==null&&n.data.size<a.minSize.value&&($(n,{code:k.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),t.dirty()),a.maxSize!==null&&n.data.size>a.maxSize.value&&($(n,{code:k.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),t.dirty());const s=this._def.valueType;function i(u){const c=new Set;for(const f of u){if(f.status==="aborted")return H;f.status==="dirty"&&t.dirty(),c.add(f.value)}return{status:t.value,value:c}}const o=[...n.data.values()].map((u,c)=>s._parse(new Ce(n,u,n.path,c)));return n.common.async?Promise.all(o).then(u=>i(u)):i(o)}min(e,t){return new Ye({...this._def,minSize:{value:e,message:Z.toString(t)}})}max(e,t){return new Ye({...this._def,maxSize:{value:e,message:Z.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Ye.create=(r,e)=>new Ye({valueType:r,minSize:null,maxSize:null,typeName:q.ZodSet,...G(e)});class rt extends W{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==M.function)return $(t,{code:k.invalid_type,expected:M.function,received:t.parsedType}),H;function n(o,u){return Kt({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,zt(),ht].filter(c=>!!c),issueData:{code:k.invalid_arguments,argumentsError:u}})}function a(o,u){return Kt({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,zt(),ht].filter(c=>!!c),issueData:{code:k.invalid_return_type,returnTypeError:u}})}const s={errorMap:t.common.contextualErrorMap},i=t.data;return this._def.returns instanceof at?he(async(...o)=>{const u=new Oe([]),c=await this._def.args.parseAsync(o,s).catch(j=>{throw u.addIssue(n(o,j)),u}),f=await i(...c);return await this._def.returns._def.type.parseAsync(f,s).catch(j=>{throw u.addIssue(a(f,j)),u})}):he((...o)=>{const u=this._def.args.safeParse(o,s);if(!u.success)throw new Oe([n(o,u.error)]);const c=i(...u.data),f=this._def.returns.safeParse(c,s);if(!f.success)throw new Oe([a(c,f.error)]);return f.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new rt({...this._def,args:Te.create(e).rest(Ke.create())})}returns(e){return new rt({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new rt({args:e||Te.create([]).rest(Ke.create()),returns:t||Ke.create(),typeName:q.ZodFunction,...G(n)})}}class vt extends W{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}vt.create=(r,e)=>new vt({getter:r,typeName:q.ZodLazy,...G(e)});class Et extends W{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return $(t,{received:t.data,code:k.invalid_literal,expected:this._def.value}),H}return{status:"valid",value:e.data}}get value(){return this._def.value}}Et.create=(r,e)=>new Et({value:r,typeName:q.ZodLiteral,...G(e)});function us(r,e){return new Ue({values:r,typeName:q.ZodEnum,...G(e)})}class Ue extends W{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return $(t,{expected:ee.joinValues(n),received:t.parsedType,code:k.invalid_type}),H}if(this._def.values.indexOf(e.data)===-1){const t=this._getOrReturnCtx(e),n=this._def.values;return $(t,{received:t.data,code:k.invalid_enum_value,options:n}),H}return he(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return Ue.create(e)}exclude(e){return Ue.create(this.options.filter(t=>!e.includes(t)))}}Ue.create=us;class Ot extends W{_parse(e){const t=ee.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==M.string&&n.parsedType!==M.number){const a=ee.objectValues(t);return $(n,{expected:ee.joinValues(a),received:n.parsedType,code:k.invalid_type}),H}if(t.indexOf(e.data)===-1){const a=ee.objectValues(t);return $(n,{received:n.data,code:k.invalid_enum_value,options:a}),H}return he(e.data)}get enum(){return this._def.values}}Ot.create=(r,e)=>new Ot({values:r,typeName:q.ZodNativeEnum,...G(e)});class at extends W{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==M.promise&&t.common.async===!1)return $(t,{code:k.invalid_type,expected:M.promise,received:t.parsedType}),H;const n=t.parsedType===M.promise?t.data:Promise.resolve(t.data);return he(n.then(a=>this._def.type.parseAsync(a,{path:t.path,errorMap:t.common.contextualErrorMap})))}}at.create=(r,e)=>new at({type:r,typeName:q.ZodPromise,...G(e)});class _e extends W{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===q.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),a=this._def.effect||null;if(a.type==="preprocess"){const i=a.transform(n.data);return n.common.async?Promise.resolve(i).then(o=>this._def.schema._parseAsync({data:o,path:n.path,parent:n})):this._def.schema._parseSync({data:i,path:n.path,parent:n})}const s={addIssue:i=>{$(n,i),i.fatal?t.abort():t.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),a.type==="refinement"){const i=o=>{const u=a.refinement(o,s);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?H:(o.status==="dirty"&&t.dirty(),i(o.value),{status:t.value,value:o.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>o.status==="aborted"?H:(o.status==="dirty"&&t.dirty(),i(o.value).then(()=>({status:t.value,value:o.value}))))}if(a.type==="transform")if(n.common.async===!1){const i=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!qt(i))return i;const o=a.transform(i.value,s);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(i=>qt(i)?Promise.resolve(a.transform(i.value,s)).then(o=>({status:t.value,value:o})):i);ee.assertNever(a)}}_e.create=(r,e,t)=>new _e({schema:r,typeName:q.ZodEffects,effect:e,...G(t)});_e.createWithPreprocess=(r,e,t)=>new _e({schema:e,effect:{type:"preprocess",transform:r},typeName:q.ZodEffects,...G(t)});class Ne extends W{_parse(e){return this._getType(e)===M.undefined?he(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ne.create=(r,e)=>new Ne({innerType:r,typeName:q.ZodOptional,...G(e)});class Je extends W{_parse(e){return this._getType(e)===M.null?he(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Je.create=(r,e)=>new Je({innerType:r,typeName:q.ZodNullable,...G(e)});class xt extends W{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===M.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}xt.create=(r,e)=>new xt({innerType:r,typeName:q.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...G(e)});class Gt extends W{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Ht(a)?a.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Oe(n.common.issues)},input:n.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Oe(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Gt.create=(r,e)=>new Gt({innerType:r,typeName:q.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...G(e)});class Xt extends W{_parse(e){if(this._getType(e)!==M.nan){const n=this._getOrReturnCtx(e);return $(n,{code:k.invalid_type,expected:M.nan,received:n.parsedType}),H}return{status:"valid",value:e.data}}}Xt.create=r=>new Xt({typeName:q.ZodNaN,...G(r)});const cs=Symbol("zod_brand");class vn extends W{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class At extends W{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?H:s.status==="dirty"?(t.dirty(),wn(s.value)):this._def.out._parseAsync({data:s.value,path:n.path,parent:n})})();{const a=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?H:a.status==="dirty"?(t.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:n.path,parent:n})}}static create(e,t){return new At({in:e,out:t,typeName:q.ZodPipeline})}}const En=(r,e={},t)=>r?nt.create().superRefine((n,a)=>{var s,i;if(!r(n)){const o=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,u=(i=(s=o.fatal)!==null&&s!==void 0?s:t)!==null&&i!==void 0?i:!0,c=typeof o=="string"?{message:o}:o;a.addIssue({code:"custom",...c,fatal:u})}}):nt.create(),ls={object:re.lazycreate};var q;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline"})(q||(q={}));const ds=(r,e={message:`Input not instance of ${r.name}`})=>En(t=>t instanceof r,e),On=ve.create,xn=$e.create,fs=Xt.create,ps=Be.create,Pn=mt.create,hs=He.create,ms=Yt.create,ys=yt.create,gs=gt.create,bs=nt.create,_s=Ke.create,ws=Re.create,vs=Jt.create,Es=xe.create,Os=re.create,xs=re.strictCreate,Ps=bt.create,As=ar.create,Ts=_t.create,Ss=Te.create,ks=wt.create,js=Wt.create,Is=Ye.create,Ns=rt.create,Cs=vt.create,Rs=Et.create,Ds=Ue.create,Ls=Ot.create,Ms=at.create,wr=_e.create,$s=Ne.create,Bs=Je.create,Us=_e.createWithPreprocess,Zs=At.create,Fs=()=>On().optional(),Vs=()=>xn().optional(),zs=()=>Pn().optional(),Ks={string:r=>ve.create({...r,coerce:!0}),number:r=>$e.create({...r,coerce:!0}),boolean:r=>mt.create({...r,coerce:!0}),bigint:r=>Be.create({...r,coerce:!0}),date:r=>He.create({...r,coerce:!0})},qs=H;var ta=Object.freeze({__proto__:null,defaultErrorMap:ht,setErrorMap:is,getErrorMap:zt,makeIssue:Kt,EMPTY_PATH:os,addIssueToContext:$,ParseStatus:de,INVALID:H,DIRTY:wn,OK:he,isAborted:br,isDirty:_r,isValid:qt,isAsync:Ht,get util(){return ee},get objectUtil(){return gr},ZodParsedType:M,getParsedType:Le,ZodType:W,ZodString:ve,ZodNumber:$e,ZodBigInt:Be,ZodBoolean:mt,ZodDate:He,ZodSymbol:Yt,ZodUndefined:yt,ZodNull:gt,ZodAny:nt,ZodUnknown:Ke,ZodNever:Re,ZodVoid:Jt,ZodArray:xe,ZodObject:re,ZodUnion:bt,ZodDiscriminatedUnion:ar,ZodIntersection:_t,ZodTuple:Te,ZodRecord:wt,ZodMap:Wt,ZodSet:Ye,ZodFunction:rt,ZodLazy:vt,ZodLiteral:Et,ZodEnum:Ue,ZodNativeEnum:Ot,ZodPromise:at,ZodEffects:_e,ZodTransformer:_e,ZodOptional:Ne,ZodNullable:Je,ZodDefault:xt,ZodCatch:Gt,ZodNaN:Xt,BRAND:cs,ZodBranded:vn,ZodPipeline:At,custom:En,Schema:W,ZodSchema:W,late:ls,get ZodFirstPartyTypeKind(){return q},coerce:Ks,any:bs,array:Es,bigint:ps,boolean:Pn,date:hs,discriminatedUnion:As,effect:wr,enum:Ds,function:Ns,instanceof:ds,intersection:Ts,lazy:Cs,literal:Rs,map:js,nan:fs,nativeEnum:Ls,never:ws,null:gs,nullable:Bs,number:xn,object:Os,oboolean:zs,onumber:Vs,optional:$s,ostring:Fs,pipeline:Zs,preprocess:Us,promise:Ms,record:ks,set:Is,strictObject:xs,string:On,symbol:ms,transformer:wr,tuple:Ss,undefined:ys,union:Ps,unknown:_s,void:vs,NEVER:qs,ZodIssueCode:k,quotelessJson:as,ZodError:Oe});const fc=Object.freeze(Object.defineProperty({__proto__:null,BRAND:cs,DIRTY:wn,EMPTY_PATH:os,INVALID:H,NEVER:qs,OK:he,ParseStatus:de,Schema:W,ZodAny:nt,ZodArray:xe,ZodBigInt:Be,ZodBoolean:mt,ZodBranded:vn,ZodCatch:Gt,ZodDate:He,ZodDefault:xt,ZodDiscriminatedUnion:ar,ZodEffects:_e,ZodEnum:Ue,ZodError:Oe,get ZodFirstPartyTypeKind(){return q},ZodFunction:rt,ZodIntersection:_t,ZodIssueCode:k,ZodLazy:vt,ZodLiteral:Et,ZodMap:Wt,ZodNaN:Xt,ZodNativeEnum:Ot,ZodNever:Re,ZodNull:gt,ZodNullable:Je,ZodNumber:$e,ZodObject:re,ZodOptional:Ne,ZodParsedType:M,ZodPipeline:At,ZodPromise:at,ZodRecord:wt,ZodSchema:W,ZodSet:Ye,ZodString:ve,ZodSymbol:Yt,ZodTransformer:_e,ZodTuple:Te,ZodType:W,ZodUndefined:yt,ZodUnion:bt,ZodUnknown:Ke,ZodVoid:Jt,addIssueToContext:$,any:bs,array:Es,bigint:ps,boolean:Pn,coerce:Ks,custom:En,date:hs,default:ta,defaultErrorMap:ht,discriminatedUnion:As,effect:wr,enum:Ds,function:Ns,getErrorMap:zt,getParsedType:Le,instanceof:ds,intersection:Ts,isAborted:br,isAsync:Ht,isDirty:_r,isValid:qt,late:ls,lazy:Cs,literal:Rs,makeIssue:Kt,map:js,nan:fs,nativeEnum:Ls,never:ws,null:gs,nullable:Bs,number:xn,object:Os,get objectUtil(){return gr},oboolean:zs,onumber:Vs,optional:$s,ostring:Fs,pipeline:Zs,preprocess:Us,promise:Ms,quotelessJson:as,record:ks,set:Is,setErrorMap:is,strictObject:xs,string:On,symbol:ms,transformer:wr,tuple:Ss,undefined:ys,union:Ps,unknown:_s,get util(){return ee},void:vs,z:ta},Symbol.toStringTag,{value:"Module"}));var pc={},Sr={},St={};const An=fi(fc);var kr={};Object.defineProperty(kr,"__esModule",{value:!0});kr.parseAnyDef=void 0;function hc(){return{}}kr.parseAnyDef=hc;var kt={},Se={};Object.defineProperty(Se,"__esModule",{value:!0});Se.setResponseValueAndErrors=Se.addErrorMessage=void 0;function Hs(r,e,t,n){n!=null&&n.errorMessages&&t&&(r.errorMessage=Object.assign(Object.assign({},r.errorMessage),{[e]:t}))}Se.addErrorMessage=Hs;function mc(r,e,t,n,a){r[e]=t,Hs(r,e,n,a)}Se.setResponseValueAndErrors=mc;var ra;function yc(){if(ra)return kt;ra=1,Object.defineProperty(kt,"__esModule",{value:!0}),kt.parseArrayDef=void 0;const r=An,e=Se,t=fe();function n(a,s){var i,o;const u={type:"array"};return((o=(i=a.type)===null||i===void 0?void 0:i._def)===null||o===void 0?void 0:o.typeName)!==r.ZodFirstPartyTypeKind.ZodAny&&(u.items=(0,t.parseDef)(a.type._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"items"]}))),a.minLength&&(0,e.setResponseValueAndErrors)(u,"minItems",a.minLength.value,a.minLength.message,s),a.maxLength&&(0,e.setResponseValueAndErrors)(u,"maxItems",a.maxLength.value,a.maxLength.message,s),a.exactLength&&((0,e.setResponseValueAndErrors)(u,"minItems",a.exactLength.value,a.exactLength.message,s),(0,e.setResponseValueAndErrors)(u,"maxItems",a.exactLength.value,a.exactLength.message,s)),u}return kt.parseArrayDef=n,kt}var jr={};Object.defineProperty(jr,"__esModule",{value:!0});jr.parseBigintDef=void 0;const Xe=Se;function gc(r,e){const t={type:"integer",format:"int64"};if(!r.checks)return t;for(const n of r.checks)switch(n.kind){case"min":e.target==="jsonSchema7"?n.inclusive?(0,Xe.setResponseValueAndErrors)(t,"minimum",n.value,n.message,e):(0,Xe.setResponseValueAndErrors)(t,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(t.exclusiveMinimum=!0),(0,Xe.setResponseValueAndErrors)(t,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?(0,Xe.setResponseValueAndErrors)(t,"maximum",n.value,n.message,e):(0,Xe.setResponseValueAndErrors)(t,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(t.exclusiveMaximum=!0),(0,Xe.setResponseValueAndErrors)(t,"maximum",n.value,n.message,e));break;case"multipleOf":(0,Xe.setResponseValueAndErrors)(t,"multipleOf",n.value,n.message,e);break}return t}jr.parseBigintDef=gc;var Ir={};Object.defineProperty(Ir,"__esModule",{value:!0});Ir.parseBooleanDef=void 0;function bc(){return{type:"boolean"}}Ir.parseBooleanDef=bc;var jt={},na;function _c(){if(na)return jt;na=1,Object.defineProperty(jt,"__esModule",{value:!0}),jt.parseBrandedDef=void 0;const r=fe();function e(t,n){return(0,r.parseDef)(t.type._def,n)}return jt.parseBrandedDef=e,jt}var It={},aa;function wc(){if(aa)return It;aa=1,Object.defineProperty(It,"__esModule",{value:!0}),It.parseCatchDef=void 0;const r=fe(),e=(t,n)=>(0,r.parseDef)(t.innerType._def,n);return It.parseCatchDef=e,It}var Nr={};Object.defineProperty(Nr,"__esModule",{value:!0});Nr.parseDateDef=void 0;const sa=Se;function vc(r,e){return e.dateStrategy=="integer"?Ec(r,e):{type:"string",format:"date-time"}}Nr.parseDateDef=vc;const Ec=(r,e)=>{const t={type:"integer",format:"unix-time"};for(const n of r.checks)switch(n.kind){case"min":e.target==="jsonSchema7"&&(0,sa.setResponseValueAndErrors)(t,"minimum",n.value,n.message,e);break;case"max":e.target==="jsonSchema7"&&(0,sa.setResponseValueAndErrors)(t,"maximum",n.value,n.message,e);break}return t};var Nt={},ia;function Oc(){if(ia)return Nt;ia=1,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.parseDefaultDef=void 0;const r=fe();function e(t,n){return Object.assign(Object.assign({},(0,r.parseDef)(t.innerType._def,n)),{default:t.defaultValue()})}return Nt.parseDefaultDef=e,Nt}var Ct={},oa;function xc(){if(oa)return Ct;oa=1,Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.parseEffectsDef=void 0;const r=fe();function e(t,n){return n.effectStrategy==="input"?(0,r.parseDef)(t.schema._def,n):{}}return Ct.parseEffectsDef=e,Ct}var Cr={};Object.defineProperty(Cr,"__esModule",{value:!0});Cr.parseEnumDef=void 0;function Pc(r){return{type:"string",enum:r.values}}Cr.parseEnumDef=Pc;var Rt={},ua;function Ac(){if(ua)return Rt;ua=1;var r=Dn&&Dn.__rest||function(a,s){var i={};for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&s.indexOf(o)<0&&(i[o]=a[o]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(a);u<o.length;u++)s.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(a,o[u])&&(i[o[u]]=a[o[u]]);return i};Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.parseIntersectionDef=void 0;const e=fe(),t=a=>"type"in a&&a.type==="string"?!1:"allOf"in a;function n(a,s){const i=[(0,e.parseDef)(a.left._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"allOf","0"]})),(0,e.parseDef)(a.right._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"allOf","1"]}))].filter(c=>!!c);let o=s.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const u=[];return i.forEach(c=>{if(t(c))u.push(...c.allOf),c.unevaluatedProperties===void 0&&(o=void 0);else{let f=c;"additionalProperties"in c&&c.additionalProperties===!1?f=r(c,["additionalProperties"]):o=void 0,u.push(f)}}),u.length?Object.assign({allOf:u},o):void 0}return Rt.parseIntersectionDef=n,Rt}var Rr={};Object.defineProperty(Rr,"__esModule",{value:!0});Rr.parseLiteralDef=void 0;function Tc(r,e){const t=typeof r.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(r.value)?"array":"object"}:e.target==="openApi3"?{type:t==="bigint"?"integer":t,enum:[r.value]}:{type:t==="bigint"?"integer":t,const:r.value}}Rr.parseLiteralDef=Tc;var Dt={},ca;function Sc(){if(ca)return Dt;ca=1,Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.parseMapDef=void 0;const r=fe();function e(t,n){const a=(0,r.parseDef)(t.keyType._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"items","items","0"]}))||{},s=(0,r.parseDef)(t.valueType._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"items","items","1"]}))||{};return{type:"array",maxItems:125,items:{type:"array",items:[a,s],minItems:2,maxItems:2}}}return Dt.parseMapDef=e,Dt}var Dr={};Object.defineProperty(Dr,"__esModule",{value:!0});Dr.parseNativeEnumDef=void 0;function kc(r){const e=r.values,n=Object.keys(r.values).filter(s=>typeof e[e[s]]!="number").map(s=>e[s]),a=Array.from(new Set(n.map(s=>typeof s)));return{type:a.length===1?a[0]==="string"?"string":"number":["string","number"],enum:n}}Dr.parseNativeEnumDef=kc;var Lr={};Object.defineProperty(Lr,"__esModule",{value:!0});Lr.parseNeverDef=void 0;function jc(){return{not:{}}}Lr.parseNeverDef=jc;var Mr={};Object.defineProperty(Mr,"__esModule",{value:!0});Mr.parseNullDef=void 0;function Ic(r){return r.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}Mr.parseNullDef=Ic;var Lt={},Gr={},la;function Ys(){return la||(la=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseUnionDef=r.primitiveMappings=void 0;const e=fe();r.primitiveMappings={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function t(a,s){if(s.target==="openApi3")return n(a,s);const i=a.options instanceof Map?Array.from(a.options.values()):a.options;if(i.every(o=>o._def.typeName in r.primitiveMappings&&(!o._def.checks||!o._def.checks.length))){const o=i.reduce((u,c)=>{const f=r.primitiveMappings[c._def.typeName];return f&&!u.includes(f)?[...u,f]:u},[]);return{type:o.length>1?o:o[0]}}else if(i.every(o=>o._def.typeName==="ZodLiteral"&&!o.description)){const o=i.reduce((u,c)=>{const f=typeof c._def.value;switch(f){case"string":case"number":case"boolean":return[...u,f];case"bigint":return[...u,"integer"];case"object":if(c._def.value===null)return[...u,"null"];case"symbol":case"undefined":case"function":default:return u}},[]);if(o.length===i.length){const u=o.filter((c,f,w)=>w.indexOf(c)===f);return{type:u.length>1?u:u[0],enum:i.reduce((c,f)=>c.includes(f._def.value)?c:[...c,f._def.value],[])}}}else if(i.every(o=>o._def.typeName==="ZodEnum"))return{type:"string",enum:i.reduce((o,u)=>[...o,...u._def.values.filter(c=>!o.includes(c))],[])};return n(a,s)}r.parseUnionDef=t;const n=(a,s)=>{const i=(a.options instanceof Map?Array.from(a.options.values()):a.options).map((o,u)=>(0,e.parseDef)(o._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"anyOf",`${u}`]}))).filter(o=>!!o&&(!s.strictUnions||typeof o=="object"&&Object.keys(o).length>0));return i.length?{anyOf:i}:void 0}}(Gr)),Gr}var da;function Nc(){if(da)return Lt;da=1,Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.parseNullableDef=void 0;const r=fe(),e=Ys();function t(n,a){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(n.innerType._def.typeName)&&(!n.innerType._def.checks||!n.innerType._def.checks.length))return a.target==="openApi3"?{type:e.primitiveMappings[n.innerType._def.typeName],nullable:!0}:{type:[e.primitiveMappings[n.innerType._def.typeName],"null"]};if(a.target==="openApi3"){const i=(0,r.parseDef)(n.innerType._def,Object.assign(Object.assign({},a),{currentPath:[...a.currentPath]}));return i&&Object.assign(Object.assign({},i),{nullable:!0})}const s=(0,r.parseDef)(n.innerType._def,Object.assign(Object.assign({},a),{currentPath:[...a.currentPath,"anyOf","0"]}));return s&&{anyOf:[s,{type:"null"}]}}return Lt.parseNullableDef=t,Lt}var $r={};Object.defineProperty($r,"__esModule",{value:!0});$r.parseNumberDef=void 0;const Ve=Se;function Cc(r,e){const t={type:"number"};if(!r.checks)return t;for(const n of r.checks)switch(n.kind){case"int":t.type="integer",(0,Ve.addErrorMessage)(t,"type",n.message,e);break;case"min":e.target==="jsonSchema7"?n.inclusive?(0,Ve.setResponseValueAndErrors)(t,"minimum",n.value,n.message,e):(0,Ve.setResponseValueAndErrors)(t,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(t.exclusiveMinimum=!0),(0,Ve.setResponseValueAndErrors)(t,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?(0,Ve.setResponseValueAndErrors)(t,"maximum",n.value,n.message,e):(0,Ve.setResponseValueAndErrors)(t,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(t.exclusiveMaximum=!0),(0,Ve.setResponseValueAndErrors)(t,"maximum",n.value,n.message,e));break;case"multipleOf":(0,Ve.setResponseValueAndErrors)(t,"multipleOf",n.value,n.message,e);break}return t}$r.parseNumberDef=Cc;var Qe={},fa;function Rc(){if(fa)return Qe;fa=1,Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.parseObjectDef=Qe.parseObjectDefX=void 0;const r=fe();function e(n,a){var s,i;Object.keys(n.shape()).reduce((u,c)=>{let f=n.shape()[c];const w=f.isOptional();w||(f=Object.assign({},f._def.innerSchema));const j=(0,r.parseDef)(f._def,Object.assign(Object.assign({},a),{currentPath:[...a.currentPath,"properties",c],propertyPath:[...a.currentPath,"properties",c]}));return j!==void 0&&(u.properties[c]=j,w||(u.required||(u.required=[]),u.required.push(c))),u},{type:"object",properties:{},additionalProperties:n.catchall._def.typeName==="ZodNever"?n.unknownKeys==="passthrough":(s=(0,r.parseDef)(n.catchall._def,Object.assign(Object.assign({},a),{currentPath:[...a.currentPath,"additionalProperties"]})))!==null&&s!==void 0?s:!0});const o=Object.assign(Object.assign({type:"object"},Object.entries(n.shape()).reduce((u,[c,f])=>{if(f===void 0||f._def===void 0)return u;const w=(0,r.parseDef)(f._def,Object.assign(Object.assign({},a),{currentPath:[...a.currentPath,"properties",c],propertyPath:[...a.currentPath,"properties",c]}));return w===void 0?u:{properties:Object.assign(Object.assign({},u.properties),{[c]:w}),required:f.isOptional()?u.required:[...u.required,c]}},{properties:{},required:[]})),{additionalProperties:n.catchall._def.typeName==="ZodNever"?n.unknownKeys==="passthrough":(i=(0,r.parseDef)(n.catchall._def,Object.assign(Object.assign({},a),{currentPath:[...a.currentPath,"additionalProperties"]})))!==null&&i!==void 0?i:!0});return o.required.length||delete o.required,o}Qe.parseObjectDefX=e;function t(n,a){var s;const i=Object.assign(Object.assign({type:"object"},Object.entries(n.shape()).reduce((o,[u,c])=>{if(c===void 0||c._def===void 0)return o;const f=(0,r.parseDef)(c._def,Object.assign(Object.assign({},a),{currentPath:[...a.currentPath,"properties",u],propertyPath:[...a.currentPath,"properties",u]}));return f===void 0?o:{properties:Object.assign(Object.assign({},o.properties),{[u]:f}),required:c.isOptional()?o.required:[...o.required,u]}},{properties:{},required:[]})),{additionalProperties:n.catchall._def.typeName==="ZodNever"?n.unknownKeys==="passthrough":(s=(0,r.parseDef)(n.catchall._def,Object.assign(Object.assign({},a),{currentPath:[...a.currentPath,"additionalProperties"]})))!==null&&s!==void 0?s:!0});return i.required.length||delete i.required,i}return Qe.parseObjectDef=t,Qe}var Mt={},pa;function Dc(){if(pa)return Mt;pa=1,Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.parseOptionalDef=void 0;const r=fe(),e=(t,n)=>{var a;if(n.currentPath.toString()===((a=n.propertyPath)===null||a===void 0?void 0:a.toString()))return(0,r.parseDef)(t.innerType._def,n);const s=(0,r.parseDef)(t.innerType._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"anyOf","1"]}));return s?{anyOf:[{not:{}},s]}:{}};return Mt.parseOptionalDef=e,Mt}var $t={},ha;function Lc(){if(ha)return $t;ha=1,Object.defineProperty($t,"__esModule",{value:!0}),$t.parsePipelineDef=void 0;const r=fe(),e=(t,n)=>{if(n.pipeStrategy==="input")return(0,r.parseDef)(t.in._def,n);const a=(0,r.parseDef)(t.in._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"allOf","0"]})),s=(0,r.parseDef)(t.out._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"allOf",a?"1":"0"]}));return{allOf:[a,s].filter(i=>i!==void 0)}};return $t.parsePipelineDef=e,$t}var Bt={},ma;function Mc(){if(ma)return Bt;ma=1,Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.parsePromiseDef=void 0;const r=fe();function e(t,n){return(0,r.parseDef)(t.type._def,n)}return Bt.parsePromiseDef=e,Bt}var Ut={},Tn={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseStringDef=r.emojiPattern=r.ulidPattern=r.cuid2Pattern=r.cuidPattern=r.emailPattern=void 0;const e=Se;r.emailPattern='^(([^<>()[\\]\\\\.,;:\\s@\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\"]+)*)|(\\".+\\"))@((\\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\])|(\\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\\.[A-Za-z]{2,})+))$',r.cuidPattern="^c[^\\s-]{8,}$",r.cuid2Pattern="^[a-z][a-z0-9]*$",r.ulidPattern="/[0-9A-HJKMNP-TV-Z]{26}/",r.emojiPattern="/^(p{Extended_Pictographic}|p{Emoji_Component})+$/u";function t(i,o){const u={type:"string"};if(i.checks)for(const c of i.checks)switch(c.kind){case"min":(0,e.setResponseValueAndErrors)(u,"minLength",typeof u.minLength=="number"?Math.max(u.minLength,c.value):c.value,c.message,o);break;case"max":(0,e.setResponseValueAndErrors)(u,"maxLength",typeof u.maxLength=="number"?Math.min(u.maxLength,c.value):c.value,c.message,o);break;case"email":switch(o.emailStrategy){case"format:email":a(u,"email",c.message,o);break;case"format:idn-email":a(u,"idn-email",c.message,o);break;case"pattern:zod":s(u,r.emailPattern,c.message,o);break}break;case"url":a(u,"uri",c.message,o);break;case"uuid":a(u,"uuid",c.message,o);break;case"regex":s(u,c.regex.source,c.message,o);break;case"cuid":s(u,r.cuidPattern,c.message,o);break;case"cuid2":s(u,r.cuid2Pattern,c.message,o);break;case"startsWith":s(u,"^"+n(c.value),c.message,o);break;case"endsWith":s(u,n(c.value)+"$",c.message,o);break;case"datetime":a(u,"date-time",c.message,o);break;case"length":(0,e.setResponseValueAndErrors)(u,"minLength",typeof u.minLength=="number"?Math.max(u.minLength,c.value):c.value,c.message,o),(0,e.setResponseValueAndErrors)(u,"maxLength",typeof u.maxLength=="number"?Math.min(u.maxLength,c.value):c.value,c.message,o);break;case"includes":{s(u,n(c.value),c.message,o);break}case"ip":{c.version!=="v6"&&a(u,"ipv4",c.message,o),c.version!=="v4"&&a(u,"ipv6",c.message,o);break}case"emoji":s(u,r.emojiPattern,c.message,o);break;case"ulid":{s(u,r.ulidPattern,c.message,o);break}}return u}r.parseStringDef=t;const n=i=>Array.from(i).map(o=>/[a-zA-Z0-9]/.test(o)?o:`\\${o}`).join(""),a=(i,o,u,c)=>{var f;i.format||!((f=i.anyOf)===null||f===void 0)&&f.some(w=>w.format)?(i.anyOf||(i.anyOf=[]),i.format&&(i.anyOf.push(Object.assign({format:i.format},i.errorMessage&&c.errorMessages&&{errorMessage:{format:i.errorMessage.format}})),delete i.format,i.errorMessage&&(delete i.errorMessage.format,Object.keys(i.errorMessage).length===0&&delete i.errorMessage)),i.anyOf.push(Object.assign({format:o},u&&c.errorMessages&&{errorMessage:{format:u}}))):(0,e.setResponseValueAndErrors)(i,"format",o,u,c)},s=(i,o,u,c)=>{var f;i.pattern||!((f=i.allOf)===null||f===void 0)&&f.some(w=>w.pattern)?(i.allOf||(i.allOf=[]),i.pattern&&(i.allOf.push(Object.assign({pattern:i.pattern},i.errorMessage&&c.errorMessages&&{errorMessage:{pattern:i.errorMessage.pattern}})),delete i.pattern,i.errorMessage&&(delete i.errorMessage.pattern,Object.keys(i.errorMessage).length===0&&delete i.errorMessage)),i.allOf.push(Object.assign({pattern:o},u&&c.errorMessages&&{errorMessage:{pattern:u}}))):(0,e.setResponseValueAndErrors)(i,"pattern",o,u,c)}})(Tn);var ya;function $c(){if(ya)return Ut;ya=1,Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.parseRecordDef=void 0;const r=An,e=fe(),t=Tn;function n(a,s){var i,o,u,c,f;if(s.target==="openApi3"&&((i=a.keyType)===null||i===void 0?void 0:i._def.typeName)===r.ZodFirstPartyTypeKind.ZodEnum)return{type:"object",required:a.keyType._def.values,properties:a.keyType._def.values.reduce((j,U)=>{var b;return Object.assign(Object.assign({},j),{[U]:(b=(0,e.parseDef)(a.valueType._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"properties",U]})))!==null&&b!==void 0?b:{}})},{}),additionalProperties:!1};const w={type:"object",additionalProperties:(o=(0,e.parseDef)(a.valueType._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"additionalProperties"]})))!==null&&o!==void 0?o:{}};if(s.target==="openApi3")return w;if(((u=a.keyType)===null||u===void 0?void 0:u._def.typeName)===r.ZodFirstPartyTypeKind.ZodString&&(!((c=a.keyType._def.checks)===null||c===void 0)&&c.length)){const j=Object.entries((0,t.parseStringDef)(a.keyType._def,s)).reduce((U,[b,P])=>b==="type"?U:Object.assign(Object.assign({},U),{[b]:P}),{});return Object.assign(Object.assign({},w),{propertyNames:j})}else if(((f=a.keyType)===null||f===void 0?void 0:f._def.typeName)===r.ZodFirstPartyTypeKind.ZodEnum)return Object.assign(Object.assign({},w),{propertyNames:{enum:a.keyType._def.values}});return w}return Ut.parseRecordDef=n,Ut}var Zt={},ga;function Bc(){if(ga)return Zt;ga=1,Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.parseSetDef=void 0;const r=Se,e=fe();function t(n,a){const i={type:"array",uniqueItems:!0,items:(0,e.parseDef)(n.valueType._def,Object.assign(Object.assign({},a),{currentPath:[...a.currentPath,"items"]}))};return n.minSize&&(0,r.setResponseValueAndErrors)(i,"minItems",n.minSize.value,n.minSize.message,a),n.maxSize&&(0,r.setResponseValueAndErrors)(i,"maxItems",n.maxSize.value,n.maxSize.message,a),i}return Zt.parseSetDef=t,Zt}var Ft={},ba;function Uc(){if(ba)return Ft;ba=1,Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.parseTupleDef=void 0;const r=fe();function e(t,n){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((a,s)=>(0,r.parseDef)(a._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"items",`${s}`]}))).reduce((a,s)=>s===void 0?a:[...a,s],[]),additionalItems:(0,r.parseDef)(t.rest._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"additionalItems"]}))}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((a,s)=>(0,r.parseDef)(a._def,Object.assign(Object.assign({},n),{currentPath:[...n.currentPath,"items",`${s}`]}))).reduce((a,s)=>s===void 0?a:[...a,s],[])}}return Ft.parseTupleDef=e,Ft}var Br={};Object.defineProperty(Br,"__esModule",{value:!0});Br.parseUndefinedDef=void 0;function Zc(){return{not:{}}}Br.parseUndefinedDef=Zc;var Ur={};Object.defineProperty(Ur,"__esModule",{value:!0});Ur.parseUnknownDef=void 0;function Fc(){return{}}Ur.parseUnknownDef=Fc;var _a;function fe(){if(_a)return St;_a=1,Object.defineProperty(St,"__esModule",{value:!0}),St.parseDef=void 0;const r=An,e=kr,t=yc(),n=jr,a=Ir,s=_c(),i=wc(),o=Nr,u=Oc(),c=xc(),f=Cr,w=Ac(),j=Rr,U=Sc(),b=Dr,P=Lr,E=Mr,S=Nc(),C=$r,N=Rc(),I=Dc(),V=Lc(),g=Mc(),O=$c(),p=Bc(),m=Tn,d=Uc(),_=Br,v=Ys(),Y=Ur;function z(R,K,F=!1){const ke=K.seen.get(R);if(ke&&!F){const st=J(ke,K);if(st!==void 0)return st}const We={def:R,path:K.currentPath,jsonSchema:void 0};K.seen.set(R,We);const Ge=te(R,R.typeName,K);return Ge&&ie(R,K,Ge),We.jsonSchema=Ge,Ge}St.parseDef=z;const J=(R,K)=>{switch(K.$refStrategy){case"root":return{$ref:R.path.length===0?"":R.path.length===1?`${R.path[0]}/`:R.path.join("/")};case"relative":return{$ref:B(K.currentPath,R.path)};case"none":return R.path.length<K.currentPath.length&&R.path.every((F,ke)=>K.currentPath[ke]===F)?(console.warn(`Recursive reference detected at ${K.currentPath.join("/")}! Defaulting to any`),{}):void 0;case"seen":return R.path.length<K.currentPath.length&&R.path.every((F,ke)=>K.currentPath[ke]===F)?(console.warn(`Recursive reference detected at ${K.currentPath.join("/")}! Defaulting to any`),{}):R.jsonSchema}},B=(R,K)=>{let F=0;for(;F<R.length&&F<K.length&&R[F]===K[F];F++);return[(R.length-F).toString(),...K.slice(F)].join("/")},te=(R,K,F)=>{switch(K){case r.ZodFirstPartyTypeKind.ZodString:return(0,m.parseStringDef)(R,F);case r.ZodFirstPartyTypeKind.ZodNumber:return(0,C.parseNumberDef)(R,F);case r.ZodFirstPartyTypeKind.ZodObject:return(0,N.parseObjectDef)(R,F);case r.ZodFirstPartyTypeKind.ZodBigInt:return(0,n.parseBigintDef)(R,F);case r.ZodFirstPartyTypeKind.ZodBoolean:return(0,a.parseBooleanDef)();case r.ZodFirstPartyTypeKind.ZodDate:return(0,o.parseDateDef)(R,F);case r.ZodFirstPartyTypeKind.ZodUndefined:return(0,_.parseUndefinedDef)();case r.ZodFirstPartyTypeKind.ZodNull:return(0,E.parseNullDef)(F);case r.ZodFirstPartyTypeKind.ZodArray:return(0,t.parseArrayDef)(R,F);case r.ZodFirstPartyTypeKind.ZodUnion:case r.ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return(0,v.parseUnionDef)(R,F);case r.ZodFirstPartyTypeKind.ZodIntersection:return(0,w.parseIntersectionDef)(R,F);case r.ZodFirstPartyTypeKind.ZodTuple:return(0,d.parseTupleDef)(R,F);case r.ZodFirstPartyTypeKind.ZodRecord:return(0,O.parseRecordDef)(R,F);case r.ZodFirstPartyTypeKind.ZodLiteral:return(0,j.parseLiteralDef)(R,F);case r.ZodFirstPartyTypeKind.ZodEnum:return(0,f.parseEnumDef)(R);case r.ZodFirstPartyTypeKind.ZodNativeEnum:return(0,b.parseNativeEnumDef)(R);case r.ZodFirstPartyTypeKind.ZodNullable:return(0,S.parseNullableDef)(R,F);case r.ZodFirstPartyTypeKind.ZodOptional:return(0,I.parseOptionalDef)(R,F);case r.ZodFirstPartyTypeKind.ZodMap:return(0,U.parseMapDef)(R,F);case r.ZodFirstPartyTypeKind.ZodSet:return(0,p.parseSetDef)(R,F);case r.ZodFirstPartyTypeKind.ZodLazy:return z(R.getter()._def,F);case r.ZodFirstPartyTypeKind.ZodPromise:return(0,g.parsePromiseDef)(R,F);case r.ZodFirstPartyTypeKind.ZodNaN:case r.ZodFirstPartyTypeKind.ZodNever:return(0,P.parseNeverDef)();case r.ZodFirstPartyTypeKind.ZodEffects:return(0,c.parseEffectsDef)(R,F);case r.ZodFirstPartyTypeKind.ZodAny:return(0,e.parseAnyDef)();case r.ZodFirstPartyTypeKind.ZodUnknown:return(0,Y.parseUnknownDef)();case r.ZodFirstPartyTypeKind.ZodDefault:return(0,u.parseDefaultDef)(R,F);case r.ZodFirstPartyTypeKind.ZodBranded:return(0,s.parseBrandedDef)(R,F);case r.ZodFirstPartyTypeKind.ZodCatch:return(0,i.parseCatchDef)(R,F);case r.ZodFirstPartyTypeKind.ZodPipeline:return(0,V.parsePipelineDef)(R,F);case r.ZodFirstPartyTypeKind.ZodFunction:case r.ZodFirstPartyTypeKind.ZodVoid:case r.ZodFirstPartyTypeKind.ZodSymbol:return;default:return(ke=>{})()}},ie=(R,K,F)=>(R.description&&(F.description=R.description,K.markdownDescription&&(F.markdownDescription=R.description)),F);return St}var Zr={},Js={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.getDefaultOptions=r.defaultOptions=void 0,r.defaultOptions={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"string",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,emailStrategy:"format:email"};const e=t=>typeof t=="string"?Object.assign(Object.assign({},r.defaultOptions),{name:t}):Object.assign(Object.assign({},r.defaultOptions),t);r.getDefaultOptions=e})(Js);Object.defineProperty(Zr,"__esModule",{value:!0});Zr.getRefs=void 0;const Vc=Js,zc=r=>{const e=(0,Vc.getDefaultOptions)(r),t=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return Object.assign(Object.assign({},e),{currentPath:t,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([n,a])=>[a._def,{def:a._def,path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))})};Zr.getRefs=zc;Object.defineProperty(Sr,"__esModule",{value:!0});Sr.zodToJsonSchema=void 0;const wa=fe(),Kc=Zr,qc=(r,e)=>{var t;const n=(0,Kc.getRefs)(e),a=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((u,[c,f])=>{var w;return Object.assign(Object.assign({},u),{[c]:(w=(0,wa.parseDef)(f._def,Object.assign(Object.assign({},n),{currentPath:[...n.basePath,n.definitionPath,c]}),!0))!==null&&w!==void 0?w:{}})},{}):void 0,s=typeof e=="string"?e:e==null?void 0:e.name,i=(t=(0,wa.parseDef)(r._def,s===void 0?n:Object.assign(Object.assign({},n),{currentPath:[...n.basePath,n.definitionPath,s]}),!1))!==null&&t!==void 0?t:{},o=s===void 0?a?Object.assign(Object.assign({},i),{[n.definitionPath]:a}):i:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,s].join("/"),[n.definitionPath]:Object.assign(Object.assign({},a),{[s]:i})};return n.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":n.target==="jsonSchema2019-09"&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),o};Sr.zodToJsonSchema=qc;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.zodToJsonSchema=void 0;const e=Sr;Object.defineProperty(r,"zodToJsonSchema",{enumerable:!0,get:function(){return e.zodToJsonSchema}}),r.default=e.zodToJsonSchema})(pc);/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function Ws(r){return typeof r>"u"||r===null}function Hc(r){return typeof r=="object"&&r!==null}function Yc(r){return Array.isArray(r)?r:Ws(r)?[]:[r]}function Jc(r,e){var t,n,a,s;if(e)for(s=Object.keys(e),t=0,n=s.length;t<n;t+=1)a=s[t],r[a]=e[a];return r}function Wc(r,e){var t="",n;for(n=0;n<e;n+=1)t+=r;return t}function Gc(r){return r===0&&Number.NEGATIVE_INFINITY===1/r}var Xc=Ws,Qc=Hc,el=Yc,tl=Wc,rl=Gc,nl=Jc,Sn={isNothing:Xc,isObject:Qc,toArray:el,repeat:tl,isNegativeZero:rl,extend:nl};function Gs(r,e){var t="",n=r.reason||"(unknown reason)";return r.mark?(r.mark.name&&(t+='in "'+r.mark.name+'" '),t+="("+(r.mark.line+1)+":"+(r.mark.column+1)+")",!e&&r.mark.snippet&&(t+=`

`+r.mark.snippet),n+" "+t):n}function Qt(r,e){Error.call(this),this.name="YAMLException",this.reason=r,this.mark=e,this.message=Gs(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Qt.prototype=Object.create(Error.prototype);Qt.prototype.constructor=Qt;Qt.prototype.toString=function(e){return this.name+": "+Gs(this,e)};var tt=Qt,al=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],sl=["scalar","sequence","mapping"];function il(r){var e={};return r!==null&&Object.keys(r).forEach(function(t){r[t].forEach(function(n){e[String(n)]=t})}),e}function ol(r,e){if(e=e||{},Object.keys(e).forEach(function(t){if(al.indexOf(t)===-1)throw new tt('Unknown option "'+t+'" is met in definition of "'+r+'" YAML type.')}),this.options=e,this.tag=r,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(t){return t},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=il(e.styleAliases||null),sl.indexOf(this.kind)===-1)throw new tt('Unknown kind "'+this.kind+'" is specified for "'+r+'" YAML type.')}var pe=ol;function va(r,e){var t=[];return r[e].forEach(function(n){var a=t.length;t.forEach(function(s,i){s.tag===n.tag&&s.kind===n.kind&&s.multi===n.multi&&(a=i)}),t[a]=n}),t}function ul(){var r={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,t;function n(a){a.multi?(r.multi[a.kind].push(a),r.multi.fallback.push(a)):r[a.kind][a.tag]=r.fallback[a.tag]=a}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(n);return r}function sn(r){return this.extend(r)}sn.prototype.extend=function(e){var t=[],n=[];if(e instanceof pe)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new tt("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");t.forEach(function(s){if(!(s instanceof pe))throw new tt("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new tt("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new tt("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(s){if(!(s instanceof pe))throw new tt("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var a=Object.create(sn.prototype);return a.implicit=(this.implicit||[]).concat(t),a.explicit=(this.explicit||[]).concat(n),a.compiledImplicit=va(a,"implicit"),a.compiledExplicit=va(a,"explicit"),a.compiledTypeMap=ul(a.compiledImplicit,a.compiledExplicit),a};var cl=sn,ll=new pe("tag:yaml.org,2002:str",{kind:"scalar",construct:function(r){return r!==null?r:""}}),dl=new pe("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(r){return r!==null?r:[]}}),fl=new pe("tag:yaml.org,2002:map",{kind:"mapping",construct:function(r){return r!==null?r:{}}}),pl=new cl({explicit:[ll,dl,fl]});function hl(r){if(r===null)return!0;var e=r.length;return e===1&&r==="~"||e===4&&(r==="null"||r==="Null"||r==="NULL")}function ml(){return null}function yl(r){return r===null}var gl=new pe("tag:yaml.org,2002:null",{kind:"scalar",resolve:hl,construct:ml,predicate:yl,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function bl(r){if(r===null)return!1;var e=r.length;return e===4&&(r==="true"||r==="True"||r==="TRUE")||e===5&&(r==="false"||r==="False"||r==="FALSE")}function _l(r){return r==="true"||r==="True"||r==="TRUE"}function wl(r){return Object.prototype.toString.call(r)==="[object Boolean]"}var vl=new pe("tag:yaml.org,2002:bool",{kind:"scalar",resolve:bl,construct:_l,predicate:wl,represent:{lowercase:function(r){return r?"true":"false"},uppercase:function(r){return r?"TRUE":"FALSE"},camelcase:function(r){return r?"True":"False"}},defaultStyle:"lowercase"});function El(r){return 48<=r&&r<=57||65<=r&&r<=70||97<=r&&r<=102}function Ol(r){return 48<=r&&r<=55}function xl(r){return 48<=r&&r<=57}function Pl(r){if(r===null)return!1;var e=r.length,t=0,n=!1,a;if(!e)return!1;if(a=r[t],(a==="-"||a==="+")&&(a=r[++t]),a==="0"){if(t+1===e)return!0;if(a=r[++t],a==="b"){for(t++;t<e;t++)if(a=r[t],a!=="_"){if(a!=="0"&&a!=="1")return!1;n=!0}return n&&a!=="_"}if(a==="x"){for(t++;t<e;t++)if(a=r[t],a!=="_"){if(!El(r.charCodeAt(t)))return!1;n=!0}return n&&a!=="_"}if(a==="o"){for(t++;t<e;t++)if(a=r[t],a!=="_"){if(!Ol(r.charCodeAt(t)))return!1;n=!0}return n&&a!=="_"}}if(a==="_")return!1;for(;t<e;t++)if(a=r[t],a!=="_"){if(!xl(r.charCodeAt(t)))return!1;n=!0}return!(!n||a==="_")}function Al(r){var e=r,t=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(t=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return t*parseInt(e.slice(2),2);if(e[1]==="x")return t*parseInt(e.slice(2),16);if(e[1]==="o")return t*parseInt(e.slice(2),8)}return t*parseInt(e,10)}function Tl(r){return Object.prototype.toString.call(r)==="[object Number]"&&r%1===0&&!Sn.isNegativeZero(r)}var Sl=new pe("tag:yaml.org,2002:int",{kind:"scalar",resolve:Pl,construct:Al,predicate:Tl,represent:{binary:function(r){return r>=0?"0b"+r.toString(2):"-0b"+r.toString(2).slice(1)},octal:function(r){return r>=0?"0o"+r.toString(8):"-0o"+r.toString(8).slice(1)},decimal:function(r){return r.toString(10)},hexadecimal:function(r){return r>=0?"0x"+r.toString(16).toUpperCase():"-0x"+r.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),kl=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function jl(r){return!(r===null||!kl.test(r)||r[r.length-1]==="_")}function Il(r){var e,t;return e=r.replace(/_/g,"").toLowerCase(),t=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?t===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:t*parseFloat(e,10)}var Nl=/^[-+]?[0-9]+e/;function Cl(r,e){var t;if(isNaN(r))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===r)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===r)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Sn.isNegativeZero(r))return"-0.0";return t=r.toString(10),Nl.test(t)?t.replace("e",".e"):t}function Rl(r){return Object.prototype.toString.call(r)==="[object Number]"&&(r%1!==0||Sn.isNegativeZero(r))}var Dl=new pe("tag:yaml.org,2002:float",{kind:"scalar",resolve:jl,construct:Il,predicate:Rl,represent:Cl,defaultStyle:"lowercase"}),Ll=pl.extend({implicit:[gl,vl,Sl,Dl]}),Ml=Ll,Xs=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Qs=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function $l(r){return r===null?!1:Xs.exec(r)!==null||Qs.exec(r)!==null}function Bl(r){var e,t,n,a,s,i,o,u=0,c=null,f,w,j;if(e=Xs.exec(r),e===null&&(e=Qs.exec(r)),e===null)throw new Error("Date resolve error");if(t=+e[1],n=+e[2]-1,a=+e[3],!e[4])return new Date(Date.UTC(t,n,a));if(s=+e[4],i=+e[5],o=+e[6],e[7]){for(u=e[7].slice(0,3);u.length<3;)u+="0";u=+u}return e[9]&&(f=+e[10],w=+(e[11]||0),c=(f*60+w)*6e4,e[9]==="-"&&(c=-c)),j=new Date(Date.UTC(t,n,a,s,i,o,u)),c&&j.setTime(j.getTime()-c),j}function Ul(r){return r.toISOString()}var Zl=new pe("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:$l,construct:Bl,instanceOf:Date,represent:Ul});function Fl(r){return r==="<<"||r===null}var Vl=new pe("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Fl}),kn=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function zl(r){if(r===null)return!1;var e,t,n=0,a=r.length,s=kn;for(t=0;t<a;t++)if(e=s.indexOf(r.charAt(t)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function Kl(r){var e,t,n=r.replace(/[\r\n=]/g,""),a=n.length,s=kn,i=0,o=[];for(e=0;e<a;e++)e%4===0&&e&&(o.push(i>>16&255),o.push(i>>8&255),o.push(i&255)),i=i<<6|s.indexOf(n.charAt(e));return t=a%4*6,t===0?(o.push(i>>16&255),o.push(i>>8&255),o.push(i&255)):t===18?(o.push(i>>10&255),o.push(i>>2&255)):t===12&&o.push(i>>4&255),new Uint8Array(o)}function ql(r){var e="",t=0,n,a,s=r.length,i=kn;for(n=0;n<s;n++)n%3===0&&n&&(e+=i[t>>18&63],e+=i[t>>12&63],e+=i[t>>6&63],e+=i[t&63]),t=(t<<8)+r[n];return a=s%3,a===0?(e+=i[t>>18&63],e+=i[t>>12&63],e+=i[t>>6&63],e+=i[t&63]):a===2?(e+=i[t>>10&63],e+=i[t>>4&63],e+=i[t<<2&63],e+=i[64]):a===1&&(e+=i[t>>2&63],e+=i[t<<4&63],e+=i[64],e+=i[64]),e}function Hl(r){return Object.prototype.toString.call(r)==="[object Uint8Array]"}var Yl=new pe("tag:yaml.org,2002:binary",{kind:"scalar",resolve:zl,construct:Kl,predicate:Hl,represent:ql}),Jl=Object.prototype.hasOwnProperty,Wl=Object.prototype.toString;function Gl(r){if(r===null)return!0;var e=[],t,n,a,s,i,o=r;for(t=0,n=o.length;t<n;t+=1){if(a=o[t],i=!1,Wl.call(a)!=="[object Object]")return!1;for(s in a)if(Jl.call(a,s))if(!i)i=!0;else return!1;if(!i)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}function Xl(r){return r!==null?r:[]}var Ql=new pe("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Gl,construct:Xl}),ed=Object.prototype.toString;function td(r){if(r===null)return!0;var e,t,n,a,s,i=r;for(s=new Array(i.length),e=0,t=i.length;e<t;e+=1){if(n=i[e],ed.call(n)!=="[object Object]"||(a=Object.keys(n),a.length!==1))return!1;s[e]=[a[0],n[a[0]]]}return!0}function rd(r){if(r===null)return[];var e,t,n,a,s,i=r;for(s=new Array(i.length),e=0,t=i.length;e<t;e+=1)n=i[e],a=Object.keys(n),s[e]=[a[0],n[a[0]]];return s}var nd=new pe("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:td,construct:rd}),ad=Object.prototype.hasOwnProperty;function sd(r){if(r===null)return!0;var e,t=r;for(e in t)if(ad.call(t,e)&&t[e]!==null)return!1;return!0}function id(r){return r!==null?r:{}}var od=new pe("tag:yaml.org,2002:set",{kind:"mapping",resolve:sd,construct:id});Ml.extend({implicit:[Zl,Vl],explicit:[Yl,Ql,nd,od]});function Ea(r){return r===48?"\0":r===97?"\x07":r===98?"\b":r===116||r===9?"	":r===110?`
`:r===118?"\v":r===102?"\f":r===114?"\r":r===101?"\x1B":r===32?" ":r===34?'"':r===47?"/":r===92?"\\":r===78?"":r===95?" ":r===76?"\u2028":r===80?"\u2029":""}var ud=new Array(256),cd=new Array(256);for(var ut=0;ut<256;ut++)ud[ut]=Ea(ut)?1:0,cd[ut]=Ea(ut);var ei={exports:{}};(function(r,e){(function(t){r.exports=t()})(function(){return function t(n,a,s){function i(c,f){if(!a[c]){if(!n[c]){var w=typeof sr=="function"&&sr;if(!f&&w)return w(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+c+"'")}f=a[c]={exports:{}},n[c][0].call(f.exports,function(j){var U=n[c][1][j];return i(U||j)},f,f.exports,t,n,a,s)}return a[c].exports}for(var o=typeof sr=="function"&&sr,u=0;u<s.length;u++)i(s[u]);return i}({1:[function(t,n,a){(function(s,i,o,u,c,f,w,j,U){var b=t("crypto");function P(g,O){O=C(g,O);var p;return(p=O.algorithm!=="passthrough"?b.createHash(O.algorithm):new V).write===void 0&&(p.write=p.update,p.end=p.update),I(O,p).dispatch(g),p.update||p.end(""),p.digest?p.digest(O.encoding==="buffer"?void 0:O.encoding):(g=p.read(),O.encoding!=="buffer"?g.toString(O.encoding):g)}(a=n.exports=P).sha1=function(g){return P(g)},a.keys=function(g){return P(g,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},a.MD5=function(g){return P(g,{algorithm:"md5",encoding:"hex"})},a.keysMD5=function(g){return P(g,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var E=b.getHashes?b.getHashes().slice():["sha1","md5"],S=(E.push("passthrough"),["buffer","hex","binary","base64"]);function C(g,O){var p={};if(p.algorithm=(O=O||{}).algorithm||"sha1",p.encoding=O.encoding||"hex",p.excludeValues=!!O.excludeValues,p.algorithm=p.algorithm.toLowerCase(),p.encoding=p.encoding.toLowerCase(),p.ignoreUnknown=O.ignoreUnknown===!0,p.respectType=O.respectType!==!1,p.respectFunctionNames=O.respectFunctionNames!==!1,p.respectFunctionProperties=O.respectFunctionProperties!==!1,p.unorderedArrays=O.unorderedArrays===!0,p.unorderedSets=O.unorderedSets!==!1,p.unorderedObjects=O.unorderedObjects!==!1,p.replacer=O.replacer||void 0,p.excludeKeys=O.excludeKeys||void 0,g===void 0)throw new Error("Object argument required.");for(var m=0;m<E.length;++m)E[m].toLowerCase()===p.algorithm.toLowerCase()&&(p.algorithm=E[m]);if(E.indexOf(p.algorithm)===-1)throw new Error('Algorithm "'+p.algorithm+'"  not supported. supported values: '+E.join(", "));if(S.indexOf(p.encoding)===-1&&p.algorithm!=="passthrough")throw new Error('Encoding "'+p.encoding+'"  not supported. supported values: '+S.join(", "));return p}function N(g){if(typeof g=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(g))!=null}function I(g,O,p){p=p||[];function m(d){return O.update?O.update(d,"utf8"):O.write(d,"utf8")}return{dispatch:function(d){return this["_"+((d=g.replacer?g.replacer(d):d)===null?"null":typeof d)](d)},_object:function(d){var _,v=Object.prototype.toString.call(d),Y=/\[object (.*)\]/i.exec(v);if(Y=(Y=Y?Y[1]:"unknown:["+v+"]").toLowerCase(),0<=(v=p.indexOf(d)))return this.dispatch("[CIRCULAR:"+v+"]");if(p.push(d),o!==void 0&&o.isBuffer&&o.isBuffer(d))return m("buffer:"),m(d);if(Y==="object"||Y==="function"||Y==="asyncfunction")return v=Object.keys(d),g.unorderedObjects&&(v=v.sort()),g.respectType===!1||N(d)||v.splice(0,0,"prototype","__proto__","constructor"),g.excludeKeys&&(v=v.filter(function(z){return!g.excludeKeys(z)})),m("object:"+v.length+":"),_=this,v.forEach(function(z){_.dispatch(z),m(":"),g.excludeValues||_.dispatch(d[z]),m(",")});if(!this["_"+Y]){if(g.ignoreUnknown)return m("["+Y+"]");throw new Error('Unknown object type "'+Y+'"')}this["_"+Y](d)},_array:function(d,z){z=z!==void 0?z:g.unorderedArrays!==!1;var v=this;if(m("array:"+d.length+":"),!z||d.length<=1)return d.forEach(function(J){return v.dispatch(J)});var Y=[],z=d.map(function(J){var B=new V,te=p.slice();return I(g,B,te).dispatch(J),Y=Y.concat(te.slice(p.length)),B.read().toString()});return p=p.concat(Y),z.sort(),this._array(z,!1)},_date:function(d){return m("date:"+d.toJSON())},_symbol:function(d){return m("symbol:"+d.toString())},_error:function(d){return m("error:"+d.toString())},_boolean:function(d){return m("bool:"+d.toString())},_string:function(d){m("string:"+d.length+":"),m(d.toString())},_function:function(d){m("fn:"),N(d)?this.dispatch("[native]"):this.dispatch(d.toString()),g.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(d.name)),g.respectFunctionProperties&&this._object(d)},_number:function(d){return m("number:"+d.toString())},_xml:function(d){return m("xml:"+d.toString())},_null:function(){return m("Null")},_undefined:function(){return m("Undefined")},_regexp:function(d){return m("regex:"+d.toString())},_uint8array:function(d){return m("uint8array:"),this.dispatch(Array.prototype.slice.call(d))},_uint8clampedarray:function(d){return m("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(d))},_int8array:function(d){return m("int8array:"),this.dispatch(Array.prototype.slice.call(d))},_uint16array:function(d){return m("uint16array:"),this.dispatch(Array.prototype.slice.call(d))},_int16array:function(d){return m("int16array:"),this.dispatch(Array.prototype.slice.call(d))},_uint32array:function(d){return m("uint32array:"),this.dispatch(Array.prototype.slice.call(d))},_int32array:function(d){return m("int32array:"),this.dispatch(Array.prototype.slice.call(d))},_float32array:function(d){return m("float32array:"),this.dispatch(Array.prototype.slice.call(d))},_float64array:function(d){return m("float64array:"),this.dispatch(Array.prototype.slice.call(d))},_arraybuffer:function(d){return m("arraybuffer:"),this.dispatch(new Uint8Array(d))},_url:function(d){return m("url:"+d.toString())},_map:function(d){return m("map:"),d=Array.from(d),this._array(d,g.unorderedSets!==!1)},_set:function(d){return m("set:"),d=Array.from(d),this._array(d,g.unorderedSets!==!1)},_file:function(d){return m("file:"),this.dispatch([d.name,d.size,d.type,d.lastModfied])},_blob:function(){if(g.ignoreUnknown)return m("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return m("domwindow")},_bigint:function(d){return m("bigint:"+d.toString())},_process:function(){return m("process")},_timer:function(){return m("timer")},_pipe:function(){return m("pipe")},_tcp:function(){return m("tcp")},_udp:function(){return m("udp")},_tty:function(){return m("tty")},_statwatcher:function(){return m("statwatcher")},_securecontext:function(){return m("securecontext")},_connection:function(){return m("connection")},_zlib:function(){return m("zlib")},_context:function(){return m("context")},_nodescript:function(){return m("nodescript")},_httpparser:function(){return m("httpparser")},_dataview:function(){return m("dataview")},_signal:function(){return m("signal")},_fsevent:function(){return m("fsevent")},_tlswrap:function(){return m("tlswrap")}}}function V(){return{buf:"",write:function(g){this.buf+=g},end:function(g){this.buf+=g},read:function(){return this.buf}}}a.writeToStream=function(g,O,p){return p===void 0&&(p=O,O={}),I(O=C(g,O),p).dispatch(g)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(t,n,a){(function(s,i,o,u,c,f,w,j,U){(function(b){var P=typeof Uint8Array<"u"?Uint8Array:Array,E="+".charCodeAt(0),S="/".charCodeAt(0),C="0".charCodeAt(0),N="a".charCodeAt(0),I="A".charCodeAt(0),V="-".charCodeAt(0),g="_".charCodeAt(0);function O(p){return p=p.charCodeAt(0),p===E||p===V?62:p===S||p===g?63:p<C?-1:p<C+10?p-C+26+26:p<I+26?p-I:p<N+26?p-N+26:void 0}b.toByteArray=function(p){var m,d;if(0<p.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var _=p.length,_=p.charAt(_-2)==="="?2:p.charAt(_-1)==="="?1:0,v=new P(3*p.length/4-_),Y=0<_?p.length-4:p.length,z=0;function J(B){v[z++]=B}for(m=0;m<Y;m+=4,0)J((16711680&(d=O(p.charAt(m))<<18|O(p.charAt(m+1))<<12|O(p.charAt(m+2))<<6|O(p.charAt(m+3))))>>16),J((65280&d)>>8),J(255&d);return _==2?J(255&(d=O(p.charAt(m))<<2|O(p.charAt(m+1))>>4)):_==1&&(J((d=O(p.charAt(m))<<10|O(p.charAt(m+1))<<4|O(p.charAt(m+2))>>2)>>8&255),J(255&d)),v},b.fromByteArray=function(p){var m,d,_,v,Y=p.length%3,z="";function J(B){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(B)}for(m=0,_=p.length-Y;m<_;m+=3)d=(p[m]<<16)+(p[m+1]<<8)+p[m+2],z+=J((v=d)>>18&63)+J(v>>12&63)+J(v>>6&63)+J(63&v);switch(Y){case 1:z=(z+=J((d=p[p.length-1])>>2))+J(d<<4&63)+"==";break;case 2:z=(z=(z+=J((d=(p[p.length-2]<<8)+p[p.length-1])>>10))+J(d>>4&63))+J(d<<2&63)+"="}return z}})(a===void 0?this.base64js={}:a)}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(t,n,a){(function(s,i,E,u,c,f,w,j,U){var b=t("base64-js"),P=t("ieee754");function E(l,h,y){if(!(this instanceof E))return new E(l,h,y);var T,A,L,X,ne=typeof l;if(h==="base64"&&ne=="string")for(l=(X=l).trim?X.trim():X.replace(/^\s+|\s+$/g,"");l.length%4!=0;)l+="=";if(ne=="number")T=ie(l);else if(ne=="string")T=E.byteLength(l,h);else{if(ne!="object")throw new Error("First argument needs to be a number, array or string.");T=ie(l.length)}if(E._useTypedArrays?A=E._augment(new Uint8Array(T)):((A=this).length=T,A._isBuffer=!0),E._useTypedArrays&&typeof l.byteLength=="number")A._set(l);else if(R(X=l)||E.isBuffer(X)||X&&typeof X=="object"&&typeof X.length=="number")for(L=0;L<T;L++)E.isBuffer(l)?A[L]=l.readUInt8(L):A[L]=l[L];else if(ne=="string")A.write(l,0,h);else if(ne=="number"&&!E._useTypedArrays&&!y)for(L=0;L<T;L++)A[L]=0;return A}function S(l,h,y,T){return E._charsWritten=We(function(A){for(var L=[],X=0;X<A.length;X++)L.push(255&A.charCodeAt(X));return L}(h),l,y,T)}function C(l,h,y,T){return E._charsWritten=We(function(A){for(var L,X,ne=[],oe=0;oe<A.length;oe++)X=A.charCodeAt(oe),L=X>>8,X=X%256,ne.push(X),ne.push(L);return ne}(h),l,y,T)}function N(l,h,y){var T="";y=Math.min(l.length,y);for(var A=h;A<y;A++)T+=String.fromCharCode(l[A]);return T}function I(l,h,y,L){L||(D(typeof y=="boolean","missing or invalid endian"),D(h!=null,"missing offset"),D(h+1<l.length,"Trying to read beyond buffer length"));var A,L=l.length;if(!(L<=h))return y?(A=l[h],h+1<L&&(A|=l[h+1]<<8)):(A=l[h]<<8,h+1<L&&(A|=l[h+1])),A}function V(l,h,y,L){L||(D(typeof y=="boolean","missing or invalid endian"),D(h!=null,"missing offset"),D(h+3<l.length,"Trying to read beyond buffer length"));var A,L=l.length;if(!(L<=h))return y?(h+2<L&&(A=l[h+2]<<16),h+1<L&&(A|=l[h+1]<<8),A|=l[h],h+3<L&&(A+=l[h+3]<<24>>>0)):(h+1<L&&(A=l[h+1]<<16),h+2<L&&(A|=l[h+2]<<8),h+3<L&&(A|=l[h+3]),A+=l[h]<<24>>>0),A}function g(l,h,y,T){if(T||(D(typeof y=="boolean","missing or invalid endian"),D(h!=null,"missing offset"),D(h+1<l.length,"Trying to read beyond buffer length")),!(l.length<=h))return T=I(l,h,y,!0),32768&T?-1*(65535-T+1):T}function O(l,h,y,T){if(T||(D(typeof y=="boolean","missing or invalid endian"),D(h!=null,"missing offset"),D(h+3<l.length,"Trying to read beyond buffer length")),!(l.length<=h))return T=V(l,h,y,!0),2147483648&T?-1*(4294967295-T+1):T}function p(l,h,y,T){return T||(D(typeof y=="boolean","missing or invalid endian"),D(h+3<l.length,"Trying to read beyond buffer length")),P.read(l,h,y,23,4)}function m(l,h,y,T){return T||(D(typeof y=="boolean","missing or invalid endian"),D(h+7<l.length,"Trying to read beyond buffer length")),P.read(l,h,y,52,8)}function d(l,h,y,T,A){if(A||(D(h!=null,"missing value"),D(typeof T=="boolean","missing or invalid endian"),D(y!=null,"missing offset"),D(y+1<l.length,"trying to write beyond buffer length"),st(h,65535)),A=l.length,!(A<=y))for(var L=0,X=Math.min(A-y,2);L<X;L++)l[y+L]=(h&255<<8*(T?L:1-L))>>>8*(T?L:1-L)}function _(l,h,y,T,A){if(A||(D(h!=null,"missing value"),D(typeof T=="boolean","missing or invalid endian"),D(y!=null,"missing offset"),D(y+3<l.length,"trying to write beyond buffer length"),st(h,4294967295)),A=l.length,!(A<=y))for(var L=0,X=Math.min(A-y,4);L<X;L++)l[y+L]=h>>>8*(T?L:3-L)&255}function v(l,h,y,T,A){A||(D(h!=null,"missing value"),D(typeof T=="boolean","missing or invalid endian"),D(y!=null,"missing offset"),D(y+1<l.length,"Trying to write beyond buffer length"),Fr(h,32767,-32768)),l.length<=y||d(l,0<=h?h:65535+h+1,y,T,A)}function Y(l,h,y,T,A){A||(D(h!=null,"missing value"),D(typeof T=="boolean","missing or invalid endian"),D(y!=null,"missing offset"),D(y+3<l.length,"Trying to write beyond buffer length"),Fr(h,2147483647,-2147483648)),l.length<=y||_(l,0<=h?h:4294967295+h+1,y,T,A)}function z(l,h,y,T,A){A||(D(h!=null,"missing value"),D(typeof T=="boolean","missing or invalid endian"),D(y!=null,"missing offset"),D(y+3<l.length,"Trying to write beyond buffer length"),Nn(h,34028234663852886e22,-34028234663852886e22)),l.length<=y||P.write(l,h,y,T,23,4)}function J(l,h,y,T,A){A||(D(h!=null,"missing value"),D(typeof T=="boolean","missing or invalid endian"),D(y!=null,"missing offset"),D(y+7<l.length,"Trying to write beyond buffer length"),Nn(h,17976931348623157e292,-17976931348623157e292)),l.length<=y||P.write(l,h,y,T,52,8)}a.Buffer=E,a.SlowBuffer=E,a.INSPECT_MAX_BYTES=50,E.poolSize=8192,E._useTypedArrays=function(){try{var l=new ArrayBuffer(0),h=new Uint8Array(l);return h.foo=function(){return 42},h.foo()===42&&typeof h.subarray=="function"}catch{return!1}}(),E.isEncoding=function(l){switch(String(l).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},E.isBuffer=function(l){return!(l==null||!l._isBuffer)},E.byteLength=function(l,h){var y;switch(l+="",h||"utf8"){case"hex":y=l.length/2;break;case"utf8":case"utf-8":y=F(l).length;break;case"ascii":case"binary":case"raw":y=l.length;break;case"base64":y=ke(l).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":y=2*l.length;break;default:throw new Error("Unknown encoding")}return y},E.concat=function(l,h){if(D(R(l),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),l.length===0)return new E(0);if(l.length===1)return l[0];if(typeof h!="number")for(A=h=0;A<l.length;A++)h+=l[A].length;for(var y=new E(h),T=0,A=0;A<l.length;A++){var L=l[A];L.copy(y,T),T+=L.length}return y},E.prototype.write=function(l,h,y,T){isFinite(h)?isFinite(y)||(T=y,y=void 0):(oe=T,T=h,h=y,y=oe),h=Number(h)||0;var A,L,X,ne,oe=this.length-h;switch((!y||oe<(y=Number(y)))&&(y=oe),T=String(T||"utf8").toLowerCase()){case"hex":A=function(Pe,me,ye,ue){ye=Number(ye)||0;var ae=Pe.length-ye;(!ue||ae<(ue=Number(ue)))&&(ue=ae),D((ae=me.length)%2==0,"Invalid hex string"),ae/2<ue&&(ue=ae/2);for(var it=0;it<ue;it++){var Cn=parseInt(me.substr(2*it,2),16);D(!isNaN(Cn),"Invalid hex string"),Pe[ye+it]=Cn}return E._charsWritten=2*it,it}(this,l,h,y);break;case"utf8":case"utf-8":L=this,X=h,ne=y,A=E._charsWritten=We(F(l),L,X,ne);break;case"ascii":case"binary":A=S(this,l,h,y);break;case"base64":L=this,X=h,ne=y,A=E._charsWritten=We(ke(l),L,X,ne);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":A=C(this,l,h,y);break;default:throw new Error("Unknown encoding")}return A},E.prototype.toString=function(l,h,y){var T,A,L,X,ne=this;if(l=String(l||"utf8").toLowerCase(),h=Number(h)||0,(y=y!==void 0?Number(y):ne.length)===h)return"";switch(l){case"hex":T=function(oe,Pe,me){var ye=oe.length;(!Pe||Pe<0)&&(Pe=0),(!me||me<0||ye<me)&&(me=ye);for(var ue="",ae=Pe;ae<me;ae++)ue+=K(oe[ae]);return ue}(ne,h,y);break;case"utf8":case"utf-8":T=function(oe,Pe,me){var ye="",ue="";me=Math.min(oe.length,me);for(var ae=Pe;ae<me;ae++)oe[ae]<=127?(ye+=Ge(ue)+String.fromCharCode(oe[ae]),ue=""):ue+="%"+oe[ae].toString(16);return ye+Ge(ue)}(ne,h,y);break;case"ascii":case"binary":T=N(ne,h,y);break;case"base64":A=ne,X=y,T=(L=h)===0&&X===A.length?b.fromByteArray(A):b.fromByteArray(A.slice(L,X));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":T=function(oe,Pe,me){for(var ye=oe.slice(Pe,me),ue="",ae=0;ae<ye.length;ae+=2)ue+=String.fromCharCode(ye[ae]+256*ye[ae+1]);return ue}(ne,h,y);break;default:throw new Error("Unknown encoding")}return T},E.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},E.prototype.copy=function(l,h,y,T){if(h=h||0,(T=T||T===0?T:this.length)!==(y=y||0)&&l.length!==0&&this.length!==0){D(y<=T,"sourceEnd < sourceStart"),D(0<=h&&h<l.length,"targetStart out of bounds"),D(0<=y&&y<this.length,"sourceStart out of bounds"),D(0<=T&&T<=this.length,"sourceEnd out of bounds"),T>this.length&&(T=this.length);var A=(T=l.length-h<T-y?l.length-h+y:T)-y;if(A<100||!E._useTypedArrays)for(var L=0;L<A;L++)l[L+h]=this[L+y];else l._set(this.subarray(y,y+A),h)}},E.prototype.slice=function(l,h){var y=this.length;if(l=te(l,y,0),h=te(h,y,y),E._useTypedArrays)return E._augment(this.subarray(l,h));for(var T=h-l,A=new E(T,void 0,!0),L=0;L<T;L++)A[L]=this[L+l];return A},E.prototype.get=function(l){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(l)},E.prototype.set=function(l,h){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(l,h)},E.prototype.readUInt8=function(l,h){if(h||(D(l!=null,"missing offset"),D(l<this.length,"Trying to read beyond buffer length")),!(l>=this.length))return this[l]},E.prototype.readUInt16LE=function(l,h){return I(this,l,!0,h)},E.prototype.readUInt16BE=function(l,h){return I(this,l,!1,h)},E.prototype.readUInt32LE=function(l,h){return V(this,l,!0,h)},E.prototype.readUInt32BE=function(l,h){return V(this,l,!1,h)},E.prototype.readInt8=function(l,h){if(h||(D(l!=null,"missing offset"),D(l<this.length,"Trying to read beyond buffer length")),!(l>=this.length))return 128&this[l]?-1*(255-this[l]+1):this[l]},E.prototype.readInt16LE=function(l,h){return g(this,l,!0,h)},E.prototype.readInt16BE=function(l,h){return g(this,l,!1,h)},E.prototype.readInt32LE=function(l,h){return O(this,l,!0,h)},E.prototype.readInt32BE=function(l,h){return O(this,l,!1,h)},E.prototype.readFloatLE=function(l,h){return p(this,l,!0,h)},E.prototype.readFloatBE=function(l,h){return p(this,l,!1,h)},E.prototype.readDoubleLE=function(l,h){return m(this,l,!0,h)},E.prototype.readDoubleBE=function(l,h){return m(this,l,!1,h)},E.prototype.writeUInt8=function(l,h,y){y||(D(l!=null,"missing value"),D(h!=null,"missing offset"),D(h<this.length,"trying to write beyond buffer length"),st(l,255)),h>=this.length||(this[h]=l)},E.prototype.writeUInt16LE=function(l,h,y){d(this,l,h,!0,y)},E.prototype.writeUInt16BE=function(l,h,y){d(this,l,h,!1,y)},E.prototype.writeUInt32LE=function(l,h,y){_(this,l,h,!0,y)},E.prototype.writeUInt32BE=function(l,h,y){_(this,l,h,!1,y)},E.prototype.writeInt8=function(l,h,y){y||(D(l!=null,"missing value"),D(h!=null,"missing offset"),D(h<this.length,"Trying to write beyond buffer length"),Fr(l,127,-128)),h>=this.length||(0<=l?this.writeUInt8(l,h,y):this.writeUInt8(255+l+1,h,y))},E.prototype.writeInt16LE=function(l,h,y){v(this,l,h,!0,y)},E.prototype.writeInt16BE=function(l,h,y){v(this,l,h,!1,y)},E.prototype.writeInt32LE=function(l,h,y){Y(this,l,h,!0,y)},E.prototype.writeInt32BE=function(l,h,y){Y(this,l,h,!1,y)},E.prototype.writeFloatLE=function(l,h,y){z(this,l,h,!0,y)},E.prototype.writeFloatBE=function(l,h,y){z(this,l,h,!1,y)},E.prototype.writeDoubleLE=function(l,h,y){J(this,l,h,!0,y)},E.prototype.writeDoubleBE=function(l,h,y){J(this,l,h,!1,y)},E.prototype.fill=function(l,h,y){if(h=h||0,y=y||this.length,D(typeof(l=typeof(l=l||0)=="string"?l.charCodeAt(0):l)=="number"&&!isNaN(l),"value is not a number"),D(h<=y,"end < start"),y!==h&&this.length!==0){D(0<=h&&h<this.length,"start out of bounds"),D(0<=y&&y<=this.length,"end out of bounds");for(var T=h;T<y;T++)this[T]=l}},E.prototype.inspect=function(){for(var l=[],h=this.length,y=0;y<h;y++)if(l[y]=K(this[y]),y===a.INSPECT_MAX_BYTES){l[y+1]="...";break}return"<Buffer "+l.join(" ")+">"},E.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(E._useTypedArrays)return new E(this).buffer;for(var l=new Uint8Array(this.length),h=0,y=l.length;h<y;h+=1)l[h]=this[h];return l.buffer};var B=E.prototype;function te(l,h,y){return typeof l!="number"?y:h<=(l=~~l)?h:0<=l||0<=(l+=h)?l:0}function ie(l){return(l=~~Math.ceil(+l))<0?0:l}function R(l){return(Array.isArray||function(h){return Object.prototype.toString.call(h)==="[object Array]"})(l)}function K(l){return l<16?"0"+l.toString(16):l.toString(16)}function F(l){for(var h=[],y=0;y<l.length;y++){var T=l.charCodeAt(y);if(T<=127)h.push(l.charCodeAt(y));else for(var A=y,L=(55296<=T&&T<=57343&&y++,encodeURIComponent(l.slice(A,y+1)).substr(1).split("%")),X=0;X<L.length;X++)h.push(parseInt(L[X],16))}return h}function ke(l){return b.toByteArray(l)}function We(l,h,y,T){for(var A=0;A<T&&!(A+y>=h.length||A>=l.length);A++)h[A+y]=l[A];return A}function Ge(l){try{return decodeURIComponent(l)}catch{return String.fromCharCode(65533)}}function st(l,h){D(typeof l=="number","cannot write a non-number as a number"),D(0<=l,"specified a negative value for writing an unsigned value"),D(l<=h,"value is larger than maximum value for type"),D(Math.floor(l)===l,"value has a fractional component")}function Fr(l,h,y){D(typeof l=="number","cannot write a non-number as a number"),D(l<=h,"value larger than maximum allowed value"),D(y<=l,"value smaller than minimum allowed value"),D(Math.floor(l)===l,"value has a fractional component")}function Nn(l,h,y){D(typeof l=="number","cannot write a non-number as a number"),D(l<=h,"value larger than maximum allowed value"),D(y<=l,"value smaller than minimum allowed value")}function D(l,h){if(!l)throw new Error(h||"Failed assertion")}E._augment=function(l){return l._isBuffer=!0,l._get=l.get,l._set=l.set,l.get=B.get,l.set=B.set,l.write=B.write,l.toString=B.toString,l.toLocaleString=B.toString,l.toJSON=B.toJSON,l.copy=B.copy,l.slice=B.slice,l.readUInt8=B.readUInt8,l.readUInt16LE=B.readUInt16LE,l.readUInt16BE=B.readUInt16BE,l.readUInt32LE=B.readUInt32LE,l.readUInt32BE=B.readUInt32BE,l.readInt8=B.readInt8,l.readInt16LE=B.readInt16LE,l.readInt16BE=B.readInt16BE,l.readInt32LE=B.readInt32LE,l.readInt32BE=B.readInt32BE,l.readFloatLE=B.readFloatLE,l.readFloatBE=B.readFloatBE,l.readDoubleLE=B.readDoubleLE,l.readDoubleBE=B.readDoubleBE,l.writeUInt8=B.writeUInt8,l.writeUInt16LE=B.writeUInt16LE,l.writeUInt16BE=B.writeUInt16BE,l.writeUInt32LE=B.writeUInt32LE,l.writeUInt32BE=B.writeUInt32BE,l.writeInt8=B.writeInt8,l.writeInt16LE=B.writeInt16LE,l.writeInt16BE=B.writeInt16BE,l.writeInt32LE=B.writeInt32LE,l.writeInt32BE=B.writeInt32BE,l.writeFloatLE=B.writeFloatLE,l.writeFloatBE=B.writeFloatBE,l.writeDoubleLE=B.writeDoubleLE,l.writeDoubleBE=B.writeDoubleBE,l.fill=B.fill,l.inspect=B.inspect,l.toArrayBuffer=B.toArrayBuffer,l}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(t,n,a){(function(s,i,b,u,c,f,w,j,U){var b=t("buffer").Buffer,P=4,E=new b(P);E.fill(0),n.exports={hash:function(S,C,N,I){for(var V=C(function(d,_){d.length%P!=0&&(v=d.length+(P-d.length%P),d=b.concat([d,E],v));for(var v,Y=[],z=_?d.readInt32BE:d.readInt32LE,J=0;J<d.length;J+=P)Y.push(z.call(d,J));return Y}(S=b.isBuffer(S)?S:new b(S),I),8*S.length),C=I,g=new b(N),O=C?g.writeInt32BE:g.writeInt32LE,p=0;p<V.length;p++)O.call(g,V[p],4*p,!0);return g}}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(t,n,a){(function(s,i,b,u,c,f,w,j,U){var b=t("buffer").Buffer,P=t("./sha"),E=t("./sha256"),S=t("./rng"),C={sha1:P,sha256:E,md5:t("./md5")},N=64,I=new b(N);function V(d,_){var v=C[d=d||"sha1"],Y=[];return v||g("algorithm:",d,"is not yet supported"),{update:function(z){return b.isBuffer(z)||(z=new b(z)),Y.push(z),z.length,this},digest:function(z){var J=b.concat(Y),J=_?function(B,te,ie){b.isBuffer(te)||(te=new b(te)),b.isBuffer(ie)||(ie=new b(ie)),te.length>N?te=B(te):te.length<N&&(te=b.concat([te,I],N));for(var R=new b(N),K=new b(N),F=0;F<N;F++)R[F]=54^te[F],K[F]=92^te[F];return ie=B(b.concat([R,ie])),B(b.concat([K,ie]))}(v,_,J):v(J);return Y=null,z?J.toString(z):J}}}function g(){var d=[].slice.call(arguments).join(" ");throw new Error([d,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}I.fill(0),a.createHash=function(d){return V(d)},a.createHmac=V,a.randomBytes=function(d,_){if(!_||!_.call)return new b(S(d));try{_.call(this,void 0,new b(S(d)))}catch(v){_(v)}};var O,p=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],m=function(d){a[d]=function(){g("sorry,",d,"is not implemented yet")}};for(O in p)m(p[O])}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(t,n,a){(function(s,i,o,u,c,f,w,j,U){var b=t("./helpers");function P(g,O){g[O>>5]|=128<<O%32,g[14+(O+64>>>9<<4)]=O;for(var p=1732584193,m=-271733879,d=-1732584194,_=271733878,v=0;v<g.length;v+=16){var Y=p,z=m,J=d,B=_,p=S(p,m,d,_,g[v+0],7,-680876936),_=S(_,p,m,d,g[v+1],12,-389564586),d=S(d,_,p,m,g[v+2],17,606105819),m=S(m,d,_,p,g[v+3],22,-1044525330);p=S(p,m,d,_,g[v+4],7,-176418897),_=S(_,p,m,d,g[v+5],12,1200080426),d=S(d,_,p,m,g[v+6],17,-1473231341),m=S(m,d,_,p,g[v+7],22,-45705983),p=S(p,m,d,_,g[v+8],7,1770035416),_=S(_,p,m,d,g[v+9],12,-1958414417),d=S(d,_,p,m,g[v+10],17,-42063),m=S(m,d,_,p,g[v+11],22,-1990404162),p=S(p,m,d,_,g[v+12],7,1804603682),_=S(_,p,m,d,g[v+13],12,-40341101),d=S(d,_,p,m,g[v+14],17,-1502002290),p=C(p,m=S(m,d,_,p,g[v+15],22,1236535329),d,_,g[v+1],5,-165796510),_=C(_,p,m,d,g[v+6],9,-1069501632),d=C(d,_,p,m,g[v+11],14,643717713),m=C(m,d,_,p,g[v+0],20,-373897302),p=C(p,m,d,_,g[v+5],5,-701558691),_=C(_,p,m,d,g[v+10],9,38016083),d=C(d,_,p,m,g[v+15],14,-660478335),m=C(m,d,_,p,g[v+4],20,-405537848),p=C(p,m,d,_,g[v+9],5,568446438),_=C(_,p,m,d,g[v+14],9,-1019803690),d=C(d,_,p,m,g[v+3],14,-187363961),m=C(m,d,_,p,g[v+8],20,1163531501),p=C(p,m,d,_,g[v+13],5,-1444681467),_=C(_,p,m,d,g[v+2],9,-51403784),d=C(d,_,p,m,g[v+7],14,1735328473),p=N(p,m=C(m,d,_,p,g[v+12],20,-1926607734),d,_,g[v+5],4,-378558),_=N(_,p,m,d,g[v+8],11,-2022574463),d=N(d,_,p,m,g[v+11],16,1839030562),m=N(m,d,_,p,g[v+14],23,-35309556),p=N(p,m,d,_,g[v+1],4,-1530992060),_=N(_,p,m,d,g[v+4],11,1272893353),d=N(d,_,p,m,g[v+7],16,-155497632),m=N(m,d,_,p,g[v+10],23,-1094730640),p=N(p,m,d,_,g[v+13],4,681279174),_=N(_,p,m,d,g[v+0],11,-358537222),d=N(d,_,p,m,g[v+3],16,-722521979),m=N(m,d,_,p,g[v+6],23,76029189),p=N(p,m,d,_,g[v+9],4,-640364487),_=N(_,p,m,d,g[v+12],11,-421815835),d=N(d,_,p,m,g[v+15],16,530742520),p=I(p,m=N(m,d,_,p,g[v+2],23,-995338651),d,_,g[v+0],6,-198630844),_=I(_,p,m,d,g[v+7],10,1126891415),d=I(d,_,p,m,g[v+14],15,-1416354905),m=I(m,d,_,p,g[v+5],21,-57434055),p=I(p,m,d,_,g[v+12],6,1700485571),_=I(_,p,m,d,g[v+3],10,-1894986606),d=I(d,_,p,m,g[v+10],15,-1051523),m=I(m,d,_,p,g[v+1],21,-2054922799),p=I(p,m,d,_,g[v+8],6,1873313359),_=I(_,p,m,d,g[v+15],10,-30611744),d=I(d,_,p,m,g[v+6],15,-1560198380),m=I(m,d,_,p,g[v+13],21,1309151649),p=I(p,m,d,_,g[v+4],6,-145523070),_=I(_,p,m,d,g[v+11],10,-1120210379),d=I(d,_,p,m,g[v+2],15,718787259),m=I(m,d,_,p,g[v+9],21,-343485551),p=V(p,Y),m=V(m,z),d=V(d,J),_=V(_,B)}return Array(p,m,d,_)}function E(g,O,p,m,d,_){return V((O=V(V(O,g),V(m,_)))<<d|O>>>32-d,p)}function S(g,O,p,m,d,_,v){return E(O&p|~O&m,g,O,d,_,v)}function C(g,O,p,m,d,_,v){return E(O&m|p&~m,g,O,d,_,v)}function N(g,O,p,m,d,_,v){return E(O^p^m,g,O,d,_,v)}function I(g,O,p,m,d,_,v){return E(p^(O|~m),g,O,d,_,v)}function V(g,O){var p=(65535&g)+(65535&O);return(g>>16)+(O>>16)+(p>>16)<<16|65535&p}n.exports=function(g){return b.hash(g,P,16)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(t,n,a){(function(s,i,o,u,c,f,w,j,U){n.exports=function(b){for(var P,E=new Array(b),S=0;S<b;S++)!(3&S)&&(P=4294967296*Math.random()),E[S]=P>>>((3&S)<<3)&255;return E}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(t,n,a){(function(s,i,o,u,c,f,w,j,U){var b=t("./helpers");function P(C,N){C[N>>5]|=128<<24-N%32,C[15+(N+64>>9<<4)]=N;for(var I,V,g,O=Array(80),p=1732584193,m=-271733879,d=-1732584194,_=271733878,v=-1009589776,Y=0;Y<C.length;Y+=16){for(var z=p,J=m,B=d,te=_,ie=v,R=0;R<80;R++){O[R]=R<16?C[Y+R]:S(O[R-3]^O[R-8]^O[R-14]^O[R-16],1);var K=E(E(S(p,5),(K=m,V=d,g=_,(I=R)<20?K&V|~K&g:!(I<40)&&I<60?K&V|K&g|V&g:K^V^g)),E(E(v,O[R]),(I=R)<20?1518500249:I<40?1859775393:I<60?-1894007588:-899497514)),v=_,_=d,d=S(m,30),m=p,p=K}p=E(p,z),m=E(m,J),d=E(d,B),_=E(_,te),v=E(v,ie)}return Array(p,m,d,_,v)}function E(C,N){var I=(65535&C)+(65535&N);return(C>>16)+(N>>16)+(I>>16)<<16|65535&I}function S(C,N){return C<<N|C>>>32-N}n.exports=function(C){return b.hash(C,P,20,!0)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(t,n,a){(function(s,i,o,u,c,f,w,j,U){function b(N,I){var V=(65535&N)+(65535&I);return(N>>16)+(I>>16)+(V>>16)<<16|65535&V}function P(N,I){var V,g=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),O=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),p=new Array(64);N[I>>5]|=128<<24-I%32,N[15+(I+64>>9<<4)]=I;for(var m,d,_=0;_<N.length;_+=16){for(var v=O[0],Y=O[1],z=O[2],J=O[3],B=O[4],te=O[5],ie=O[6],R=O[7],K=0;K<64;K++)p[K]=K<16?N[K+_]:b(b(b((d=p[K-2],S(d,17)^S(d,19)^C(d,10)),p[K-7]),(d=p[K-15],S(d,7)^S(d,18)^C(d,3))),p[K-16]),V=b(b(b(b(R,S(d=B,6)^S(d,11)^S(d,25)),B&te^~B&ie),g[K]),p[K]),m=b(S(m=v,2)^S(m,13)^S(m,22),v&Y^v&z^Y&z),R=ie,ie=te,te=B,B=b(J,V),J=z,z=Y,Y=v,v=b(V,m);O[0]=b(v,O[0]),O[1]=b(Y,O[1]),O[2]=b(z,O[2]),O[3]=b(J,O[3]),O[4]=b(B,O[4]),O[5]=b(te,O[5]),O[6]=b(ie,O[6]),O[7]=b(R,O[7])}return O}var E=t("./helpers"),S=function(N,I){return N>>>I|N<<32-I},C=function(N,I){return N>>>I};n.exports=function(N){return E.hash(N,P,32,!0)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(t,n,a){(function(s,i,o,u,c,f,w,j,U){a.read=function(b,P,E,S,_){var N,I,V=8*_-S-1,g=(1<<V)-1,O=g>>1,p=-7,m=E?_-1:0,d=E?-1:1,_=b[P+m];for(m+=d,N=_&(1<<-p)-1,_>>=-p,p+=V;0<p;N=256*N+b[P+m],m+=d,p-=8);for(I=N&(1<<-p)-1,N>>=-p,p+=S;0<p;I=256*I+b[P+m],m+=d,p-=8);if(N===0)N=1-O;else{if(N===g)return I?NaN:1/0*(_?-1:1);I+=Math.pow(2,S),N-=O}return(_?-1:1)*I*Math.pow(2,N-S)},a.write=function(b,P,E,S,C,v){var I,V,g=8*v-C-1,O=(1<<g)-1,p=O>>1,m=C===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=S?0:v-1,_=S?1:-1,v=P<0||P===0&&1/P<0?1:0;for(P=Math.abs(P),isNaN(P)||P===1/0?(V=isNaN(P)?1:0,I=O):(I=Math.floor(Math.log(P)/Math.LN2),P*(S=Math.pow(2,-I))<1&&(I--,S*=2),2<=(P+=1<=I+p?m/S:m*Math.pow(2,1-p))*S&&(I++,S/=2),O<=I+p?(V=0,I=O):1<=I+p?(V=(P*S-1)*Math.pow(2,C),I+=p):(V=P*Math.pow(2,p-1)*Math.pow(2,C),I=0));8<=C;b[E+d]=255&V,d+=_,V/=256,C-=8);for(I=I<<C|V,g+=C;0<g;b[E+d]=255&I,d+=_,I/=256,g-=8);b[E+d-_]|=128*v}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(t,n,a){(function(s,i,o,u,c,f,w,j,U){var b,P,E;function S(){}(s=n.exports={}).nextTick=(P=typeof window<"u"&&window.setImmediate,E=typeof window<"u"&&window.postMessage&&window.addEventListener,P?function(C){return window.setImmediate(C)}:E?(b=[],window.addEventListener("message",function(C){var N=C.source;N!==window&&N!==null||C.data!=="process-tick"||(C.stopPropagation(),0<b.length&&b.shift()())},!0),function(C){b.push(C),window.postMessage("process-tick","*")}):function(C){setTimeout(C,0)}),s.title="browser",s.browser=!0,s.env={},s.argv=[],s.on=S,s.addListener=S,s.once=S,s.off=S,s.removeListener=S,s.removeAllListeners=S,s.emit=S,s.binding=function(C){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(C){throw new Error("process.chdir is not supported")}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)})})(ei);var ld=ei.exports;const dd=Sa(ld),Oa=(...r)=>dd(r.join("_")),fd=new Map;class jn extends ui{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,t){return Promise.resolve(this.cache.get(Oa(e,t))??null)}async update(e,t,n){this.cache.set(Oa(e,t),n)}static global(){return new jn(fd)}}class pd extends es{constructor({cache:e,concurrency:t,...n}){super(t?{maxConcurrency:t,...n}:n),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","llms",this._llmType()]}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof e=="object"?this.cache=e:e?this.cache=jn.global():this.cache=void 0}async generatePrompt(e,t,n){const a=e.map(s=>s.toString());return this.generate(a,t,n)}invocationParams(e){return{}}_flattenLLMResult(e){const t=[];for(let n=0;n<e.generations.length;n+=1){const a=e.generations[n];if(n===0)t.push({generations:[a],llmOutput:e.llmOutput});else{const s=e.llmOutput?{...e.llmOutput,tokenUsage:{}}:void 0;t.push({generations:[a],llmOutput:s})}}return t}async _generateUncached(e,t,n){const a=await ze.configure(n.callbacks,this.callbacks,n.tags,this.tags,n.metadata,this.metadata,{verbose:this.verbose}),s={options:t,invocation_params:this==null?void 0:this.invocationParams(t)},i=await(a==null?void 0:a.handleLLMStart(this.toJSON(),e,void 0,void 0,s));let o;try{o=await this._generate(e,t,i==null?void 0:i[0])}catch(f){throw await Promise.all((i??[]).map(w=>w==null?void 0:w.handleLLMError(f))),f}const u=this._flattenLLMResult(o);await Promise.all((i??[]).map((f,w)=>f==null?void 0:f.handleLLMEnd(u[w])));const c=(i==null?void 0:i.map(f=>f.runId))||void 0;return Object.defineProperty(o,Pa,{value:c?{runIds:c}:void 0,configurable:!0}),o}async generate(e,t,n){if(!Array.isArray(e))throw new Error("Argument 'prompts' is expected to be a string[]");let a;Array.isArray(t)?a={stop:t}:t!=null&&t.timeout&&!t.signal?a={...t,signal:AbortSignal.timeout(t.timeout)}:a=t??{};const s={tags:a.tags,metadata:a.metadata,callbacks:a.callbacks??n};if(delete a.tags,delete a.metadata,delete a.callbacks,!this.cache)return this._generateUncached(e,a,s);const{cache:i}=this,o=this.serialize();o.stop=a.stop??o.stop;const u=`${Object.entries(o).sort()}`,c=[],f=await Promise.all(e.map(async(j,U)=>{const b=await i.lookup(j,u);return b||c.push(U),b}));let w={};if(c.length>0){const j=await this._generateUncached(c.map(U=>e[U]),a,s);await Promise.all(j.generations.map(async(U,b)=>{const P=c[b];return f[P]=U,i.update(e[P],u,U)})),w=j.llmOutput??{}}return{generations:f,llmOutput:w}}async call(e,t,n){const{generations:a}=await this.generate([e],t??{},n);return a[0][0].text}async predict(e,t,n){return this.call(e,t,n)}async predictMessages(e,t,n){const a=mn(e),s=await this.call(a,t,n);return new ci(s)}_identifyingParams(){return{}}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}_modelType(){return"base_llm"}static async deserialize(e){const{_type:t,_model:n,...a}=e;if(n&&n!=="base_llm")throw new Error(`Cannot load LLM with model ${n}`);const s={openai:(await ge(()=>import("./openai.1d2ff7b8.js"),["_app/immutable/chunks/openai.1d2ff7b8.js","_app/immutable/chunks/_commonjs-dynamic-modules.5fcb8f34.js","_app/immutable/chunks/public.79d73255.js","_app/immutable/chunks/NavBar.74969093.js","_app/immutable/chunks/scheduler.2364b0ad.js","_app/immutable/chunks/index.e0615928.js","_app/immutable/chunks/globals.7f7f1b26.js","_app/immutable/assets/NavBar.ffbd0f32.css","_app/immutable/chunks/prompt-layer.00daf386.js"])).OpenAI}[t];if(s===void 0)throw new Error(`Cannot load  LLM with type ${t}`);return new s(a)}}class hd extends pd{async _generate(e,t,n){return{generations:await Promise.all(e.map((s,i)=>this._call(s,{...t,promptIndex:i},n).then(o=>[{text:o}])))}}}class In extends hd{get lc_secrets(){return{apiKey:"HUGGINGFACEHUB_API_KEY"}}constructor(e){if(super(e??{}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"gpt2"}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topK",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.model=(e==null?void 0:e.model)??this.model,this.temperature=(e==null?void 0:e.temperature)??this.temperature,this.maxTokens=(e==null?void 0:e.maxTokens)??this.maxTokens,this.topP=(e==null?void 0:e.topP)??this.topP,this.topK=(e==null?void 0:e.topK)??this.topK,this.frequencyPenalty=(e==null?void 0:e.frequencyPenalty)??this.frequencyPenalty,this.apiKey=(e==null?void 0:e.apiKey)??le("HUGGINGFACEHUB_API_KEY"),!this.apiKey)throw new Error("Please set an API key for HuggingFace Hub in the environment variable HUGGINGFACEHUB_API_KEY or in the apiKey field of the HuggingFaceInference constructor.")}_llmType(){return"hf"}async _call(e,t){const{HfInference:n}=await In.imports(),a=new n(this.apiKey);return(await this.caller.callWithOptions({signal:t.signal},a.textGeneration.bind(a),{model:this.model,parameters:{return_full_text:!1,temperature:this.temperature,max_new_tokens:this.maxTokens,top_p:this.topP,top_k:this.topK,repetition_penalty:this.frequencyPenalty},inputs:e})).generated_text}static async imports(){try{const{HfInference:e}=await ge(()=>import("./NavBar.74969093.js").then(t=>t.k),["_app/immutable/chunks/NavBar.74969093.js","_app/immutable/chunks/public.79d73255.js","_app/immutable/chunks/scheduler.2364b0ad.js","_app/immutable/chunks/index.e0615928.js","_app/immutable/chunks/globals.7f7f1b26.js","_app/immutable/assets/NavBar.ffbd0f32.css"]);return{HfInference:e}}catch{throw new Error("Please install huggingface as a dependency with, e.g. `yarn add @huggingface/inference`")}}}async function wd(r,e,t,n,a){const s=a;console.log("model",t);const i=new In({apiKey:r,model:"tiiuae/falcon-7b-instruct",maxTokens:5e3}),o=pi(mi,hi);let u=new li({apiKey:yi});const f=await new di(u,{client:o,tableName:"documents"}).similaritySearch(s);console.log(f.length),console.log(f);try{let{data:U,error:b}=await o.from("documents").select("content");b&&console.error("Error fetching data:",b.message),U.length===0&&console.log("No data found in the table.");const P=U[0].content;console.log("contentValue",P)}catch(U){console.error("Error fetching data:",U.message)}const w=ec(i);console.log("relevantDocs",f);const j=await w.call({input_documents:f,question:s});return console.log("result",j),console.log(j.text),j.text}export{pd as B,ze as C,hd as L,bd as O,Ie as P,nu as a,_d as b,wd as c,Tr as d,qe as e,Qo as f,au as g,Nu as h,Uu as i,es as j,Xa as k,ec as l,rs as r,et as v,pc as z};
