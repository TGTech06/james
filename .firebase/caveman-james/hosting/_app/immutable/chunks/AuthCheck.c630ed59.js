var xe=Object.defineProperty;var Se=(r,e,t)=>e in r?xe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var L=(r,e,t)=>(Se(r,typeof e!="symbol"?e+"":e,t),t);import{g as ue,c as Q,P as K,a as X}from"./public.8bae8052.js";import{s as ke,o as H,b as G,e as Pe,d as A,n as V,u as qe,g as Re,f as Ne}from"./scheduler.744affc9.js";import{S as je,i as Le,d as P,v as Ve,e as Y,a as M,r as De,t as U,b as ze,f as B,g as I,j as C,s as Z,k as O,l as k,A as D,c as ee,m as b,z as E}from"./index.42e20cb7.js";import{g as $e}from"./globals.7f7f1b26.js";class te{constructor(e){Object.defineProperty(this,"pageContent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.pageContent=e.pageContent?e.pageContent.toString():this.pageContent,this.metadata=e.metadata??{}}}var q={exports:{}},ce={};function g(r,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(r)),this._timeouts=r,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var Ue=g;g.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};g.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};g.prototype.retry=function(r){if(this._timeout&&clearTimeout(this._timeout),!r)return!1;var e=new Date().getTime();if(r&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(r),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(r);var t=this._timeouts.shift();if(t===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),t=this._cachedTimeouts.slice(-1);else return!1;var n=this;return this._timer=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},t),this._options.unref&&this._timer.unref(),!0};g.prototype.attempt=function(r,e){this._fn=r,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var t=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){t._operationTimeoutCb()},t._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};g.prototype.try=function(r){console.log("Using RetryOperation.try() is deprecated"),this.attempt(r)};g.prototype.start=function(r){console.log("Using RetryOperation.start() is deprecated"),this.attempt(r)};g.prototype.start=g.prototype.try;g.prototype.errors=function(){return this._errors};g.prototype.attempts=function(){return this._attempts};g.prototype.mainError=function(){if(this._errors.length===0)return null;for(var r={},e=null,t=0,n=0;n<this._errors.length;n++){var s=this._errors[n],i=s.message,o=(r[i]||0)+1;r[i]=o,o>=t&&(e=s,t=o)}return e};(function(r){var e=Ue;r.operation=function(t){var n=r.timeouts(t);return new e(n,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})},r.timeouts=function(t){if(t instanceof Array)return[].concat(t);var n={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var s in t)n[s]=t[s];if(n.minTimeout>n.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var i=[],o=0;o<n.retries;o++)i.push(this.createTimeout(o,n));return t&&t.forever&&!i.length&&i.push(this.createTimeout(o,n)),i.sort(function(a,l){return a-l}),i},r.createTimeout=function(t,n){var s=n.randomize?Math.random()+1:1,i=Math.round(s*Math.max(n.minTimeout,1)*Math.pow(n.factor,t));return i=Math.min(i,n.maxTimeout),i},r.wrap=function(t,n,s){if(n instanceof Array&&(s=n,n=null),!s){s=[];for(var i in t)typeof t[i]=="function"&&s.push(i)}for(var o=0;o<s.length;o++){var a=s[o],l=t[a];t[a]=(function(c){var f=r.operation(n),p=Array.prototype.slice.call(arguments,1),m=p.pop();p.push(function(d){f.retry(d)||(d&&(arguments[0]=f.mainError()),m.apply(this,arguments))}),f.attempt(function(){c.apply(t,p)})}).bind(t,l),t[a].options=n}}})(ce);var Be=ce;const Je=Be,Me=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class le extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const Fe=(r,e,t)=>{const n=t.retries-(e-1);return r.attemptNumber=e,r.retriesLeft=n,r},We=r=>Me.includes(r),fe=(r,e)=>new Promise((t,n)=>{e={onFailedAttempt:()=>{},retries:10,...e};const s=Je.operation(e);s.attempt(async i=>{try{t(await r(i))}catch(o){if(!(o instanceof Error)){n(new TypeError(`Non-error was thrown: "${o}". You should only throw errors.`));return}if(o instanceof le)s.stop(),n(o.originalError);else if(o instanceof TypeError&&!We(o.message))s.stop(),n(o);else{Fe(o,i,e);try{await e.onFailedAttempt(o)}catch(a){n(a);return}s.retry(o)||n(s.mainError())}}})});q.exports=fe;q.exports.default=fe;q.exports.AbortError=le;var Qe=q.exports;const Ke=ue(Qe);var he={},de={exports:{}};(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function s(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function i(l,u,c,f,p){if(typeof c!="function")throw new TypeError("The listener must be a function");var m=new s(c,f||l,p),d=t?t+u:u;return l._events[d]?l._events[d].fn?l._events[d]=[l._events[d],m]:l._events[d].push(m):(l._events[d]=m,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],c,f;if(this._eventsCount===0)return u;for(f in c=this._events)e.call(c,f)&&u.push(t?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},a.prototype.listeners=function(u){var c=t?t+u:u,f=this._events[c];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,m=f.length,d=new Array(m);p<m;p++)d[p]=f[p].fn;return d},a.prototype.listenerCount=function(u){var c=t?t+u:u,f=this._events[c];return f?f.fn?1:f.length:0},a.prototype.emit=function(u,c,f,p,m,d){var _=t?t+u:u;if(!this._events[_])return!1;var h=this._events[_],v=arguments.length,w,y;if(h.fn){switch(h.once&&this.removeListener(u,h.fn,void 0,!0),v){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,c),!0;case 3:return h.fn.call(h.context,c,f),!0;case 4:return h.fn.call(h.context,c,f,p),!0;case 5:return h.fn.call(h.context,c,f,p,m),!0;case 6:return h.fn.call(h.context,c,f,p,m,d),!0}for(y=1,w=new Array(v-1);y<v;y++)w[y-1]=arguments[y];h.fn.apply(h.context,w)}else{var Ie=h.length,x;for(y=0;y<Ie;y++)switch(h[y].once&&this.removeListener(u,h[y].fn,void 0,!0),v){case 1:h[y].fn.call(h[y].context);break;case 2:h[y].fn.call(h[y].context,c);break;case 3:h[y].fn.call(h[y].context,c,f);break;case 4:h[y].fn.call(h[y].context,c,f,p);break;default:if(!w)for(x=1,w=new Array(v-1);x<v;x++)w[x-1]=arguments[x];h[y].fn.apply(h[y].context,w)}}return!0},a.prototype.on=function(u,c,f){return i(this,u,c,f,!1)},a.prototype.once=function(u,c,f){return i(this,u,c,f,!0)},a.prototype.removeListener=function(u,c,f,p){var m=t?t+u:u;if(!this._events[m])return this;if(!c)return o(this,m),this;var d=this._events[m];if(d.fn)d.fn===c&&(!p||d.once)&&(!f||d.context===f)&&o(this,m);else{for(var _=0,h=[],v=d.length;_<v;_++)(d[_].fn!==c||p&&!d[_].once||f&&d[_].context!==f)&&h.push(d[_]);h.length?this._events[m]=h.length===1?h[0]:h:o(this,m)}return this},a.prototype.removeAllListeners=function(u){var c;return u?(c=t?t+u:u,this._events[c]&&o(this,c)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,r.exports=a})(de);var Xe=de.exports,R={exports:{}},He=(r,e)=>(e=e||(()=>{}),r.then(t=>new Promise(n=>{n(e())}).then(()=>t),t=>new Promise(n=>{n(e())}).then(()=>{throw t})));const Ge=He;class pe extends Error{constructor(e){super(e),this.name="TimeoutError"}}const me=(r,e,t)=>new Promise((n,s)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){n(r);return}const i=setTimeout(()=>{if(typeof t=="function"){try{n(t())}catch(l){s(l)}return}const o=typeof t=="string"?t:`Promise timed out after ${e} milliseconds`,a=t instanceof Error?t:new pe(o);typeof r.cancel=="function"&&r.cancel(),s(a)},e);Ge(r.then(n,s),()=>{clearTimeout(i)})});R.exports=me;R.exports.default=me;R.exports.TimeoutError=pe;var Ye=R.exports,F={},W={};Object.defineProperty(W,"__esModule",{value:!0});function Ze(r,e,t){let n=0,s=r.length;for(;s>0;){const i=s/2|0;let o=n+i;t(r[o],e)<=0?(n=++o,s-=i+1):s=i}return n}W.default=Ze;Object.defineProperty(F,"__esModule",{value:!0});const et=W;class tt{constructor(){this._queue=[]}enqueue(e,t){t=Object.assign({priority:0},t);const n={priority:t.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority){this._queue.push(n);return}const s=et.default(this._queue,n,(i,o)=>o.priority-i.priority);this._queue.splice(s,0,n)}dequeue(){const e=this._queue.shift();return e==null?void 0:e.run}filter(e){return this._queue.filter(t=>t.priority===e.priority).map(t=>t.run)}get size(){return this._queue.length}}F.default=tt;Object.defineProperty(he,"__esModule",{value:!0});const rt=Xe,ye=Ye,nt=F,S=()=>{},st=new ye.TimeoutError;class it extends rt{constructor(e){var t,n,s,i;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=S,this._resolveIdle=S,e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:nt.default},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(t=e.intervalCap)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(i=(s=e.interval)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=S,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=S,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(this._intervalId===void 0){const t=this._intervalEnd-e;if(t<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},t)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const t=this._queue.dequeue();return t?(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise((n,s)=>{const i=async()=>{this._pendingCount++,this._intervalCount++;try{const o=this._timeout===void 0&&t.timeout===void 0?e():ye.default(Promise.resolve(e()),t.timeout===void 0?this._timeout:t.timeout,()=>{(t.throwOnTimeout===void 0?this._throwOnTimeout:t.throwOnTimeout)&&s(st)});n(await o)}catch(o){s(o)}this._next()};this._queue.enqueue(i,t),this._tryToStartAnother(),this.emit("add")})}async addAll(e,t){return Promise.all(e.map(async n=>this.add(n,t)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{const t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{const t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}var z=he.default=it;const ot=[400,401,403,404,405,406,407,408,409];class at{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6;const t="default"in z?z.default:z;this.queue=new t({concurrency:this.maxConcurrency})}call(e,...t){return this.queue.add(()=>Ke(()=>e(...t).catch(n=>{throw n instanceof Error?n:new Error(n)}),{onFailedAttempt(n){var o,a,l,u;if(n.message.startsWith("Cancel")||n.message.startsWith("TimeoutError")||n.message.startsWith("AbortError")||(n==null?void 0:n.code)==="ECONNABORTED")throw n;const s=(o=n==null?void 0:n.response)==null?void 0:o.status;if(s&&ot.includes(+s))throw n;const i=(a=n==null?void 0:n.response)==null?void 0:a.data;if(((l=i==null?void 0:i.error)==null?void 0:l.code)==="insufficient_quota"){const c=new Error((u=i==null?void 0:i.error)==null?void 0:u.message);throw c.name="InsufficientQuotaError",c}},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,t,...n){return e.signal?Promise.race([this.call(t,...n),new Promise((s,i)=>{var o;(o=e.signal)==null||o.addEventListener("abort",()=>{i(new Error("AbortError"))})})]):this.call(t,...n)}fetch(...e){return this.call(()=>fetch(...e).then(t=>t.ok?t:Promise.reject(t)))}}var ut=function(r,e){if(typeof r!="string")throw new TypeError("Expected a string");return e=typeof e>"u"?"_":e,r.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()};const ct=ue(ut);var _e={exports:{}};const lt=/[\p{Lu}]/u,ft=/[\p{Ll}]/u,re=/^[\p{Lu}](?![\p{Lu}])/gu,ve=/([\p{Alpha}\p{N}_]|$)/u,ge=/[_.\- ]+/,ht=new RegExp("^"+ge.source),ne=new RegExp(ge.source+ve.source,"gu"),se=new RegExp("\\d+"+ve.source,"gu"),dt=(r,e,t)=>{let n=!1,s=!1,i=!1;for(let o=0;o<r.length;o++){const a=r[o];n&&lt.test(a)?(r=r.slice(0,o)+"-"+r.slice(o),n=!1,i=s,s=!0,o++):s&&i&&ft.test(a)?(r=r.slice(0,o-1)+"-"+r.slice(o-1),i=s,s=!1,n=!0):(n=e(a)===a&&t(a)!==a,i=s,s=t(a)===a&&e(a)!==a)}return r},pt=(r,e)=>(re.lastIndex=0,r.replace(re,t=>e(t))),mt=(r,e)=>(ne.lastIndex=0,se.lastIndex=0,r.replace(ne,(t,n)=>e(n)).replace(se,t=>e(t))),be=(r,e)=>{if(!(typeof r=="string"||Array.isArray(r)))throw new TypeError("Expected the input to be `string | string[]`");if(e={pascalCase:!1,preserveConsecutiveUppercase:!1,...e},Array.isArray(r)?r=r.map(i=>i.trim()).filter(i=>i.length).join("-"):r=r.trim(),r.length===0)return"";const t=e.locale===!1?i=>i.toLowerCase():i=>i.toLocaleLowerCase(e.locale),n=e.locale===!1?i=>i.toUpperCase():i=>i.toLocaleUpperCase(e.locale);return r.length===1?e.pascalCase?n(r):t(r):(r!==t(r)&&(r=dt(r,t,n)),r=r.replace(ht,""),e.preserveConsecutiveUppercase?r=pt(r,t):r=t(r),e.pascalCase&&(r=n(r.charAt(0))+r.slice(1)),mt(r,n))};_e.exports=be;_e.exports.default=be;function yt(r,e){return(e==null?void 0:e[r])||ct(r)}function _t(r,e,t){const n={};for(const s in r)Object.hasOwn(r,s)&&(n[e(s,t)]=r[s]);return n}function ie(r){return Array.isArray(r)?[...r]:{...r}}function vt(r,e){const t=ie(r);for(const[n,s]of Object.entries(e)){const[i,...o]=n.split(".").reverse();let a=t;for(const l of o.reverse()){if(a[l]===void 0)break;a[l]=ie(a[l]),a=a[l]}a[i]!==void 0&&(a[i]={lc:1,type:"secret",id:[s]})}return t}class N{get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}constructor(e,...t){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_kwargs=e||{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof N||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},t={},n=Object.keys(this.lc_kwargs).reduce((s,i)=>(s[i]=i in this?this[i]:this.lc_kwargs[i],s),{});for(let s=Object.getPrototypeOf(this);s;s=Object.getPrototypeOf(s))Object.assign(e,Reflect.get(s,"lc_aliases",this)),Object.assign(t,Reflect.get(s,"lc_secrets",this)),Object.assign(n,Reflect.get(s,"lc_attributes",this));for(const s in t)s in this&&this[s]!==void 0&&(n[s]=this[s]||n[s]);return{lc:1,type:"constructor",id:[...this.lc_namespace,this.constructor.name],kwargs:_t(Object.keys(t).length?vt(n,t):n,yt,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:[...this.lc_namespace,this.constructor.name]}}}function oe(r){return Array.isArray(r)?r:[r]}function gt(r){let e,t,n,s=!1;return function(o){e===void 0?(e=o,t=0,n=-1):e=wt(e,o);const a=e.length;let l=0;for(;t<a;){s&&(e[t]===10&&(l=++t),s=!1);let u=-1;for(;t<a&&u===-1;++t)switch(e[t]){case 58:n===-1&&(n=t-l);break;case 13:s=!0;case 10:u=t;break}if(u===-1)break;r(e.subarray(l,u),n),l=t,n=-1}l===a?e=void 0:l!==0&&(e=e.subarray(l),t-=l)}}function bt(r,e,t){let n=ae();const s=new TextDecoder;return function(o,a){if(o.length===0)t==null||t(n),n=ae();else if(a>0){const l=s.decode(o.subarray(0,a)),u=a+(o[a+1]===32?2:1),c=s.decode(o.subarray(u));switch(l){case"data":n.data=n.data?n.data+`
`+c:c;break;case"event":n.event=c;break;case"id":r(n.id=c);break;case"retry":const f=parseInt(c,10);isNaN(f)||e(n.retry=f);break}}}}function wt(r,e){const t=new Uint8Array(r.length+e.length);return t.set(r),t.set(e,r.length),t}function ae(){return{data:"",event:"",id:"",retry:void 0}}var Et="https://api-inference.huggingface.co/models/",we=(r=>(r.Length="length",r.EndOfSequenceToken="eos_token",r.StopSequence="stop_sequence",r))(we||{}),Ee=class{constructor(r="",e={}){L(this,"apiKey");L(this,"defaultOptions");this.apiKey=r,this.defaultOptions=e}async fillMask(r,e){const t=await this.request(r,e);if(!(Array.isArray(t)&&t.every(s=>typeof s.score=="number"&&typeof s.sequence=="string"&&typeof s.token=="number"&&typeof s.token_str=="string")))throw new TypeError("Invalid inference output: output must be of type Array<score: number, sequence:string, token:number, token_str:string>");return t}async summarization(r,e){const t=await this.request(r,e);if(!(Array.isArray(t)&&t.every(s=>typeof s.summary_text=="string")))throw new TypeError("Invalid inference output: output must be of type Array<summary_text: string>");return t==null?void 0:t[0]}async questionAnswer(r,e){const t=await this.request(r,e);if(!(typeof t.answer=="string"&&typeof t.end=="number"&&typeof t.score=="number"&&typeof t.start=="number"))throw new TypeError("Invalid inference output: output must be of type <answer: string, end: number, score: number, start: number>");return t}async tableQuestionAnswer(r,e){const t=await this.request(r,e);if(!(typeof t.aggregator=="string"&&typeof t.answer=="string"&&Array.isArray(t.cells)&&t.cells.every(s=>typeof s=="string")&&Array.isArray(t.coordinates)&&t.coordinates.every(s=>Array.isArray(s)&&s.every(i=>typeof i=="number"))))throw new TypeError("Invalid inference output: output must be of type <aggregator: string, answer: string, cells: string[], coordinates: number[][]>");return t}async textClassification(r,e){var s;const t=(s=await this.request(r,e))==null?void 0:s[0];if(!(Array.isArray(t)&&t.every(i=>typeof i.label=="string"&&typeof i.score=="number")))throw new TypeError("Invalid inference output: output must be of type Array<label: string, score: number>");return t}async textGeneration(r,e){const t=await this.request(r,e);if(!(Array.isArray(t)&&t.every(s=>typeof s.generated_text=="string")))throw new TypeError("Invalid inference output: output must be of type Array<generated_text: string>");return t==null?void 0:t[0]}async*textGenerationStream(r,e){yield*this.streamingRequest(r,e)}async tokenClassification(r,e){const t=oe(await this.request(r,e));if(!(Array.isArray(t)&&t.every(s=>typeof s.end=="number"&&typeof s.entity_group=="string"&&typeof s.score=="number"&&typeof s.start=="number"&&typeof s.word=="string")))throw new TypeError("Invalid inference output: output must be of type Array<end: number, entity_group: string, score: number, start: number, word: string>");return t}async translation(r,e){const t=await this.request(r,e);if(!(Array.isArray(t)&&t.every(s=>typeof s.translation_text=="string")))throw new TypeError("Invalid inference output: output must be of type Array<translation_text: string>");return t==null?void 0:t[0]}async zeroShotClassification(r,e){const t=oe(await this.request(r,e));if(!(Array.isArray(t)&&t.every(s=>Array.isArray(s.labels)&&s.labels.every(i=>typeof i=="string")&&Array.isArray(s.scores)&&s.scores.every(i=>typeof i=="number")&&typeof s.sequence=="string")))throw new TypeError("Invalid inference output: output must be of type Array<labels: string[], scores: number[], sequence: string>");return t}async conversational(r,e){const t=await this.request(r,e);if(!(Array.isArray(t.conversation.generated_responses)&&t.conversation.generated_responses.every(s=>typeof s=="string")&&Array.isArray(t.conversation.past_user_inputs)&&t.conversation.past_user_inputs.every(s=>typeof s=="string")&&typeof t.generated_text=="string"&&Array.isArray(t.warnings)&&t.warnings.every(s=>typeof s=="string")))throw new TypeError("Invalid inference output: output must be of type <conversation: {generated_responses: string[], past_user_inputs: string[]}, generated_text: string, warnings: string[]>");return t}async featureExtraction(r,e){return await this.request(r,e)}async automaticSpeechRecognition(r,e){const t=await this.request(r,{...e,binary:!0});if(!(typeof t.text=="string"))throw new TypeError("Invalid inference output: output must be of type <text: string>");return t}async audioClassification(r,e){const t=await this.request(r,{...e,binary:!0});if(!(Array.isArray(t)&&t.every(s=>typeof s.label=="string"&&typeof s.score=="number")))throw new TypeError("Invalid inference output: output must be of type Array<label: string, score: number>");return t}async imageClassification(r,e){const t=await this.request(r,{...e,binary:!0});if(!(Array.isArray(t)&&t.every(s=>typeof s.label=="string"&&typeof s.score=="number")))throw new TypeError("Invalid inference output: output must be of type Array<label: string, score: number>");return t}async objectDetection(r,e){const t=await this.request(r,{...e,binary:!0});if(!(Array.isArray(t)&&t.every(s=>typeof s.label=="string"&&typeof s.score=="number"&&typeof s.box.xmin=="number"&&typeof s.box.ymin=="number"&&typeof s.box.xmax=="number"&&typeof s.box.ymax=="number")))throw new TypeError("Invalid inference output: output must be of type Array<{label:string; score:number; box:{xmin:number; ymin:number; xmax:number; ymax:number}}>");return t}async imageSegmentation(r,e){const t=await this.request(r,{...e,binary:!0});if(!(Array.isArray(t)&&t.every(s=>typeof s.label=="string"&&typeof s.mask=="string"&&typeof s.score=="number")))throw new TypeError("Invalid inference output: output must be of type Array<label: string, mask: string, score: number>");return t}async textToImage(r,e){const t=await this.request(r,{...e,blob:!0});if(!(t&&t instanceof Blob))throw new TypeError("Invalid inference output: output must be of type object & of instance Blob");return t}async imageToText(r,e){var t;return(t=await this.request(r,{...e,binary:!0}))==null?void 0:t[0]}makeRequestOptions(r,e){const t={...this.defaultOptions,...e},{model:n,...s}=r,i={};this.apiKey&&(i.Authorization=`Bearer ${this.apiKey}`),e!=null&&e.binary||(i["Content-Type"]="application/json"),e!=null&&e.binary&&(t.wait_for_model&&(i["X-Wait-For-Model"]="true"),t.use_cache===!1&&(i["X-Use-Cache"]="false"),t.dont_load_model&&(i["X-Load-Model"]="0"));const o=`${Et}${n}`,a={headers:i,method:"POST",body:e!=null&&e.binary?r.data:JSON.stringify({...s,options:t}),credentials:e!=null&&e.includeCredentials?"include":"same-origin"};return{url:o,info:a,mergedOptions:t}}async request(r,e){const{url:t,info:n,mergedOptions:s}=this.makeRequestOptions(r,e),i=await fetch(t,n);if(s.retry_on_error!==!1&&i.status===503&&!s.wait_for_model)return this.request(r,{...s,wait_for_model:!0});if(e!=null&&e.blob){if(!i.ok)throw new Error("An error occurred while fetching the blob");return await i.blob()}const o=await i.json();if(o.error)throw new Error(o.error);return o}async*streamingRequest(r,e){var c;const{url:t,info:n,mergedOptions:s}=this.makeRequestOptions({...r,stream:!0},e),i=await fetch(t,n);if(s.retry_on_error!==!1&&i.status===503&&!s.wait_for_model)return this.streamingRequest(r,{...s,wait_for_model:!0});if(!i.ok){if((c=i.headers.get("Content-Type"))!=null&&c.startsWith("application/json")){const f=await i.json();if(f.error)throw new Error(f.error)}throw new Error(`Server response contains error: ${i.status}`)}if(i.headers.get("content-type")!=="text/event-stream")throw new Error("Server does not support event stream content type, it returned "+i.headers.get("content-type"));if(!i.body)return;const o=i.body.getReader();let a=[];const u=gt(bt(()=>{},()=>{},f=>{a.push(f)}));try{for(;;){const{done:f,value:p}=await o.read();if(f)return;u(p);for(const m of a)m.data.length>0&&(yield JSON.parse(m.data));a=[]}}finally{o.releaseLock()}}};const $t=Object.freeze(Object.defineProperty({__proto__:null,HfInference:Ee,TextGenerationStreamFinishReason:we},Symbol.toStringTag,{value:"Module"}));class At{constructor(e){Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.caller=new at(e??{})}}const Ct=()=>typeof window<"u"&&typeof window.document<"u",Ot=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",Tt=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),Ae=()=>typeof Deno<"u",It=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!Ae(),xt=()=>{let r;return Ct()?r="browser":It()?r="node":Ot()?r="webworker":Tt()?r="jsdom":Ae()?r="deno":r="other",r};let $;async function Ut(){return $===void 0&&($={library:"langchain-js",runtime:xt()}),$}function St(r){var e;try{return typeof process<"u"?(e=process.env)==null?void 0:e[r]:void 0}catch{return}}class Bt extends At{constructor(e){super(e??{}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.model=(e==null?void 0:e.model)??"sentence-transformers/distilbert-base-nli-mean-tokens",this.apiKey=(e==null?void 0:e.apiKey)??St("HUGGINGFACEHUB_API_KEY"),this.client=new Ee(this.apiKey)}async _embed(e){const t=e.map(n=>n.replace(/\n/g," "));return this.caller.call(()=>this.client.featureExtraction({model:this.model,inputs:t}))}embedQuery(e){return this._embed([e]).then(t=>t[0])}embedDocuments(e){return this._embed(e)}}const Jt="__run";class j extends N{get text(){return this.content}constructor(e,t){typeof e=="string"&&(e={content:e,additional_kwargs:t}),e.additional_kwargs||(e.additional_kwargs={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","schema"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}}class Mt extends j{_getType(){return"human"}}class Ft extends j{_getType(){return"ai"}}class Wt extends j{_getType(){return"system"}}class Qt extends j{constructor(e,t){typeof e=="string"&&(e={content:e,role:t}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}}class Kt extends N{}class kt{}class Xt{}class Pt extends kt{constructor(e){super(),Object.defineProperty(this,"vectorStore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"k",{enumerable:!0,configurable:!0,writable:!0,value:4}),Object.defineProperty(this,"filter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.vectorStore=e.vectorStore,this.k=e.k??this.k,this.filter=e.filter}async getRelevantDocuments(e){return await this.vectorStore.similaritySearch(e,this.k,this.filter)}async addDocuments(e,t){return this.vectorStore.addDocuments(e,t)}}class qt{constructor(e,t){Object.defineProperty(this,"embeddings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.embeddings=e}async delete(e){throw new Error("Not implemented.")}async similaritySearch(e,t=4,n=void 0){return(await this.similaritySearchVectorWithScore(await this.embeddings.embedQuery(e),t,n)).map(i=>i[0])}async similaritySearchWithScore(e,t=4,n=void 0){return this.similaritySearchVectorWithScore(await this.embeddings.embedQuery(e),t,n)}static fromTexts(e,t,n,s){throw new Error("the Langchain vectorstore implementation you are using forgot to override this, please report a bug")}static fromDocuments(e,t,n){throw new Error("the Langchain vectorstore implementation you are using forgot to override this, please report a bug")}asRetriever(e,t){return new Pt({vectorStore:this,k:e,filter:t})}}class Ce extends qt{constructor(e,t){super(e,t),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tableName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queryName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.client=t.client,this.tableName=t.tableName||"documents",this.queryName=t.queryName||"match_documents",this.filter=t.filter}async addDocuments(e,t){const n=e.map(({pageContent:s})=>s);return this.addVectors(await this.embeddings.embedDocuments(n),e,t)}async addVectors(e,t,n){const s=e.map((a,l)=>({content:t[l].pageContent,embedding:a,metadata:t[l].metadata})),i=500;let o=[];for(let a=0;a<s.length;a+=i){const l=s.slice(a,a+i).map(c=>n!=null&&n.ids?{id:n.ids[a],...c}:c),u=await this.client.from(this.tableName).upsert(l).select();if(u.error)throw new Error(`Error inserting: ${u.error.message} ${u.status} ${u.statusText}`);u.data&&(o=o.concat(u.data.map(c=>c.id)))}return o}async delete(e){const{ids:t}=e;for(const n of t)await this.client.from(this.tableName).delete().eq("id",n)}async similaritySearchVectorWithScore(e,t,n){if(n&&this.filter)throw new Error("cannot provide both `filter` and `this.filter`");const s=n??this.filter??{},i={query_embedding:e};let o;if(typeof s=="function")o=f=>s(f).limit(t);else if(typeof s=="object")i.filter=s,i.match_count=t,o=f=>f;else throw new Error("invalid filter type");const a=this.client.rpc(this.queryName,i),{data:l,error:u}=await o(a);if(u)throw new Error(`Error searching for documents: ${u.code} ${u.message} ${u.details}`);return l.map(f=>[new te({metadata:f.metadata,pageContent:f.content}),f.similarity])}static async fromTexts(e,t,n,s){const i=[];for(let o=0;o<e.length;o+=1){const a=Array.isArray(t)?t[o]:t,l=new te({pageContent:e[o],metadata:a});i.push(l)}return Ce.fromDocuments(i,n,s)}static async fromDocuments(e,t,n){const s=new this(t,n);return await s.addDocuments(e),s}static async fromExistingIndex(e,t){return new this(e,t)}}const{console:Rt}=$e,T="src/lib/AuthCheck.svelte";function Oe(r){let e,t,n,s="You must be signed in to view this page.",i,o,a,l="Login",u,c,f="Register";const p={c:function(){e=C("div"),t=C("div"),n=C("p"),n.textContent=s,i=Z(),o=C("div"),a=C("a"),a.textContent=l,u=Z(),c=C("a"),c.textContent=f,this.h()},l:function(d){e=O(d,"DIV",{id:!0});var _=k(e);t=O(_,"DIV",{class:!0});var h=k(t);n=O(h,"P",{class:!0,"data-svelte-h":!0}),D(n)!=="svelte-1qn0ppa"&&(n.textContent=s),i=ee(h),o=O(h,"DIV",{class:!0});var v=k(o);a=O(v,"A",{href:!0,class:!0,"data-svelte-h":!0}),D(a)!=="svelte-wpey69"&&(a.textContent=l),u=ee(v),c=O(v,"A",{href:!0,class:!0,"data-svelte-h":!0}),D(c)!=="svelte-129aygp"&&(c.textContent=f),v.forEach(I),h.forEach(I),_.forEach(I),this.h()},h:function(){b(n,"class","auth-message s-NSJxguceXFrJ"),A(n,T,43,6,957),b(a,"href","/login"),b(a,"class","auth-button auth-button-primary s-NSJxguceXFrJ"),A(a,T,45,8,1067),b(c,"href","/register"),b(c,"class","auth-button auth-button-secondary s-NSJxguceXFrJ"),A(c,T,46,8,1142),b(o,"class","auth-buttons s-NSJxguceXFrJ"),A(o,T,44,6,1032),b(t,"class","auth-container s-NSJxguceXFrJ"),A(t,T,42,4,922),b(e,"id","error-message"),A(e,T,40,2,831)},m:function(d,_){M(d,e,_),E(e,t),E(t,n),E(t,i),E(t,o),E(o,a),E(o,u),E(o,c)},p:V,i:V,o:V,d:function(d){d&&I(e)}};return P("SvelteRegisterBlock",{block:p,id:Oe.name,type:"else",source:"(30:0) {:else}",ctx:r}),p}function Te(r){let e,t;const n=r[2].default,s=Pe(n,r,r[1],null),i={c:function(){e=C("div"),s&&s.c(),this.h()},l:function(a){e=O(a,"DIV",{id:!0});var l=k(e);s&&s.l(l),l.forEach(I),this.h()},h:function(){b(e,"id","content"),A(e,T,35,2,717)},m:function(a,l){M(a,e,l),s&&s.m(e,null),t=!0},p:function(a,l){s&&s.p&&(!t||l&2)&&qe(s,n,a,a[1],t?Ne(n,a[1],l,null):Re(a[1]),null)},i:function(a){t||(B(s,a),t=!0)},o:function(a){U(s,a),t=!1},d:function(a){a&&I(e),s&&s.d(a)}};return P("SvelteRegisterBlock",{block:i,id:Te.name,type:"if",source:"(25:0) {#if isLoggedIn}",ctx:r}),i}function J(r){let e,t,n,s;const i=[Te,Oe],o=[];function a(u,c){return u[0]?0:1}e=a(r),t=o[e]=i[e](r);const l={c:function(){t.c(),n=Y()},l:function(c){t.l(c),n=Y()},m:function(c,f){o[e].m(c,f),M(c,n,f),s=!0},p:function(c,[f]){let p=e;e=a(c),e===p?o[e].p(c,f):(De(),U(o[p],1,1,()=>{o[p]=null}),ze(),t=o[e],t?t.p(c,f):(t=o[e]=i[e](c),t.c()),B(t,1),t.m(n.parentNode,n))},i:function(c){s||(B(t),s=!0)},o:function(c){U(t),s=!1},d:function(c){c&&I(n),o[e].d(c)}};return P("SvelteRegisterBlock",{block:l,id:J.name,type:"component",source:"",ctx:r}),l}function Nt(r,e,t){let{$$slots:n={},$$scope:s}=e;Ve("AuthCheck",n,["default"]);const i=Q(X,K);let o=!0;const a=async()=>{const{data:{session:u},error:c}=await i.auth.getSession();c?console.log(c):u!=null&&u.user?t(0,o=!0):t(0,o=!1)};H(()=>{a()}),G("isLoggedIn",o);const l=[];return Object.keys(e).forEach(u=>{!~l.indexOf(u)&&u.slice(0,2)!=="$$"&&u!=="slot"&&Rt.warn(`<AuthCheck> was created with unknown prop '${u}'`)}),r.$$set=u=>{"$$scope"in u&&t(1,s=u.$$scope)},r.$capture_state=()=>({createClient:Q,PUBLIC_SUPABASE_KEY:K,PUBLIC_SUPABASE_URL:X,onMount:H,setContext:G,supabaseClient:i,isLoggedIn:o,loadContent:a}),r.$inject_state=u=>{"isLoggedIn"in u&&t(0,o=u.isLoggedIn)},e&&"$$inject"in e&&r.$inject_state(e.$$inject),[o,s,n]}class Ht extends je{constructor(e){super(e),Le(this,e,Nt,J,ke,{}),P("SvelteRegisterComponent",{component:this,tagName:"AuthCheck",options:e,id:J.name})}}export{Ht as A,Kt as B,Qt as C,te as D,At as E,Bt as H,Jt as R,Ce as S,z as _,at as a,N as b,Ut as c,Mt as d,Wt as e,Xt as f,St as g,Ft as h,It as i,xt as j,$t as k,Ke as p};
