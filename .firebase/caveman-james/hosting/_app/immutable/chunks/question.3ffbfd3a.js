import{a as En,b as at,_ as nt,p as Ma,g as Pe,c as Na,R as On,B as Pn,d as Tn,e as La,f as Ra,h as $a,H as Za,S as Ba}from"./NavBar.74969093.js";import{g as kn,_ as fe,d as Va,e as zr,c as Ua,P as Fa,a as Ka,b as za}from"./public.79d73255.js";import{g as qa,T as Ha,c as zt}from"./_commonjs-dynamic-modules.5fcb8f34.js";const qt={},Ya=new En({});async function Ga(n,e){return n in qt||(qt[n]=Ya.fetch(`https://tiktoken.pages.dev/js/${n}.json`,{signal:e==null?void 0:e.signal}).then(t=>t.json()).catch(t=>{throw delete qt[n],t})),new Ha(await qt[n],e==null?void 0:e.extendedSpecialTokens)}async function jn(n,e){return Ga(qa(n),e)}let Ht;const Ja=new Uint8Array(16);function Wa(){if(!Ht&&(Ht=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ht))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ht(Ja)}const ie=[];for(let n=0;n<256;++n)ie.push((n+256).toString(16).slice(1));function Qa(n,e=0){return(ie[n[e+0]]+ie[n[e+1]]+ie[n[e+2]]+ie[n[e+3]]+"-"+ie[n[e+4]]+ie[n[e+5]]+"-"+ie[n[e+6]]+ie[n[e+7]]+"-"+ie[n[e+8]]+ie[n[e+9]]+"-"+ie[n[e+10]]+ie[n[e+11]]+ie[n[e+12]]+ie[n[e+13]]+ie[n[e+14]]+ie[n[e+15]]).toLowerCase()}const Xa=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),qr={randomUUID:Xa};function qe(n,e,t){if(qr.randomUUID&&!e&&!n)return qr.randomUUID();n=n||{};const r=n.random||(n.rng||Wa)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){t=t||0;for(let a=0;a<16;++a)e[t+a]=r[a];return e}return Qa(r)}class es{}class Ut extends es{get lc_namespace(){return["langchain","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}constructor(e){var t;super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:typeof process<"u"?((t=process.env)==null?void 0:t.LANGCHAIN_CALLBACKS_BACKGROUND)!=="true":!0}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent)}copy(){return new this.constructor(this)}toJSON(){return at.prototype.toJSON.call(this)}toJSONNotImplemented(){return at.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class t extends Ut{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:qe()}),Object.assign(this,e)}}return new t}}var Er={exports:{}};Er.exports;(function(n){const t=(s=0)=>i=>`\x1B[${38+s};5;${i}m`,r=(s=0)=>(i,o,u)=>`\x1B[${38+s};2;${i};${o};${u}m`;function a(){const s=new Map,i={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};i.color.gray=i.color.blackBright,i.bgColor.bgGray=i.bgColor.bgBlackBright,i.color.grey=i.color.blackBright,i.bgColor.bgGrey=i.bgColor.bgBlackBright;for(const[o,u]of Object.entries(i)){for(const[l,g]of Object.entries(u))i[l]={open:`\x1B[${g[0]}m`,close:`\x1B[${g[1]}m`},u[l]=i[l],s.set(g[0],g[1]);Object.defineProperty(i,o,{value:u,enumerable:!1})}return Object.defineProperty(i,"codes",{value:s,enumerable:!1}),i.color.close="\x1B[39m",i.bgColor.close="\x1B[49m",i.color.ansi256=t(),i.color.ansi16m=r(),i.bgColor.ansi256=t(10),i.bgColor.ansi16m=r(10),Object.defineProperties(i,{rgbToAnsi256:{value:(o,u,l)=>o===u&&u===l?o<8?16:o>248?231:Math.round((o-8)/247*24)+232:16+36*Math.round(o/255*5)+6*Math.round(u/255*5)+Math.round(l/255*5),enumerable:!1},hexToRgb:{value:o=>{const u=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(o.toString(16));if(!u)return[0,0,0];let{colorString:l}=u.groups;l.length===3&&(l=l.split("").map(P=>P+P).join(""));const g=Number.parseInt(l,16);return[g>>16&255,g>>8&255,g&255]},enumerable:!1},hexToAnsi256:{value:o=>i.rgbToAnsi256(...i.hexToRgb(o)),enumerable:!1}}),i}Object.defineProperty(n,"exports",{enumerable:!0,get:a})})(Er);var ts=Er.exports;const Sn=kn(ts);class Or extends Ut{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}_addChildRun(e,t){e.child_runs.push(t)}_startTrace(e){if(e.parent_run_id!==void 0){const t=this.runMap.get(e.parent_run_id);t&&this._addChildRun(t,e)}this.runMap.set(e.id,e)}async _endTrace(e){const t=e.parent_run_id!==void 0&&this.runMap.get(e.parent_run_id);t?t.child_execution_order=Math.max(t.child_execution_order,e.child_execution_order):await this.persistRun(e),this.runMap.delete(e.id)}_getExecutionOrder(e){const t=e!==void 0&&this.runMap.get(e);return t?t.child_execution_order+1:1}async handleLLMStart(e,t,r,a,s,i,o){var L;const u=this._getExecutionOrder(a),l=Date.now(),g=o?{...s,metadata:o}:s,P={id:r,name:e.id[e.id.length-1],parent_run_id:a,start_time:l,serialized:e,events:[{name:"start",time:l}],inputs:{prompts:t},execution_order:u,child_runs:[],child_execution_order:u,run_type:"llm",extra:g??{},tags:i||[]};this._startTrace(P),await((L=this.onLLMStart)==null?void 0:L.call(this,P))}async handleChatModelStart(e,t,r,a,s,i,o){var L;const u=this._getExecutionOrder(a),l=Date.now(),g=o?{...s,metadata:o}:s,P={id:r,name:e.id[e.id.length-1],parent_run_id:a,start_time:l,serialized:e,events:[{name:"start",time:l}],inputs:{messages:t},execution_order:u,child_runs:[],child_execution_order:u,run_type:"llm",extra:g??{},tags:i||[]};this._startTrace(P),await((L=this.onLLMStart)==null?void 0:L.call(this,P))}async handleLLMEnd(e,t){var a;const r=this.runMap.get(t);if(!r||(r==null?void 0:r.run_type)!=="llm")throw new Error("No LLM run to end.");r.end_time=Date.now(),r.outputs=e,r.events.push({name:"end",time:r.end_time}),await((a=this.onLLMEnd)==null?void 0:a.call(this,r)),await this._endTrace(r)}async handleLLMError(e,t){var a;const r=this.runMap.get(t);if(!r||(r==null?void 0:r.run_type)!=="llm")throw new Error("No LLM run to end.");r.end_time=Date.now(),r.error=e.message,r.events.push({name:"error",time:r.end_time}),await((a=this.onLLMError)==null?void 0:a.call(this,r)),await this._endTrace(r)}async handleChainStart(e,t,r,a,s,i){var g;const o=this._getExecutionOrder(a),u=Date.now(),l={id:r,name:e.id[e.id.length-1],parent_run_id:a,start_time:u,serialized:e,events:[{name:"start",time:u}],inputs:t,execution_order:o,child_execution_order:o,run_type:"chain",child_runs:[],extra:i?{metadata:i}:{},tags:s||[]};this._startTrace(l),await((g=this.onChainStart)==null?void 0:g.call(this,l))}async handleChainEnd(e,t){var a;const r=this.runMap.get(t);if(!r||(r==null?void 0:r.run_type)!=="chain")throw new Error("No chain run to end.");r.end_time=Date.now(),r.outputs=e,r.events.push({name:"end",time:r.end_time}),await((a=this.onChainEnd)==null?void 0:a.call(this,r)),await this._endTrace(r)}async handleChainError(e,t){var a;const r=this.runMap.get(t);if(!r||(r==null?void 0:r.run_type)!=="chain")throw new Error("No chain run to end.");r.end_time=Date.now(),r.error=e.message,r.events.push({name:"error",time:r.end_time}),await((a=this.onChainError)==null?void 0:a.call(this,r)),await this._endTrace(r)}async handleToolStart(e,t,r,a,s,i){var g;const o=this._getExecutionOrder(a),u=Date.now(),l={id:r,name:e.id[e.id.length-1],parent_run_id:a,start_time:u,serialized:e,events:[{name:"start",time:u}],inputs:{input:t},execution_order:o,child_execution_order:o,run_type:"tool",child_runs:[],extra:i?{metadata:i}:{},tags:s||[]};this._startTrace(l),await((g=this.onToolStart)==null?void 0:g.call(this,l))}async handleToolEnd(e,t){var a;const r=this.runMap.get(t);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");r.end_time=Date.now(),r.outputs={output:e},r.events.push({name:"end",time:r.end_time}),await((a=this.onToolEnd)==null?void 0:a.call(this,r)),await this._endTrace(r)}async handleToolError(e,t){var a;const r=this.runMap.get(t);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");r.end_time=Date.now(),r.error=e.message,r.events.push({name:"error",time:r.end_time}),await((a=this.onToolError)==null?void 0:a.call(this,r)),await this._endTrace(r)}async handleAgentAction(e,t){var s;const r=this.runMap.get(t);if(!r||(r==null?void 0:r.run_type)!=="chain")return;const a=r;a.actions=a.actions||[],a.actions.push(e),a.events.push({name:"agent_action",time:Date.now(),kwargs:{action:e}}),await((s=this.onAgentAction)==null?void 0:s.call(this,r))}async handleAgentEnd(e,t){var a;const r=this.runMap.get(t);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"agent_end",time:Date.now(),kwargs:{action:e}}),await((a=this.onAgentEnd)==null?void 0:a.call(this,r)))}async handleText(e,t){var a;const r=this.runMap.get(t);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"text",time:Date.now(),kwargs:{text:e}}),await((a=this.onText)==null?void 0:a.call(this,r)))}async handleLLMNewToken(e,t,r){var s;const a=this.runMap.get(r);!a||(a==null?void 0:a.run_type)!=="llm"||(a.events.push({name:"new_token",time:Date.now(),kwargs:{token:e,idx:t}}),await((s=this.onLLMNewToken)==null?void 0:s.call(this,a)))}}function ge(n,e){return`${n.open}${e}${n.close}`}function Me(n,e){try{return JSON.stringify(n,null,2)}catch{return e}}function Xe(n){if(!n.end_time)return"";const e=n.end_time-n.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}const{color:we}=Sn;class Hr extends Or{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){const t=[];let r=e;for(;r.parent_run_id;){const a=this.runMap.get(r.parent_run_id);if(a)t.push(a),r=a;else break}return t}getBreadcrumbs(e){const r=[...this.getParents(e).reverse(),e].map((a,s,i)=>{const o=`${a.execution_order}:${a.run_type}:${a.name}`;return s===i.length-1?ge(Sn.bold,o):o}).join(" > ");return ge(we.grey,r)}onChainStart(e){const t=this.getBreadcrumbs(e);console.log(`${ge(we.green,"[chain/start]")} [${t}] Entering Chain run with input: ${Me(e.inputs,"[inputs]")}`)}onChainEnd(e){const t=this.getBreadcrumbs(e);console.log(`${ge(we.cyan,"[chain/end]")} [${t}] [${Xe(e)}] Exiting Chain run with output: ${Me(e.outputs,"[outputs]")}`)}onChainError(e){const t=this.getBreadcrumbs(e);console.log(`${ge(we.red,"[chain/error]")} [${t}] [${Xe(e)}] Chain run errored with error: ${Me(e.error,"[error]")}`)}onLLMStart(e){const t=this.getBreadcrumbs(e),r="prompts"in e.inputs?{prompts:e.inputs.prompts.map(a=>a.trim())}:e.inputs;console.log(`${ge(we.green,"[llm/start]")} [${t}] Entering LLM run with input: ${Me(r,"[inputs]")}`)}onLLMEnd(e){const t=this.getBreadcrumbs(e);console.log(`${ge(we.cyan,"[llm/end]")} [${t}] [${Xe(e)}] Exiting LLM run with output: ${Me(e.outputs,"[response]")}`)}onLLMError(e){const t=this.getBreadcrumbs(e);console.log(`${ge(we.red,"[llm/error]")} [${t}] [${Xe(e)}] LLM run errored with error: ${Me(e.error,"[error]")}`)}onToolStart(e){var r;const t=this.getBreadcrumbs(e);console.log(`${ge(we.green,"[tool/start]")} [${t}] Entering Tool run with input: "${(r=e.inputs.input)==null?void 0:r.trim()}"`)}onToolEnd(e){var r,a;const t=this.getBreadcrumbs(e);console.log(`${ge(we.cyan,"[tool/end]")} [${t}] [${Xe(e)}] Exiting Tool run with output: "${(a=(r=e.outputs)==null?void 0:r.output)==null?void 0:a.trim()}"`)}onToolError(e){const t=this.getBreadcrumbs(e);console.log(`${ge(we.red,"[tool/error]")} [${t}] [${Xe(e)}] Tool run errored with error: ${Me(e.error,"[error]")}`)}onAgentAction(e){const t=e,r=this.getBreadcrumbs(e);console.log(`${ge(we.blue,"[agent/action]")} [${r}] Agent selected action: ${Me(t.actions[t.actions.length-1],"[action]")}`)}}const rs=[400,401,403,404,405,406,407,408,409];class ns{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6;const t="default"in nt?nt.default:nt;this.queue=new t({concurrency:this.maxConcurrency})}call(e,...t){return this.queue.add(()=>Ma(()=>e(...t).catch(r=>{throw r instanceof Error?r:new Error(r)}),{onFailedAttempt(r){var s;if(r.message.startsWith("Cancel")||r.message.startsWith("TimeoutError")||r.message.startsWith("AbortError")||(r==null?void 0:r.code)==="ECONNABORTED")throw r;const a=(s=r==null?void 0:r.response)==null?void 0:s.status;if(a&&rs.includes(+a))throw r},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,t,...r){return e.signal?Promise.race([this.call(t,...r),new Promise((a,s)=>{var i;(i=e.signal)==null||i.addEventListener("abort",()=>{s(new Error("AbortError"))})})]):this.call(t,...r)}fetch(...e){return this.call(()=>fetch(...e).then(t=>t.ok?t:Promise.reject(t)))}}const as=()=>typeof window<"u"&&typeof window.document<"u",ss=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",is=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),In=()=>typeof Deno<"u",os=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!In(),us=()=>{let n;return as()?n="browser":os()?n="node":ss()?n="webworker":is()?n="jsdom":In()?n="deno":n="other",n};let gr;async function cs(){return gr===void 0&&(gr={library:"langsmith",runtime:us()}),gr}function Yr(n){var e;try{return typeof process<"u"?(e=process.env)==null?void 0:e[n]:void 0}catch{return}}const ls=n=>{const t=n.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return t==="localhost"||t==="127.0.0.1"||t==="::1"},Yt=async(n,e)=>{const t=await n.text();if(!n.ok)throw new Error(`Failed to ${e}: ${n.status} ${n.statusText} ${t}`)};class Pr{constructor(e={}){Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const t=Pr.getDefaultClientConfig();this.apiUrl=e.apiUrl??t.apiUrl,this.apiKey=e.apiKey??t.apiKey,this.validateApiKeyIfHosted(),this.timeout_ms=e.timeout_ms??4e3,this.caller=new ns(e.callerOptions??{})}static getDefaultClientConfig(){return{apiUrl:Yr("LANGCHAIN_ENDPOINT")??"http://localhost:1984",apiKey:Yr("LANGCHAIN_API_KEY")}}validateApiKeyIfHosted(){if(!ls(this.apiUrl)&&!this.apiKey)throw new Error("API key must be provided when using hosted LangSmith API")}get headers(){const e={};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}async _get(e,t){const r=(t==null?void 0:t.toString())??"",a=`${this.apiUrl}${e}?${r}`,s=await this.caller.call(fetch,a,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!s.ok)throw new Error(`Failed to fetch ${e}: ${s.status} ${s.statusText}`);return s.json()}async createRun(e){const t={...this.headers,"Content-Type":"application/json"},r=e.extra??{},a=await cs(),s=e.project_name;delete e.project_name;const i={session_name:s,...e,extra:{...e.extra,runtime:{...a,...r.runtime}}},o=await this.caller.call(fetch,`${this.apiUrl}/runs`,{method:"POST",headers:t,body:JSON.stringify(i),signal:AbortSignal.timeout(this.timeout_ms)});await Yt(o,"create run")}async updateRun(e,t){const r={...this.headers,"Content-Type":"application/json"},a=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:r,body:JSON.stringify(t),signal:AbortSignal.timeout(this.timeout_ms)});await Yt(a,"update run")}async readRun(e,{loadChildRuns:t}={loadChildRuns:!1}){let r=await this._get(`/runs/${e}`);return t&&r.child_run_ids&&(r=await this._loadChildRuns(r)),r}async _loadChildRuns(e){const t=await this.listRuns({id:e.child_run_ids}),r={},a={};t.sort((s,i)=>s.execution_order-i.execution_order);for(const s of t){if(s.parent_run_id===null||s.parent_run_id===void 0)throw new Error(`Child run ${s.id} has no parent`);s.parent_run_id in r||(r[s.parent_run_id]=[]),r[s.parent_run_id].push(s),a[s.id]=s}e.child_runs=r[e.id]||[];for(const s in r)s!==e.id&&(a[s].child_runs=r[s]);return e}async listRuns({projectId:e,projectName:t,executionOrder:r,runType:a,error:s,id:i,limit:o,offset:u}){const l=new URLSearchParams;let g=e;if(t){if(e)throw new Error("Only one of projectId or projectName may be given");g=(await this.readProject({projectName:t})).id}if(g&&l.append("session",g),r&&l.append("execution_order",r.toString()),a&&l.append("run_type",a),s!==void 0&&l.append("error",s.toString()),i!==void 0)for(const P of i)l.append("id",P);return o!==void 0&&l.append("limit",o.toString()),u!==void 0&&l.append("offset",u.toString()),this._get("/runs",l)}async deleteRun(e){const t=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await Yt(t,"delete run")}async createProject({projectName:e,projectExtra:t,upsert:r}){const a=r?"?upsert=true":"",s=`${this.apiUrl}/sessions${a}`,i={name:e};t!==void 0&&(i.extra=t);const o=await this.caller.call(fetch,s,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(i),signal:AbortSignal.timeout(this.timeout_ms)}),u=await o.json();if(!o.ok)throw new Error(`Failed to create session ${e}: ${o.status} ${o.statusText}`);return u}async readProject({projectId:e,projectName:t}){let r="/sessions";const a=new URLSearchParams;if(e!==void 0&&t!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)r+=`/${e}`;else if(t!==void 0)a.append("name",t);else throw new Error("Must provide projectName or projectId");const s=await this._get(r,a);let i;if(Array.isArray(s)){if(s.length===0)throw new Error(`Project[id=${e}, name=${t}] not found`);i=s[0]}else i=s;return i}async listProjects(){return this._get("/sessions")}async deleteProject({projectId:e,projectName:t}){let r;if(e===void 0&&t===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&t!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?r=(await this.readProject({projectName:t})).id:r=e;const a=await this.caller.call(fetch,`${this.apiUrl}/sessions/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await Yt(a,`delete session ${r} (${t})`)}async uploadCsv({csvFile:e,fileName:t,inputKeys:r,outputKeys:a,description:s,dataType:i,name:o}){const u=`${this.apiUrl}/datasets/upload`,l=new FormData;l.append("file",e,t),r.forEach(L=>{l.append("input_keys",L)}),a.forEach(L=>{l.append("output_keys",L)}),s&&l.append("description",s),i&&l.append("data_type",i),o&&l.append("name",o);const g=await this.caller.call(fetch,u,{method:"POST",headers:this.headers,body:l,signal:AbortSignal.timeout(this.timeout_ms)});if(!g.ok){const L=await g.json();throw L.detail&&L.detail.includes("already exists")?new Error(`Dataset ${t} already exists`):new Error(`Failed to upload CSV: ${g.status} ${g.statusText}`)}return await g.json()}async createDataset(e,{description:t,dataType:r}={}){const a={name:e,description:t};r&&(a.data_type=r);const s=await this.caller.call(fetch,`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms)});if(!s.ok){const o=await s.json();throw o.detail&&o.detail.includes("already exists")?new Error(`Dataset ${e} already exists`):new Error(`Failed to create dataset ${s.status} ${s.statusText}`)}return await s.json()}async readDataset({datasetId:e,datasetName:t}){let r="/datasets";const a=new URLSearchParams({limit:"1"});if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)r+=`/${e}`;else if(t!==void 0)a.append("name",t);else throw new Error("Must provide datasetName or datasetId");const s=await this._get(r,a);let i;if(Array.isArray(s)){if(s.length===0)throw new Error(`Dataset[id=${e}, name=${t}] not found`);i=s[0]}else i=s;return i}async listDatasets({limit:e=100,offset:t=0}={}){const r="/datasets",a=new URLSearchParams({limit:e.toString(),offset:t.toString()}),s=await this._get(r,a);if(!Array.isArray(s))throw new Error(`Expected ${r} to return an array, but got ${s}`);return s}async deleteDataset({datasetId:e,datasetName:t}){let r="/datasets",a=e;if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(t!==void 0&&(a=(await this.readDataset({datasetName:t})).id),a!==void 0)r+=`/${a}`;else throw new Error("Must provide datasetName or datasetId");const s=await this.caller.call(fetch,this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!s.ok)throw new Error(`Failed to delete ${r}: ${s.status} ${s.statusText}`);await s.json()}async createExample(e,t,{datasetId:r,datasetName:a,createdAt:s}){let i=r;if(i===void 0&&a===void 0)throw new Error("Must provide either datasetName or datasetId");if(i!==void 0&&a!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");i===void 0&&(i=(await this.readDataset({datasetName:a})).id);const u={dataset_id:i,inputs:e,outputs:t,created_at:(s||new Date).toISOString()},l=await this.caller.call(fetch,`${this.apiUrl}/examples`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms)});if(!l.ok)throw new Error(`Failed to create example: ${l.status} ${l.statusText}`);return await l.json()}async readExample(e){const t=`/examples/${e}`;return await this._get(t)}async listExamples({datasetId:e,datasetName:t,limit:r,offset:a}={}){let s;if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)s=e;else if(t!==void 0)s=(await this.readDataset({datasetName:t})).id;else throw new Error("Must provide a datasetName or datasetId");const i=await this._get("/examples",new URLSearchParams({dataset:s,limit:(r==null?void 0:r.toString())??"100",offset:(a==null?void 0:a.toString())??"0"}));if(!Array.isArray(i))throw new Error(`Expected /examples to return an array, but got ${i}`);return i}async deleteExample(e){const t=`/examples/${e}`,r=await this.caller.call(fetch,this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!r.ok)throw new Error(`Failed to delete ${t}: ${r.status} ${r.statusText}`);await r.json()}async updateExample(e,t){const r=await this.caller.call(fetch,`${this.apiUrl}/examples/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(t),signal:AbortSignal.timeout(this.timeout_ms)});if(!r.ok)throw new Error(`Failed to update example ${e}: ${r.status} ${r.statusText}`);return await r.json()}async evaluateRun(e,t,{sourceInfo:r,loadChildRuns:a}={loadChildRuns:!1}){let s;if(typeof e=="string")s=await this.readRun(e,{loadChildRuns:a});else if(typeof e=="object"&&"id"in e)s=e;else throw new Error(`Invalid run type: ${typeof e}`);let i;s.reference_example_id!==null&&s.reference_example_id!==void 0&&(i=await this.readExample(s.reference_example_id));const o=await t.evaluateRun(s,i);let u=r??{};return o.evaluatorInfo&&(u={...u,...o.evaluatorInfo}),await this.createFeedback(s.id,o.key,{score:o.score,value:o.value,comment:o.comment,correction:o.correction,sourceInfo:u,feedbackSourceType:"MODEL"})}async createFeedback(e,t,{score:r,value:a,correction:s,comment:i,sourceInfo:o,feedbackSourceType:u="API"}){let l;if(u==="API")l={type:"api",metadata:o??{}};else if(u==="MODEL")l={type:"model",metadata:o??{}};else throw new Error(`Unknown feedback source type ${u}`);const g={id:qe(),run_id:e,key:t,score:r,value:a,correction:s,comment:i,feedback_source:l},P=await this.caller.call(fetch,`${this.apiUrl}/feedback`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(g),signal:AbortSignal.timeout(this.timeout_ms)});if(!P.ok)throw new Error(`Failed to create feedback for run ${e}: ${P.status} ${P.statusText}`);return await P.json()}async readFeedback(e){const t=`/feedback/${e}`;return await this._get(t)}async deleteFeedback(e){const t=`/feedback/${e}`,r=await this.caller.call(fetch,this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!r.ok)throw new Error(`Failed to delete ${t}: ${r.status} ${r.statusText}`);await r.json()}async listFeedback({runIds:e,limit:t,offset:r}={}){const a=new URLSearchParams;return e&&a.append("run",e.join(",")),t!==void 0&&a.append("limit",t.toString()),r!==void 0&&a.append("offset",r.toString()),await this._get("/feedback",a)}}class ds extends Or{constructor(e={}){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{exampleId:t,projectName:r,client:a}=e;this.projectName=r??Pe("LANGCHAIN_PROJECT")??Pe("LANGCHAIN_SESSION"),this.exampleId=t,this.client=a??new Pr({})}async _convertToCreate(e,t=void 0){return{...e,extra:{...e.extra,runtime:await Na()},child_runs:void 0,session_name:this.projectName,reference_example_id:e.parent_run_id?void 0:t}}async persistRun(e){}async _persistRunSingle(e){const t=await this._convertToCreate(e,this.exampleId);await this.client.createRun(t)}async _updateRunSingle(e){const t={end_time:e.end_time,error:e.error,outputs:e.outputs,events:e.events};await this.client.updateRun(e.id,t)}async onLLMStart(e){await this._persistRunSingle(e)}async onLLMEnd(e){await this._updateRunSingle(e)}async onLLMError(e){await this._updateRunSingle(e)}async onChainStart(e){await this._persistRunSingle(e)}async onChainEnd(e){await this._updateRunSingle(e)}async onChainError(e){await this._updateRunSingle(e)}async onToolStart(e){await this._persistRunSingle(e)}async onToolEnd(e){await this._updateRunSingle(e)}async onToolError(e){await this._updateRunSingle(e)}}function Tr(n,e="Human",t="AI"){const r=[];for(const a of n){let s;if(a._getType()==="human")s=e;else if(a._getType()==="ai")s=t;else if(a._getType()==="system")s="System";else if(a._getType()==="function")s="Function";else if(a._getType()==="generic")s=a.role;else throw new Error(`Got unsupported message type: ${a}`);const i=a.name?`${a.name}, `:"";r.push(`${s}: ${i}${a.content}`)}return r.join(`
`)}class ps extends Or{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"endpoint",{enumerable:!0,configurable:!0,writable:!0,value:Pe("LANGCHAIN_ENDPOINT")||"http://localhost:1984"}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:{"Content-Type":"application/json"}}),Object.defineProperty(this,"session",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const e=Pe("LANGCHAIN_API_KEY");e&&(this.headers["x-api-key"]=e)}async newSession(e){const t={start_time:Date.now(),name:e},r=await this.persistSession(t);return this.session=r,r}async loadSession(e){const t=`${this.endpoint}/sessions?name=${e}`;return this._handleSessionResponse(t)}async loadDefaultSession(){const e=`${this.endpoint}/sessions?name=default`;return this._handleSessionResponse(e)}async convertV2RunToRun(e){var s;const t=this.session??await this.loadDefaultSession(),r=e.serialized;let a;if(e.run_type==="llm"){const i=e.inputs.prompts?e.inputs.prompts:e.inputs.messages.map(u=>Tr(u));a={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:r,type:e.run_type,session_id:t.id,prompts:i,response:e.outputs}}else if(e.run_type==="chain"){const i=await Promise.all(e.child_runs.map(u=>this.convertV2RunToRun(u)));a={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:r,type:e.run_type,session_id:t.id,inputs:e.inputs,outputs:e.outputs,child_llm_runs:i.filter(u=>u.type==="llm"),child_chain_runs:i.filter(u=>u.type==="chain"),child_tool_runs:i.filter(u=>u.type==="tool")}}else if(e.run_type==="tool"){const i=await Promise.all(e.child_runs.map(u=>this.convertV2RunToRun(u)));a={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:r,type:e.run_type,session_id:t.id,tool_input:e.inputs.input,output:(s=e.outputs)==null?void 0:s.output,action:JSON.stringify(r),child_llm_runs:i.filter(u=>u.type==="llm"),child_chain_runs:i.filter(u=>u.type==="chain"),child_tool_runs:i.filter(u=>u.type==="tool")}}else throw new Error(`Unknown run type: ${e.run_type}`);return a}async persistRun(e){let t,r;e.run_type!==void 0?r=await this.convertV2RunToRun(e):r=e,r.type==="llm"?t=`${this.endpoint}/llm-runs`:r.type==="chain"?t=`${this.endpoint}/chain-runs`:t=`${this.endpoint}/tool-runs`;const a=await fetch(t,{method:"POST",headers:this.headers,body:JSON.stringify(r)});a.ok||console.error(`Failed to persist run: ${a.status} ${a.statusText}`)}async persistSession(e){const t=`${this.endpoint}/sessions`,r=await fetch(t,{method:"POST",headers:this.headers,body:JSON.stringify(e)});return r.ok?{id:(await r.json()).id,...e}:(console.error(`Failed to persist session: ${r.status} ${r.statusText}, using default session.`),{id:1,...e})}async _handleSessionResponse(e){const t=await fetch(e,{method:"GET",headers:this.headers});let r;if(!t.ok)return console.error(`Failed to load session: ${t.status} ${t.statusText}`),r={id:1,start_time:Date.now()},this.session=r,r;const a=await t.json();return a.length===0?(r={id:1,start_time:Date.now()},this.session=r,r):([r]=a,this.session=r,r)}}async function fs(n){const e=new ps;return n?await e.loadSession(n):await e.loadDefaultSession(),e}async function hs(){return new ds}let yr;function ms(){const n="default"in nt?nt.default:nt;return new n({autoStart:!0,concurrency:1})}async function he(n,e){e===!0?await n():(typeof yr>"u"&&(yr=ms()),yr.add(n))}function gs(n){return n?Array.isArray(n)||"name"in n?{callbacks:n}:n:{}}class ys{setHandler(e){return this.setHandlers([e])}}class kr{constructor(e,t,r,a,s,i,o,u){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:u})}async handleText(e){await Promise.all(this.handlers.map(t=>he(async()=>{var r;try{await((r=t.handleText)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(a){console.error(`Error in handler ${t.constructor.name}, handleText: ${a}`)}},t.awaitHandlers)))}}class Gr extends kr{async handleLLMNewToken(e,t={prompt:0,completion:0}){await Promise.all(this.handlers.map(r=>he(async()=>{var a;if(!r.ignoreLLM)try{await((a=r.handleLLMNewToken)==null?void 0:a.call(r,e,t,this.runId,this._parentRunId,this.tags))}catch(s){console.error(`Error in handler ${r.constructor.name}, handleLLMNewToken: ${s}`)}},r.awaitHandlers)))}async handleLLMError(e){await Promise.all(this.handlers.map(t=>he(async()=>{var r;if(!t.ignoreLLM)try{await((r=t.handleLLMError)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(a){console.error(`Error in handler ${t.constructor.name}, handleLLMError: ${a}`)}},t.awaitHandlers)))}async handleLLMEnd(e){await Promise.all(this.handlers.map(t=>he(async()=>{var r;if(!t.ignoreLLM)try{await((r=t.handleLLMEnd)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(a){console.error(`Error in handler ${t.constructor.name}, handleLLMEnd: ${a}`)}},t.awaitHandlers)))}}class bs extends kr{getChild(e){const t=new Le(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleChainError(e){await Promise.all(this.handlers.map(t=>he(async()=>{var r;if(!t.ignoreChain)try{await((r=t.handleChainError)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(a){console.error(`Error in handler ${t.constructor.name}, handleChainError: ${a}`)}},t.awaitHandlers)))}async handleChainEnd(e){await Promise.all(this.handlers.map(t=>he(async()=>{var r;if(!t.ignoreChain)try{await((r=t.handleChainEnd)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(a){console.error(`Error in handler ${t.constructor.name}, handleChainEnd: ${a}`)}},t.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(t=>he(async()=>{var r;if(!t.ignoreAgent)try{await((r=t.handleAgentAction)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(a){console.error(`Error in handler ${t.constructor.name}, handleAgentAction: ${a}`)}},t.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(t=>he(async()=>{var r;if(!t.ignoreAgent)try{await((r=t.handleAgentEnd)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(a){console.error(`Error in handler ${t.constructor.name}, handleAgentEnd: ${a}`)}},t.awaitHandlers)))}}class _s extends kr{getChild(e){const t=new Le(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleToolError(e){await Promise.all(this.handlers.map(t=>he(async()=>{var r;if(!t.ignoreAgent)try{await((r=t.handleToolError)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(a){console.error(`Error in handler ${t.constructor.name}, handleToolError: ${a}`)}},t.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(t=>he(async()=>{var r;if(!t.ignoreAgent)try{await((r=t.handleToolEnd)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(a){console.error(`Error in handler ${t.constructor.name}, handleToolEnd: ${a}`)}},t.awaitHandlers)))}}class Le extends ys{constructor(e){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=[],this.inheritableHandlers=[],this._parentRunId=e}async handleLLMStart(e,t,r=void 0,a=void 0,s=void 0){return Promise.all(t.map(async i=>{const o=qe();return await Promise.all(this.handlers.map(u=>he(async()=>{var l;if(!u.ignoreLLM)try{await((l=u.handleLLMStart)==null?void 0:l.call(u,e,[i],o,this._parentRunId,s,this.tags,this.metadata))}catch(g){console.error(`Error in handler ${u.constructor.name}, handleLLMStart: ${g}`)}},u.awaitHandlers))),new Gr(o,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,t,r=void 0,a=void 0,s=void 0){return Promise.all(t.map(async i=>{const o=qe();return await Promise.all(this.handlers.map(u=>he(async()=>{var l,g;if(!u.ignoreLLM)try{if(u.handleChatModelStart)await((l=u.handleChatModelStart)==null?void 0:l.call(u,e,[i],o,this._parentRunId,s,this.tags,this.metadata));else if(u.handleLLMStart){const P=Tr(i);await((g=u.handleLLMStart)==null?void 0:g.call(u,e,[P],o,this._parentRunId,s,this.tags,this.metadata))}}catch(P){console.error(`Error in handler ${u.constructor.name}, handleLLMStart: ${P}`)}},u.awaitHandlers))),new Gr(o,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,t,r=qe()){return await Promise.all(this.handlers.map(a=>he(async()=>{var s;if(!a.ignoreChain)try{await((s=a.handleChainStart)==null?void 0:s.call(a,e,t,r,this._parentRunId,this.tags,this.metadata))}catch(i){console.error(`Error in handler ${a.constructor.name}, handleChainStart: ${i}`)}},a.awaitHandlers))),new bs(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,t,r=qe()){return await Promise.all(this.handlers.map(a=>he(async()=>{var s;if(!a.ignoreAgent)try{await((s=a.handleToolStart)==null?void 0:s.call(a,e,t,r,this._parentRunId,this.tags,this.metadata))}catch(i){console.error(`Error in handler ${a.constructor.name}, handleToolStart: ${i}`)}},a.awaitHandlers))),new _s(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}addHandler(e,t=!0){this.handlers.push(e),t&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(t=>t!==e),this.inheritableHandlers=this.inheritableHandlers.filter(t=>t!==e)}setHandlers(e,t=!0){this.handlers=[],this.inheritableHandlers=[];for(const r of e)this.addHandler(r,t)}addTags(e,t=!0){this.removeTags(e),this.tags.push(...e),t&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(t=>!e.includes(t)),this.inheritableTags=this.inheritableTags.filter(t=>!e.includes(t))}addMetadata(e,t=!0){this.metadata={...this.metadata,...e},t&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(const t of Object.keys(e))delete this.metadata[t],delete this.inheritableMetadata[t]}copy(e=[],t=!0){const r=new Le(this._parentRunId);for(const a of this.handlers){const s=this.inheritableHandlers.includes(a);r.addHandler(a,s)}for(const a of this.tags){const s=this.inheritableTags.includes(a);r.addTags([a],s)}for(const a of Object.keys(this.metadata)){const s=Object.keys(this.inheritableMetadata).includes(a);r.addMetadata({[a]:this.metadata[a]},s)}for(const a of e)r.handlers.filter(s=>s.name==="console_callback_handler").some(s=>s.name===a.name)||r.addHandler(a,t);return r}static fromHandlers(e){class t extends Ut{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:qe()}),Object.assign(this,e)}}const r=new this;return r.addHandler(new t),r}static async configure(e,t,r,a,s,i,o){let u;(e||t)&&(Array.isArray(e)||!e?(u=new Le,u.setHandlers((e==null?void 0:e.map(Jr))??[],!0)):u=e,u=u.copy(Array.isArray(t)?t.map(Jr):t==null?void 0:t.handlers,!1));const l=Pe("LANGCHAIN_VERBOSE")||(o==null?void 0:o.verbose),g=Pe("LANGCHAIN_TRACING_V2")??!1,P=g||(Pe("LANGCHAIN_TRACING")??!1);if(l||P){if(u||(u=new Le),l&&!u.handlers.some(L=>L.name===Hr.prototype.name)){const L=new Hr;u.addHandler(L,!0)}if(P&&!u.handlers.some(L=>L.name==="langchain_tracer"))if(g)u.addHandler(await hs(),!0);else{const L=Pe("LANGCHAIN_PROJECT")&&Pe("LANGCHAIN_SESSION");u.addHandler(await fs(L),!0)}}return(r||a)&&u&&(u.addTags(r??[]),u.addTags(a??[],!1)),(s||i)&&u&&(u.addMetadata(s??{}),u.addMetadata(i??{},!1)),u}}function Jr(n){return"name"in n?n:Ut.fromMethods(n)}const An=n=>n.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":n.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":n.startsWith("gpt-4-32k")?"gpt-4-32k":n.startsWith("gpt-4-")?"gpt-4":n,vs=n=>{switch(An(n)){case"gpt-3.5-turbo-16k":return 16384;case"gpt-3.5-turbo":return 4096;case"gpt-4-32k":return 32768;case"gpt-4":return 8192;case"text-davinci-003":return 4097;case"text-curie-001":return 2048;case"text-babbage-001":return 2048;case"text-ada-001":return 2048;case"code-davinci-002":return 8e3;case"code-cushman-001":return 2048;default:return 4097}},lu=async({prompt:n,modelName:e})=>{let t;try{t=(await jn(e)).encode(n).length}catch{console.warn("Failed to calculate number of tokens, falling back to approximate count"),t=Math.ceil(n.length/4)}return vs(e)-t},ws=()=>!1;class Cn extends at{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??ws(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}}class Dn extends Cn{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:e,callbackManager:t,...r}){super({callbacks:e??t,...r}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.caller=new En(r??{})}async getNumTokens(e){let t=Math.ceil(e.length/4);if(!this._encoding)try{this._encoding=await jn("modelName"in this?An(this.modelName):"gpt2")}catch(r){console.warn("Failed to calculate number of tokens, falling back to approximate count",r)}return this._encoding&&(t=this._encoding.encode(e).length),t}_identifyingParams(){return{}}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){const{_type:t,_model:r,...a}=e;if(r&&r!=="base_chat_model")throw new Error(`Cannot load LLM with model ${r}`);const s={openai:(await fe(()=>import("./openai.d456cac0.js"),["_app/immutable/chunks/openai.d456cac0.js","_app/immutable/chunks/_commonjs-dynamic-modules.5fcb8f34.js","_app/immutable/chunks/public.79d73255.js","_app/immutable/chunks/NavBar.74969093.js","_app/immutable/chunks/scheduler.2364b0ad.js","_app/immutable/chunks/index.e0615928.js","_app/immutable/chunks/globals.7f7f1b26.js","_app/immutable/assets/NavBar.ffbd0f32.css","_app/immutable/chunks/azure.11841502.js","_app/immutable/chunks/prompt-layer.00daf386.js"])).ChatOpenAI}[t];if(s===void 0)throw new Error(`Cannot load  LLM with type ${t}`);return new s(a)}}class er extends Cn{get lc_namespace(){return["langchain","chains",this._chainType()]}constructor(e,t,r){if(arguments.length===1&&typeof e=="object"&&!("saveContext"in e)){const{memory:a,callbackManager:s,...i}=e;super({...i,callbacks:s??i.callbacks}),this.memory=a}else super({verbose:t,callbacks:r}),this.memory=e}_selectMemoryInputs(e){const t={...e};return"signal"in t&&delete t.signal,"timeout"in t&&delete t.timeout,t}serialize(){throw new Error("Method not implemented.")}async run(e,t){const r=this.inputKeys.filter(u=>{var l;return!((l=this.memory)!=null&&l.memoryKeys.includes(u))});if(!(r.length<=1))throw new Error(`Chain ${this._chainType()} expects multiple inputs, cannot use 'run' `);const s=r.length?{[r[0]]:e}:{},i=await this.call(s,t),o=Object.keys(i);if(o.length===1)return i[o[0]];throw new Error("return values have multiple keys, `run` only supported when one key currently")}async call(e,t,r){const a={...e};if(a.timeout&&!a.signal&&(a.signal=AbortSignal.timeout(a.timeout),delete a.timeout),this.memory!=null){const l=await this.memory.loadMemoryVariables(this._selectMemoryInputs(e));for(const[g,P]of Object.entries(l))a[g]=P}const s=gs(t),i=await Le.configure(s.callbacks,this.callbacks,s.tags||r,this.tags,s.metadata,this.metadata,{verbose:this.verbose}),o=await(i==null?void 0:i.handleChainStart(this.toJSON(),a));let u;try{u=await(e.signal?Promise.race([this._call(a,o),new Promise((l,g)=>{var P;(P=e.signal)==null||P.addEventListener("abort",()=>{g(new Error("AbortError"))})})]):this._call(a,o))}catch(l){throw await(o==null?void 0:o.handleChainError(l)),l}return this.memory!=null&&await this.memory.saveContext(this._selectMemoryInputs(e),u),await(o==null?void 0:o.handleChainEnd(u)),Object.defineProperty(u,On,{value:o?{runId:o==null?void 0:o.runId}:void 0,configurable:!0}),u}async apply(e,t){return Promise.all(e.map(async(r,a)=>this.call(r,t==null?void 0:t[a])))}static async deserialize(e,t={}){switch(e._type){case"llm_chain":{const{LLMChain:r}=await fe(()=>Promise.resolve().then(()=>ks),void 0);return r.deserialize(e)}case"sequential_chain":{const{SequentialChain:r}=await fe(()=>import("./sequential_chain.33328985.js"),[]);return r.deserialize(e)}case"simple_sequential_chain":{const{SimpleSequentialChain:r}=await fe(()=>import("./sequential_chain.33328985.js"),[]);return r.deserialize(e)}case"stuff_documents_chain":{const{StuffDocumentsChain:r}=await fe(()=>Promise.resolve().then(()=>br),void 0);return r.deserialize(e)}case"map_reduce_documents_chain":{const{MapReduceDocumentsChain:r}=await fe(()=>Promise.resolve().then(()=>br),void 0);return r.deserialize(e)}case"refine_documents_chain":{const{RefineDocumentsChain:r}=await fe(()=>Promise.resolve().then(()=>br),void 0);return r.deserialize(e)}case"vector_db_qa":{const{VectorDBQAChain:r}=await fe(()=>import("./vector_db_qa.1d76f362.js"),[]);return r.deserialize(e,t)}case"api_chain":{const{APIChain:r}=await fe(()=>import("./api_chain.3fed16df.js"),[]);return r.deserialize(e)}default:throw new Error(`Invalid prompt type in config: ${e._type}`)}}}class xs extends Pn{constructor(e){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts","base"]}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new Tn(this.value)]}}class jr extends at{get lc_attributes(){return{partialVariables:void 0}}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts",this._getPromptType()]}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"partialVariables",{enumerable:!0,configurable:!0,writable:!0,value:{}});const{inputVariables:t}=e;if(t.includes("stop"))throw new Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,e)}async mergePartialAndUserVariables(e){const t=this.partialVariables??{},r={};for(const[s,i]of Object.entries(t))typeof i=="string"?r[s]=i:r[s]=await i();return{...r,...e}}serialize(){throw new Error("Use .toJSON() instead")}static async deserialize(e){switch(e._type){case"prompt":{const{PromptTemplate:t}=await fe(()=>Promise.resolve().then(()=>Wr),void 0);return t.deserialize(e)}case void 0:{const{PromptTemplate:t}=await fe(()=>Promise.resolve().then(()=>Wr),void 0);return t.deserialize({...e,_type:"prompt"})}case"few_shot":{const{FewShotPromptTemplate:t}=await fe(()=>import("./few_shot.c2957baf.js"),[]);return t.deserialize(e)}default:throw new Error(`Invalid prompt type in config: ${e._type}`)}}}class Es extends jr{async formatPromptValue(e){const t=await this.format(e);return new xs(t)}}class Os extends at{parseResultWithPrompt(e,t,r){return this.parseResult(e,r)}}class Ps extends Os{parseResult(e,t){return this.parse(e[0].text,t)}async parseWithPrompt(e,t,r){return this.parse(e,r)}_type(){throw new Error("_type not implemented")}}class Ts extends Ps{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","default"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}parse(e){return Promise.resolve(e)}getFormatInstructions(){return""}}class $e extends er{get inputKeys(){return this.prompt.inputVariables}get outputKeys(){return[this.outputKey]}constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"llm",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"llmKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputKey",{enumerable:!0,configurable:!0,writable:!0,value:"text"}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt,this.llm=e.llm,this.llmKwargs=e.llmKwargs,this.outputKey=e.outputKey??this.outputKey,this.outputParser=e.outputParser??new Ts,this.prompt.outputParser){if(e.outputParser)throw new Error("Cannot set both outputParser and prompt.outputParser");this.outputParser=this.prompt.outputParser}}_selectMemoryInputs(e){const t=super._selectMemoryInputs(e);for(const r of this.llm.callKeys)r in e&&delete t[r];return t}async _getFinalOutput(e,t,r){let a;return this.outputParser?a=await this.outputParser.parseResultWithPrompt(e,t,r==null?void 0:r.getChild()):a=e[0].text,a}call(e,t){return super.call(e,t)}async _call(e,t){const r={...e},a={...this.llmKwargs};for(const o of this.llm.callKeys)o in e&&(a[o]=e[o],delete r[o]);const s=await this.prompt.formatPromptValue(r),{generations:i}=await this.llm.generatePrompt([s],a,t==null?void 0:t.getChild());return{[this.outputKey]:await this._getFinalOutput(i[0],s,t)}}async predict(e,t){return(await this.call(e,t))[this.outputKey]}_chainType(){return"llm"}static async deserialize(e){const{llm:t,prompt:r}=e;if(!t)throw new Error("LLMChain must have llm");if(!r)throw new Error("LLMChain must have prompt");return new $e({llm:await Dn.deserialize(t),prompt:await jr.deserialize(r)})}serialize(){return{_type:`${this._chainType()}_chain`,llm:this.llm.serialize(),prompt:this.prompt.serialize()}}}const ks=Object.freeze(Object.defineProperty({__proto__:null,LLMChain:$e},Symbol.toStringTag,{value:"Module"})),Mn=n=>{const e=n.split(""),t=[],r=(s,i)=>{for(let o=i;o<e.length;o+=1)if(s.includes(e[o]))return o;return-1};let a=0;for(;a<e.length;)if(e[a]==="{"&&a+1<e.length&&e[a+1]==="{")t.push({type:"literal",text:"{"}),a+=2;else if(e[a]==="}"&&a+1<e.length&&e[a+1]==="}")t.push({type:"literal",text:"}"}),a+=2;else if(e[a]==="{"){const s=r("}",a);if(s<0)throw new Error("Unclosed '{' in template.");t.push({type:"variable",name:e.slice(a+1,s).join("")}),a=s+1}else{if(e[a]==="}")throw new Error("Single '}' in template.");{const s=r("{}",a),i=(s<0?e.slice(a):e.slice(a,s)).join("");t.push({type:"literal",text:i}),a=s<0?e.length:s}}return t},js=(n,e)=>Mn(n).reduce((t,r)=>{if(r.type==="variable"){if(r.name in e)return t+e[r.name];throw new Error(`Missing value for input ${r.name}`)}return t+r.text},""),vr={"f-string":js,jinja2:(n,e)=>""},Ss={"f-string":Mn,jinja2:n=>[]},Nn=(n,e,t)=>vr[e](n,t),Is=(n,e)=>Ss[e](n),As=(n,e,t)=>{if(!(e in vr)){const r=Object.keys(vr);throw new Error(`Invalid template format. Got \`${e}\`;
                         should be one of ${r}`)}try{const r=t.reduce((a,s)=>(a[s]="foo",a),{});Nn(n,e,r)}catch(r){throw new Error(`Invalid prompt schema: ${r.message}`)}};class Te extends Es{constructor(e){if(super(e),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,e),this.validateTemplate){let t=this.inputVariables;this.partialVariables&&(t=t.concat(Object.keys(this.partialVariables))),As(this.template,this.templateFormat,t)}}_getPromptType(){return"prompt"}async format(e){const t=await this.mergePartialAndUserVariables(e);return Nn(this.template,this.templateFormat,t)}static fromExamples(e,t,r,a=`

`,s=""){const i=[s,...e,t].join(a);return new Te({inputVariables:r,template:i})}static fromTemplate(e,{templateFormat:t="f-string",...r}={}){const a=new Set;return Is(e,t).forEach(s=>{s.type==="variable"&&a.add(s.name)}),new Te({inputVariables:[...a],templateFormat:t,template:e,...r})}async partial(e){const t={...this};return t.inputVariables=this.inputVariables.filter(r=>!(r in e)),t.partialVariables={...this.partialVariables??{},...e},new Te(t)}serialize(){if(this.outputParser!==void 0)throw new Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static async deserialize(e){if(!e.template)throw new Error("Prompt template must have a template");return new Te({inputVariables:e.input_variables,template:e.template,templateFormat:e.template_format})}}const Wr=Object.freeze(Object.defineProperty({__proto__:null,PromptTemplate:Te},Symbol.toStringTag,{value:"Module"}));class Ft extends er{get inputKeys(){return[this.inputKey,...this.llmChain.inputKeys].filter(e=>e!==this.documentVariableName)}get outputKeys(){return this.llmChain.outputKeys}constructor(e){super(e),Object.defineProperty(this,"llmChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"input_documents"}),Object.defineProperty(this,"documentVariableName",{enumerable:!0,configurable:!0,writable:!0,value:"context"}),this.llmChain=e.llmChain,this.documentVariableName=e.documentVariableName??this.documentVariableName,this.inputKey=e.inputKey??this.inputKey}_prepInputs(e){if(!(this.inputKey in e))throw new Error(`Document key ${this.inputKey} not found.`);const{[this.inputKey]:t,...r}=e,s=t.map(({pageContent:i})=>i).join(`

`);return{...r,[this.documentVariableName]:s}}async _call(e,t){return await this.llmChain.call(this._prepInputs(e),t==null?void 0:t.getChild("combine_documents"))}_chainType(){return"stuff_documents_chain"}static async deserialize(e){if(!e.llm_chain)throw new Error("Missing llm_chain");return new Ft({llmChain:await $e.deserialize(e.llm_chain)})}serialize(){return{_type:this._chainType(),llm_chain:this.llmChain.serialize()}}}class Sr extends er{get inputKeys(){return[this.inputKey,...this.combineDocumentChain.inputKeys]}get outputKeys(){return this.combineDocumentChain.outputKeys}constructor(e){super(e),Object.defineProperty(this,"llmChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"input_documents"}),Object.defineProperty(this,"documentVariableName",{enumerable:!0,configurable:!0,writable:!0,value:"context"}),Object.defineProperty(this,"returnIntermediateSteps",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:3e3}),Object.defineProperty(this,"maxIterations",{enumerable:!0,configurable:!0,writable:!0,value:10}),Object.defineProperty(this,"ensureMapStep",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"combineDocumentChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.llmChain=e.llmChain,this.combineDocumentChain=e.combineDocumentChain,this.documentVariableName=e.documentVariableName??this.documentVariableName,this.ensureMapStep=e.ensureMapStep??this.ensureMapStep,this.inputKey=e.inputKey??this.inputKey,this.maxTokens=e.maxTokens??this.maxTokens,this.maxIterations=e.maxIterations??this.maxIterations,this.returnIntermediateSteps=e.returnIntermediateSteps??!1}async _call(e,t){if(!(this.inputKey in e))throw new Error(`Document key ${this.inputKey} not found.`);const{[this.inputKey]:r,...a}=e;let s=r,i=[];for(let l=0;l<this.maxIterations;l+=1){const g=s.map(x=>({[this.documentVariableName]:x.pageContent,...a}));if(l!==0||!this.ensureMapStep){const x=await this.combineDocumentChain.llmChain.prompt.format(this.combineDocumentChain._prepInputs({[this.combineDocumentChain.inputKey]:s,...a}));if(await this.combineDocumentChain.llmChain.llm.getNumTokens(x)<this.maxTokens)break}const L=await this.llmChain.apply(g,t?Array.from({length:g.length},(x,$)=>t.getChild(`map_${$+1}`)):void 0),{outputKey:J}=this.llmChain;this.returnIntermediateSteps&&(i=i.concat(L.map(x=>x[J]))),s=L.map(x=>({pageContent:x[J],metadata:{}}))}const o={[this.combineDocumentChain.inputKey]:s,...a},u=await this.combineDocumentChain.call(o,t==null?void 0:t.getChild("combine_documents"));return this.returnIntermediateSteps?{...u,intermediateSteps:i}:u}_chainType(){return"map_reduce_documents_chain"}static async deserialize(e){if(!e.llm_chain)throw new Error("Missing llm_chain");if(!e.combine_document_chain)throw new Error("Missing combine_document_chain");return new Sr({llmChain:await $e.deserialize(e.llm_chain),combineDocumentChain:await Ft.deserialize(e.combine_document_chain)})}serialize(){return{_type:this._chainType(),llm_chain:this.llmChain.serialize(),combine_document_chain:this.combineDocumentChain.serialize()}}}class Ir extends er{get defaultDocumentPrompt(){return new Te({inputVariables:["page_content"],template:"{page_content}"})}get inputKeys(){return[...new Set([this.inputKey,...this.llmChain.inputKeys,...this.refineLLMChain.inputKeys])].filter(e=>e!==this.documentVariableName&&e!==this.initialResponseName)}get outputKeys(){return[this.outputKey]}constructor(e){super(e),Object.defineProperty(this,"llmChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"input_documents"}),Object.defineProperty(this,"outputKey",{enumerable:!0,configurable:!0,writable:!0,value:"output_text"}),Object.defineProperty(this,"documentVariableName",{enumerable:!0,configurable:!0,writable:!0,value:"context"}),Object.defineProperty(this,"initialResponseName",{enumerable:!0,configurable:!0,writable:!0,value:"existing_answer"}),Object.defineProperty(this,"refineLLMChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"documentPrompt",{enumerable:!0,configurable:!0,writable:!0,value:this.defaultDocumentPrompt}),this.llmChain=e.llmChain,this.refineLLMChain=e.refineLLMChain,this.documentVariableName=e.documentVariableName??this.documentVariableName,this.inputKey=e.inputKey??this.inputKey,this.outputKey=e.outputKey??this.outputKey,this.documentPrompt=e.documentPrompt??this.documentPrompt,this.initialResponseName=e.initialResponseName??this.initialResponseName}async _constructInitialInputs(e,t){const r={page_content:e.pageContent,...e.metadata},a={};return this.documentPrompt.inputVariables.forEach(o=>{a[o]=r[o]}),{...{[this.documentVariableName]:await this.documentPrompt.format({...a})},...t}}async _constructRefineInputs(e,t){const r={page_content:e.pageContent,...e.metadata},a={};this.documentPrompt.inputVariables.forEach(o=>{a[o]=r[o]});const s={[this.documentVariableName]:await this.documentPrompt.format({...a})};return{[this.initialResponseName]:t,...s}}async _call(e,t){if(!(this.inputKey in e))throw new Error(`Document key ${this.inputKey} not found.`);const{[this.inputKey]:r,...a}=e,s=r,i=await this._constructInitialInputs(s[0],a);let o=await this.llmChain.predict({...i},t==null?void 0:t.getChild("answer"));for(let u=1;u<s.length;u+=1){const g={...await this._constructRefineInputs(s[u],o),...a};o=await this.refineLLMChain.predict({...g},t==null?void 0:t.getChild("refine"))}return{[this.outputKey]:o}}_chainType(){return"refine_documents_chain"}static async deserialize(e){const t=e.llm_chain;if(!t)throw new Error("Missing llm_chain");const r=e.refine_llm_chain;if(!r)throw new Error("Missing refine_llm_chain");return new Ir({llmChain:await $e.deserialize(t),refineLLMChain:await $e.deserialize(r)})}serialize(){return{_type:this._chainType(),llm_chain:this.llmChain.serialize(),refine_llm_chain:this.refineLLMChain.serialize()}}}const br=Object.freeze(Object.defineProperty({__proto__:null,MapReduceDocumentsChain:Sr,RefineDocumentsChain:Ir,StuffDocumentsChain:Ft},Symbol.toStringTag,{value:"Module"}));class Cs extends at{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}}class Ds extends Pn{constructor(e){Array.isArray(e)&&(e={messages:e}),super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return JSON.stringify(this.messages)}toChatMessages(){return this.messages}}class Ln extends Cs{constructor(e){"prompt"in e||(e={prompt:e}),super(e),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt}get inputVariables(){return this.prompt.inputVariables}async formatMessages(e){return[await this.format(e)]}}class Ms extends jr{constructor(e){super(e)}async format(e){return(await this.formatPromptValue(e)).toString()}async formatPromptValue(e){const t=await this.formatMessages(e);return new Ds(t)}}class Ns extends Ln{async format(e){return new Tn(await this.prompt.format(e))}static fromTemplate(e){return new this(Te.fromTemplate(e))}}class Ls extends Ln{async format(e){return new La(await this.prompt.format(e))}static fromTemplate(e){return new this(Te.fromTemplate(e))}}class rt extends Ms{get lc_aliases(){return{promptMessages:"messages"}}constructor(e){if(super(e),Object.defineProperty(this,"promptMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,e),this.validateTemplate){const t=new Set;for(const i of this.promptMessages)for(const o of i.inputVariables)t.add(o);const r=new Set(this.partialVariables?this.inputVariables.concat(Object.keys(this.partialVariables)):this.inputVariables),a=new Set([...r].filter(i=>!t.has(i)));if(a.size>0)throw new Error(`Input variables \`${[...a]}\` are not used in any of the prompt messages.`);const s=new Set([...t].filter(i=>!r.has(i)));if(s.size>0)throw new Error(`Input variables \`${[...s]}\` are used in prompt messages but not in the prompt template.`)}}_getPromptType(){return"chat"}async formatMessages(e){const t=await this.mergePartialAndUserVariables(e);let r=[];for(const a of this.promptMessages){const s=a.inputVariables.reduce((o,u)=>{if(!(u in t))throw new Error(`Missing value for input variable \`${u}\``);return o[u]=t[u],o},{}),i=await a.formatMessages(s);r=r.concat(i)}return r}async partial(e){const t={...this};return t.inputVariables=this.inputVariables.filter(r=>!(r in e)),t.partialVariables={...this.partialVariables??{},...e},new rt(t)}static fromPromptMessages(e){const t=e.reduce((s,i)=>s.concat(i instanceof rt?i.promptMessages:[i]),[]),r=e.reduce((s,i)=>i instanceof rt?Object.assign(s,i.partialVariables):s,Object.create(null)),a=new Set;for(const s of t)for(const i of s.inputVariables)i in r||a.add(i);return new rt({inputVariables:[...a],promptMessages:t,partialVariables:r})}}class Rs{async getPromptAsync(e,t){return this.getPrompt(e).partial((t==null?void 0:t.partialVariables)??{})}}class $s extends Rs{constructor(e,t=[]){super(),Object.defineProperty(this,"defaultPrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"conditionals",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.defaultPrompt=e,this.conditionals=t}getPrompt(e){for(const[t,r]of this.conditionals)if(t(e))return r;return this.defaultPrompt}}function Zs(n){return n._modelType()==="base_chat_model"}const Bs=new Te({template:`Use the following pieces of context to answer the question at the end. If you don't know the answer, just say that you don't know, don't try to make up an answer.

{context}

Question: {question}
Helpful Answer:`,inputVariables:["context","question"]}),Vs=`Use the following pieces of context to answer the users question. 
If you don't know the answer, just say that you don't know, don't try to make up an answer.
----------------
{context}`,Us=[Ls.fromTemplate(Vs),Ns.fromTemplate("{question}")],Fs=rt.fromPromptMessages(Us),Ks=new $s(Bs,[[Zs,Fs]]);function zs(n,e={}){const{prompt:t=Ks.getPrompt(n),verbose:r}=e,a=new $e({prompt:t,llm:n,verbose:r});return new Ft({llmChain:a,verbose:r})}var Q;(function(n){n.assertEqual=a=>a;function e(a){}n.assertIs=e;function t(a){throw new Error}n.assertNever=t,n.arrayToEnum=a=>{const s={};for(const i of a)s[i]=i;return s},n.getValidEnumValues=a=>{const s=n.objectKeys(a).filter(o=>typeof a[a[o]]!="number"),i={};for(const o of s)i[o]=a[o];return n.objectValues(i)},n.objectValues=a=>n.objectKeys(a).map(function(s){return a[s]}),n.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const s=[];for(const i in a)Object.prototype.hasOwnProperty.call(a,i)&&s.push(i);return s},n.find=(a,s)=>{for(const i of a)if(s(i))return i},n.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function r(a,s=" | "){return a.map(i=>typeof i=="string"?`'${i}'`:i).join(s)}n.joinValues=r,n.jsonStringifyReplacer=(a,s)=>typeof s=="bigint"?s.toString():s})(Q||(Q={}));var Jt;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(Jt||(Jt={}));const M=Q.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ie=n=>{switch(typeof n){case"undefined":return M.undefined;case"string":return M.string;case"number":return isNaN(n)?M.nan:M.number;case"boolean":return M.boolean;case"function":return M.function;case"bigint":return M.bigint;case"symbol":return M.symbol;case"object":return Array.isArray(n)?M.array:n===null?M.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?M.promise:typeof Map<"u"&&n instanceof Map?M.map:typeof Set<"u"&&n instanceof Set?M.set:typeof Date<"u"&&n instanceof Date?M.date:M.object;default:return M.unknown}},T=Q.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Rn=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:");class be extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(s){return s.message},r={_errors:[]},a=s=>{for(const i of s.issues)if(i.code==="invalid_union")i.unionErrors.map(a);else if(i.code==="invalid_return_type")a(i.returnTypeError);else if(i.code==="invalid_arguments")a(i.argumentsError);else if(i.path.length===0)r._errors.push(t(i));else{let o=r,u=0;for(;u<i.path.length;){const l=i.path[u];u===i.path.length-1?(o[l]=o[l]||{_errors:[]},o[l]._errors.push(t(i))):o[l]=o[l]||{_errors:[]},o=o[l],u++}}};return a(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,Q.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const a of this.issues)a.path.length>0?(t[a.path[0]]=t[a.path[0]]||[],t[a.path[0]].push(e(a))):r.push(e(a));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}be.create=n=>new be(n);const st=(n,e)=>{let t;switch(n.code){case T.invalid_type:n.received===M.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case T.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,Q.jsonStringifyReplacer)}`;break;case T.unrecognized_keys:t=`Unrecognized key(s) in object: ${Q.joinValues(n.keys,", ")}`;break;case T.invalid_union:t="Invalid input";break;case T.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${Q.joinValues(n.options)}`;break;case T.invalid_enum_value:t=`Invalid enum value. Expected ${Q.joinValues(n.options)}, received '${n.received}'`;break;case T.invalid_arguments:t="Invalid function arguments";break;case T.invalid_return_type:t="Invalid function return type";break;case T.invalid_date:t="Invalid date";break;case T.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:Q.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case T.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case T.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case T.custom:t="Invalid input";break;case T.invalid_intersection_types:t="Intersection results could not be merged";break;case T.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case T.not_finite:t="Number must be finite";break;default:t=e.defaultError,Q.assertNever(n)}return{message:t}};let $n=st;function Zn(n){$n=n}function Ct(){return $n}const Dt=n=>{const{data:e,path:t,errorMaps:r,issueData:a}=n,s=[...t,...a.path||[]],i={...a,path:s};let o="";const u=r.filter(l=>!!l).slice().reverse();for(const l of u)o=l(i,{data:e,defaultError:o}).message;return{...a,path:s,message:a.message||o}},Bn=[];function N(n,e){const t=Dt({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Ct(),st].filter(r=>!!r)});n.common.issues.push(t)}class oe{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const a of t){if(a.status==="aborted")return z;a.status==="dirty"&&e.dirty(),r.push(a.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const a of t)r.push({key:await a.key,value:await a.value});return oe.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const a of t){const{key:s,value:i}=a;if(s.status==="aborted"||i.status==="aborted")return z;s.status==="dirty"&&e.dirty(),i.status==="dirty"&&e.dirty(),(typeof i.value<"u"||a.alwaysSet)&&(r[s.value]=i.value)}return{status:e.value,value:r}}}const z=Object.freeze({status:"aborted"}),Ar=n=>({status:"dirty",value:n}),le=n=>({status:"valid",value:n}),Wt=n=>n.status==="aborted",Qt=n=>n.status==="dirty",Mt=n=>n.status==="valid",Nt=n=>typeof Promise<"u"&&n instanceof Promise;var Z;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Z||(Z={}));class je{constructor(e,t,r,a){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Qr=(n,e)=>{if(Mt(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new be(n.common.issues);return this._error=t,this._error}}};function G(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:a}=n;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:a}:{errorMap:(i,o)=>i.code!=="invalid_type"?{message:o.defaultError}:typeof o.data>"u"?{message:r??o.defaultError}:{message:t??o.defaultError},description:a}}class Y{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Ie(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Ie(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new oe,ctx:{common:e.parent.common,data:e.data,parsedType:Ie(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Nt(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const a={common:{issues:[],async:(r=t==null?void 0:t.async)!==null&&r!==void 0?r:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ie(e)},s=this._parseSync({data:e,path:a.path,parent:a});return Qr(a,s)}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ie(e)},a=this._parse({data:e,path:r.path,parent:r}),s=await(Nt(a)?a:Promise.resolve(a));return Qr(r,s)}refine(e,t){const r=a=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(a):t;return this._refinement((a,s)=>{const i=e(a),o=()=>s.addIssue({code:T.custom,...r(a)});return typeof Promise<"u"&&i instanceof Promise?i.then(u=>u?!0:(o(),!1)):i?!0:(o(),!1)})}refinement(e,t){return this._refinement((r,a)=>e(r)?!0:(a.addIssue(typeof t=="function"?t(r,a):t),!1))}_refinement(e){return new me({schema:this,typeName:K.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ke.create(this,this._def)}nullable(){return Ve.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return _e.create(this,this._def)}promise(){return Je.create(this,this._def)}or(e){return ct.create([this,e],this._def)}and(e){return lt.create(this,e,this._def)}transform(e){return new me({...G(this._def),schema:this,typeName:K.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new mt({...G(this._def),innerType:this,defaultValue:t,typeName:K.ZodDefault})}brand(){return new Cr({typeName:K.ZodBranded,type:this,...G(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Zt({...G(this._def),innerType:this,catchValue:t,typeName:K.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return gt.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const qs=/^c[^\s-]{8,}$/i,Hs=/^[a-z][a-z0-9]*$/,Ys=/[0-9A-HJKMNP-TV-Z]{26}/,Gs=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,Js=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,Ws=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,Qs=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,Xs=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ei=n=>n.precision?n.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${n.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${n.precision}}Z$`):n.precision===0?n.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):n.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function ti(n,e){return!!((e==="v4"||!e)&&Qs.test(n)||(e==="v6"||!e)&&Xs.test(n))}class ye extends Y{constructor(){super(...arguments),this._regex=(e,t,r)=>this.refinement(a=>e.test(a),{validation:t,code:T.invalid_string,...Z.errToObj(r)}),this.nonempty=e=>this.min(1,Z.errToObj(e)),this.trim=()=>new ye({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new ye({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new ye({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==M.string){const s=this._getOrReturnCtx(e);return N(s,{code:T.invalid_type,expected:M.string,received:s.parsedType}),z}const r=new oe;let a;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(a=this._getOrReturnCtx(e,a),N(a,{code:T.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(a=this._getOrReturnCtx(e,a),N(a,{code:T.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const i=e.data.length>s.value,o=e.data.length<s.value;(i||o)&&(a=this._getOrReturnCtx(e,a),i?N(a,{code:T.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):o&&N(a,{code:T.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")Js.test(e.data)||(a=this._getOrReturnCtx(e,a),N(a,{validation:"email",code:T.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")Ws.test(e.data)||(a=this._getOrReturnCtx(e,a),N(a,{validation:"emoji",code:T.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")Gs.test(e.data)||(a=this._getOrReturnCtx(e,a),N(a,{validation:"uuid",code:T.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")qs.test(e.data)||(a=this._getOrReturnCtx(e,a),N(a,{validation:"cuid",code:T.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")Hs.test(e.data)||(a=this._getOrReturnCtx(e,a),N(a,{validation:"cuid2",code:T.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")Ys.test(e.data)||(a=this._getOrReturnCtx(e,a),N(a,{validation:"ulid",code:T.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),N(a,{validation:"url",code:T.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),N(a,{validation:"regex",code:T.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(a=this._getOrReturnCtx(e,a),N(a,{code:T.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(a=this._getOrReturnCtx(e,a),N(a,{code:T.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(a=this._getOrReturnCtx(e,a),N(a,{code:T.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?ei(s).test(e.data)||(a=this._getOrReturnCtx(e,a),N(a,{code:T.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="ip"?ti(e.data,s.version)||(a=this._getOrReturnCtx(e,a),N(a,{validation:"ip",code:T.invalid_string,message:s.message}),r.dirty()):Q.assertNever(s);return{status:r.value,value:e.data}}_addCheck(e){return new ye({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Z.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Z.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Z.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Z.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Z.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Z.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Z.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Z.errToObj(e)})}datetime(e){var t;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,...Z.errToObj(e==null?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Z.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...Z.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Z.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Z.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Z.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Z.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Z.errToObj(t)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}ye.create=n=>{var e;return new ye({checks:[],typeName:K.ZodString,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...G(n)})};function ri(n,e){const t=(n.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,a=t>r?t:r,s=parseInt(n.toFixed(a).replace(".","")),i=parseInt(e.toFixed(a).replace(".",""));return s%i/Math.pow(10,a)}class Ae extends Y{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==M.number){const s=this._getOrReturnCtx(e);return N(s,{code:T.invalid_type,expected:M.number,received:s.parsedType}),z}let r;const a=new oe;for(const s of this._def.checks)s.kind==="int"?Q.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),N(r,{code:T.invalid_type,expected:"integer",received:"float",message:s.message}),a.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),N(r,{code:T.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),a.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),N(r,{code:T.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),a.dirty()):s.kind==="multipleOf"?ri(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),N(r,{code:T.not_multiple_of,multipleOf:s.value,message:s.message}),a.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),N(r,{code:T.not_finite,message:s.message}),a.dirty()):Q.assertNever(s);return{status:a.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Z.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Z.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Z.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Z.toString(t))}setLimit(e,t,r,a){return new Ae({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Z.toString(a)}]})}_addCheck(e){return new Ae({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Z.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Z.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Z.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Z.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Z.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Z.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Z.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Z.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Z.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Q.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Ae.create=n=>new Ae({checks:[],typeName:K.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...G(n)});class Ce extends Y{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==M.bigint){const s=this._getOrReturnCtx(e);return N(s,{code:T.invalid_type,expected:M.bigint,received:s.parsedType}),z}let r;const a=new oe;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),N(r,{code:T.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),a.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),N(r,{code:T.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),a.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),N(r,{code:T.not_multiple_of,multipleOf:s.value,message:s.message}),a.dirty()):Q.assertNever(s);return{status:a.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Z.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Z.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Z.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Z.toString(t))}setLimit(e,t,r,a){return new Ce({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Z.toString(a)}]})}_addCheck(e){return new Ce({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Z.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Z.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Z.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Z.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Z.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Ce.create=n=>{var e;return new Ce({checks:[],typeName:K.ZodBigInt,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...G(n)})};class it extends Y{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==M.boolean){const r=this._getOrReturnCtx(e);return N(r,{code:T.invalid_type,expected:M.boolean,received:r.parsedType}),z}return le(e.data)}}it.create=n=>new it({typeName:K.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...G(n)});class Ze extends Y{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==M.date){const s=this._getOrReturnCtx(e);return N(s,{code:T.invalid_type,expected:M.date,received:s.parsedType}),z}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return N(s,{code:T.invalid_date}),z}const r=new oe;let a;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(a=this._getOrReturnCtx(e,a),N(a,{code:T.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(a=this._getOrReturnCtx(e,a),N(a,{code:T.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):Q.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ze({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Z.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Z.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Ze.create=n=>new Ze({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:K.ZodDate,...G(n)});class Lt extends Y{_parse(e){if(this._getType(e)!==M.symbol){const r=this._getOrReturnCtx(e);return N(r,{code:T.invalid_type,expected:M.symbol,received:r.parsedType}),z}return le(e.data)}}Lt.create=n=>new Lt({typeName:K.ZodSymbol,...G(n)});class ot extends Y{_parse(e){if(this._getType(e)!==M.undefined){const r=this._getOrReturnCtx(e);return N(r,{code:T.invalid_type,expected:M.undefined,received:r.parsedType}),z}return le(e.data)}}ot.create=n=>new ot({typeName:K.ZodUndefined,...G(n)});class ut extends Y{_parse(e){if(this._getType(e)!==M.null){const r=this._getOrReturnCtx(e);return N(r,{code:T.invalid_type,expected:M.null,received:r.parsedType}),z}return le(e.data)}}ut.create=n=>new ut({typeName:K.ZodNull,...G(n)});class Ge extends Y{constructor(){super(...arguments),this._any=!0}_parse(e){return le(e.data)}}Ge.create=n=>new Ge({typeName:K.ZodAny,...G(n)});class Re extends Y{constructor(){super(...arguments),this._unknown=!0}_parse(e){return le(e.data)}}Re.create=n=>new Re({typeName:K.ZodUnknown,...G(n)});class Se extends Y{_parse(e){const t=this._getOrReturnCtx(e);return N(t,{code:T.invalid_type,expected:M.never,received:t.parsedType}),z}}Se.create=n=>new Se({typeName:K.ZodNever,...G(n)});class Rt extends Y{_parse(e){if(this._getType(e)!==M.undefined){const r=this._getOrReturnCtx(e);return N(r,{code:T.invalid_type,expected:M.void,received:r.parsedType}),z}return le(e.data)}}Rt.create=n=>new Rt({typeName:K.ZodVoid,...G(n)});class _e extends Y{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),a=this._def;if(t.parsedType!==M.array)return N(t,{code:T.invalid_type,expected:M.array,received:t.parsedType}),z;if(a.exactLength!==null){const i=t.data.length>a.exactLength.value,o=t.data.length<a.exactLength.value;(i||o)&&(N(t,{code:i?T.too_big:T.too_small,minimum:o?a.exactLength.value:void 0,maximum:i?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&t.data.length<a.minLength.value&&(N(t,{code:T.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&t.data.length>a.maxLength.value&&(N(t,{code:T.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((i,o)=>a.type._parseAsync(new je(t,i,t.path,o)))).then(i=>oe.mergeArray(r,i));const s=[...t.data].map((i,o)=>a.type._parseSync(new je(t,i,t.path,o)));return oe.mergeArray(r,s)}get element(){return this._def.type}min(e,t){return new _e({...this._def,minLength:{value:e,message:Z.toString(t)}})}max(e,t){return new _e({...this._def,maxLength:{value:e,message:Z.toString(t)}})}length(e,t){return new _e({...this._def,exactLength:{value:e,message:Z.toString(t)}})}nonempty(e){return this.min(1,e)}}_e.create=(n,e)=>new _e({type:n,minLength:null,maxLength:null,exactLength:null,typeName:K.ZodArray,...G(e)});function tt(n){if(n instanceof ee){const e={};for(const t in n.shape){const r=n.shape[t];e[t]=ke.create(tt(r))}return new ee({...n._def,shape:()=>e})}else return n instanceof _e?new _e({...n._def,type:tt(n.element)}):n instanceof ke?ke.create(tt(n.unwrap())):n instanceof Ve?Ve.create(tt(n.unwrap())):n instanceof xe?xe.create(n.items.map(e=>tt(e))):n}class ee extends Y{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=Q.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==M.object){const l=this._getOrReturnCtx(e);return N(l,{code:T.invalid_type,expected:M.object,received:l.parsedType}),z}const{status:r,ctx:a}=this._processInputParams(e),{shape:s,keys:i}=this._getCached(),o=[];if(!(this._def.catchall instanceof Se&&this._def.unknownKeys==="strip"))for(const l in a.data)i.includes(l)||o.push(l);const u=[];for(const l of i){const g=s[l],P=a.data[l];u.push({key:{status:"valid",value:l},value:g._parse(new je(a,P,a.path,l)),alwaysSet:l in a.data})}if(this._def.catchall instanceof Se){const l=this._def.unknownKeys;if(l==="passthrough")for(const g of o)u.push({key:{status:"valid",value:g},value:{status:"valid",value:a.data[g]}});else if(l==="strict")o.length>0&&(N(a,{code:T.unrecognized_keys,keys:o}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const g of o){const P=a.data[g];u.push({key:{status:"valid",value:g},value:l._parse(new je(a,P,a.path,g)),alwaysSet:g in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const l=[];for(const g of u){const P=await g.key;l.push({key:P,value:await g.value,alwaysSet:g.alwaysSet})}return l}).then(l=>oe.mergeObjectSync(r,l)):oe.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(e){return Z.errToObj,new ee({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var a,s,i,o;const u=(i=(s=(a=this._def).errorMap)===null||s===void 0?void 0:s.call(a,t,r).message)!==null&&i!==void 0?i:r.defaultError;return t.code==="unrecognized_keys"?{message:(o=Z.errToObj(e).message)!==null&&o!==void 0?o:u}:{message:u}}}:{}})}strip(){return new ee({...this._def,unknownKeys:"strip"})}passthrough(){return new ee({...this._def,unknownKeys:"passthrough"})}extend(e){return new ee({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ee({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:K.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ee({...this._def,catchall:e})}pick(e){const t={};return Q.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new ee({...this._def,shape:()=>t})}omit(e){const t={};return Q.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new ee({...this._def,shape:()=>t})}deepPartial(){return tt(this)}partial(e){const t={};return Q.objectKeys(this.shape).forEach(r=>{const a=this.shape[r];e&&!e[r]?t[r]=a:t[r]=a.optional()}),new ee({...this._def,shape:()=>t})}required(e){const t={};return Q.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof ke;)s=s._def.innerType;t[r]=s}}),new ee({...this._def,shape:()=>t})}keyof(){return Vn(Q.objectKeys(this.shape))}}ee.create=(n,e)=>new ee({shape:()=>n,unknownKeys:"strip",catchall:Se.create(),typeName:K.ZodObject,...G(e)});ee.strictCreate=(n,e)=>new ee({shape:()=>n,unknownKeys:"strict",catchall:Se.create(),typeName:K.ZodObject,...G(e)});ee.lazycreate=(n,e)=>new ee({shape:n,unknownKeys:"strip",catchall:Se.create(),typeName:K.ZodObject,...G(e)});class ct extends Y{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function a(s){for(const o of s)if(o.result.status==="valid")return o.result;for(const o of s)if(o.result.status==="dirty")return t.common.issues.push(...o.ctx.common.issues),o.result;const i=s.map(o=>new be(o.ctx.common.issues));return N(t,{code:T.invalid_union,unionErrors:i}),z}if(t.common.async)return Promise.all(r.map(async s=>{const i={...t,common:{...t.common,issues:[]},parent:null};return{result:await s._parseAsync({data:t.data,path:t.path,parent:i}),ctx:i}})).then(a);{let s;const i=[];for(const u of r){const l={...t,common:{...t.common,issues:[]},parent:null},g=u._parseSync({data:t.data,path:t.path,parent:l});if(g.status==="valid")return g;g.status==="dirty"&&!s&&(s={result:g,ctx:l}),l.common.issues.length&&i.push(l.common.issues)}if(s)return t.common.issues.push(...s.ctx.common.issues),s.result;const o=i.map(u=>new be(u));return N(t,{code:T.invalid_union,unionErrors:o}),z}}get options(){return this._def.options}}ct.create=(n,e)=>new ct({options:n,typeName:K.ZodUnion,...G(e)});const Gt=n=>n instanceof pt?Gt(n.schema):n instanceof me?Gt(n.innerType()):n instanceof ft?[n.value]:n instanceof De?n.options:n instanceof ht?Object.keys(n.enum):n instanceof mt?Gt(n._def.innerType):n instanceof ot?[void 0]:n instanceof ut?[null]:null;class Kt extends Y{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==M.object)return N(t,{code:T.invalid_type,expected:M.object,received:t.parsedType}),z;const r=this.discriminator,a=t.data[r],s=this.optionsMap.get(a);return s?t.common.async?s._parseAsync({data:t.data,path:t.path,parent:t}):s._parseSync({data:t.data,path:t.path,parent:t}):(N(t,{code:T.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),z)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const a=new Map;for(const s of t){const i=Gt(s.shape[e]);if(!i)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of i){if(a.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);a.set(o,s)}}return new Kt({typeName:K.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:a,...G(r)})}}function wr(n,e){const t=Ie(n),r=Ie(e);if(n===e)return{valid:!0,data:n};if(t===M.object&&r===M.object){const a=Q.objectKeys(e),s=Q.objectKeys(n).filter(o=>a.indexOf(o)!==-1),i={...n,...e};for(const o of s){const u=wr(n[o],e[o]);if(!u.valid)return{valid:!1};i[o]=u.data}return{valid:!0,data:i}}else if(t===M.array&&r===M.array){if(n.length!==e.length)return{valid:!1};const a=[];for(let s=0;s<n.length;s++){const i=n[s],o=e[s],u=wr(i,o);if(!u.valid)return{valid:!1};a.push(u.data)}return{valid:!0,data:a}}else return t===M.date&&r===M.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class lt extends Y{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),a=(s,i)=>{if(Wt(s)||Wt(i))return z;const o=wr(s.value,i.value);return o.valid?((Qt(s)||Qt(i))&&t.dirty(),{status:t.value,value:o.data}):(N(r,{code:T.invalid_intersection_types}),z)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,i])=>a(s,i)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}lt.create=(n,e,t)=>new lt({left:n,right:e,typeName:K.ZodIntersection,...G(t)});class xe extends Y{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==M.array)return N(r,{code:T.invalid_type,expected:M.array,received:r.parsedType}),z;if(r.data.length<this._def.items.length)return N(r,{code:T.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),z;!this._def.rest&&r.data.length>this._def.items.length&&(N(r,{code:T.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const s=[...r.data].map((i,o)=>{const u=this._def.items[o]||this._def.rest;return u?u._parse(new je(r,i,r.path,o)):null}).filter(i=>!!i);return r.common.async?Promise.all(s).then(i=>oe.mergeArray(t,i)):oe.mergeArray(t,s)}get items(){return this._def.items}rest(e){return new xe({...this._def,rest:e})}}xe.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new xe({items:n,typeName:K.ZodTuple,rest:null,...G(e)})};class dt extends Y{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==M.object)return N(r,{code:T.invalid_type,expected:M.object,received:r.parsedType}),z;const a=[],s=this._def.keyType,i=this._def.valueType;for(const o in r.data)a.push({key:s._parse(new je(r,o,r.path,o)),value:i._parse(new je(r,r.data[o],r.path,o))});return r.common.async?oe.mergeObjectAsync(t,a):oe.mergeObjectSync(t,a)}get element(){return this._def.valueType}static create(e,t,r){return t instanceof Y?new dt({keyType:e,valueType:t,typeName:K.ZodRecord,...G(r)}):new dt({keyType:ye.create(),valueType:e,typeName:K.ZodRecord,...G(t)})}}class $t extends Y{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==M.map)return N(r,{code:T.invalid_type,expected:M.map,received:r.parsedType}),z;const a=this._def.keyType,s=this._def.valueType,i=[...r.data.entries()].map(([o,u],l)=>({key:a._parse(new je(r,o,r.path,[l,"key"])),value:s._parse(new je(r,u,r.path,[l,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const u of i){const l=await u.key,g=await u.value;if(l.status==="aborted"||g.status==="aborted")return z;(l.status==="dirty"||g.status==="dirty")&&t.dirty(),o.set(l.value,g.value)}return{status:t.value,value:o}})}else{const o=new Map;for(const u of i){const l=u.key,g=u.value;if(l.status==="aborted"||g.status==="aborted")return z;(l.status==="dirty"||g.status==="dirty")&&t.dirty(),o.set(l.value,g.value)}return{status:t.value,value:o}}}}$t.create=(n,e,t)=>new $t({valueType:e,keyType:n,typeName:K.ZodMap,...G(t)});class Be extends Y{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==M.set)return N(r,{code:T.invalid_type,expected:M.set,received:r.parsedType}),z;const a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(N(r,{code:T.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),t.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(N(r,{code:T.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),t.dirty());const s=this._def.valueType;function i(u){const l=new Set;for(const g of u){if(g.status==="aborted")return z;g.status==="dirty"&&t.dirty(),l.add(g.value)}return{status:t.value,value:l}}const o=[...r.data.values()].map((u,l)=>s._parse(new je(r,u,r.path,l)));return r.common.async?Promise.all(o).then(u=>i(u)):i(o)}min(e,t){return new Be({...this._def,minSize:{value:e,message:Z.toString(t)}})}max(e,t){return new Be({...this._def,maxSize:{value:e,message:Z.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Be.create=(n,e)=>new Be({valueType:n,minSize:null,maxSize:null,typeName:K.ZodSet,...G(e)});class Ye extends Y{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==M.function)return N(t,{code:T.invalid_type,expected:M.function,received:t.parsedType}),z;function r(o,u){return Dt({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Ct(),st].filter(l=>!!l),issueData:{code:T.invalid_arguments,argumentsError:u}})}function a(o,u){return Dt({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Ct(),st].filter(l=>!!l),issueData:{code:T.invalid_return_type,returnTypeError:u}})}const s={errorMap:t.common.contextualErrorMap},i=t.data;return this._def.returns instanceof Je?le(async(...o)=>{const u=new be([]),l=await this._def.args.parseAsync(o,s).catch(L=>{throw u.addIssue(r(o,L)),u}),g=await i(...l);return await this._def.returns._def.type.parseAsync(g,s).catch(L=>{throw u.addIssue(a(g,L)),u})}):le((...o)=>{const u=this._def.args.safeParse(o,s);if(!u.success)throw new be([r(o,u.error)]);const l=i(...u.data),g=this._def.returns.safeParse(l,s);if(!g.success)throw new be([a(l,g.error)]);return g.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Ye({...this._def,args:xe.create(e).rest(Re.create())})}returns(e){return new Ye({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new Ye({args:e||xe.create([]).rest(Re.create()),returns:t||Re.create(),typeName:K.ZodFunction,...G(r)})}}class pt extends Y{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}pt.create=(n,e)=>new pt({getter:n,typeName:K.ZodLazy,...G(e)});class ft extends Y{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return N(t,{received:t.data,code:T.invalid_literal,expected:this._def.value}),z}return{status:"valid",value:e.data}}get value(){return this._def.value}}ft.create=(n,e)=>new ft({value:n,typeName:K.ZodLiteral,...G(e)});function Vn(n,e){return new De({values:n,typeName:K.ZodEnum,...G(e)})}class De extends Y{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return N(t,{expected:Q.joinValues(r),received:t.parsedType,code:T.invalid_type}),z}if(this._def.values.indexOf(e.data)===-1){const t=this._getOrReturnCtx(e),r=this._def.values;return N(t,{received:t.data,code:T.invalid_enum_value,options:r}),z}return le(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return De.create(e)}exclude(e){return De.create(this.options.filter(t=>!e.includes(t)))}}De.create=Vn;class ht extends Y{_parse(e){const t=Q.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==M.string&&r.parsedType!==M.number){const a=Q.objectValues(t);return N(r,{expected:Q.joinValues(a),received:r.parsedType,code:T.invalid_type}),z}if(t.indexOf(e.data)===-1){const a=Q.objectValues(t);return N(r,{received:r.data,code:T.invalid_enum_value,options:a}),z}return le(e.data)}get enum(){return this._def.values}}ht.create=(n,e)=>new ht({values:n,typeName:K.ZodNativeEnum,...G(e)});class Je extends Y{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==M.promise&&t.common.async===!1)return N(t,{code:T.invalid_type,expected:M.promise,received:t.parsedType}),z;const r=t.parsedType===M.promise?t.data:Promise.resolve(t.data);return le(r.then(a=>this._def.type.parseAsync(a,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Je.create=(n,e)=>new Je({type:n,typeName:K.ZodPromise,...G(e)});class me extends Y{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===K.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),a=this._def.effect||null;if(a.type==="preprocess"){const i=a.transform(r.data);return r.common.async?Promise.resolve(i).then(o=>this._def.schema._parseAsync({data:o,path:r.path,parent:r})):this._def.schema._parseSync({data:i,path:r.path,parent:r})}const s={addIssue:i=>{N(r,i),i.fatal?t.abort():t.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),a.type==="refinement"){const i=o=>{const u=a.refinement(o,s);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?z:(o.status==="dirty"&&t.dirty(),i(o.value),{status:t.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?z:(o.status==="dirty"&&t.dirty(),i(o.value).then(()=>({status:t.value,value:o.value}))))}if(a.type==="transform")if(r.common.async===!1){const i=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Mt(i))return i;const o=a.transform(i.value,s);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(i=>Mt(i)?Promise.resolve(a.transform(i.value,s)).then(o=>({status:t.value,value:o})):i);Q.assertNever(a)}}me.create=(n,e,t)=>new me({schema:n,typeName:K.ZodEffects,effect:e,...G(t)});me.createWithPreprocess=(n,e,t)=>new me({schema:e,effect:{type:"preprocess",transform:n},typeName:K.ZodEffects,...G(t)});class ke extends Y{_parse(e){return this._getType(e)===M.undefined?le(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ke.create=(n,e)=>new ke({innerType:n,typeName:K.ZodOptional,...G(e)});class Ve extends Y{_parse(e){return this._getType(e)===M.null?le(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ve.create=(n,e)=>new Ve({innerType:n,typeName:K.ZodNullable,...G(e)});class mt extends Y{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===M.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}mt.create=(n,e)=>new mt({innerType:n,typeName:K.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...G(e)});class Zt extends Y{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Nt(a)?a.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new be(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new be(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Zt.create=(n,e)=>new Zt({innerType:n,typeName:K.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...G(e)});class Bt extends Y{_parse(e){if(this._getType(e)!==M.nan){const r=this._getOrReturnCtx(e);return N(r,{code:T.invalid_type,expected:M.nan,received:r.parsedType}),z}return{status:"valid",value:e.data}}}Bt.create=n=>new Bt({typeName:K.ZodNaN,...G(n)});const Un=Symbol("zod_brand");class Cr extends Y{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class gt extends Y{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?z:s.status==="dirty"?(t.dirty(),Ar(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?z:a.status==="dirty"?(t.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(e,t){return new gt({in:e,out:t,typeName:K.ZodPipeline})}}const Dr=(n,e={},t)=>n?Ge.create().superRefine((r,a)=>{var s,i;if(!n(r)){const o=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,u=(i=(s=o.fatal)!==null&&s!==void 0?s:t)!==null&&i!==void 0?i:!0,l=typeof o=="string"?{message:o}:o;a.addIssue({code:"custom",...l,fatal:u})}}):Ge.create(),Fn={object:ee.lazycreate};var K;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline"})(K||(K={}));const Kn=(n,e={message:`Input not instance of ${n.name}`})=>Dr(t=>t instanceof n,e),Mr=ye.create,Nr=Ae.create,zn=Bt.create,qn=Ce.create,Lr=it.create,Hn=Ze.create,Yn=Lt.create,Gn=ot.create,Jn=ut.create,Wn=Ge.create,Qn=Re.create,Xn=Se.create,ea=Rt.create,ta=_e.create,ra=ee.create,na=ee.strictCreate,aa=ct.create,sa=Kt.create,ia=lt.create,oa=xe.create,ua=dt.create,ca=$t.create,la=Be.create,da=Ye.create,pa=pt.create,fa=ft.create,ha=De.create,ma=ht.create,ga=Je.create,Xt=me.create,ya=ke.create,ba=Ve.create,_a=me.createWithPreprocess,va=gt.create,wa=()=>Mr().optional(),xa=()=>Nr().optional(),Ea=()=>Lr().optional(),Oa={string:n=>ye.create({...n,coerce:!0}),number:n=>Ae.create({...n,coerce:!0}),boolean:n=>it.create({...n,coerce:!0}),bigint:n=>Ce.create({...n,coerce:!0}),date:n=>Ze.create({...n,coerce:!0})},Pa=z;var Xr=Object.freeze({__proto__:null,defaultErrorMap:st,setErrorMap:Zn,getErrorMap:Ct,makeIssue:Dt,EMPTY_PATH:Bn,addIssueToContext:N,ParseStatus:oe,INVALID:z,DIRTY:Ar,OK:le,isAborted:Wt,isDirty:Qt,isValid:Mt,isAsync:Nt,get util(){return Q},get objectUtil(){return Jt},ZodParsedType:M,getParsedType:Ie,ZodType:Y,ZodString:ye,ZodNumber:Ae,ZodBigInt:Ce,ZodBoolean:it,ZodDate:Ze,ZodSymbol:Lt,ZodUndefined:ot,ZodNull:ut,ZodAny:Ge,ZodUnknown:Re,ZodNever:Se,ZodVoid:Rt,ZodArray:_e,ZodObject:ee,ZodUnion:ct,ZodDiscriminatedUnion:Kt,ZodIntersection:lt,ZodTuple:xe,ZodRecord:dt,ZodMap:$t,ZodSet:Be,ZodFunction:Ye,ZodLazy:pt,ZodLiteral:ft,ZodEnum:De,ZodNativeEnum:ht,ZodPromise:Je,ZodEffects:me,ZodTransformer:me,ZodOptional:ke,ZodNullable:Ve,ZodDefault:mt,ZodCatch:Zt,ZodNaN:Bt,BRAND:Un,ZodBranded:Cr,ZodPipeline:gt,custom:Dr,Schema:Y,ZodSchema:Y,late:Fn,get ZodFirstPartyTypeKind(){return K},coerce:Oa,any:Wn,array:ta,bigint:qn,boolean:Lr,date:Hn,discriminatedUnion:sa,effect:Xt,enum:ha,function:da,instanceof:Kn,intersection:ia,lazy:pa,literal:fa,map:ca,nan:zn,nativeEnum:ma,never:Xn,null:Jn,nullable:ba,number:Nr,object:ra,oboolean:Ea,onumber:xa,optional:ya,ostring:wa,pipeline:va,preprocess:_a,promise:ga,record:ua,set:la,strictObject:na,string:Mr,symbol:Yn,transformer:Xt,tuple:oa,undefined:Gn,union:aa,unknown:Qn,void:ea,NEVER:Pa,ZodIssueCode:T,quotelessJson:Rn,ZodError:be});const ni=Object.freeze(Object.defineProperty({__proto__:null,BRAND:Un,DIRTY:Ar,EMPTY_PATH:Bn,INVALID:z,NEVER:Pa,OK:le,ParseStatus:oe,Schema:Y,ZodAny:Ge,ZodArray:_e,ZodBigInt:Ce,ZodBoolean:it,ZodBranded:Cr,ZodCatch:Zt,ZodDate:Ze,ZodDefault:mt,ZodDiscriminatedUnion:Kt,ZodEffects:me,ZodEnum:De,ZodError:be,get ZodFirstPartyTypeKind(){return K},ZodFunction:Ye,ZodIntersection:lt,ZodIssueCode:T,ZodLazy:pt,ZodLiteral:ft,ZodMap:$t,ZodNaN:Bt,ZodNativeEnum:ht,ZodNever:Se,ZodNull:ut,ZodNullable:Ve,ZodNumber:Ae,ZodObject:ee,ZodOptional:ke,ZodParsedType:M,ZodPipeline:gt,ZodPromise:Je,ZodRecord:dt,ZodSchema:Y,ZodSet:Be,ZodString:ye,ZodSymbol:Lt,ZodTransformer:me,ZodTuple:xe,ZodType:Y,ZodUndefined:ot,ZodUnion:ct,ZodUnknown:Re,ZodVoid:Rt,addIssueToContext:N,any:Wn,array:ta,bigint:qn,boolean:Lr,coerce:Oa,custom:Dr,date:Hn,default:Xr,defaultErrorMap:st,discriminatedUnion:sa,effect:Xt,enum:ha,function:da,getErrorMap:Ct,getParsedType:Ie,instanceof:Kn,intersection:ia,isAborted:Wt,isAsync:Nt,isDirty:Qt,isValid:Mt,late:Fn,lazy:pa,literal:fa,makeIssue:Dt,map:ca,nan:zn,nativeEnum:ma,never:Xn,null:Jn,nullable:ba,number:Nr,object:ra,get objectUtil(){return Jt},oboolean:Ea,onumber:xa,optional:ya,ostring:wa,pipeline:va,preprocess:_a,promise:ga,quotelessJson:Rn,record:ua,set:la,setErrorMap:Zn,strictObject:na,string:Mr,symbol:Yn,transformer:Xt,tuple:oa,undefined:Gn,union:aa,unknown:Qn,get util(){return Q},void:ea,z:Xr},Symbol.toStringTag,{value:"Module"}));var ai={},tr={},yt={};const Rr=Va(ni);var rr={};Object.defineProperty(rr,"__esModule",{value:!0});rr.parseAnyDef=void 0;function si(){return{}}rr.parseAnyDef=si;var bt={},Ee={};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.setResponseValueAndErrors=Ee.addErrorMessage=void 0;function Ta(n,e,t,r){r!=null&&r.errorMessages&&t&&(n.errorMessage=Object.assign(Object.assign({},n.errorMessage),{[e]:t}))}Ee.addErrorMessage=Ta;function ii(n,e,t,r,a){n[e]=t,Ta(n,e,r,a)}Ee.setResponseValueAndErrors=ii;var en;function oi(){if(en)return bt;en=1,Object.defineProperty(bt,"__esModule",{value:!0}),bt.parseArrayDef=void 0;const n=Rr,e=Ee,t=ue();function r(a,s){var i,o;const u={type:"array"};return((o=(i=a.type)===null||i===void 0?void 0:i._def)===null||o===void 0?void 0:o.typeName)!==n.ZodFirstPartyTypeKind.ZodAny&&(u.items=(0,t.parseDef)(a.type._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"items"]}))),a.minLength&&(0,e.setResponseValueAndErrors)(u,"minItems",a.minLength.value,a.minLength.message,s),a.maxLength&&(0,e.setResponseValueAndErrors)(u,"maxItems",a.maxLength.value,a.maxLength.message,s),a.exactLength&&((0,e.setResponseValueAndErrors)(u,"minItems",a.exactLength.value,a.exactLength.message,s),(0,e.setResponseValueAndErrors)(u,"maxItems",a.exactLength.value,a.exactLength.message,s)),u}return bt.parseArrayDef=r,bt}var nr={};Object.defineProperty(nr,"__esModule",{value:!0});nr.parseBigintDef=void 0;const Ke=Ee;function ui(n,e){const t={type:"integer",format:"int64"};if(!n.checks)return t;for(const r of n.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?(0,Ke.setResponseValueAndErrors)(t,"minimum",r.value,r.message,e):(0,Ke.setResponseValueAndErrors)(t,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(t.exclusiveMinimum=!0),(0,Ke.setResponseValueAndErrors)(t,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?(0,Ke.setResponseValueAndErrors)(t,"maximum",r.value,r.message,e):(0,Ke.setResponseValueAndErrors)(t,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(t.exclusiveMaximum=!0),(0,Ke.setResponseValueAndErrors)(t,"maximum",r.value,r.message,e));break;case"multipleOf":(0,Ke.setResponseValueAndErrors)(t,"multipleOf",r.value,r.message,e);break}return t}nr.parseBigintDef=ui;var ar={};Object.defineProperty(ar,"__esModule",{value:!0});ar.parseBooleanDef=void 0;function ci(){return{type:"boolean"}}ar.parseBooleanDef=ci;var _t={},tn;function li(){if(tn)return _t;tn=1,Object.defineProperty(_t,"__esModule",{value:!0}),_t.parseBrandedDef=void 0;const n=ue();function e(t,r){return(0,n.parseDef)(t.type._def,r)}return _t.parseBrandedDef=e,_t}var vt={},rn;function di(){if(rn)return vt;rn=1,Object.defineProperty(vt,"__esModule",{value:!0}),vt.parseCatchDef=void 0;const n=ue(),e=(t,r)=>(0,n.parseDef)(t.innerType._def,r);return vt.parseCatchDef=e,vt}var sr={};Object.defineProperty(sr,"__esModule",{value:!0});sr.parseDateDef=void 0;const nn=Ee;function pi(n,e){return e.dateStrategy=="integer"?fi(n,e):{type:"string",format:"date-time"}}sr.parseDateDef=pi;const fi=(n,e)=>{const t={type:"integer",format:"unix-time"};for(const r of n.checks)switch(r.kind){case"min":e.target==="jsonSchema7"&&(0,nn.setResponseValueAndErrors)(t,"minimum",r.value,r.message,e);break;case"max":e.target==="jsonSchema7"&&(0,nn.setResponseValueAndErrors)(t,"maximum",r.value,r.message,e);break}return t};var wt={},an;function hi(){if(an)return wt;an=1,Object.defineProperty(wt,"__esModule",{value:!0}),wt.parseDefaultDef=void 0;const n=ue();function e(t,r){return Object.assign(Object.assign({},(0,n.parseDef)(t.innerType._def,r)),{default:t.defaultValue()})}return wt.parseDefaultDef=e,wt}var xt={},sn;function mi(){if(sn)return xt;sn=1,Object.defineProperty(xt,"__esModule",{value:!0}),xt.parseEffectsDef=void 0;const n=ue();function e(t,r){return r.effectStrategy==="input"?(0,n.parseDef)(t.schema._def,r):{}}return xt.parseEffectsDef=e,xt}var ir={};Object.defineProperty(ir,"__esModule",{value:!0});ir.parseEnumDef=void 0;function gi(n){return{type:"string",enum:n.values}}ir.parseEnumDef=gi;var Et={},on;function yi(){if(on)return Et;on=1;var n=zr&&zr.__rest||function(a,s){var i={};for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&s.indexOf(o)<0&&(i[o]=a[o]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(a);u<o.length;u++)s.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(a,o[u])&&(i[o[u]]=a[o[u]]);return i};Object.defineProperty(Et,"__esModule",{value:!0}),Et.parseIntersectionDef=void 0;const e=ue(),t=a=>"type"in a&&a.type==="string"?!1:"allOf"in a;function r(a,s){const i=[(0,e.parseDef)(a.left._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"allOf","0"]})),(0,e.parseDef)(a.right._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"allOf","1"]}))].filter(l=>!!l);let o=s.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const u=[];return i.forEach(l=>{if(t(l))u.push(...l.allOf),l.unevaluatedProperties===void 0&&(o=void 0);else{let g=l;"additionalProperties"in l&&l.additionalProperties===!1?g=n(l,["additionalProperties"]):o=void 0,u.push(g)}}),u.length?Object.assign({allOf:u},o):void 0}return Et.parseIntersectionDef=r,Et}var or={};Object.defineProperty(or,"__esModule",{value:!0});or.parseLiteralDef=void 0;function bi(n,e){const t=typeof n.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(n.value)?"array":"object"}:e.target==="openApi3"?{type:t==="bigint"?"integer":t,enum:[n.value]}:{type:t==="bigint"?"integer":t,const:n.value}}or.parseLiteralDef=bi;var Ot={},un;function _i(){if(un)return Ot;un=1,Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.parseMapDef=void 0;const n=ue();function e(t,r){const a=(0,n.parseDef)(t.keyType._def,Object.assign(Object.assign({},r),{currentPath:[...r.currentPath,"items","items","0"]}))||{},s=(0,n.parseDef)(t.valueType._def,Object.assign(Object.assign({},r),{currentPath:[...r.currentPath,"items","items","1"]}))||{};return{type:"array",maxItems:125,items:{type:"array",items:[a,s],minItems:2,maxItems:2}}}return Ot.parseMapDef=e,Ot}var ur={};Object.defineProperty(ur,"__esModule",{value:!0});ur.parseNativeEnumDef=void 0;function vi(n){const e=n.values,r=Object.keys(n.values).filter(s=>typeof e[e[s]]!="number").map(s=>e[s]),a=Array.from(new Set(r.map(s=>typeof s)));return{type:a.length===1?a[0]==="string"?"string":"number":["string","number"],enum:r}}ur.parseNativeEnumDef=vi;var cr={};Object.defineProperty(cr,"__esModule",{value:!0});cr.parseNeverDef=void 0;function wi(){return{not:{}}}cr.parseNeverDef=wi;var lr={};Object.defineProperty(lr,"__esModule",{value:!0});lr.parseNullDef=void 0;function xi(n){return n.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}lr.parseNullDef=xi;var Pt={},_r={},cn;function ka(){return cn||(cn=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.parseUnionDef=n.primitiveMappings=void 0;const e=ue();n.primitiveMappings={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function t(a,s){if(s.target==="openApi3")return r(a,s);const i=a.options instanceof Map?Array.from(a.options.values()):a.options;if(i.every(o=>o._def.typeName in n.primitiveMappings&&(!o._def.checks||!o._def.checks.length))){const o=i.reduce((u,l)=>{const g=n.primitiveMappings[l._def.typeName];return g&&!u.includes(g)?[...u,g]:u},[]);return{type:o.length>1?o:o[0]}}else if(i.every(o=>o._def.typeName==="ZodLiteral"&&!o.description)){const o=i.reduce((u,l)=>{const g=typeof l._def.value;switch(g){case"string":case"number":case"boolean":return[...u,g];case"bigint":return[...u,"integer"];case"object":if(l._def.value===null)return[...u,"null"];case"symbol":case"undefined":case"function":default:return u}},[]);if(o.length===i.length){const u=o.filter((l,g,P)=>P.indexOf(l)===g);return{type:u.length>1?u:u[0],enum:i.reduce((l,g)=>l.includes(g._def.value)?l:[...l,g._def.value],[])}}}else if(i.every(o=>o._def.typeName==="ZodEnum"))return{type:"string",enum:i.reduce((o,u)=>[...o,...u._def.values.filter(l=>!o.includes(l))],[])};return r(a,s)}n.parseUnionDef=t;const r=(a,s)=>{const i=(a.options instanceof Map?Array.from(a.options.values()):a.options).map((o,u)=>(0,e.parseDef)(o._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"anyOf",`${u}`]}))).filter(o=>!!o&&(!s.strictUnions||typeof o=="object"&&Object.keys(o).length>0));return i.length?{anyOf:i}:void 0}}(_r)),_r}var ln;function Ei(){if(ln)return Pt;ln=1,Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.parseNullableDef=void 0;const n=ue(),e=ka();function t(r,a){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(r.innerType._def.typeName)&&(!r.innerType._def.checks||!r.innerType._def.checks.length))return a.target==="openApi3"?{type:e.primitiveMappings[r.innerType._def.typeName],nullable:!0}:{type:[e.primitiveMappings[r.innerType._def.typeName],"null"]};if(a.target==="openApi3"){const i=(0,n.parseDef)(r.innerType._def,Object.assign(Object.assign({},a),{currentPath:[...a.currentPath]}));return i&&Object.assign(Object.assign({},i),{nullable:!0})}const s=(0,n.parseDef)(r.innerType._def,Object.assign(Object.assign({},a),{currentPath:[...a.currentPath,"anyOf","0"]}));return s&&{anyOf:[s,{type:"null"}]}}return Pt.parseNullableDef=t,Pt}var dr={};Object.defineProperty(dr,"__esModule",{value:!0});dr.parseNumberDef=void 0;const Ne=Ee;function Oi(n,e){const t={type:"number"};if(!n.checks)return t;for(const r of n.checks)switch(r.kind){case"int":t.type="integer",(0,Ne.addErrorMessage)(t,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?(0,Ne.setResponseValueAndErrors)(t,"minimum",r.value,r.message,e):(0,Ne.setResponseValueAndErrors)(t,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(t.exclusiveMinimum=!0),(0,Ne.setResponseValueAndErrors)(t,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?(0,Ne.setResponseValueAndErrors)(t,"maximum",r.value,r.message,e):(0,Ne.setResponseValueAndErrors)(t,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(t.exclusiveMaximum=!0),(0,Ne.setResponseValueAndErrors)(t,"maximum",r.value,r.message,e));break;case"multipleOf":(0,Ne.setResponseValueAndErrors)(t,"multipleOf",r.value,r.message,e);break}return t}dr.parseNumberDef=Oi;var ze={},dn;function Pi(){if(dn)return ze;dn=1,Object.defineProperty(ze,"__esModule",{value:!0}),ze.parseObjectDef=ze.parseObjectDefX=void 0;const n=ue();function e(r,a){var s,i;Object.keys(r.shape()).reduce((u,l)=>{let g=r.shape()[l];const P=g.isOptional();P||(g=Object.assign({},g._def.innerSchema));const L=(0,n.parseDef)(g._def,Object.assign(Object.assign({},a),{currentPath:[...a.currentPath,"properties",l],propertyPath:[...a.currentPath,"properties",l]}));return L!==void 0&&(u.properties[l]=L,P||(u.required||(u.required=[]),u.required.push(l))),u},{type:"object",properties:{},additionalProperties:r.catchall._def.typeName==="ZodNever"?r.unknownKeys==="passthrough":(s=(0,n.parseDef)(r.catchall._def,Object.assign(Object.assign({},a),{currentPath:[...a.currentPath,"additionalProperties"]})))!==null&&s!==void 0?s:!0});const o=Object.assign(Object.assign({type:"object"},Object.entries(r.shape()).reduce((u,[l,g])=>{if(g===void 0||g._def===void 0)return u;const P=(0,n.parseDef)(g._def,Object.assign(Object.assign({},a),{currentPath:[...a.currentPath,"properties",l],propertyPath:[...a.currentPath,"properties",l]}));return P===void 0?u:{properties:Object.assign(Object.assign({},u.properties),{[l]:P}),required:g.isOptional()?u.required:[...u.required,l]}},{properties:{},required:[]})),{additionalProperties:r.catchall._def.typeName==="ZodNever"?r.unknownKeys==="passthrough":(i=(0,n.parseDef)(r.catchall._def,Object.assign(Object.assign({},a),{currentPath:[...a.currentPath,"additionalProperties"]})))!==null&&i!==void 0?i:!0});return o.required.length||delete o.required,o}ze.parseObjectDefX=e;function t(r,a){var s;const i=Object.assign(Object.assign({type:"object"},Object.entries(r.shape()).reduce((o,[u,l])=>{if(l===void 0||l._def===void 0)return o;const g=(0,n.parseDef)(l._def,Object.assign(Object.assign({},a),{currentPath:[...a.currentPath,"properties",u],propertyPath:[...a.currentPath,"properties",u]}));return g===void 0?o:{properties:Object.assign(Object.assign({},o.properties),{[u]:g}),required:l.isOptional()?o.required:[...o.required,u]}},{properties:{},required:[]})),{additionalProperties:r.catchall._def.typeName==="ZodNever"?r.unknownKeys==="passthrough":(s=(0,n.parseDef)(r.catchall._def,Object.assign(Object.assign({},a),{currentPath:[...a.currentPath,"additionalProperties"]})))!==null&&s!==void 0?s:!0});return i.required.length||delete i.required,i}return ze.parseObjectDef=t,ze}var Tt={},pn;function Ti(){if(pn)return Tt;pn=1,Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.parseOptionalDef=void 0;const n=ue(),e=(t,r)=>{var a;if(r.currentPath.toString()===((a=r.propertyPath)===null||a===void 0?void 0:a.toString()))return(0,n.parseDef)(t.innerType._def,r);const s=(0,n.parseDef)(t.innerType._def,Object.assign(Object.assign({},r),{currentPath:[...r.currentPath,"anyOf","1"]}));return s?{anyOf:[{not:{}},s]}:{}};return Tt.parseOptionalDef=e,Tt}var kt={},fn;function ki(){if(fn)return kt;fn=1,Object.defineProperty(kt,"__esModule",{value:!0}),kt.parsePipelineDef=void 0;const n=ue(),e=(t,r)=>{if(r.pipeStrategy==="input")return(0,n.parseDef)(t.in._def,r);const a=(0,n.parseDef)(t.in._def,Object.assign(Object.assign({},r),{currentPath:[...r.currentPath,"allOf","0"]})),s=(0,n.parseDef)(t.out._def,Object.assign(Object.assign({},r),{currentPath:[...r.currentPath,"allOf",a?"1":"0"]}));return{allOf:[a,s].filter(i=>i!==void 0)}};return kt.parsePipelineDef=e,kt}var jt={},hn;function ji(){if(hn)return jt;hn=1,Object.defineProperty(jt,"__esModule",{value:!0}),jt.parsePromiseDef=void 0;const n=ue();function e(t,r){return(0,n.parseDef)(t.type._def,r)}return jt.parsePromiseDef=e,jt}var St={},$r={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.parseStringDef=n.emojiPattern=n.ulidPattern=n.cuid2Pattern=n.cuidPattern=n.emailPattern=void 0;const e=Ee;n.emailPattern='^(([^<>()[\\]\\\\.,;:\\s@\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\"]+)*)|(\\".+\\"))@((\\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\])|(\\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\\.[A-Za-z]{2,})+))$',n.cuidPattern="^c[^\\s-]{8,}$",n.cuid2Pattern="^[a-z][a-z0-9]*$",n.ulidPattern="/[0-9A-HJKMNP-TV-Z]{26}/",n.emojiPattern="/^(p{Extended_Pictographic}|p{Emoji_Component})+$/u";function t(i,o){const u={type:"string"};if(i.checks)for(const l of i.checks)switch(l.kind){case"min":(0,e.setResponseValueAndErrors)(u,"minLength",typeof u.minLength=="number"?Math.max(u.minLength,l.value):l.value,l.message,o);break;case"max":(0,e.setResponseValueAndErrors)(u,"maxLength",typeof u.maxLength=="number"?Math.min(u.maxLength,l.value):l.value,l.message,o);break;case"email":switch(o.emailStrategy){case"format:email":a(u,"email",l.message,o);break;case"format:idn-email":a(u,"idn-email",l.message,o);break;case"pattern:zod":s(u,n.emailPattern,l.message,o);break}break;case"url":a(u,"uri",l.message,o);break;case"uuid":a(u,"uuid",l.message,o);break;case"regex":s(u,l.regex.source,l.message,o);break;case"cuid":s(u,n.cuidPattern,l.message,o);break;case"cuid2":s(u,n.cuid2Pattern,l.message,o);break;case"startsWith":s(u,"^"+r(l.value),l.message,o);break;case"endsWith":s(u,r(l.value)+"$",l.message,o);break;case"datetime":a(u,"date-time",l.message,o);break;case"length":(0,e.setResponseValueAndErrors)(u,"minLength",typeof u.minLength=="number"?Math.max(u.minLength,l.value):l.value,l.message,o),(0,e.setResponseValueAndErrors)(u,"maxLength",typeof u.maxLength=="number"?Math.min(u.maxLength,l.value):l.value,l.message,o);break;case"includes":{s(u,r(l.value),l.message,o);break}case"ip":{l.version!=="v6"&&a(u,"ipv4",l.message,o),l.version!=="v4"&&a(u,"ipv6",l.message,o);break}case"emoji":s(u,n.emojiPattern,l.message,o);break;case"ulid":{s(u,n.ulidPattern,l.message,o);break}}return u}n.parseStringDef=t;const r=i=>Array.from(i).map(o=>/[a-zA-Z0-9]/.test(o)?o:`\\${o}`).join(""),a=(i,o,u,l)=>{var g;i.format||!((g=i.anyOf)===null||g===void 0)&&g.some(P=>P.format)?(i.anyOf||(i.anyOf=[]),i.format&&(i.anyOf.push(Object.assign({format:i.format},i.errorMessage&&l.errorMessages&&{errorMessage:{format:i.errorMessage.format}})),delete i.format,i.errorMessage&&(delete i.errorMessage.format,Object.keys(i.errorMessage).length===0&&delete i.errorMessage)),i.anyOf.push(Object.assign({format:o},u&&l.errorMessages&&{errorMessage:{format:u}}))):(0,e.setResponseValueAndErrors)(i,"format",o,u,l)},s=(i,o,u,l)=>{var g;i.pattern||!((g=i.allOf)===null||g===void 0)&&g.some(P=>P.pattern)?(i.allOf||(i.allOf=[]),i.pattern&&(i.allOf.push(Object.assign({pattern:i.pattern},i.errorMessage&&l.errorMessages&&{errorMessage:{pattern:i.errorMessage.pattern}})),delete i.pattern,i.errorMessage&&(delete i.errorMessage.pattern,Object.keys(i.errorMessage).length===0&&delete i.errorMessage)),i.allOf.push(Object.assign({pattern:o},u&&l.errorMessages&&{errorMessage:{pattern:u}}))):(0,e.setResponseValueAndErrors)(i,"pattern",o,u,l)}})($r);var mn;function Si(){if(mn)return St;mn=1,Object.defineProperty(St,"__esModule",{value:!0}),St.parseRecordDef=void 0;const n=Rr,e=ue(),t=$r;function r(a,s){var i,o,u,l,g;if(s.target==="openApi3"&&((i=a.keyType)===null||i===void 0?void 0:i._def.typeName)===n.ZodFirstPartyTypeKind.ZodEnum)return{type:"object",required:a.keyType._def.values,properties:a.keyType._def.values.reduce((L,J)=>{var x;return Object.assign(Object.assign({},L),{[J]:(x=(0,e.parseDef)(a.valueType._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"properties",J]})))!==null&&x!==void 0?x:{}})},{}),additionalProperties:!1};const P={type:"object",additionalProperties:(o=(0,e.parseDef)(a.valueType._def,Object.assign(Object.assign({},s),{currentPath:[...s.currentPath,"additionalProperties"]})))!==null&&o!==void 0?o:{}};if(s.target==="openApi3")return P;if(((u=a.keyType)===null||u===void 0?void 0:u._def.typeName)===n.ZodFirstPartyTypeKind.ZodString&&(!((l=a.keyType._def.checks)===null||l===void 0)&&l.length)){const L=Object.entries((0,t.parseStringDef)(a.keyType._def,s)).reduce((J,[x,$])=>x==="type"?J:Object.assign(Object.assign({},J),{[x]:$}),{});return Object.assign(Object.assign({},P),{propertyNames:L})}else if(((g=a.keyType)===null||g===void 0?void 0:g._def.typeName)===n.ZodFirstPartyTypeKind.ZodEnum)return Object.assign(Object.assign({},P),{propertyNames:{enum:a.keyType._def.values}});return P}return St.parseRecordDef=r,St}var It={},gn;function Ii(){if(gn)return It;gn=1,Object.defineProperty(It,"__esModule",{value:!0}),It.parseSetDef=void 0;const n=Ee,e=ue();function t(r,a){const i={type:"array",uniqueItems:!0,items:(0,e.parseDef)(r.valueType._def,Object.assign(Object.assign({},a),{currentPath:[...a.currentPath,"items"]}))};return r.minSize&&(0,n.setResponseValueAndErrors)(i,"minItems",r.minSize.value,r.minSize.message,a),r.maxSize&&(0,n.setResponseValueAndErrors)(i,"maxItems",r.maxSize.value,r.maxSize.message,a),i}return It.parseSetDef=t,It}var At={},yn;function Ai(){if(yn)return At;yn=1,Object.defineProperty(At,"__esModule",{value:!0}),At.parseTupleDef=void 0;const n=ue();function e(t,r){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((a,s)=>(0,n.parseDef)(a._def,Object.assign(Object.assign({},r),{currentPath:[...r.currentPath,"items",`${s}`]}))).reduce((a,s)=>s===void 0?a:[...a,s],[]),additionalItems:(0,n.parseDef)(t.rest._def,Object.assign(Object.assign({},r),{currentPath:[...r.currentPath,"additionalItems"]}))}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((a,s)=>(0,n.parseDef)(a._def,Object.assign(Object.assign({},r),{currentPath:[...r.currentPath,"items",`${s}`]}))).reduce((a,s)=>s===void 0?a:[...a,s],[])}}return At.parseTupleDef=e,At}var pr={};Object.defineProperty(pr,"__esModule",{value:!0});pr.parseUndefinedDef=void 0;function Ci(){return{not:{}}}pr.parseUndefinedDef=Ci;var fr={};Object.defineProperty(fr,"__esModule",{value:!0});fr.parseUnknownDef=void 0;function Di(){return{}}fr.parseUnknownDef=Di;var bn;function ue(){if(bn)return yt;bn=1,Object.defineProperty(yt,"__esModule",{value:!0}),yt.parseDef=void 0;const n=Rr,e=rr,t=oi(),r=nr,a=ar,s=li(),i=di(),o=sr,u=hi(),l=mi(),g=ir,P=yi(),L=or,J=_i(),x=ur,$=cr,v=lr,j=Ei(),D=dr,S=Pi(),k=Ti(),V=ki(),y=ji(),w=Si(),p=Ii(),h=$r,d=Ai(),b=pr,_=ka(),q=fr;function U(I,F,B=!1){const Oe=F.seen.get(I);if(Oe&&!B){const We=H(Oe,F);if(We!==void 0)return We}const Ue={def:I,path:F.currentPath,jsonSchema:void 0};F.seen.set(I,Ue);const Fe=X(I,I.typeName,F);return Fe&&ne(I,F,Fe),Ue.jsonSchema=Fe,Fe}yt.parseDef=U;const H=(I,F)=>{switch(F.$refStrategy){case"root":return{$ref:I.path.length===0?"":I.path.length===1?`${I.path[0]}/`:I.path.join("/")};case"relative":return{$ref:R(F.currentPath,I.path)};case"none":return I.path.length<F.currentPath.length&&I.path.every((B,Oe)=>F.currentPath[Oe]===B)?(console.warn(`Recursive reference detected at ${F.currentPath.join("/")}! Defaulting to any`),{}):void 0;case"seen":return I.path.length<F.currentPath.length&&I.path.every((B,Oe)=>F.currentPath[Oe]===B)?(console.warn(`Recursive reference detected at ${F.currentPath.join("/")}! Defaulting to any`),{}):I.jsonSchema}},R=(I,F)=>{let B=0;for(;B<I.length&&B<F.length&&I[B]===F[B];B++);return[(I.length-B).toString(),...F.slice(B)].join("/")},X=(I,F,B)=>{switch(F){case n.ZodFirstPartyTypeKind.ZodString:return(0,h.parseStringDef)(I,B);case n.ZodFirstPartyTypeKind.ZodNumber:return(0,D.parseNumberDef)(I,B);case n.ZodFirstPartyTypeKind.ZodObject:return(0,S.parseObjectDef)(I,B);case n.ZodFirstPartyTypeKind.ZodBigInt:return(0,r.parseBigintDef)(I,B);case n.ZodFirstPartyTypeKind.ZodBoolean:return(0,a.parseBooleanDef)();case n.ZodFirstPartyTypeKind.ZodDate:return(0,o.parseDateDef)(I,B);case n.ZodFirstPartyTypeKind.ZodUndefined:return(0,b.parseUndefinedDef)();case n.ZodFirstPartyTypeKind.ZodNull:return(0,v.parseNullDef)(B);case n.ZodFirstPartyTypeKind.ZodArray:return(0,t.parseArrayDef)(I,B);case n.ZodFirstPartyTypeKind.ZodUnion:case n.ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return(0,_.parseUnionDef)(I,B);case n.ZodFirstPartyTypeKind.ZodIntersection:return(0,P.parseIntersectionDef)(I,B);case n.ZodFirstPartyTypeKind.ZodTuple:return(0,d.parseTupleDef)(I,B);case n.ZodFirstPartyTypeKind.ZodRecord:return(0,w.parseRecordDef)(I,B);case n.ZodFirstPartyTypeKind.ZodLiteral:return(0,L.parseLiteralDef)(I,B);case n.ZodFirstPartyTypeKind.ZodEnum:return(0,g.parseEnumDef)(I);case n.ZodFirstPartyTypeKind.ZodNativeEnum:return(0,x.parseNativeEnumDef)(I);case n.ZodFirstPartyTypeKind.ZodNullable:return(0,j.parseNullableDef)(I,B);case n.ZodFirstPartyTypeKind.ZodOptional:return(0,k.parseOptionalDef)(I,B);case n.ZodFirstPartyTypeKind.ZodMap:return(0,J.parseMapDef)(I,B);case n.ZodFirstPartyTypeKind.ZodSet:return(0,p.parseSetDef)(I,B);case n.ZodFirstPartyTypeKind.ZodLazy:return U(I.getter()._def,B);case n.ZodFirstPartyTypeKind.ZodPromise:return(0,y.parsePromiseDef)(I,B);case n.ZodFirstPartyTypeKind.ZodNaN:case n.ZodFirstPartyTypeKind.ZodNever:return(0,$.parseNeverDef)();case n.ZodFirstPartyTypeKind.ZodEffects:return(0,l.parseEffectsDef)(I,B);case n.ZodFirstPartyTypeKind.ZodAny:return(0,e.parseAnyDef)();case n.ZodFirstPartyTypeKind.ZodUnknown:return(0,q.parseUnknownDef)();case n.ZodFirstPartyTypeKind.ZodDefault:return(0,u.parseDefaultDef)(I,B);case n.ZodFirstPartyTypeKind.ZodBranded:return(0,s.parseBrandedDef)(I,B);case n.ZodFirstPartyTypeKind.ZodCatch:return(0,i.parseCatchDef)(I,B);case n.ZodFirstPartyTypeKind.ZodPipeline:return(0,V.parsePipelineDef)(I,B);case n.ZodFirstPartyTypeKind.ZodFunction:case n.ZodFirstPartyTypeKind.ZodVoid:case n.ZodFirstPartyTypeKind.ZodSymbol:return;default:return(Oe=>{})()}},ne=(I,F,B)=>(I.description&&(B.description=I.description,F.markdownDescription&&(B.markdownDescription=I.description)),B);return yt}var hr={},ja={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getDefaultOptions=n.defaultOptions=void 0,n.defaultOptions={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"string",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,emailStrategy:"format:email"};const e=t=>typeof t=="string"?Object.assign(Object.assign({},n.defaultOptions),{name:t}):Object.assign(Object.assign({},n.defaultOptions),t);n.getDefaultOptions=e})(ja);Object.defineProperty(hr,"__esModule",{value:!0});hr.getRefs=void 0;const Mi=ja,Ni=n=>{const e=(0,Mi.getDefaultOptions)(n),t=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return Object.assign(Object.assign({},e),{currentPath:t,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([r,a])=>[a._def,{def:a._def,path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))})};hr.getRefs=Ni;Object.defineProperty(tr,"__esModule",{value:!0});tr.zodToJsonSchema=void 0;const _n=ue(),Li=hr,Ri=(n,e)=>{var t;const r=(0,Li.getRefs)(e),a=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((u,[l,g])=>{var P;return Object.assign(Object.assign({},u),{[l]:(P=(0,_n.parseDef)(g._def,Object.assign(Object.assign({},r),{currentPath:[...r.basePath,r.definitionPath,l]}),!0))!==null&&P!==void 0?P:{}})},{}):void 0,s=typeof e=="string"?e:e==null?void 0:e.name,i=(t=(0,_n.parseDef)(n._def,s===void 0?r:Object.assign(Object.assign({},r),{currentPath:[...r.basePath,r.definitionPath,s]}),!1))!==null&&t!==void 0?t:{},o=s===void 0?a?Object.assign(Object.assign({},i),{[r.definitionPath]:a}):i:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,s].join("/"),[r.definitionPath]:Object.assign(Object.assign({},a),{[s]:i})};return r.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":r.target==="jsonSchema2019-09"&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),o};tr.zodToJsonSchema=Ri;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.zodToJsonSchema=void 0;const e=tr;Object.defineProperty(n,"zodToJsonSchema",{enumerable:!0,get:function(){return e.zodToJsonSchema}}),n.default=e.zodToJsonSchema})(ai);/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function Sa(n){return typeof n>"u"||n===null}function $i(n){return typeof n=="object"&&n!==null}function Zi(n){return Array.isArray(n)?n:Sa(n)?[]:[n]}function Bi(n,e){var t,r,a,s;if(e)for(s=Object.keys(e),t=0,r=s.length;t<r;t+=1)a=s[t],n[a]=e[a];return n}function Vi(n,e){var t="",r;for(r=0;r<e;r+=1)t+=n;return t}function Ui(n){return n===0&&Number.NEGATIVE_INFINITY===1/n}var Fi=Sa,Ki=$i,zi=Zi,qi=Vi,Hi=Ui,Yi=Bi,Zr={isNothing:Fi,isObject:Ki,toArray:zi,repeat:qi,isNegativeZero:Hi,extend:Yi};function Ia(n,e){var t="",r=n.reason||"(unknown reason)";return n.mark?(n.mark.name&&(t+='in "'+n.mark.name+'" '),t+="("+(n.mark.line+1)+":"+(n.mark.column+1)+")",!e&&n.mark.snippet&&(t+=`

`+n.mark.snippet),r+" "+t):r}function Vt(n,e){Error.call(this),this.name="YAMLException",this.reason=n,this.mark=e,this.message=Ia(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Vt.prototype=Object.create(Error.prototype);Vt.prototype.constructor=Vt;Vt.prototype.toString=function(e){return this.name+": "+Ia(this,e)};var He=Vt,Gi=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Ji=["scalar","sequence","mapping"];function Wi(n){var e={};return n!==null&&Object.keys(n).forEach(function(t){n[t].forEach(function(r){e[String(r)]=t})}),e}function Qi(n,e){if(e=e||{},Object.keys(e).forEach(function(t){if(Gi.indexOf(t)===-1)throw new He('Unknown option "'+t+'" is met in definition of "'+n+'" YAML type.')}),this.options=e,this.tag=n,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(t){return t},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=Wi(e.styleAliases||null),Ji.indexOf(this.kind)===-1)throw new He('Unknown kind "'+this.kind+'" is specified for "'+n+'" YAML type.')}var ce=Qi;function vn(n,e){var t=[];return n[e].forEach(function(r){var a=t.length;t.forEach(function(s,i){s.tag===r.tag&&s.kind===r.kind&&s.multi===r.multi&&(a=i)}),t[a]=r}),t}function Xi(){var n={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,t;function r(a){a.multi?(n.multi[a.kind].push(a),n.multi.fallback.push(a)):n[a.kind][a.tag]=n.fallback[a.tag]=a}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(r);return n}function xr(n){return this.extend(n)}xr.prototype.extend=function(e){var t=[],r=[];if(e instanceof ce)r.push(e);else if(Array.isArray(e))r=r.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(r=r.concat(e.explicit));else throw new He("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");t.forEach(function(s){if(!(s instanceof ce))throw new He("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new He("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new He("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(s){if(!(s instanceof ce))throw new He("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var a=Object.create(xr.prototype);return a.implicit=(this.implicit||[]).concat(t),a.explicit=(this.explicit||[]).concat(r),a.compiledImplicit=vn(a,"implicit"),a.compiledExplicit=vn(a,"explicit"),a.compiledTypeMap=Xi(a.compiledImplicit,a.compiledExplicit),a};var eo=xr,to=new ce("tag:yaml.org,2002:str",{kind:"scalar",construct:function(n){return n!==null?n:""}}),ro=new ce("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(n){return n!==null?n:[]}}),no=new ce("tag:yaml.org,2002:map",{kind:"mapping",construct:function(n){return n!==null?n:{}}}),ao=new eo({explicit:[to,ro,no]});function so(n){if(n===null)return!0;var e=n.length;return e===1&&n==="~"||e===4&&(n==="null"||n==="Null"||n==="NULL")}function io(){return null}function oo(n){return n===null}var uo=new ce("tag:yaml.org,2002:null",{kind:"scalar",resolve:so,construct:io,predicate:oo,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function co(n){if(n===null)return!1;var e=n.length;return e===4&&(n==="true"||n==="True"||n==="TRUE")||e===5&&(n==="false"||n==="False"||n==="FALSE")}function lo(n){return n==="true"||n==="True"||n==="TRUE"}function po(n){return Object.prototype.toString.call(n)==="[object Boolean]"}var fo=new ce("tag:yaml.org,2002:bool",{kind:"scalar",resolve:co,construct:lo,predicate:po,represent:{lowercase:function(n){return n?"true":"false"},uppercase:function(n){return n?"TRUE":"FALSE"},camelcase:function(n){return n?"True":"False"}},defaultStyle:"lowercase"});function ho(n){return 48<=n&&n<=57||65<=n&&n<=70||97<=n&&n<=102}function mo(n){return 48<=n&&n<=55}function go(n){return 48<=n&&n<=57}function yo(n){if(n===null)return!1;var e=n.length,t=0,r=!1,a;if(!e)return!1;if(a=n[t],(a==="-"||a==="+")&&(a=n[++t]),a==="0"){if(t+1===e)return!0;if(a=n[++t],a==="b"){for(t++;t<e;t++)if(a=n[t],a!=="_"){if(a!=="0"&&a!=="1")return!1;r=!0}return r&&a!=="_"}if(a==="x"){for(t++;t<e;t++)if(a=n[t],a!=="_"){if(!ho(n.charCodeAt(t)))return!1;r=!0}return r&&a!=="_"}if(a==="o"){for(t++;t<e;t++)if(a=n[t],a!=="_"){if(!mo(n.charCodeAt(t)))return!1;r=!0}return r&&a!=="_"}}if(a==="_")return!1;for(;t<e;t++)if(a=n[t],a!=="_"){if(!go(n.charCodeAt(t)))return!1;r=!0}return!(!r||a==="_")}function bo(n){var e=n,t=1,r;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),r=e[0],(r==="-"||r==="+")&&(r==="-"&&(t=-1),e=e.slice(1),r=e[0]),e==="0")return 0;if(r==="0"){if(e[1]==="b")return t*parseInt(e.slice(2),2);if(e[1]==="x")return t*parseInt(e.slice(2),16);if(e[1]==="o")return t*parseInt(e.slice(2),8)}return t*parseInt(e,10)}function _o(n){return Object.prototype.toString.call(n)==="[object Number]"&&n%1===0&&!Zr.isNegativeZero(n)}var vo=new ce("tag:yaml.org,2002:int",{kind:"scalar",resolve:yo,construct:bo,predicate:_o,represent:{binary:function(n){return n>=0?"0b"+n.toString(2):"-0b"+n.toString(2).slice(1)},octal:function(n){return n>=0?"0o"+n.toString(8):"-0o"+n.toString(8).slice(1)},decimal:function(n){return n.toString(10)},hexadecimal:function(n){return n>=0?"0x"+n.toString(16).toUpperCase():"-0x"+n.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),wo=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function xo(n){return!(n===null||!wo.test(n)||n[n.length-1]==="_")}function Eo(n){var e,t;return e=n.replace(/_/g,"").toLowerCase(),t=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?t===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:t*parseFloat(e,10)}var Oo=/^[-+]?[0-9]+e/;function Po(n,e){var t;if(isNaN(n))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===n)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===n)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Zr.isNegativeZero(n))return"-0.0";return t=n.toString(10),Oo.test(t)?t.replace("e",".e"):t}function To(n){return Object.prototype.toString.call(n)==="[object Number]"&&(n%1!==0||Zr.isNegativeZero(n))}var ko=new ce("tag:yaml.org,2002:float",{kind:"scalar",resolve:xo,construct:Eo,predicate:To,represent:Po,defaultStyle:"lowercase"}),jo=ao.extend({implicit:[uo,fo,vo,ko]}),So=jo,Aa=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Ca=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Io(n){return n===null?!1:Aa.exec(n)!==null||Ca.exec(n)!==null}function Ao(n){var e,t,r,a,s,i,o,u=0,l=null,g,P,L;if(e=Aa.exec(n),e===null&&(e=Ca.exec(n)),e===null)throw new Error("Date resolve error");if(t=+e[1],r=+e[2]-1,a=+e[3],!e[4])return new Date(Date.UTC(t,r,a));if(s=+e[4],i=+e[5],o=+e[6],e[7]){for(u=e[7].slice(0,3);u.length<3;)u+="0";u=+u}return e[9]&&(g=+e[10],P=+(e[11]||0),l=(g*60+P)*6e4,e[9]==="-"&&(l=-l)),L=new Date(Date.UTC(t,r,a,s,i,o,u)),l&&L.setTime(L.getTime()-l),L}function Co(n){return n.toISOString()}var Do=new ce("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Io,construct:Ao,instanceOf:Date,represent:Co});function Mo(n){return n==="<<"||n===null}var No=new ce("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Mo}),Br=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Lo(n){if(n===null)return!1;var e,t,r=0,a=n.length,s=Br;for(t=0;t<a;t++)if(e=s.indexOf(n.charAt(t)),!(e>64)){if(e<0)return!1;r+=6}return r%8===0}function Ro(n){var e,t,r=n.replace(/[\r\n=]/g,""),a=r.length,s=Br,i=0,o=[];for(e=0;e<a;e++)e%4===0&&e&&(o.push(i>>16&255),o.push(i>>8&255),o.push(i&255)),i=i<<6|s.indexOf(r.charAt(e));return t=a%4*6,t===0?(o.push(i>>16&255),o.push(i>>8&255),o.push(i&255)):t===18?(o.push(i>>10&255),o.push(i>>2&255)):t===12&&o.push(i>>4&255),new Uint8Array(o)}function $o(n){var e="",t=0,r,a,s=n.length,i=Br;for(r=0;r<s;r++)r%3===0&&r&&(e+=i[t>>18&63],e+=i[t>>12&63],e+=i[t>>6&63],e+=i[t&63]),t=(t<<8)+n[r];return a=s%3,a===0?(e+=i[t>>18&63],e+=i[t>>12&63],e+=i[t>>6&63],e+=i[t&63]):a===2?(e+=i[t>>10&63],e+=i[t>>4&63],e+=i[t<<2&63],e+=i[64]):a===1&&(e+=i[t>>2&63],e+=i[t<<4&63],e+=i[64],e+=i[64]),e}function Zo(n){return Object.prototype.toString.call(n)==="[object Uint8Array]"}var Bo=new ce("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Lo,construct:Ro,predicate:Zo,represent:$o}),Vo=Object.prototype.hasOwnProperty,Uo=Object.prototype.toString;function Fo(n){if(n===null)return!0;var e=[],t,r,a,s,i,o=n;for(t=0,r=o.length;t<r;t+=1){if(a=o[t],i=!1,Uo.call(a)!=="[object Object]")return!1;for(s in a)if(Vo.call(a,s))if(!i)i=!0;else return!1;if(!i)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}function Ko(n){return n!==null?n:[]}var zo=new ce("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Fo,construct:Ko}),qo=Object.prototype.toString;function Ho(n){if(n===null)return!0;var e,t,r,a,s,i=n;for(s=new Array(i.length),e=0,t=i.length;e<t;e+=1){if(r=i[e],qo.call(r)!=="[object Object]"||(a=Object.keys(r),a.length!==1))return!1;s[e]=[a[0],r[a[0]]]}return!0}function Yo(n){if(n===null)return[];var e,t,r,a,s,i=n;for(s=new Array(i.length),e=0,t=i.length;e<t;e+=1)r=i[e],a=Object.keys(r),s[e]=[a[0],r[a[0]]];return s}var Go=new ce("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Ho,construct:Yo}),Jo=Object.prototype.hasOwnProperty;function Wo(n){if(n===null)return!0;var e,t=n;for(e in t)if(Jo.call(t,e)&&t[e]!==null)return!1;return!0}function Qo(n){return n!==null?n:{}}var Xo=new ce("tag:yaml.org,2002:set",{kind:"mapping",resolve:Wo,construct:Qo});So.extend({implicit:[Do,No],explicit:[Bo,zo,Go,Xo]});function wn(n){return n===48?"\0":n===97?"\x07":n===98?"\b":n===116||n===9?"	":n===110?`
`:n===118?"\v":n===102?"\f":n===114?"\r":n===101?"\x1B":n===32?" ":n===34?'"':n===47?"/":n===92?"\\":n===78?"":n===95?" ":n===76?"\u2028":n===80?"\u2029":""}var eu=new Array(256),tu=new Array(256);for(var et=0;et<256;et++)eu[et]=wn(et)?1:0,tu[et]=wn(et);var Da={exports:{}};(function(n,e){(function(t){n.exports=t()})(function(){return function t(r,a,s){function i(l,g){if(!a[l]){if(!r[l]){var P=typeof zt=="function"&&zt;if(!g&&P)return P(l,!0);if(o)return o(l,!0);throw new Error("Cannot find module '"+l+"'")}g=a[l]={exports:{}},r[l][0].call(g.exports,function(L){var J=r[l][1][L];return i(J||L)},g,g.exports,t,r,a,s)}return a[l].exports}for(var o=typeof zt=="function"&&zt,u=0;u<s.length;u++)i(s[u]);return i}({1:[function(t,r,a){(function(s,i,o,u,l,g,P,L,J){var x=t("crypto");function $(y,w){w=D(y,w);var p;return(p=w.algorithm!=="passthrough"?x.createHash(w.algorithm):new V).write===void 0&&(p.write=p.update,p.end=p.update),k(w,p).dispatch(y),p.update||p.end(""),p.digest?p.digest(w.encoding==="buffer"?void 0:w.encoding):(y=p.read(),w.encoding!=="buffer"?y.toString(w.encoding):y)}(a=r.exports=$).sha1=function(y){return $(y)},a.keys=function(y){return $(y,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},a.MD5=function(y){return $(y,{algorithm:"md5",encoding:"hex"})},a.keysMD5=function(y){return $(y,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var v=x.getHashes?x.getHashes().slice():["sha1","md5"],j=(v.push("passthrough"),["buffer","hex","binary","base64"]);function D(y,w){var p={};if(p.algorithm=(w=w||{}).algorithm||"sha1",p.encoding=w.encoding||"hex",p.excludeValues=!!w.excludeValues,p.algorithm=p.algorithm.toLowerCase(),p.encoding=p.encoding.toLowerCase(),p.ignoreUnknown=w.ignoreUnknown===!0,p.respectType=w.respectType!==!1,p.respectFunctionNames=w.respectFunctionNames!==!1,p.respectFunctionProperties=w.respectFunctionProperties!==!1,p.unorderedArrays=w.unorderedArrays===!0,p.unorderedSets=w.unorderedSets!==!1,p.unorderedObjects=w.unorderedObjects!==!1,p.replacer=w.replacer||void 0,p.excludeKeys=w.excludeKeys||void 0,y===void 0)throw new Error("Object argument required.");for(var h=0;h<v.length;++h)v[h].toLowerCase()===p.algorithm.toLowerCase()&&(p.algorithm=v[h]);if(v.indexOf(p.algorithm)===-1)throw new Error('Algorithm "'+p.algorithm+'"  not supported. supported values: '+v.join(", "));if(j.indexOf(p.encoding)===-1&&p.algorithm!=="passthrough")throw new Error('Encoding "'+p.encoding+'"  not supported. supported values: '+j.join(", "));return p}function S(y){if(typeof y=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(y))!=null}function k(y,w,p){p=p||[];function h(d){return w.update?w.update(d,"utf8"):w.write(d,"utf8")}return{dispatch:function(d){return this["_"+((d=y.replacer?y.replacer(d):d)===null?"null":typeof d)](d)},_object:function(d){var b,_=Object.prototype.toString.call(d),q=/\[object (.*)\]/i.exec(_);if(q=(q=q?q[1]:"unknown:["+_+"]").toLowerCase(),0<=(_=p.indexOf(d)))return this.dispatch("[CIRCULAR:"+_+"]");if(p.push(d),o!==void 0&&o.isBuffer&&o.isBuffer(d))return h("buffer:"),h(d);if(q==="object"||q==="function"||q==="asyncfunction")return _=Object.keys(d),y.unorderedObjects&&(_=_.sort()),y.respectType===!1||S(d)||_.splice(0,0,"prototype","__proto__","constructor"),y.excludeKeys&&(_=_.filter(function(U){return!y.excludeKeys(U)})),h("object:"+_.length+":"),b=this,_.forEach(function(U){b.dispatch(U),h(":"),y.excludeValues||b.dispatch(d[U]),h(",")});if(!this["_"+q]){if(y.ignoreUnknown)return h("["+q+"]");throw new Error('Unknown object type "'+q+'"')}this["_"+q](d)},_array:function(d,U){U=U!==void 0?U:y.unorderedArrays!==!1;var _=this;if(h("array:"+d.length+":"),!U||d.length<=1)return d.forEach(function(H){return _.dispatch(H)});var q=[],U=d.map(function(H){var R=new V,X=p.slice();return k(y,R,X).dispatch(H),q=q.concat(X.slice(p.length)),R.read().toString()});return p=p.concat(q),U.sort(),this._array(U,!1)},_date:function(d){return h("date:"+d.toJSON())},_symbol:function(d){return h("symbol:"+d.toString())},_error:function(d){return h("error:"+d.toString())},_boolean:function(d){return h("bool:"+d.toString())},_string:function(d){h("string:"+d.length+":"),h(d.toString())},_function:function(d){h("fn:"),S(d)?this.dispatch("[native]"):this.dispatch(d.toString()),y.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(d.name)),y.respectFunctionProperties&&this._object(d)},_number:function(d){return h("number:"+d.toString())},_xml:function(d){return h("xml:"+d.toString())},_null:function(){return h("Null")},_undefined:function(){return h("Undefined")},_regexp:function(d){return h("regex:"+d.toString())},_uint8array:function(d){return h("uint8array:"),this.dispatch(Array.prototype.slice.call(d))},_uint8clampedarray:function(d){return h("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(d))},_int8array:function(d){return h("int8array:"),this.dispatch(Array.prototype.slice.call(d))},_uint16array:function(d){return h("uint16array:"),this.dispatch(Array.prototype.slice.call(d))},_int16array:function(d){return h("int16array:"),this.dispatch(Array.prototype.slice.call(d))},_uint32array:function(d){return h("uint32array:"),this.dispatch(Array.prototype.slice.call(d))},_int32array:function(d){return h("int32array:"),this.dispatch(Array.prototype.slice.call(d))},_float32array:function(d){return h("float32array:"),this.dispatch(Array.prototype.slice.call(d))},_float64array:function(d){return h("float64array:"),this.dispatch(Array.prototype.slice.call(d))},_arraybuffer:function(d){return h("arraybuffer:"),this.dispatch(new Uint8Array(d))},_url:function(d){return h("url:"+d.toString())},_map:function(d){return h("map:"),d=Array.from(d),this._array(d,y.unorderedSets!==!1)},_set:function(d){return h("set:"),d=Array.from(d),this._array(d,y.unorderedSets!==!1)},_file:function(d){return h("file:"),this.dispatch([d.name,d.size,d.type,d.lastModfied])},_blob:function(){if(y.ignoreUnknown)return h("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return h("domwindow")},_bigint:function(d){return h("bigint:"+d.toString())},_process:function(){return h("process")},_timer:function(){return h("timer")},_pipe:function(){return h("pipe")},_tcp:function(){return h("tcp")},_udp:function(){return h("udp")},_tty:function(){return h("tty")},_statwatcher:function(){return h("statwatcher")},_securecontext:function(){return h("securecontext")},_connection:function(){return h("connection")},_zlib:function(){return h("zlib")},_context:function(){return h("context")},_nodescript:function(){return h("nodescript")},_httpparser:function(){return h("httpparser")},_dataview:function(){return h("dataview")},_signal:function(){return h("signal")},_fsevent:function(){return h("fsevent")},_tlswrap:function(){return h("tlswrap")}}}function V(){return{buf:"",write:function(y){this.buf+=y},end:function(y){this.buf+=y},read:function(){return this.buf}}}a.writeToStream=function(y,w,p){return p===void 0&&(p=w,w={}),k(w=D(y,w),p).dispatch(y)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(t,r,a){(function(s,i,o,u,l,g,P,L,J){(function(x){var $=typeof Uint8Array<"u"?Uint8Array:Array,v="+".charCodeAt(0),j="/".charCodeAt(0),D="0".charCodeAt(0),S="a".charCodeAt(0),k="A".charCodeAt(0),V="-".charCodeAt(0),y="_".charCodeAt(0);function w(p){return p=p.charCodeAt(0),p===v||p===V?62:p===j||p===y?63:p<D?-1:p<D+10?p-D+26+26:p<k+26?p-k:p<S+26?p-S+26:void 0}x.toByteArray=function(p){var h,d;if(0<p.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var b=p.length,b=p.charAt(b-2)==="="?2:p.charAt(b-1)==="="?1:0,_=new $(3*p.length/4-b),q=0<b?p.length-4:p.length,U=0;function H(R){_[U++]=R}for(h=0;h<q;h+=4,0)H((16711680&(d=w(p.charAt(h))<<18|w(p.charAt(h+1))<<12|w(p.charAt(h+2))<<6|w(p.charAt(h+3))))>>16),H((65280&d)>>8),H(255&d);return b==2?H(255&(d=w(p.charAt(h))<<2|w(p.charAt(h+1))>>4)):b==1&&(H((d=w(p.charAt(h))<<10|w(p.charAt(h+1))<<4|w(p.charAt(h+2))>>2)>>8&255),H(255&d)),_},x.fromByteArray=function(p){var h,d,b,_,q=p.length%3,U="";function H(R){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(R)}for(h=0,b=p.length-q;h<b;h+=3)d=(p[h]<<16)+(p[h+1]<<8)+p[h+2],U+=H((_=d)>>18&63)+H(_>>12&63)+H(_>>6&63)+H(63&_);switch(q){case 1:U=(U+=H((d=p[p.length-1])>>2))+H(d<<4&63)+"==";break;case 2:U=(U=(U+=H((d=(p[p.length-2]<<8)+p[p.length-1])>>10))+H(d>>4&63))+H(d<<2&63)+"="}return U}})(a===void 0?this.base64js={}:a)}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(t,r,a){(function(s,i,v,u,l,g,P,L,J){var x=t("base64-js"),$=t("ieee754");function v(c,f,m){if(!(this instanceof v))return new v(c,f,m);var O,E,C,W,te=typeof c;if(f==="base64"&&te=="string")for(c=(W=c).trim?W.trim():W.replace(/^\s+|\s+$/g,"");c.length%4!=0;)c+="=";if(te=="number")O=ne(c);else if(te=="string")O=v.byteLength(c,f);else{if(te!="object")throw new Error("First argument needs to be a number, array or string.");O=ne(c.length)}if(v._useTypedArrays?E=v._augment(new Uint8Array(O)):((E=this).length=O,E._isBuffer=!0),v._useTypedArrays&&typeof c.byteLength=="number")E._set(c);else if(I(W=c)||v.isBuffer(W)||W&&typeof W=="object"&&typeof W.length=="number")for(C=0;C<O;C++)v.isBuffer(c)?E[C]=c.readUInt8(C):E[C]=c[C];else if(te=="string")E.write(c,0,f);else if(te=="number"&&!v._useTypedArrays&&!m)for(C=0;C<O;C++)E[C]=0;return E}function j(c,f,m,O){return v._charsWritten=Ue(function(E){for(var C=[],W=0;W<E.length;W++)C.push(255&E.charCodeAt(W));return C}(f),c,m,O)}function D(c,f,m,O){return v._charsWritten=Ue(function(E){for(var C,W,te=[],ae=0;ae<E.length;ae++)W=E.charCodeAt(ae),C=W>>8,W=W%256,te.push(W),te.push(C);return te}(f),c,m,O)}function S(c,f,m){var O="";m=Math.min(c.length,m);for(var E=f;E<m;E++)O+=String.fromCharCode(c[E]);return O}function k(c,f,m,C){C||(A(typeof m=="boolean","missing or invalid endian"),A(f!=null,"missing offset"),A(f+1<c.length,"Trying to read beyond buffer length"));var E,C=c.length;if(!(C<=f))return m?(E=c[f],f+1<C&&(E|=c[f+1]<<8)):(E=c[f]<<8,f+1<C&&(E|=c[f+1])),E}function V(c,f,m,C){C||(A(typeof m=="boolean","missing or invalid endian"),A(f!=null,"missing offset"),A(f+3<c.length,"Trying to read beyond buffer length"));var E,C=c.length;if(!(C<=f))return m?(f+2<C&&(E=c[f+2]<<16),f+1<C&&(E|=c[f+1]<<8),E|=c[f],f+3<C&&(E+=c[f+3]<<24>>>0)):(f+1<C&&(E=c[f+1]<<16),f+2<C&&(E|=c[f+2]<<8),f+3<C&&(E|=c[f+3]),E+=c[f]<<24>>>0),E}function y(c,f,m,O){if(O||(A(typeof m=="boolean","missing or invalid endian"),A(f!=null,"missing offset"),A(f+1<c.length,"Trying to read beyond buffer length")),!(c.length<=f))return O=k(c,f,m,!0),32768&O?-1*(65535-O+1):O}function w(c,f,m,O){if(O||(A(typeof m=="boolean","missing or invalid endian"),A(f!=null,"missing offset"),A(f+3<c.length,"Trying to read beyond buffer length")),!(c.length<=f))return O=V(c,f,m,!0),2147483648&O?-1*(4294967295-O+1):O}function p(c,f,m,O){return O||(A(typeof m=="boolean","missing or invalid endian"),A(f+3<c.length,"Trying to read beyond buffer length")),$.read(c,f,m,23,4)}function h(c,f,m,O){return O||(A(typeof m=="boolean","missing or invalid endian"),A(f+7<c.length,"Trying to read beyond buffer length")),$.read(c,f,m,52,8)}function d(c,f,m,O,E){if(E||(A(f!=null,"missing value"),A(typeof O=="boolean","missing or invalid endian"),A(m!=null,"missing offset"),A(m+1<c.length,"trying to write beyond buffer length"),We(f,65535)),E=c.length,!(E<=m))for(var C=0,W=Math.min(E-m,2);C<W;C++)c[m+C]=(f&255<<8*(O?C:1-C))>>>8*(O?C:1-C)}function b(c,f,m,O,E){if(E||(A(f!=null,"missing value"),A(typeof O=="boolean","missing or invalid endian"),A(m!=null,"missing offset"),A(m+3<c.length,"trying to write beyond buffer length"),We(f,4294967295)),E=c.length,!(E<=m))for(var C=0,W=Math.min(E-m,4);C<W;C++)c[m+C]=f>>>8*(O?C:3-C)&255}function _(c,f,m,O,E){E||(A(f!=null,"missing value"),A(typeof O=="boolean","missing or invalid endian"),A(m!=null,"missing offset"),A(m+1<c.length,"Trying to write beyond buffer length"),mr(f,32767,-32768)),c.length<=m||d(c,0<=f?f:65535+f+1,m,O,E)}function q(c,f,m,O,E){E||(A(f!=null,"missing value"),A(typeof O=="boolean","missing or invalid endian"),A(m!=null,"missing offset"),A(m+3<c.length,"Trying to write beyond buffer length"),mr(f,2147483647,-2147483648)),c.length<=m||b(c,0<=f?f:4294967295+f+1,m,O,E)}function U(c,f,m,O,E){E||(A(f!=null,"missing value"),A(typeof O=="boolean","missing or invalid endian"),A(m!=null,"missing offset"),A(m+3<c.length,"Trying to write beyond buffer length"),Fr(f,34028234663852886e22,-34028234663852886e22)),c.length<=m||$.write(c,f,m,O,23,4)}function H(c,f,m,O,E){E||(A(f!=null,"missing value"),A(typeof O=="boolean","missing or invalid endian"),A(m!=null,"missing offset"),A(m+7<c.length,"Trying to write beyond buffer length"),Fr(f,17976931348623157e292,-17976931348623157e292)),c.length<=m||$.write(c,f,m,O,52,8)}a.Buffer=v,a.SlowBuffer=v,a.INSPECT_MAX_BYTES=50,v.poolSize=8192,v._useTypedArrays=function(){try{var c=new ArrayBuffer(0),f=new Uint8Array(c);return f.foo=function(){return 42},f.foo()===42&&typeof f.subarray=="function"}catch{return!1}}(),v.isEncoding=function(c){switch(String(c).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},v.isBuffer=function(c){return!(c==null||!c._isBuffer)},v.byteLength=function(c,f){var m;switch(c+="",f||"utf8"){case"hex":m=c.length/2;break;case"utf8":case"utf-8":m=B(c).length;break;case"ascii":case"binary":case"raw":m=c.length;break;case"base64":m=Oe(c).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":m=2*c.length;break;default:throw new Error("Unknown encoding")}return m},v.concat=function(c,f){if(A(I(c),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),c.length===0)return new v(0);if(c.length===1)return c[0];if(typeof f!="number")for(E=f=0;E<c.length;E++)f+=c[E].length;for(var m=new v(f),O=0,E=0;E<c.length;E++){var C=c[E];C.copy(m,O),O+=C.length}return m},v.prototype.write=function(c,f,m,O){isFinite(f)?isFinite(m)||(O=m,m=void 0):(ae=O,O=f,f=m,m=ae),f=Number(f)||0;var E,C,W,te,ae=this.length-f;switch((!m||ae<(m=Number(m)))&&(m=ae),O=String(O||"utf8").toLowerCase()){case"hex":E=function(ve,de,pe,se){pe=Number(pe)||0;var re=ve.length-pe;(!se||re<(se=Number(se)))&&(se=re),A((re=de.length)%2==0,"Invalid hex string"),re/2<se&&(se=re/2);for(var Qe=0;Qe<se;Qe++){var Kr=parseInt(de.substr(2*Qe,2),16);A(!isNaN(Kr),"Invalid hex string"),ve[pe+Qe]=Kr}return v._charsWritten=2*Qe,Qe}(this,c,f,m);break;case"utf8":case"utf-8":C=this,W=f,te=m,E=v._charsWritten=Ue(B(c),C,W,te);break;case"ascii":case"binary":E=j(this,c,f,m);break;case"base64":C=this,W=f,te=m,E=v._charsWritten=Ue(Oe(c),C,W,te);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":E=D(this,c,f,m);break;default:throw new Error("Unknown encoding")}return E},v.prototype.toString=function(c,f,m){var O,E,C,W,te=this;if(c=String(c||"utf8").toLowerCase(),f=Number(f)||0,(m=m!==void 0?Number(m):te.length)===f)return"";switch(c){case"hex":O=function(ae,ve,de){var pe=ae.length;(!ve||ve<0)&&(ve=0),(!de||de<0||pe<de)&&(de=pe);for(var se="",re=ve;re<de;re++)se+=F(ae[re]);return se}(te,f,m);break;case"utf8":case"utf-8":O=function(ae,ve,de){var pe="",se="";de=Math.min(ae.length,de);for(var re=ve;re<de;re++)ae[re]<=127?(pe+=Fe(se)+String.fromCharCode(ae[re]),se=""):se+="%"+ae[re].toString(16);return pe+Fe(se)}(te,f,m);break;case"ascii":case"binary":O=S(te,f,m);break;case"base64":E=te,W=m,O=(C=f)===0&&W===E.length?x.fromByteArray(E):x.fromByteArray(E.slice(C,W));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":O=function(ae,ve,de){for(var pe=ae.slice(ve,de),se="",re=0;re<pe.length;re+=2)se+=String.fromCharCode(pe[re]+256*pe[re+1]);return se}(te,f,m);break;default:throw new Error("Unknown encoding")}return O},v.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},v.prototype.copy=function(c,f,m,O){if(f=f||0,(O=O||O===0?O:this.length)!==(m=m||0)&&c.length!==0&&this.length!==0){A(m<=O,"sourceEnd < sourceStart"),A(0<=f&&f<c.length,"targetStart out of bounds"),A(0<=m&&m<this.length,"sourceStart out of bounds"),A(0<=O&&O<=this.length,"sourceEnd out of bounds"),O>this.length&&(O=this.length);var E=(O=c.length-f<O-m?c.length-f+m:O)-m;if(E<100||!v._useTypedArrays)for(var C=0;C<E;C++)c[C+f]=this[C+m];else c._set(this.subarray(m,m+E),f)}},v.prototype.slice=function(c,f){var m=this.length;if(c=X(c,m,0),f=X(f,m,m),v._useTypedArrays)return v._augment(this.subarray(c,f));for(var O=f-c,E=new v(O,void 0,!0),C=0;C<O;C++)E[C]=this[C+c];return E},v.prototype.get=function(c){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(c)},v.prototype.set=function(c,f){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(c,f)},v.prototype.readUInt8=function(c,f){if(f||(A(c!=null,"missing offset"),A(c<this.length,"Trying to read beyond buffer length")),!(c>=this.length))return this[c]},v.prototype.readUInt16LE=function(c,f){return k(this,c,!0,f)},v.prototype.readUInt16BE=function(c,f){return k(this,c,!1,f)},v.prototype.readUInt32LE=function(c,f){return V(this,c,!0,f)},v.prototype.readUInt32BE=function(c,f){return V(this,c,!1,f)},v.prototype.readInt8=function(c,f){if(f||(A(c!=null,"missing offset"),A(c<this.length,"Trying to read beyond buffer length")),!(c>=this.length))return 128&this[c]?-1*(255-this[c]+1):this[c]},v.prototype.readInt16LE=function(c,f){return y(this,c,!0,f)},v.prototype.readInt16BE=function(c,f){return y(this,c,!1,f)},v.prototype.readInt32LE=function(c,f){return w(this,c,!0,f)},v.prototype.readInt32BE=function(c,f){return w(this,c,!1,f)},v.prototype.readFloatLE=function(c,f){return p(this,c,!0,f)},v.prototype.readFloatBE=function(c,f){return p(this,c,!1,f)},v.prototype.readDoubleLE=function(c,f){return h(this,c,!0,f)},v.prototype.readDoubleBE=function(c,f){return h(this,c,!1,f)},v.prototype.writeUInt8=function(c,f,m){m||(A(c!=null,"missing value"),A(f!=null,"missing offset"),A(f<this.length,"trying to write beyond buffer length"),We(c,255)),f>=this.length||(this[f]=c)},v.prototype.writeUInt16LE=function(c,f,m){d(this,c,f,!0,m)},v.prototype.writeUInt16BE=function(c,f,m){d(this,c,f,!1,m)},v.prototype.writeUInt32LE=function(c,f,m){b(this,c,f,!0,m)},v.prototype.writeUInt32BE=function(c,f,m){b(this,c,f,!1,m)},v.prototype.writeInt8=function(c,f,m){m||(A(c!=null,"missing value"),A(f!=null,"missing offset"),A(f<this.length,"Trying to write beyond buffer length"),mr(c,127,-128)),f>=this.length||(0<=c?this.writeUInt8(c,f,m):this.writeUInt8(255+c+1,f,m))},v.prototype.writeInt16LE=function(c,f,m){_(this,c,f,!0,m)},v.prototype.writeInt16BE=function(c,f,m){_(this,c,f,!1,m)},v.prototype.writeInt32LE=function(c,f,m){q(this,c,f,!0,m)},v.prototype.writeInt32BE=function(c,f,m){q(this,c,f,!1,m)},v.prototype.writeFloatLE=function(c,f,m){U(this,c,f,!0,m)},v.prototype.writeFloatBE=function(c,f,m){U(this,c,f,!1,m)},v.prototype.writeDoubleLE=function(c,f,m){H(this,c,f,!0,m)},v.prototype.writeDoubleBE=function(c,f,m){H(this,c,f,!1,m)},v.prototype.fill=function(c,f,m){if(f=f||0,m=m||this.length,A(typeof(c=typeof(c=c||0)=="string"?c.charCodeAt(0):c)=="number"&&!isNaN(c),"value is not a number"),A(f<=m,"end < start"),m!==f&&this.length!==0){A(0<=f&&f<this.length,"start out of bounds"),A(0<=m&&m<=this.length,"end out of bounds");for(var O=f;O<m;O++)this[O]=c}},v.prototype.inspect=function(){for(var c=[],f=this.length,m=0;m<f;m++)if(c[m]=F(this[m]),m===a.INSPECT_MAX_BYTES){c[m+1]="...";break}return"<Buffer "+c.join(" ")+">"},v.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(v._useTypedArrays)return new v(this).buffer;for(var c=new Uint8Array(this.length),f=0,m=c.length;f<m;f+=1)c[f]=this[f];return c.buffer};var R=v.prototype;function X(c,f,m){return typeof c!="number"?m:f<=(c=~~c)?f:0<=c||0<=(c+=f)?c:0}function ne(c){return(c=~~Math.ceil(+c))<0?0:c}function I(c){return(Array.isArray||function(f){return Object.prototype.toString.call(f)==="[object Array]"})(c)}function F(c){return c<16?"0"+c.toString(16):c.toString(16)}function B(c){for(var f=[],m=0;m<c.length;m++){var O=c.charCodeAt(m);if(O<=127)f.push(c.charCodeAt(m));else for(var E=m,C=(55296<=O&&O<=57343&&m++,encodeURIComponent(c.slice(E,m+1)).substr(1).split("%")),W=0;W<C.length;W++)f.push(parseInt(C[W],16))}return f}function Oe(c){return x.toByteArray(c)}function Ue(c,f,m,O){for(var E=0;E<O&&!(E+m>=f.length||E>=c.length);E++)f[E+m]=c[E];return E}function Fe(c){try{return decodeURIComponent(c)}catch{return String.fromCharCode(65533)}}function We(c,f){A(typeof c=="number","cannot write a non-number as a number"),A(0<=c,"specified a negative value for writing an unsigned value"),A(c<=f,"value is larger than maximum value for type"),A(Math.floor(c)===c,"value has a fractional component")}function mr(c,f,m){A(typeof c=="number","cannot write a non-number as a number"),A(c<=f,"value larger than maximum allowed value"),A(m<=c,"value smaller than minimum allowed value"),A(Math.floor(c)===c,"value has a fractional component")}function Fr(c,f,m){A(typeof c=="number","cannot write a non-number as a number"),A(c<=f,"value larger than maximum allowed value"),A(m<=c,"value smaller than minimum allowed value")}function A(c,f){if(!c)throw new Error(f||"Failed assertion")}v._augment=function(c){return c._isBuffer=!0,c._get=c.get,c._set=c.set,c.get=R.get,c.set=R.set,c.write=R.write,c.toString=R.toString,c.toLocaleString=R.toString,c.toJSON=R.toJSON,c.copy=R.copy,c.slice=R.slice,c.readUInt8=R.readUInt8,c.readUInt16LE=R.readUInt16LE,c.readUInt16BE=R.readUInt16BE,c.readUInt32LE=R.readUInt32LE,c.readUInt32BE=R.readUInt32BE,c.readInt8=R.readInt8,c.readInt16LE=R.readInt16LE,c.readInt16BE=R.readInt16BE,c.readInt32LE=R.readInt32LE,c.readInt32BE=R.readInt32BE,c.readFloatLE=R.readFloatLE,c.readFloatBE=R.readFloatBE,c.readDoubleLE=R.readDoubleLE,c.readDoubleBE=R.readDoubleBE,c.writeUInt8=R.writeUInt8,c.writeUInt16LE=R.writeUInt16LE,c.writeUInt16BE=R.writeUInt16BE,c.writeUInt32LE=R.writeUInt32LE,c.writeUInt32BE=R.writeUInt32BE,c.writeInt8=R.writeInt8,c.writeInt16LE=R.writeInt16LE,c.writeInt16BE=R.writeInt16BE,c.writeInt32LE=R.writeInt32LE,c.writeInt32BE=R.writeInt32BE,c.writeFloatLE=R.writeFloatLE,c.writeFloatBE=R.writeFloatBE,c.writeDoubleLE=R.writeDoubleLE,c.writeDoubleBE=R.writeDoubleBE,c.fill=R.fill,c.inspect=R.inspect,c.toArrayBuffer=R.toArrayBuffer,c}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(t,r,a){(function(s,i,x,u,l,g,P,L,J){var x=t("buffer").Buffer,$=4,v=new x($);v.fill(0),r.exports={hash:function(j,D,S,k){for(var V=D(function(d,b){d.length%$!=0&&(_=d.length+($-d.length%$),d=x.concat([d,v],_));for(var _,q=[],U=b?d.readInt32BE:d.readInt32LE,H=0;H<d.length;H+=$)q.push(U.call(d,H));return q}(j=x.isBuffer(j)?j:new x(j),k),8*j.length),D=k,y=new x(S),w=D?y.writeInt32BE:y.writeInt32LE,p=0;p<V.length;p++)w.call(y,V[p],4*p,!0);return y}}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(t,r,a){(function(s,i,x,u,l,g,P,L,J){var x=t("buffer").Buffer,$=t("./sha"),v=t("./sha256"),j=t("./rng"),D={sha1:$,sha256:v,md5:t("./md5")},S=64,k=new x(S);function V(d,b){var _=D[d=d||"sha1"],q=[];return _||y("algorithm:",d,"is not yet supported"),{update:function(U){return x.isBuffer(U)||(U=new x(U)),q.push(U),U.length,this},digest:function(U){var H=x.concat(q),H=b?function(R,X,ne){x.isBuffer(X)||(X=new x(X)),x.isBuffer(ne)||(ne=new x(ne)),X.length>S?X=R(X):X.length<S&&(X=x.concat([X,k],S));for(var I=new x(S),F=new x(S),B=0;B<S;B++)I[B]=54^X[B],F[B]=92^X[B];return ne=R(x.concat([I,ne])),R(x.concat([F,ne]))}(_,b,H):_(H);return q=null,U?H.toString(U):H}}}function y(){var d=[].slice.call(arguments).join(" ");throw new Error([d,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}k.fill(0),a.createHash=function(d){return V(d)},a.createHmac=V,a.randomBytes=function(d,b){if(!b||!b.call)return new x(j(d));try{b.call(this,void 0,new x(j(d)))}catch(_){b(_)}};var w,p=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],h=function(d){a[d]=function(){y("sorry,",d,"is not implemented yet")}};for(w in p)h(p[w])}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(t,r,a){(function(s,i,o,u,l,g,P,L,J){var x=t("./helpers");function $(y,w){y[w>>5]|=128<<w%32,y[14+(w+64>>>9<<4)]=w;for(var p=1732584193,h=-271733879,d=-1732584194,b=271733878,_=0;_<y.length;_+=16){var q=p,U=h,H=d,R=b,p=j(p,h,d,b,y[_+0],7,-680876936),b=j(b,p,h,d,y[_+1],12,-389564586),d=j(d,b,p,h,y[_+2],17,606105819),h=j(h,d,b,p,y[_+3],22,-1044525330);p=j(p,h,d,b,y[_+4],7,-176418897),b=j(b,p,h,d,y[_+5],12,1200080426),d=j(d,b,p,h,y[_+6],17,-1473231341),h=j(h,d,b,p,y[_+7],22,-45705983),p=j(p,h,d,b,y[_+8],7,1770035416),b=j(b,p,h,d,y[_+9],12,-1958414417),d=j(d,b,p,h,y[_+10],17,-42063),h=j(h,d,b,p,y[_+11],22,-1990404162),p=j(p,h,d,b,y[_+12],7,1804603682),b=j(b,p,h,d,y[_+13],12,-40341101),d=j(d,b,p,h,y[_+14],17,-1502002290),p=D(p,h=j(h,d,b,p,y[_+15],22,1236535329),d,b,y[_+1],5,-165796510),b=D(b,p,h,d,y[_+6],9,-1069501632),d=D(d,b,p,h,y[_+11],14,643717713),h=D(h,d,b,p,y[_+0],20,-373897302),p=D(p,h,d,b,y[_+5],5,-701558691),b=D(b,p,h,d,y[_+10],9,38016083),d=D(d,b,p,h,y[_+15],14,-660478335),h=D(h,d,b,p,y[_+4],20,-405537848),p=D(p,h,d,b,y[_+9],5,568446438),b=D(b,p,h,d,y[_+14],9,-1019803690),d=D(d,b,p,h,y[_+3],14,-187363961),h=D(h,d,b,p,y[_+8],20,1163531501),p=D(p,h,d,b,y[_+13],5,-1444681467),b=D(b,p,h,d,y[_+2],9,-51403784),d=D(d,b,p,h,y[_+7],14,1735328473),p=S(p,h=D(h,d,b,p,y[_+12],20,-1926607734),d,b,y[_+5],4,-378558),b=S(b,p,h,d,y[_+8],11,-2022574463),d=S(d,b,p,h,y[_+11],16,1839030562),h=S(h,d,b,p,y[_+14],23,-35309556),p=S(p,h,d,b,y[_+1],4,-1530992060),b=S(b,p,h,d,y[_+4],11,1272893353),d=S(d,b,p,h,y[_+7],16,-155497632),h=S(h,d,b,p,y[_+10],23,-1094730640),p=S(p,h,d,b,y[_+13],4,681279174),b=S(b,p,h,d,y[_+0],11,-358537222),d=S(d,b,p,h,y[_+3],16,-722521979),h=S(h,d,b,p,y[_+6],23,76029189),p=S(p,h,d,b,y[_+9],4,-640364487),b=S(b,p,h,d,y[_+12],11,-421815835),d=S(d,b,p,h,y[_+15],16,530742520),p=k(p,h=S(h,d,b,p,y[_+2],23,-995338651),d,b,y[_+0],6,-198630844),b=k(b,p,h,d,y[_+7],10,1126891415),d=k(d,b,p,h,y[_+14],15,-1416354905),h=k(h,d,b,p,y[_+5],21,-57434055),p=k(p,h,d,b,y[_+12],6,1700485571),b=k(b,p,h,d,y[_+3],10,-1894986606),d=k(d,b,p,h,y[_+10],15,-1051523),h=k(h,d,b,p,y[_+1],21,-2054922799),p=k(p,h,d,b,y[_+8],6,1873313359),b=k(b,p,h,d,y[_+15],10,-30611744),d=k(d,b,p,h,y[_+6],15,-1560198380),h=k(h,d,b,p,y[_+13],21,1309151649),p=k(p,h,d,b,y[_+4],6,-145523070),b=k(b,p,h,d,y[_+11],10,-1120210379),d=k(d,b,p,h,y[_+2],15,718787259),h=k(h,d,b,p,y[_+9],21,-343485551),p=V(p,q),h=V(h,U),d=V(d,H),b=V(b,R)}return Array(p,h,d,b)}function v(y,w,p,h,d,b){return V((w=V(V(w,y),V(h,b)))<<d|w>>>32-d,p)}function j(y,w,p,h,d,b,_){return v(w&p|~w&h,y,w,d,b,_)}function D(y,w,p,h,d,b,_){return v(w&h|p&~h,y,w,d,b,_)}function S(y,w,p,h,d,b,_){return v(w^p^h,y,w,d,b,_)}function k(y,w,p,h,d,b,_){return v(p^(w|~h),y,w,d,b,_)}function V(y,w){var p=(65535&y)+(65535&w);return(y>>16)+(w>>16)+(p>>16)<<16|65535&p}r.exports=function(y){return x.hash(y,$,16)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(t,r,a){(function(s,i,o,u,l,g,P,L,J){r.exports=function(x){for(var $,v=new Array(x),j=0;j<x;j++)!(3&j)&&($=4294967296*Math.random()),v[j]=$>>>((3&j)<<3)&255;return v}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(t,r,a){(function(s,i,o,u,l,g,P,L,J){var x=t("./helpers");function $(D,S){D[S>>5]|=128<<24-S%32,D[15+(S+64>>9<<4)]=S;for(var k,V,y,w=Array(80),p=1732584193,h=-271733879,d=-1732584194,b=271733878,_=-1009589776,q=0;q<D.length;q+=16){for(var U=p,H=h,R=d,X=b,ne=_,I=0;I<80;I++){w[I]=I<16?D[q+I]:j(w[I-3]^w[I-8]^w[I-14]^w[I-16],1);var F=v(v(j(p,5),(F=h,V=d,y=b,(k=I)<20?F&V|~F&y:!(k<40)&&k<60?F&V|F&y|V&y:F^V^y)),v(v(_,w[I]),(k=I)<20?1518500249:k<40?1859775393:k<60?-1894007588:-899497514)),_=b,b=d,d=j(h,30),h=p,p=F}p=v(p,U),h=v(h,H),d=v(d,R),b=v(b,X),_=v(_,ne)}return Array(p,h,d,b,_)}function v(D,S){var k=(65535&D)+(65535&S);return(D>>16)+(S>>16)+(k>>16)<<16|65535&k}function j(D,S){return D<<S|D>>>32-S}r.exports=function(D){return x.hash(D,$,20,!0)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(t,r,a){(function(s,i,o,u,l,g,P,L,J){function x(S,k){var V=(65535&S)+(65535&k);return(S>>16)+(k>>16)+(V>>16)<<16|65535&V}function $(S,k){var V,y=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),w=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),p=new Array(64);S[k>>5]|=128<<24-k%32,S[15+(k+64>>9<<4)]=k;for(var h,d,b=0;b<S.length;b+=16){for(var _=w[0],q=w[1],U=w[2],H=w[3],R=w[4],X=w[5],ne=w[6],I=w[7],F=0;F<64;F++)p[F]=F<16?S[F+b]:x(x(x((d=p[F-2],j(d,17)^j(d,19)^D(d,10)),p[F-7]),(d=p[F-15],j(d,7)^j(d,18)^D(d,3))),p[F-16]),V=x(x(x(x(I,j(d=R,6)^j(d,11)^j(d,25)),R&X^~R&ne),y[F]),p[F]),h=x(j(h=_,2)^j(h,13)^j(h,22),_&q^_&U^q&U),I=ne,ne=X,X=R,R=x(H,V),H=U,U=q,q=_,_=x(V,h);w[0]=x(_,w[0]),w[1]=x(q,w[1]),w[2]=x(U,w[2]),w[3]=x(H,w[3]),w[4]=x(R,w[4]),w[5]=x(X,w[5]),w[6]=x(ne,w[6]),w[7]=x(I,w[7])}return w}var v=t("./helpers"),j=function(S,k){return S>>>k|S<<32-k},D=function(S,k){return S>>>k};r.exports=function(S){return v.hash(S,$,32,!0)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(t,r,a){(function(s,i,o,u,l,g,P,L,J){a.read=function(x,$,v,j,b){var S,k,V=8*b-j-1,y=(1<<V)-1,w=y>>1,p=-7,h=v?b-1:0,d=v?-1:1,b=x[$+h];for(h+=d,S=b&(1<<-p)-1,b>>=-p,p+=V;0<p;S=256*S+x[$+h],h+=d,p-=8);for(k=S&(1<<-p)-1,S>>=-p,p+=j;0<p;k=256*k+x[$+h],h+=d,p-=8);if(S===0)S=1-w;else{if(S===y)return k?NaN:1/0*(b?-1:1);k+=Math.pow(2,j),S-=w}return(b?-1:1)*k*Math.pow(2,S-j)},a.write=function(x,$,v,j,D,_){var k,V,y=8*_-D-1,w=(1<<y)-1,p=w>>1,h=D===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=j?0:_-1,b=j?1:-1,_=$<0||$===0&&1/$<0?1:0;for($=Math.abs($),isNaN($)||$===1/0?(V=isNaN($)?1:0,k=w):(k=Math.floor(Math.log($)/Math.LN2),$*(j=Math.pow(2,-k))<1&&(k--,j*=2),2<=($+=1<=k+p?h/j:h*Math.pow(2,1-p))*j&&(k++,j/=2),w<=k+p?(V=0,k=w):1<=k+p?(V=($*j-1)*Math.pow(2,D),k+=p):(V=$*Math.pow(2,p-1)*Math.pow(2,D),k=0));8<=D;x[v+d]=255&V,d+=b,V/=256,D-=8);for(k=k<<D|V,y+=D;0<y;x[v+d]=255&k,d+=b,k/=256,y-=8);x[v+d-b]|=128*_}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(t,r,a){(function(s,i,o,u,l,g,P,L,J){var x,$,v;function j(){}(s=r.exports={}).nextTick=($=typeof window<"u"&&window.setImmediate,v=typeof window<"u"&&window.postMessage&&window.addEventListener,$?function(D){return window.setImmediate(D)}:v?(x=[],window.addEventListener("message",function(D){var S=D.source;S!==window&&S!==null||D.data!=="process-tick"||(D.stopPropagation(),0<x.length&&x.shift()())},!0),function(D){x.push(D),window.postMessage("process-tick","*")}):function(D){setTimeout(D,0)}),s.title="browser",s.browser=!0,s.env={},s.argv=[],s.on=j,s.addListener=j,s.once=j,s.off=j,s.removeListener=j,s.removeAllListeners=j,s.emit=j,s.binding=function(D){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(D){throw new Error("process.chdir is not supported")}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)})})(Da);var ru=Da.exports;const nu=kn(ru),xn=(...n)=>nu(n.join("_")),au=new Map;class Vr extends Ra{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,t){return Promise.resolve(this.cache.get(xn(e,t))??null)}async update(e,t,r){this.cache.set(xn(e,t),r)}static global(){return new Vr(au)}}class su extends Dn{constructor({cache:e,concurrency:t,...r}){super(t?{maxConcurrency:t,...r}:r),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","llms",this._llmType()]}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof e=="object"?this.cache=e:e?this.cache=Vr.global():this.cache=void 0}async generatePrompt(e,t,r){const a=e.map(s=>s.toString());return this.generate(a,t,r)}invocationParams(e){return{}}_flattenLLMResult(e){const t=[];for(let r=0;r<e.generations.length;r+=1){const a=e.generations[r];if(r===0)t.push({generations:[a],llmOutput:e.llmOutput});else{const s=e.llmOutput?{...e.llmOutput,tokenUsage:{}}:void 0;t.push({generations:[a],llmOutput:s})}}return t}async _generateUncached(e,t,r){const a=await Le.configure(r.callbacks,this.callbacks,r.tags,this.tags,r.metadata,this.metadata,{verbose:this.verbose}),s={options:t,invocation_params:this==null?void 0:this.invocationParams(t)},i=await(a==null?void 0:a.handleLLMStart(this.toJSON(),e,void 0,void 0,s));let o;try{o=await this._generate(e,t,i==null?void 0:i[0])}catch(g){throw await Promise.all((i??[]).map(P=>P==null?void 0:P.handleLLMError(g))),g}const u=this._flattenLLMResult(o);await Promise.all((i??[]).map((g,P)=>g==null?void 0:g.handleLLMEnd(u[P])));const l=(i==null?void 0:i.map(g=>g.runId))||void 0;return Object.defineProperty(o,On,{value:l?{runIds:l}:void 0,configurable:!0}),o}async generate(e,t,r){if(!Array.isArray(e))throw new Error("Argument 'prompts' is expected to be a string[]");let a;Array.isArray(t)?a={stop:t}:t!=null&&t.timeout&&!t.signal?a={...t,signal:AbortSignal.timeout(t.timeout)}:a=t??{};const s={tags:a.tags,metadata:a.metadata,callbacks:a.callbacks??r};if(delete a.tags,delete a.metadata,delete a.callbacks,!this.cache)return this._generateUncached(e,a,s);const{cache:i}=this,o=this.serialize();o.stop=a.stop??o.stop;const u=`${Object.entries(o).sort()}`,l=[],g=await Promise.all(e.map(async(L,J)=>{const x=await i.lookup(L,u);return x||l.push(J),x}));let P={};if(l.length>0){const L=await this._generateUncached(l.map(J=>e[J]),a,s);await Promise.all(L.generations.map(async(J,x)=>{const $=l[x];return g[$]=J,i.update(e[$],u,J)})),P=L.llmOutput??{}}return{generations:g,llmOutput:P}}async call(e,t,r){const{generations:a}=await this.generate([e],t??{},r);return a[0][0].text}async predict(e,t,r){return this.call(e,t,r)}async predictMessages(e,t,r){const a=Tr(e),s=await this.call(a,t,r);return new $a(s)}_identifyingParams(){return{}}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}_modelType(){return"base_llm"}static async deserialize(e){const{_type:t,_model:r,...a}=e;if(r&&r!=="base_llm")throw new Error(`Cannot load LLM with model ${r}`);const s={openai:(await fe(()=>import("./openai.29befb5d.js"),["_app/immutable/chunks/openai.29befb5d.js","_app/immutable/chunks/_commonjs-dynamic-modules.5fcb8f34.js","_app/immutable/chunks/public.79d73255.js","_app/immutable/chunks/NavBar.74969093.js","_app/immutable/chunks/scheduler.2364b0ad.js","_app/immutable/chunks/index.e0615928.js","_app/immutable/chunks/globals.7f7f1b26.js","_app/immutable/assets/NavBar.ffbd0f32.css","_app/immutable/chunks/azure.11841502.js","_app/immutable/chunks/chunk.76ad1e6a.js","_app/immutable/chunks/prompt-layer.00daf386.js"])).OpenAI}[t];if(s===void 0)throw new Error(`Cannot load  LLM with type ${t}`);return new s(a)}}class iu extends su{async _generate(e,t,r){return{generations:await Promise.all(e.map((s,i)=>this._call(s,{...t,promptIndex:i},r).then(o=>[{text:o}])))}}}class Ur extends iu{get lc_secrets(){return{apiKey:"HUGGINGFACEHUB_API_KEY"}}constructor(e){if(super(e??{}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"gpt2"}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topK",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.model=(e==null?void 0:e.model)??this.model,this.temperature=(e==null?void 0:e.temperature)??this.temperature,this.maxTokens=(e==null?void 0:e.maxTokens)??this.maxTokens,this.topP=(e==null?void 0:e.topP)??this.topP,this.topK=(e==null?void 0:e.topK)??this.topK,this.frequencyPenalty=(e==null?void 0:e.frequencyPenalty)??this.frequencyPenalty,this.apiKey=(e==null?void 0:e.apiKey)??Pe("HUGGINGFACEHUB_API_KEY"),!this.apiKey)throw new Error("Please set an API key for HuggingFace Hub in the environment variable HUGGINGFACEHUB_API_KEY or in the apiKey field of the HuggingFaceInference constructor.")}_llmType(){return"hf"}async _call(e,t){const{HfInference:r}=await Ur.imports(),a=new r(this.apiKey);return(await this.caller.callWithOptions({signal:t.signal},a.textGeneration.bind(a),{model:this.model,parameters:{return_full_text:!1,temperature:this.temperature,max_new_tokens:this.maxTokens,top_p:this.topP,top_k:this.topK,repetition_penalty:this.frequencyPenalty},inputs:e})).generated_text}static async imports(){try{const{HfInference:e}=await fe(()=>import("./NavBar.74969093.js").then(t=>t.k),["_app/immutable/chunks/NavBar.74969093.js","_app/immutable/chunks/public.79d73255.js","_app/immutable/chunks/scheduler.2364b0ad.js","_app/immutable/chunks/index.e0615928.js","_app/immutable/chunks/globals.7f7f1b26.js","_app/immutable/assets/NavBar.ffbd0f32.css"]);return{HfInference:e}}catch{throw new Error("Please install huggingface as a dependency with, e.g. `yarn add @huggingface/inference`")}}}async function du(n,e,t,r,a){const s=a;console.log("model",t);const i=new Ur({apiKey:n,model:"tiiuae/falcon-7b-instruct",maxTokens:5e3}),o=Ua(Ka,Fa);let u=new Za({apiKey:za});const g=await new Ba(u,{client:o,tableName:"documents"}).similaritySearch(s);console.log(g.length),console.log(g);try{let{data:J,error:x}=await o.from("documents").select("content");x&&console.error("Error fetching data:",x.message),J.length===0&&console.log("No data found in the table.");const $=J[0].content;console.log("contentValue",$)}catch(J){console.error("Error fetching data:",J.message)}const P=zs(i);console.log("relevantDocs",g);const L=await P.call({input_documents:g,question:s});return console.log("result",L),console.log(L.text),L.text}export{su as B,Le as C,iu as L,Te as P,lu as a,er as b,du as c,$e as d,Es as e,As as f,Dn as g,An as h,zs as l,Nn as r,qe as v,ai as z};
