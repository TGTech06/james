import{a as Sn,b as at,_ as nt,p as Ba,g as ke,c as Ua,R as An,B as In,H as Cn,d as Dn,e as Va,f as Fa,O as Ka,S as za}from"./NavBar.34dbe8c9.js";import{g as Mn,_ as fe,e as qa,f as Jr,c as Ha,P as Ya,a as Ga,d as Wa}from"./public.42564a77.js";import{g as Ja,T as Qa,c as Gt}from"./_commonjs-dynamic-modules.6fed1697.js";import"./index.e0615928.js";const Wt={},Xa=new Sn({});async function ei(n,e){return n in Wt||(Wt[n]=Xa.fetch(`https://tiktoken.pages.dev/js/${n}.json`,{signal:e==null?void 0:e.signal}).then(t=>t.json()).catch(t=>{throw delete Wt[n],t})),new Qa(await Wt[n],e==null?void 0:e.extendedSpecialTokens)}async function Nn(n,e){return ei(Ja(n),e)}let Jt;const ti=new Uint8Array(16);function ri(){if(!Jt&&(Jt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Jt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Jt(ti)}const se=[];for(let n=0;n<256;++n)se.push((n+256).toString(16).slice(1));function ni(n,e=0){return(se[n[e+0]]+se[n[e+1]]+se[n[e+2]]+se[n[e+3]]+"-"+se[n[e+4]]+se[n[e+5]]+"-"+se[n[e+6]]+se[n[e+7]]+"-"+se[n[e+8]]+se[n[e+9]]+"-"+se[n[e+10]]+se[n[e+11]]+se[n[e+12]]+se[n[e+13]]+se[n[e+14]]+se[n[e+15]]).toLowerCase()}const ai=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Qr={randomUUID:ai};function He(n,e,t){if(Qr.randomUUID&&!e&&!n)return Qr.randomUUID();n=n||{};const r=n.random||(n.rng||ri)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){t=t||0;for(let a=0;a<16;++a)e[t+a]=r[a];return e}return ni(r)}class ii{}class Kt extends ii{get lc_namespace(){return["langchain","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}constructor(e){var t;super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:typeof process<"u"?((t=process.env)==null?void 0:t.LANGCHAIN_CALLBACKS_BACKGROUND)!=="true":!0}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent)}copy(){return new this.constructor(this)}toJSON(){return at.prototype.toJSON.call(this)}toJSONNotImplemented(){return at.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class t extends Kt{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:He()}),Object.assign(this,e)}}return new t}}var Sr={exports:{}};Sr.exports;(function(n){const t=(i=0)=>s=>`\x1B[${38+i};5;${s}m`,r=(i=0)=>(s,o,u)=>`\x1B[${38+i};2;${s};${o};${u}m`;function a(){const i=new Map,s={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};s.color.gray=s.color.blackBright,s.bgColor.bgGray=s.bgColor.bgBlackBright,s.color.grey=s.color.blackBright,s.bgColor.bgGrey=s.bgColor.bgBlackBright;for(const[o,u]of Object.entries(s)){for(const[l,g]of Object.entries(u))s[l]={open:`\x1B[${g[0]}m`,close:`\x1B[${g[1]}m`},u[l]=s[l],i.set(g[0],g[1]);Object.defineProperty(s,o,{value:u,enumerable:!1})}return Object.defineProperty(s,"codes",{value:i,enumerable:!1}),s.color.close="\x1B[39m",s.bgColor.close="\x1B[49m",s.color.ansi256=t(),s.color.ansi16m=r(),s.bgColor.ansi256=t(10),s.bgColor.ansi16m=r(10),Object.defineProperties(s,{rgbToAnsi256:{value:(o,u,l)=>o===u&&u===l?o<8?16:o>248?231:Math.round((o-8)/247*24)+232:16+36*Math.round(o/255*5)+6*Math.round(u/255*5)+Math.round(l/255*5),enumerable:!1},hexToRgb:{value:o=>{const u=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(o.toString(16));if(!u)return[0,0,0];let{colorString:l}=u.groups;l.length===3&&(l=l.split("").map(O=>O+O).join(""));const g=Number.parseInt(l,16);return[g>>16&255,g>>8&255,g&255]},enumerable:!1},hexToAnsi256:{value:o=>s.rgbToAnsi256(...s.hexToRgb(o)),enumerable:!1}}),s}Object.defineProperty(n,"exports",{enumerable:!0,get:a})})(Sr);var si=Sr.exports;const Ln=Mn(si);class Ar extends Kt{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}_addChildRun(e,t){e.child_runs.push(t)}_startTrace(e){if(e.parent_run_id!==void 0){const t=this.runMap.get(e.parent_run_id);t&&this._addChildRun(t,e)}this.runMap.set(e.id,e)}async _endTrace(e){const t=e.parent_run_id!==void 0&&this.runMap.get(e.parent_run_id);t?t.child_execution_order=Math.max(t.child_execution_order,e.child_execution_order):await this.persistRun(e),this.runMap.delete(e.id)}_getExecutionOrder(e){const t=e!==void 0&&this.runMap.get(e);return t?t.child_execution_order+1:1}async handleLLMStart(e,t,r,a,i,s,o){var L;const u=this._getExecutionOrder(a),l=Date.now(),g=o?{...i,metadata:o}:i,O={id:r,name:e.id[e.id.length-1],parent_run_id:a,start_time:l,serialized:e,events:[{name:"start",time:l}],inputs:{prompts:t},execution_order:u,child_runs:[],child_execution_order:u,run_type:"llm",extra:g??{},tags:s||[]};this._startTrace(O),await((L=this.onLLMStart)==null?void 0:L.call(this,O))}async handleChatModelStart(e,t,r,a,i,s,o){var L;const u=this._getExecutionOrder(a),l=Date.now(),g=o?{...i,metadata:o}:i,O={id:r,name:e.id[e.id.length-1],parent_run_id:a,start_time:l,serialized:e,events:[{name:"start",time:l}],inputs:{messages:t},execution_order:u,child_runs:[],child_execution_order:u,run_type:"llm",extra:g??{},tags:s||[]};this._startTrace(O),await((L=this.onLLMStart)==null?void 0:L.call(this,O))}async handleLLMEnd(e,t){var a;const r=this.runMap.get(t);if(!r||(r==null?void 0:r.run_type)!=="llm")throw new Error("No LLM run to end.");r.end_time=Date.now(),r.outputs=e,r.events.push({name:"end",time:r.end_time}),await((a=this.onLLMEnd)==null?void 0:a.call(this,r)),await this._endTrace(r)}async handleLLMError(e,t){var a;const r=this.runMap.get(t);if(!r||(r==null?void 0:r.run_type)!=="llm")throw new Error("No LLM run to end.");r.end_time=Date.now(),r.error=e.message,r.events.push({name:"error",time:r.end_time}),await((a=this.onLLMError)==null?void 0:a.call(this,r)),await this._endTrace(r)}async handleChainStart(e,t,r,a,i,s){var g;const o=this._getExecutionOrder(a),u=Date.now(),l={id:r,name:e.id[e.id.length-1],parent_run_id:a,start_time:u,serialized:e,events:[{name:"start",time:u}],inputs:t,execution_order:o,child_execution_order:o,run_type:"chain",child_runs:[],extra:s?{metadata:s}:{},tags:i||[]};this._startTrace(l),await((g=this.onChainStart)==null?void 0:g.call(this,l))}async handleChainEnd(e,t){var a;const r=this.runMap.get(t);if(!r||(r==null?void 0:r.run_type)!=="chain")throw new Error("No chain run to end.");r.end_time=Date.now(),r.outputs=e,r.events.push({name:"end",time:r.end_time}),await((a=this.onChainEnd)==null?void 0:a.call(this,r)),await this._endTrace(r)}async handleChainError(e,t){var a;const r=this.runMap.get(t);if(!r||(r==null?void 0:r.run_type)!=="chain")throw new Error("No chain run to end.");r.end_time=Date.now(),r.error=e.message,r.events.push({name:"error",time:r.end_time}),await((a=this.onChainError)==null?void 0:a.call(this,r)),await this._endTrace(r)}async handleToolStart(e,t,r,a,i,s){var g;const o=this._getExecutionOrder(a),u=Date.now(),l={id:r,name:e.id[e.id.length-1],parent_run_id:a,start_time:u,serialized:e,events:[{name:"start",time:u}],inputs:{input:t},execution_order:o,child_execution_order:o,run_type:"tool",child_runs:[],extra:s?{metadata:s}:{},tags:i||[]};this._startTrace(l),await((g=this.onToolStart)==null?void 0:g.call(this,l))}async handleToolEnd(e,t){var a;const r=this.runMap.get(t);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");r.end_time=Date.now(),r.outputs={output:e},r.events.push({name:"end",time:r.end_time}),await((a=this.onToolEnd)==null?void 0:a.call(this,r)),await this._endTrace(r)}async handleToolError(e,t){var a;const r=this.runMap.get(t);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");r.end_time=Date.now(),r.error=e.message,r.events.push({name:"error",time:r.end_time}),await((a=this.onToolError)==null?void 0:a.call(this,r)),await this._endTrace(r)}async handleAgentAction(e,t){var i;const r=this.runMap.get(t);if(!r||(r==null?void 0:r.run_type)!=="chain")return;const a=r;a.actions=a.actions||[],a.actions.push(e),a.events.push({name:"agent_action",time:Date.now(),kwargs:{action:e}}),await((i=this.onAgentAction)==null?void 0:i.call(this,r))}async handleAgentEnd(e,t){var a;const r=this.runMap.get(t);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"agent_end",time:Date.now(),kwargs:{action:e}}),await((a=this.onAgentEnd)==null?void 0:a.call(this,r)))}async handleText(e,t){var a;const r=this.runMap.get(t);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"text",time:Date.now(),kwargs:{text:e}}),await((a=this.onText)==null?void 0:a.call(this,r)))}async handleLLMNewToken(e,t,r){var i;const a=this.runMap.get(r);!a||(a==null?void 0:a.run_type)!=="llm"||(a.events.push({name:"new_token",time:Date.now(),kwargs:{token:e,idx:t}}),await((i=this.onLLMNewToken)==null?void 0:i.call(this,a)))}}function be(n,e){return`${n.open}${e}${n.close}`}function Le(n,e){try{return JSON.stringify(n,null,2)}catch{return e}}function et(n){if(!n.end_time)return"";const e=n.end_time-n.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}const{color:Pe}=Ln;class Xr extends Ar{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){const t=[];let r=e;for(;r.parent_run_id;){const a=this.runMap.get(r.parent_run_id);if(a)t.push(a),r=a;else break}return t}getBreadcrumbs(e){const r=[...this.getParents(e).reverse(),e].map((a,i,s)=>{const o=`${a.execution_order}:${a.run_type}:${a.name}`;return i===s.length-1?be(Ln.bold,o):o}).join(" > ");return be(Pe.grey,r)}onChainStart(e){const t=this.getBreadcrumbs(e);console.log(`${be(Pe.green,"[chain/start]")} [${t}] Entering Chain run with input: ${Le(e.inputs,"[inputs]")}`)}onChainEnd(e){const t=this.getBreadcrumbs(e);console.log(`${be(Pe.cyan,"[chain/end]")} [${t}] [${et(e)}] Exiting Chain run with output: ${Le(e.outputs,"[outputs]")}`)}onChainError(e){const t=this.getBreadcrumbs(e);console.log(`${be(Pe.red,"[chain/error]")} [${t}] [${et(e)}] Chain run errored with error: ${Le(e.error,"[error]")}`)}onLLMStart(e){const t=this.getBreadcrumbs(e),r="prompts"in e.inputs?{prompts:e.inputs.prompts.map(a=>a.trim())}:e.inputs;console.log(`${be(Pe.green,"[llm/start]")} [${t}] Entering LLM run with input: ${Le(r,"[inputs]")}`)}onLLMEnd(e){const t=this.getBreadcrumbs(e);console.log(`${be(Pe.cyan,"[llm/end]")} [${t}] [${et(e)}] Exiting LLM run with output: ${Le(e.outputs,"[response]")}`)}onLLMError(e){const t=this.getBreadcrumbs(e);console.log(`${be(Pe.red,"[llm/error]")} [${t}] [${et(e)}] LLM run errored with error: ${Le(e.error,"[error]")}`)}onToolStart(e){var r;const t=this.getBreadcrumbs(e);console.log(`${be(Pe.green,"[tool/start]")} [${t}] Entering Tool run with input: "${(r=e.inputs.input)==null?void 0:r.trim()}"`)}onToolEnd(e){var r,a;const t=this.getBreadcrumbs(e);console.log(`${be(Pe.cyan,"[tool/end]")} [${t}] [${et(e)}] Exiting Tool run with output: "${(a=(r=e.outputs)==null?void 0:r.output)==null?void 0:a.trim()}"`)}onToolError(e){const t=this.getBreadcrumbs(e);console.log(`${be(Pe.red,"[tool/error]")} [${t}] [${et(e)}] Tool run errored with error: ${Le(e.error,"[error]")}`)}onAgentAction(e){const t=e,r=this.getBreadcrumbs(e);console.log(`${be(Pe.blue,"[agent/action]")} [${r}] Agent selected action: ${Le(t.actions[t.actions.length-1],"[action]")}`)}}const oi=[400,401,403,404,405,406,407,408,409];class ui{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6;const t="default"in nt?nt.default:nt;this.queue=new t({concurrency:this.maxConcurrency})}call(e,...t){return this.queue.add(()=>Ba(()=>e(...t).catch(r=>{throw r instanceof Error?r:new Error(r)}),{onFailedAttempt(r){var i;if(r.message.startsWith("Cancel")||r.message.startsWith("TimeoutError")||r.message.startsWith("AbortError")||(r==null?void 0:r.code)==="ECONNABORTED")throw r;const a=(i=r==null?void 0:r.response)==null?void 0:i.status;if(a&&oi.includes(+a))throw r},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,t,...r){return e.signal?Promise.race([this.call(t,...r),new Promise((a,i)=>{var s;(s=e.signal)==null||s.addEventListener("abort",()=>{i(new Error("AbortError"))})})]):this.call(t,...r)}fetch(...e){return this.call(()=>fetch(...e).then(t=>t.ok?t:Promise.reject(t)))}}const ci=()=>typeof window<"u"&&typeof window.document<"u",li=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",di=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),Rn=()=>typeof Deno<"u",hi=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!Rn(),pi=()=>{let n;return ci()?n="browser":hi()?n="node":li()?n="webworker":di()?n="jsdom":Rn()?n="deno":n="other",n};let xr;async function fi(){return xr===void 0&&(xr={library:"langsmith",runtime:pi()}),xr}function en(n){var e;try{return typeof process<"u"?(e=process.env)==null?void 0:e[n]:void 0}catch{return}}const mi=n=>{const t=n.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return t==="localhost"||t==="127.0.0.1"||t==="::1"},Qt=async(n,e)=>{const t=await n.text();if(!n.ok)throw new Error(`Failed to ${e}: ${n.status} ${n.statusText} ${t}`)};class Ir{constructor(e={}){Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const t=Ir.getDefaultClientConfig();this.apiUrl=e.apiUrl??t.apiUrl,this.apiKey=e.apiKey??t.apiKey,this.validateApiKeyIfHosted(),this.timeout_ms=e.timeout_ms??4e3,this.caller=new ui(e.callerOptions??{})}static getDefaultClientConfig(){return{apiUrl:en("LANGCHAIN_ENDPOINT")??"http://localhost:1984",apiKey:en("LANGCHAIN_API_KEY")}}validateApiKeyIfHosted(){if(!mi(this.apiUrl)&&!this.apiKey)throw new Error("API key must be provided when using hosted LangSmith API")}get headers(){const e={};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}async _get(e,t){const r=(t==null?void 0:t.toString())??"",a=`${this.apiUrl}${e}?${r}`,i=await this.caller.call(fetch,a,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!i.ok)throw new Error(`Failed to fetch ${e}: ${i.status} ${i.statusText}`);return i.json()}async createRun(e){const t={...this.headers,"Content-Type":"application/json"},r=e.extra??{},a=await fi(),i=e.project_name;delete e.project_name;const s={session_name:i,...e,extra:{...e.extra,runtime:{...a,...r.runtime}}},o=await this.caller.call(fetch,`${this.apiUrl}/runs`,{method:"POST",headers:t,body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms)});await Qt(o,"create run")}async updateRun(e,t){const r={...this.headers,"Content-Type":"application/json"},a=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:r,body:JSON.stringify(t),signal:AbortSignal.timeout(this.timeout_ms)});await Qt(a,"update run")}async readRun(e,{loadChildRuns:t}={loadChildRuns:!1}){let r=await this._get(`/runs/${e}`);return t&&r.child_run_ids&&(r=await this._loadChildRuns(r)),r}async _loadChildRuns(e){const t=await this.listRuns({id:e.child_run_ids}),r={},a={};t.sort((i,s)=>i.execution_order-s.execution_order);for(const i of t){if(i.parent_run_id===null||i.parent_run_id===void 0)throw new Error(`Child run ${i.id} has no parent`);i.parent_run_id in r||(r[i.parent_run_id]=[]),r[i.parent_run_id].push(i),a[i.id]=i}e.child_runs=r[e.id]||[];for(const i in r)i!==e.id&&(a[i].child_runs=r[i]);return e}async listRuns({projectId:e,projectName:t,executionOrder:r,runType:a,error:i,id:s,limit:o,offset:u}){const l=new URLSearchParams;let g=e;if(t){if(e)throw new Error("Only one of projectId or projectName may be given");g=(await this.readProject({projectName:t})).id}if(g&&l.append("session",g),r&&l.append("execution_order",r.toString()),a&&l.append("run_type",a),i!==void 0&&l.append("error",i.toString()),s!==void 0)for(const O of s)l.append("id",O);return o!==void 0&&l.append("limit",o.toString()),u!==void 0&&l.append("offset",u.toString()),this._get("/runs",l)}async deleteRun(e){const t=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await Qt(t,"delete run")}async createProject({projectName:e,projectExtra:t,upsert:r}){const a=r?"?upsert=true":"",i=`${this.apiUrl}/sessions${a}`,s={name:e};t!==void 0&&(s.extra=t);const o=await this.caller.call(fetch,i,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms)}),u=await o.json();if(!o.ok)throw new Error(`Failed to create session ${e}: ${o.status} ${o.statusText}`);return u}async readProject({projectId:e,projectName:t}){let r="/sessions";const a=new URLSearchParams;if(e!==void 0&&t!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)r+=`/${e}`;else if(t!==void 0)a.append("name",t);else throw new Error("Must provide projectName or projectId");const i=await this._get(r,a);let s;if(Array.isArray(i)){if(i.length===0)throw new Error(`Project[id=${e}, name=${t}] not found`);s=i[0]}else s=i;return s}async listProjects(){return this._get("/sessions")}async deleteProject({projectId:e,projectName:t}){let r;if(e===void 0&&t===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&t!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?r=(await this.readProject({projectName:t})).id:r=e;const a=await this.caller.call(fetch,`${this.apiUrl}/sessions/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await Qt(a,`delete session ${r} (${t})`)}async uploadCsv({csvFile:e,fileName:t,inputKeys:r,outputKeys:a,description:i,dataType:s,name:o}){const u=`${this.apiUrl}/datasets/upload`,l=new FormData;l.append("file",e,t),r.forEach(L=>{l.append("input_keys",L)}),a.forEach(L=>{l.append("output_keys",L)}),i&&l.append("description",i),s&&l.append("data_type",s),o&&l.append("name",o);const g=await this.caller.call(fetch,u,{method:"POST",headers:this.headers,body:l,signal:AbortSignal.timeout(this.timeout_ms)});if(!g.ok){const L=await g.json();throw L.detail&&L.detail.includes("already exists")?new Error(`Dataset ${t} already exists`):new Error(`Failed to upload CSV: ${g.status} ${g.statusText}`)}return await g.json()}async createDataset(e,{description:t,dataType:r}={}){const a={name:e,description:t};r&&(a.data_type=r);const i=await this.caller.call(fetch,`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms)});if(!i.ok){const o=await i.json();throw o.detail&&o.detail.includes("already exists")?new Error(`Dataset ${e} already exists`):new Error(`Failed to create dataset ${i.status} ${i.statusText}`)}return await i.json()}async readDataset({datasetId:e,datasetName:t}){let r="/datasets";const a=new URLSearchParams({limit:"1"});if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)r+=`/${e}`;else if(t!==void 0)a.append("name",t);else throw new Error("Must provide datasetName or datasetId");const i=await this._get(r,a);let s;if(Array.isArray(i)){if(i.length===0)throw new Error(`Dataset[id=${e}, name=${t}] not found`);s=i[0]}else s=i;return s}async listDatasets({limit:e=100,offset:t=0}={}){const r="/datasets",a=new URLSearchParams({limit:e.toString(),offset:t.toString()}),i=await this._get(r,a);if(!Array.isArray(i))throw new Error(`Expected ${r} to return an array, but got ${i}`);return i}async deleteDataset({datasetId:e,datasetName:t}){let r="/datasets",a=e;if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(t!==void 0&&(a=(await this.readDataset({datasetName:t})).id),a!==void 0)r+=`/${a}`;else throw new Error("Must provide datasetName or datasetId");const i=await this.caller.call(fetch,this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!i.ok)throw new Error(`Failed to delete ${r}: ${i.status} ${i.statusText}`);await i.json()}async createExample(e,t,{datasetId:r,datasetName:a,createdAt:i}){let s=r;if(s===void 0&&a===void 0)throw new Error("Must provide either datasetName or datasetId");if(s!==void 0&&a!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");s===void 0&&(s=(await this.readDataset({datasetName:a})).id);const u={dataset_id:s,inputs:e,outputs:t,created_at:(i||new Date).toISOString()},l=await this.caller.call(fetch,`${this.apiUrl}/examples`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms)});if(!l.ok)throw new Error(`Failed to create example: ${l.status} ${l.statusText}`);return await l.json()}async readExample(e){const t=`/examples/${e}`;return await this._get(t)}async listExamples({datasetId:e,datasetName:t,limit:r,offset:a}={}){let i;if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)i=e;else if(t!==void 0)i=(await this.readDataset({datasetName:t})).id;else throw new Error("Must provide a datasetName or datasetId");const s=await this._get("/examples",new URLSearchParams({dataset:i,limit:(r==null?void 0:r.toString())??"100",offset:(a==null?void 0:a.toString())??"0"}));if(!Array.isArray(s))throw new Error(`Expected /examples to return an array, but got ${s}`);return s}async deleteExample(e){const t=`/examples/${e}`,r=await this.caller.call(fetch,this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!r.ok)throw new Error(`Failed to delete ${t}: ${r.status} ${r.statusText}`);await r.json()}async updateExample(e,t){const r=await this.caller.call(fetch,`${this.apiUrl}/examples/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(t),signal:AbortSignal.timeout(this.timeout_ms)});if(!r.ok)throw new Error(`Failed to update example ${e}: ${r.status} ${r.statusText}`);return await r.json()}async evaluateRun(e,t,{sourceInfo:r,loadChildRuns:a}={loadChildRuns:!1}){let i;if(typeof e=="string")i=await this.readRun(e,{loadChildRuns:a});else if(typeof e=="object"&&"id"in e)i=e;else throw new Error(`Invalid run type: ${typeof e}`);let s;i.reference_example_id!==null&&i.reference_example_id!==void 0&&(s=await this.readExample(i.reference_example_id));const o=await t.evaluateRun(i,s);let u=r??{};return o.evaluatorInfo&&(u={...u,...o.evaluatorInfo}),await this.createFeedback(i.id,o.key,{score:o.score,value:o.value,comment:o.comment,correction:o.correction,sourceInfo:u,feedbackSourceType:"MODEL"})}async createFeedback(e,t,{score:r,value:a,correction:i,comment:s,sourceInfo:o,feedbackSourceType:u="API"}){let l;if(u==="API")l={type:"api",metadata:o??{}};else if(u==="MODEL")l={type:"model",metadata:o??{}};else throw new Error(`Unknown feedback source type ${u}`);const g={id:He(),run_id:e,key:t,score:r,value:a,correction:i,comment:s,feedback_source:l},O=await this.caller.call(fetch,`${this.apiUrl}/feedback`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(g),signal:AbortSignal.timeout(this.timeout_ms)});if(!O.ok)throw new Error(`Failed to create feedback for run ${e}: ${O.status} ${O.statusText}`);return await O.json()}async readFeedback(e){const t=`/feedback/${e}`;return await this._get(t)}async deleteFeedback(e){const t=`/feedback/${e}`,r=await this.caller.call(fetch,this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!r.ok)throw new Error(`Failed to delete ${t}: ${r.status} ${r.statusText}`);await r.json()}async listFeedback({runIds:e,limit:t,offset:r}={}){const a=new URLSearchParams;return e&&a.append("run",e.join(",")),t!==void 0&&a.append("limit",t.toString()),r!==void 0&&a.append("offset",r.toString()),await this._get("/feedback",a)}}class gi extends Ar{constructor(e={}){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{exampleId:t,projectName:r,client:a}=e;this.projectName=r??ke("LANGCHAIN_PROJECT")??ke("LANGCHAIN_SESSION"),this.exampleId=t,this.client=a??new Ir({})}async _convertToCreate(e,t=void 0){return{...e,extra:{...e.extra,runtime:await Ua()},child_runs:void 0,session_name:this.projectName,reference_example_id:e.parent_run_id?void 0:t}}async persistRun(e){}async _persistRunSingle(e){const t=await this._convertToCreate(e,this.exampleId);await this.client.createRun(t)}async _updateRunSingle(e){const t={end_time:e.end_time,error:e.error,outputs:e.outputs,events:e.events};await this.client.updateRun(e.id,t)}async onLLMStart(e){await this._persistRunSingle(e)}async onLLMEnd(e){await this._updateRunSingle(e)}async onLLMError(e){await this._updateRunSingle(e)}async onChainStart(e){await this._persistRunSingle(e)}async onChainEnd(e){await this._updateRunSingle(e)}async onChainError(e){await this._updateRunSingle(e)}async onToolStart(e){await this._persistRunSingle(e)}async onToolEnd(e){await this._updateRunSingle(e)}async onToolError(e){await this._updateRunSingle(e)}}function Cr(n,e="Human",t="AI"){const r=[];for(const a of n){let i;if(a._getType()==="human")i=e;else if(a._getType()==="ai")i=t;else if(a._getType()==="system")i="System";else if(a._getType()==="function")i="Function";else if(a._getType()==="generic")i=a.role;else throw new Error(`Got unsupported message type: ${a}`);const s=a.name?`${a.name}, `:"";r.push(`${i}: ${s}${a.content}`)}return r.join(`
`)}class yi extends Ar{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"endpoint",{enumerable:!0,configurable:!0,writable:!0,value:ke("LANGCHAIN_ENDPOINT")||"http://localhost:1984"}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:{"Content-Type":"application/json"}}),Object.defineProperty(this,"session",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const e=ke("LANGCHAIN_API_KEY");e&&(this.headers["x-api-key"]=e)}async newSession(e){const t={start_time:Date.now(),name:e},r=await this.persistSession(t);return this.session=r,r}async loadSession(e){const t=`${this.endpoint}/sessions?name=${e}`;return this._handleSessionResponse(t)}async loadDefaultSession(){const e=`${this.endpoint}/sessions?name=default`;return this._handleSessionResponse(e)}async convertV2RunToRun(e){var i;const t=this.session??await this.loadDefaultSession(),r=e.serialized;let a;if(e.run_type==="llm"){const s=e.inputs.prompts?e.inputs.prompts:e.inputs.messages.map(u=>Cr(u));a={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:r,type:e.run_type,session_id:t.id,prompts:s,response:e.outputs}}else if(e.run_type==="chain"){const s=await Promise.all(e.child_runs.map(u=>this.convertV2RunToRun(u)));a={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:r,type:e.run_type,session_id:t.id,inputs:e.inputs,outputs:e.outputs,child_llm_runs:s.filter(u=>u.type==="llm"),child_chain_runs:s.filter(u=>u.type==="chain"),child_tool_runs:s.filter(u=>u.type==="tool")}}else if(e.run_type==="tool"){const s=await Promise.all(e.child_runs.map(u=>this.convertV2RunToRun(u)));a={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:r,type:e.run_type,session_id:t.id,tool_input:e.inputs.input,output:(i=e.outputs)==null?void 0:i.output,action:JSON.stringify(r),child_llm_runs:s.filter(u=>u.type==="llm"),child_chain_runs:s.filter(u=>u.type==="chain"),child_tool_runs:s.filter(u=>u.type==="tool")}}else throw new Error(`Unknown run type: ${e.run_type}`);return a}async persistRun(e){let t,r;e.run_type!==void 0?r=await this.convertV2RunToRun(e):r=e,r.type==="llm"?t=`${this.endpoint}/llm-runs`:r.type==="chain"?t=`${this.endpoint}/chain-runs`:t=`${this.endpoint}/tool-runs`;const a=await fetch(t,{method:"POST",headers:this.headers,body:JSON.stringify(r)});a.ok||console.error(`Failed to persist run: ${a.status} ${a.statusText}`)}async persistSession(e){const t=`${this.endpoint}/sessions`,r=await fetch(t,{method:"POST",headers:this.headers,body:JSON.stringify(e)});return r.ok?{id:(await r.json()).id,...e}:(console.error(`Failed to persist session: ${r.status} ${r.statusText}, using default session.`),{id:1,...e})}async _handleSessionResponse(e){const t=await fetch(e,{method:"GET",headers:this.headers});let r;if(!t.ok)return console.error(`Failed to load session: ${t.status} ${t.statusText}`),r={id:1,start_time:Date.now()},this.session=r,r;const a=await t.json();return a.length===0?(r={id:1,start_time:Date.now()},this.session=r,r):([r]=a,this.session=r,r)}}async function bi(n){const e=new yi;return n?await e.loadSession(n):await e.loadDefaultSession(),e}async function _i(){return new gi}let Pr;function vi(){const n="default"in nt?nt.default:nt;return new n({autoStart:!0,concurrency:1})}async function me(n,e){e===!0?await n():(typeof Pr>"u"&&(Pr=vi()),Pr.add(n))}function wi(n){return n?Array.isArray(n)||"name"in n?{callbacks:n}:n:{}}class xi{setHandler(e){return this.setHandlers([e])}}class Dr{constructor(e,t,r,a,i,s,o,u){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:u})}async handleText(e){await Promise.all(this.handlers.map(t=>me(async()=>{var r;try{await((r=t.handleText)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(a){console.error(`Error in handler ${t.constructor.name}, handleText: ${a}`)}},t.awaitHandlers)))}}class tn extends Dr{async handleLLMNewToken(e,t={prompt:0,completion:0}){await Promise.all(this.handlers.map(r=>me(async()=>{var a;if(!r.ignoreLLM)try{await((a=r.handleLLMNewToken)==null?void 0:a.call(r,e,t,this.runId,this._parentRunId,this.tags))}catch(i){console.error(`Error in handler ${r.constructor.name}, handleLLMNewToken: ${i}`)}},r.awaitHandlers)))}async handleLLMError(e){await Promise.all(this.handlers.map(t=>me(async()=>{var r;if(!t.ignoreLLM)try{await((r=t.handleLLMError)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(a){console.error(`Error in handler ${t.constructor.name}, handleLLMError: ${a}`)}},t.awaitHandlers)))}async handleLLMEnd(e){await Promise.all(this.handlers.map(t=>me(async()=>{var r;if(!t.ignoreLLM)try{await((r=t.handleLLMEnd)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(a){console.error(`Error in handler ${t.constructor.name}, handleLLMEnd: ${a}`)}},t.awaitHandlers)))}}class Pi extends Dr{getChild(e){const t=new $e(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleChainError(e){await Promise.all(this.handlers.map(t=>me(async()=>{var r;if(!t.ignoreChain)try{await((r=t.handleChainError)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(a){console.error(`Error in handler ${t.constructor.name}, handleChainError: ${a}`)}},t.awaitHandlers)))}async handleChainEnd(e){await Promise.all(this.handlers.map(t=>me(async()=>{var r;if(!t.ignoreChain)try{await((r=t.handleChainEnd)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(a){console.error(`Error in handler ${t.constructor.name}, handleChainEnd: ${a}`)}},t.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(t=>me(async()=>{var r;if(!t.ignoreAgent)try{await((r=t.handleAgentAction)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(a){console.error(`Error in handler ${t.constructor.name}, handleAgentAction: ${a}`)}},t.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(t=>me(async()=>{var r;if(!t.ignoreAgent)try{await((r=t.handleAgentEnd)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(a){console.error(`Error in handler ${t.constructor.name}, handleAgentEnd: ${a}`)}},t.awaitHandlers)))}}class Oi extends Dr{getChild(e){const t=new $e(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleToolError(e){await Promise.all(this.handlers.map(t=>me(async()=>{var r;if(!t.ignoreAgent)try{await((r=t.handleToolError)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(a){console.error(`Error in handler ${t.constructor.name}, handleToolError: ${a}`)}},t.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(t=>me(async()=>{var r;if(!t.ignoreAgent)try{await((r=t.handleToolEnd)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(a){console.error(`Error in handler ${t.constructor.name}, handleToolEnd: ${a}`)}},t.awaitHandlers)))}}class $e extends xi{constructor(e){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=[],this.inheritableHandlers=[],this._parentRunId=e}async handleLLMStart(e,t,r=void 0,a=void 0,i=void 0){return Promise.all(t.map(async s=>{const o=He();return await Promise.all(this.handlers.map(u=>me(async()=>{var l;if(!u.ignoreLLM)try{await((l=u.handleLLMStart)==null?void 0:l.call(u,e,[s],o,this._parentRunId,i,this.tags,this.metadata))}catch(g){console.error(`Error in handler ${u.constructor.name}, handleLLMStart: ${g}`)}},u.awaitHandlers))),new tn(o,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,t,r=void 0,a=void 0,i=void 0){return Promise.all(t.map(async s=>{const o=He();return await Promise.all(this.handlers.map(u=>me(async()=>{var l,g;if(!u.ignoreLLM)try{if(u.handleChatModelStart)await((l=u.handleChatModelStart)==null?void 0:l.call(u,e,[s],o,this._parentRunId,i,this.tags,this.metadata));else if(u.handleLLMStart){const O=Cr(s);await((g=u.handleLLMStart)==null?void 0:g.call(u,e,[O],o,this._parentRunId,i,this.tags,this.metadata))}}catch(O){console.error(`Error in handler ${u.constructor.name}, handleLLMStart: ${O}`)}},u.awaitHandlers))),new tn(o,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,t,r=He()){return await Promise.all(this.handlers.map(a=>me(async()=>{var i;if(!a.ignoreChain)try{await((i=a.handleChainStart)==null?void 0:i.call(a,e,t,r,this._parentRunId,this.tags,this.metadata))}catch(s){console.error(`Error in handler ${a.constructor.name}, handleChainStart: ${s}`)}},a.awaitHandlers))),new Pi(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,t,r=He()){return await Promise.all(this.handlers.map(a=>me(async()=>{var i;if(!a.ignoreAgent)try{await((i=a.handleToolStart)==null?void 0:i.call(a,e,t,r,this._parentRunId,this.tags,this.metadata))}catch(s){console.error(`Error in handler ${a.constructor.name}, handleToolStart: ${s}`)}},a.awaitHandlers))),new Oi(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}addHandler(e,t=!0){this.handlers.push(e),t&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(t=>t!==e),this.inheritableHandlers=this.inheritableHandlers.filter(t=>t!==e)}setHandlers(e,t=!0){this.handlers=[],this.inheritableHandlers=[];for(const r of e)this.addHandler(r,t)}addTags(e,t=!0){this.removeTags(e),this.tags.push(...e),t&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(t=>!e.includes(t)),this.inheritableTags=this.inheritableTags.filter(t=>!e.includes(t))}addMetadata(e,t=!0){this.metadata={...this.metadata,...e},t&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(const t of Object.keys(e))delete this.metadata[t],delete this.inheritableMetadata[t]}copy(e=[],t=!0){const r=new $e(this._parentRunId);for(const a of this.handlers){const i=this.inheritableHandlers.includes(a);r.addHandler(a,i)}for(const a of this.tags){const i=this.inheritableTags.includes(a);r.addTags([a],i)}for(const a of Object.keys(this.metadata)){const i=Object.keys(this.inheritableMetadata).includes(a);r.addMetadata({[a]:this.metadata[a]},i)}for(const a of e)r.handlers.filter(i=>i.name==="console_callback_handler").some(i=>i.name===a.name)||r.addHandler(a,t);return r}static fromHandlers(e){class t extends Kt{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:He()}),Object.assign(this,e)}}const r=new this;return r.addHandler(new t),r}static async configure(e,t,r,a,i,s,o){let u;(e||t)&&(Array.isArray(e)||!e?(u=new $e,u.setHandlers((e==null?void 0:e.map(rn))??[],!0)):u=e,u=u.copy(Array.isArray(t)?t.map(rn):t==null?void 0:t.handlers,!1));const l=ke("LANGCHAIN_VERBOSE")||(o==null?void 0:o.verbose),g=ke("LANGCHAIN_TRACING_V2")??!1,O=g||(ke("LANGCHAIN_TRACING")??!1);if(l||O){if(u||(u=new $e),l&&!u.handlers.some(L=>L.name===Xr.prototype.name)){const L=new Xr;u.addHandler(L,!0)}if(O&&!u.handlers.some(L=>L.name==="langchain_tracer"))if(g)u.addHandler(await _i(),!0);else{const L=ke("LANGCHAIN_PROJECT")&&ke("LANGCHAIN_SESSION");u.addHandler(await bi(L),!0)}}return(r||a)&&u&&(u.addTags(r??[]),u.addTags(a??[],!1)),(i||s)&&u&&(u.addMetadata(i??{}),u.addMetadata(s??{},!1)),u}}function rn(n){return"name"in n?n:Kt.fromMethods(n)}const $n=n=>n.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":n.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":n.startsWith("gpt-4-32k")?"gpt-4-32k":n.startsWith("gpt-4-")?"gpt-4":n,Ei=n=>{switch($n(n)){case"gpt-3.5-turbo-16k":return 16384;case"gpt-3.5-turbo":return 4096;case"gpt-4-32k":return 32768;case"gpt-4":return 8192;case"text-davinci-003":return 4097;case"text-curie-001":return 2048;case"text-babbage-001":return 2048;case"text-ada-001":return 2048;case"code-davinci-002":return 8e3;case"code-cushman-001":return 2048;default:return 4097}},Uu=async({prompt:n,modelName:e})=>{let t;try{t=(await Nn(e)).encode(n).length}catch{console.warn("Failed to calculate number of tokens, falling back to approximate count"),t=Math.ceil(n.length/4)}return Ei(e)-t},Ti=()=>!1;class Zn extends at{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??Ti(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}}class Bn extends Zn{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:e,callbackManager:t,...r}){super({callbacks:e??t,...r}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.caller=new Sn(r??{})}async getNumTokens(e){let t=Math.ceil(e.length/4);if(!this._encoding)try{this._encoding=await Nn("modelName"in this?$n(this.modelName):"gpt2")}catch(r){console.warn("Failed to calculate number of tokens, falling back to approximate count",r)}return this._encoding&&(t=this._encoding.encode(e).length),t}_identifyingParams(){return{}}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){const{_type:t,_model:r,...a}=e;if(r&&r!=="base_chat_model")throw new Error(`Cannot load LLM with model ${r}`);const i={openai:(await fe(()=>import("./openai.8ca7b1ee.js"),["_app/immutable/chunks/openai.8ca7b1ee.js","_app/immutable/chunks/NavBar.34dbe8c9.js","_app/immutable/chunks/public.42564a77.js","_app/immutable/chunks/scheduler.2364b0ad.js","_app/immutable/chunks/index.e0615928.js","_app/immutable/chunks/globals.7f7f1b26.js","_app/immutable/assets/NavBar.ffbd0f32.css","_app/immutable/chunks/prompt-layer.00daf386.js"])).ChatOpenAI}[t];if(i===void 0)throw new Error(`Cannot load  LLM with type ${t}`);return new i(a)}}class zt extends Zn{get lc_namespace(){return["langchain","chains",this._chainType()]}constructor(e,t,r){if(arguments.length===1&&typeof e=="object"&&!("saveContext"in e)){const{memory:a,callbackManager:i,...s}=e;super({...s,callbacks:i??s.callbacks}),this.memory=a}else super({verbose:t,callbacks:r}),this.memory=e}_selectMemoryInputs(e){const t={...e};return"signal"in t&&delete t.signal,"timeout"in t&&delete t.timeout,t}serialize(){throw new Error("Method not implemented.")}async run(e,t){const r=this.inputKeys.filter(u=>{var l;return!((l=this.memory)!=null&&l.memoryKeys.includes(u))});if(!(r.length<=1))throw new Error(`Chain ${this._chainType()} expects multiple inputs, cannot use 'run' `);const i=r.length?{[r[0]]:e}:{},s=await this.call(i,t),o=Object.keys(s);if(o.length===1)return s[o[0]];throw new Error("return values have multiple keys, `run` only supported when one key currently")}async call(e,t,r){const a={...e};if(a.timeout&&!a.signal&&(a.signal=AbortSignal.timeout(a.timeout),delete a.timeout),this.memory!=null){const l=await this.memory.loadMemoryVariables(this._selectMemoryInputs(e));for(const[g,O]of Object.entries(l))a[g]=O}const i=wi(t),s=await $e.configure(i.callbacks,this.callbacks,i.tags||r,this.tags,i.metadata,this.metadata,{verbose:this.verbose}),o=await(s==null?void 0:s.handleChainStart(this.toJSON(),a));let u;try{u=await(e.signal?Promise.race([this._call(a,o),new Promise((l,g)=>{var O;(O=e.signal)==null||O.addEventListener("abort",()=>{g(new Error("AbortError"))})})]):this._call(a,o))}catch(l){throw await(o==null?void 0:o.handleChainError(l)),l}return this.memory!=null&&await this.memory.saveContext(this._selectMemoryInputs(e),u),await(o==null?void 0:o.handleChainEnd(u)),Object.defineProperty(u,An,{value:o?{runId:o==null?void 0:o.runId}:void 0,configurable:!0}),u}async apply(e,t){return Promise.all(e.map(async(r,a)=>this.call(r,t==null?void 0:t[a])))}static async deserialize(e,t={}){switch(e._type){case"llm_chain":{const{LLMChain:r}=await fe(()=>Promise.resolve().then(()=>Ci),void 0);return r.deserialize(e)}case"sequential_chain":{const{SequentialChain:r}=await fe(()=>import("./sequential_chain.d0fdbf20.js"),[]);return r.deserialize(e)}case"simple_sequential_chain":{const{SimpleSequentialChain:r}=await fe(()=>import("./sequential_chain.d0fdbf20.js"),[]);return r.deserialize(e)}case"stuff_documents_chain":{const{StuffDocumentsChain:r}=await fe(()=>Promise.resolve().then(()=>Or),void 0);return r.deserialize(e)}case"map_reduce_documents_chain":{const{MapReduceDocumentsChain:r}=await fe(()=>Promise.resolve().then(()=>Or),void 0);return r.deserialize(e)}case"refine_documents_chain":{const{RefineDocumentsChain:r}=await fe(()=>Promise.resolve().then(()=>Or),void 0);return r.deserialize(e)}case"vector_db_qa":{const{VectorDBQAChain:r}=await fe(()=>import("./vector_db_qa.e2a36e15.js"),[]);return r.deserialize(e,t)}case"api_chain":{const{APIChain:r}=await fe(()=>import("./api_chain.3d51bc47.js"),[]);return r.deserialize(e)}default:throw new Error(`Invalid prompt type in config: ${e._type}`)}}}class ki extends In{constructor(e){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts","base"]}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new Cn(this.value)]}}class Mr extends at{get lc_attributes(){return{partialVariables:void 0}}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts",this._getPromptType()]}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"partialVariables",{enumerable:!0,configurable:!0,writable:!0,value:{}});const{inputVariables:t}=e;if(t.includes("stop"))throw new Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,e)}async mergePartialAndUserVariables(e){const t=this.partialVariables??{},r={};for(const[i,s]of Object.entries(t))typeof s=="string"?r[i]=s:r[i]=await s();return{...r,...e}}serialize(){throw new Error("Use .toJSON() instead")}static async deserialize(e){switch(e._type){case"prompt":{const{PromptTemplate:t}=await fe(()=>Promise.resolve().then(()=>nn),void 0);return t.deserialize(e)}case void 0:{const{PromptTemplate:t}=await fe(()=>Promise.resolve().then(()=>nn),void 0);return t.deserialize({...e,_type:"prompt"})}case"few_shot":{const{FewShotPromptTemplate:t}=await fe(()=>import("./few_shot.14560f4b.js"),[]);return t.deserialize(e)}default:throw new Error(`Invalid prompt type in config: ${e._type}`)}}}class ji extends Mr{async formatPromptValue(e){const t=await this.format(e);return new ki(t)}}class Si extends at{parseResultWithPrompt(e,t,r){return this.parseResult(e,r)}}class Ai extends Si{parseResult(e,t){return this.parse(e[0].text,t)}async parseWithPrompt(e,t,r){return this.parse(e,r)}_type(){throw new Error("_type not implemented")}}class Ii extends Ai{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","default"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}parse(e){return Promise.resolve(e)}getFormatInstructions(){return""}}class ge extends zt{get inputKeys(){return this.prompt.inputVariables}get outputKeys(){return[this.outputKey]}constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"llm",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"llmKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputKey",{enumerable:!0,configurable:!0,writable:!0,value:"text"}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt,this.llm=e.llm,this.llmKwargs=e.llmKwargs,this.outputKey=e.outputKey??this.outputKey,this.outputParser=e.outputParser??new Ii,this.prompt.outputParser){if(e.outputParser)throw new Error("Cannot set both outputParser and prompt.outputParser");this.outputParser=this.prompt.outputParser}}_selectMemoryInputs(e){const t=super._selectMemoryInputs(e);for(const r of this.llm.callKeys)r in e&&delete t[r];return t}async _getFinalOutput(e,t,r){let a;return this.outputParser?a=await this.outputParser.parseResultWithPrompt(e,t,r==null?void 0:r.getChild()):a=e[0].text,a}call(e,t){return super.call(e,t)}async _call(e,t){const r={...e},a={...this.llmKwargs};for(const o of this.llm.callKeys)o in e&&(a[o]=e[o],delete r[o]);const i=await this.prompt.formatPromptValue(r),{generations:s}=await this.llm.generatePrompt([i],a,t==null?void 0:t.getChild());return{[this.outputKey]:await this._getFinalOutput(s[0],i,t)}}async predict(e,t){return(await this.call(e,t))[this.outputKey]}_chainType(){return"llm"}static async deserialize(e){const{llm:t,prompt:r}=e;if(!t)throw new Error("LLMChain must have llm");if(!r)throw new Error("LLMChain must have prompt");return new ge({llm:await Bn.deserialize(t),prompt:await Mr.deserialize(r)})}serialize(){return{_type:`${this._chainType()}_chain`,llm:this.llm.serialize(),prompt:this.prompt.serialize()}}}const Ci=Object.freeze(Object.defineProperty({__proto__:null,LLMChain:ge},Symbol.toStringTag,{value:"Module"})),Un=n=>{const e=n.split(""),t=[],r=(i,s)=>{for(let o=s;o<e.length;o+=1)if(i.includes(e[o]))return o;return-1};let a=0;for(;a<e.length;)if(e[a]==="{"&&a+1<e.length&&e[a+1]==="{")t.push({type:"literal",text:"{"}),a+=2;else if(e[a]==="}"&&a+1<e.length&&e[a+1]==="}")t.push({type:"literal",text:"}"}),a+=2;else if(e[a]==="{"){const i=r("}",a);if(i<0)throw new Error("Unclosed '{' in template.");t.push({type:"variable",name:e.slice(a+1,i).join("")}),a=i+1}else{if(e[a]==="}")throw new Error("Single '}' in template.");{const i=r("{}",a),s=(i<0?e.slice(a):e.slice(a,i)).join("");t.push({type:"literal",text:s}),a=i<0?e.length:i}}return t},Di=(n,e)=>Un(n).reduce((t,r)=>{if(r.type==="variable"){if(r.name in e)return t+e[r.name];throw new Error(`Missing value for input ${r.name}`)}return t+r.text},""),Tr={"f-string":Di,jinja2:(n,e)=>""},Mi={"f-string":Un,jinja2:n=>[]},Vn=(n,e,t)=>Tr[e](n,t),Ni=(n,e)=>Mi[e](n),Li=(n,e,t)=>{if(!(e in Tr)){const r=Object.keys(Tr);throw new Error(`Invalid template format. Got \`${e}\`;
                         should be one of ${r}`)}try{const r=t.reduce((a,i)=>(a[i]="foo",a),{});Vn(n,e,r)}catch(r){throw new Error(`Invalid prompt schema: ${r.message}`)}};class oe extends ji{constructor(e){if(super(e),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,e),this.validateTemplate){let t=this.inputVariables;this.partialVariables&&(t=t.concat(Object.keys(this.partialVariables))),Li(this.template,this.templateFormat,t)}}_getPromptType(){return"prompt"}async format(e){const t=await this.mergePartialAndUserVariables(e);return Vn(this.template,this.templateFormat,t)}static fromExamples(e,t,r,a=`

`,i=""){const s=[i,...e,t].join(a);return new oe({inputVariables:r,template:s})}static fromTemplate(e,{templateFormat:t="f-string",...r}={}){const a=new Set;return Ni(e,t).forEach(i=>{i.type==="variable"&&a.add(i.name)}),new oe({inputVariables:[...a],templateFormat:t,template:e,...r})}async partial(e){const t={...this};return t.inputVariables=this.inputVariables.filter(r=>!(r in e)),t.partialVariables={...this.partialVariables??{},...e},new oe(t)}serialize(){if(this.outputParser!==void 0)throw new Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static async deserialize(e){if(!e.template)throw new Error("Prompt template must have a template");return new oe({inputVariables:e.input_variables,template:e.template,templateFormat:e.template_format})}}const nn=Object.freeze(Object.defineProperty({__proto__:null,PromptTemplate:oe},Symbol.toStringTag,{value:"Module"}));class yt extends zt{get inputKeys(){return[this.inputKey,...this.llmChain.inputKeys].filter(e=>e!==this.documentVariableName)}get outputKeys(){return this.llmChain.outputKeys}constructor(e){super(e),Object.defineProperty(this,"llmChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"input_documents"}),Object.defineProperty(this,"documentVariableName",{enumerable:!0,configurable:!0,writable:!0,value:"context"}),this.llmChain=e.llmChain,this.documentVariableName=e.documentVariableName??this.documentVariableName,this.inputKey=e.inputKey??this.inputKey}_prepInputs(e){if(!(this.inputKey in e))throw new Error(`Document key ${this.inputKey} not found.`);const{[this.inputKey]:t,...r}=e,i=t.map(({pageContent:s})=>s).join(`

`);return{...r,[this.documentVariableName]:i}}async _call(e,t){return await this.llmChain.call(this._prepInputs(e),t==null?void 0:t.getChild("combine_documents"))}_chainType(){return"stuff_documents_chain"}static async deserialize(e){if(!e.llm_chain)throw new Error("Missing llm_chain");return new yt({llmChain:await ge.deserialize(e.llm_chain)})}serialize(){return{_type:this._chainType(),llm_chain:this.llmChain.serialize()}}}class ar extends zt{get inputKeys(){return[this.inputKey,...this.combineDocumentChain.inputKeys]}get outputKeys(){return this.combineDocumentChain.outputKeys}constructor(e){super(e),Object.defineProperty(this,"llmChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"input_documents"}),Object.defineProperty(this,"documentVariableName",{enumerable:!0,configurable:!0,writable:!0,value:"context"}),Object.defineProperty(this,"returnIntermediateSteps",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:3e3}),Object.defineProperty(this,"maxIterations",{enumerable:!0,configurable:!0,writable:!0,value:10}),Object.defineProperty(this,"ensureMapStep",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"combineDocumentChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.llmChain=e.llmChain,this.combineDocumentChain=e.combineDocumentChain,this.documentVariableName=e.documentVariableName??this.documentVariableName,this.ensureMapStep=e.ensureMapStep??this.ensureMapStep,this.inputKey=e.inputKey??this.inputKey,this.maxTokens=e.maxTokens??this.maxTokens,this.maxIterations=e.maxIterations??this.maxIterations,this.returnIntermediateSteps=e.returnIntermediateSteps??!1}async _call(e,t){if(!(this.inputKey in e))throw new Error(`Document key ${this.inputKey} not found.`);const{[this.inputKey]:r,...a}=e;let i=r,s=[];for(let l=0;l<this.maxIterations;l+=1){const g=i.map(x=>({[this.documentVariableName]:x.pageContent,...a}));if(l!==0||!this.ensureMapStep){const x=await this.combineDocumentChain.llmChain.prompt.format(this.combineDocumentChain._prepInputs({[this.combineDocumentChain.inputKey]:i,...a}));if(await this.combineDocumentChain.llmChain.llm.getNumTokens(x)<this.maxTokens)break}const L=await this.llmChain.apply(g,t?Array.from({length:g.length},(x,$)=>t.getChild(`map_${$+1}`)):void 0),{outputKey:Q}=this.llmChain;this.returnIntermediateSteps&&(s=s.concat(L.map(x=>x[Q]))),i=L.map(x=>({pageContent:x[Q],metadata:{}}))}const o={[this.combineDocumentChain.inputKey]:i,...a},u=await this.combineDocumentChain.call(o,t==null?void 0:t.getChild("combine_documents"));return this.returnIntermediateSteps?{...u,intermediateSteps:s}:u}_chainType(){return"map_reduce_documents_chain"}static async deserialize(e){if(!e.llm_chain)throw new Error("Missing llm_chain");if(!e.combine_document_chain)throw new Error("Missing combine_document_chain");return new ar({llmChain:await ge.deserialize(e.llm_chain),combineDocumentChain:await yt.deserialize(e.combine_document_chain)})}serialize(){return{_type:this._chainType(),llm_chain:this.llmChain.serialize(),combine_document_chain:this.combineDocumentChain.serialize()}}}class ir extends zt{get defaultDocumentPrompt(){return new oe({inputVariables:["page_content"],template:"{page_content}"})}get inputKeys(){return[...new Set([this.inputKey,...this.llmChain.inputKeys,...this.refineLLMChain.inputKeys])].filter(e=>e!==this.documentVariableName&&e!==this.initialResponseName)}get outputKeys(){return[this.outputKey]}constructor(e){super(e),Object.defineProperty(this,"llmChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"input_documents"}),Object.defineProperty(this,"outputKey",{enumerable:!0,configurable:!0,writable:!0,value:"output_text"}),Object.defineProperty(this,"documentVariableName",{enumerable:!0,configurable:!0,writable:!0,value:"context"}),Object.defineProperty(this,"initialResponseName",{enumerable:!0,configurable:!0,writable:!0,value:"existing_answer"}),Object.defineProperty(this,"refineLLMChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"documentPrompt",{enumerable:!0,configurable:!0,writable:!0,value:this.defaultDocumentPrompt}),this.llmChain=e.llmChain,this.refineLLMChain=e.refineLLMChain,this.documentVariableName=e.documentVariableName??this.documentVariableName,this.inputKey=e.inputKey??this.inputKey,this.outputKey=e.outputKey??this.outputKey,this.documentPrompt=e.documentPrompt??this.documentPrompt,this.initialResponseName=e.initialResponseName??this.initialResponseName}async _constructInitialInputs(e,t){const r={page_content:e.pageContent,...e.metadata},a={};return this.documentPrompt.inputVariables.forEach(o=>{a[o]=r[o]}),{...{[this.documentVariableName]:await this.documentPrompt.format({...a})},...t}}async _constructRefineInputs(e,t){const r={page_content:e.pageContent,...e.metadata},a={};this.documentPrompt.inputVariables.forEach(o=>{a[o]=r[o]});const i={[this.documentVariableName]:await this.documentPrompt.format({...a})};return{[this.initialResponseName]:t,...i}}async _call(e,t){if(!(this.inputKey in e))throw new Error(`Document key ${this.inputKey} not found.`);const{[this.inputKey]:r,...a}=e,i=r,s=await this._constructInitialInputs(i[0],a);let o=await this.llmChain.predict({...s},t==null?void 0:t.getChild("answer"));for(let u=1;u<i.length;u+=1){const g={...await this._constructRefineInputs(i[u],o),...a};o=await this.refineLLMChain.predict({...g},t==null?void 0:t.getChild("refine"))}return{[this.outputKey]:o}}_chainType(){return"refine_documents_chain"}static async deserialize(e){const t=e.llm_chain;if(!t)throw new Error("Missing llm_chain");const r=e.refine_llm_chain;if(!r)throw new Error("Missing refine_llm_chain");return new ir({llmChain:await ge.deserialize(t),refineLLMChain:await ge.deserialize(r)})}serialize(){return{_type:this._chainType(),llm_chain:this.llmChain.serialize(),refine_llm_chain:this.refineLLMChain.serialize()}}}const Or=Object.freeze(Object.defineProperty({__proto__:null,MapReduceDocumentsChain:ar,RefineDocumentsChain:ir,StuffDocumentsChain:yt},Symbol.toStringTag,{value:"Module"}));class Ri extends at{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}}class $i extends In{constructor(e){Array.isArray(e)&&(e={messages:e}),super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return JSON.stringify(this.messages)}toChatMessages(){return this.messages}}class Nr extends Ri{constructor(e){"prompt"in e||(e={prompt:e}),super(e),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt}get inputVariables(){return this.prompt.inputVariables}async formatMessages(e){return[await this.format(e)]}}class Zi extends Mr{constructor(e){super(e)}async format(e){return(await this.formatPromptValue(e)).toString()}async formatPromptValue(e){const t=await this.formatMessages(e);return new $i(t)}}class it extends Nr{async format(e){return new Cn(await this.prompt.format(e))}static fromTemplate(e){return new this(oe.fromTemplate(e))}}class Bi extends Nr{async format(e){return new Dn(await this.prompt.format(e))}static fromTemplate(e){return new this(oe.fromTemplate(e))}}class sr extends Nr{async format(e){return new Va(await this.prompt.format(e))}static fromTemplate(e){return new this(oe.fromTemplate(e))}}class je extends Zi{get lc_aliases(){return{promptMessages:"messages"}}constructor(e){if(super(e),Object.defineProperty(this,"promptMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,e),this.validateTemplate){const t=new Set;for(const s of this.promptMessages)for(const o of s.inputVariables)t.add(o);const r=new Set(this.partialVariables?this.inputVariables.concat(Object.keys(this.partialVariables)):this.inputVariables),a=new Set([...r].filter(s=>!t.has(s)));if(a.size>0)throw new Error(`Input variables \`${[...a]}\` are not used in any of the prompt messages.`);const i=new Set([...t].filter(s=>!r.has(s)));if(i.size>0)throw new Error(`Input variables \`${[...i]}\` are used in prompt messages but not in the prompt template.`)}}_getPromptType(){return"chat"}async formatMessages(e){const t=await this.mergePartialAndUserVariables(e);let r=[];for(const a of this.promptMessages){const i=a.inputVariables.reduce((o,u)=>{if(!(u in t))throw new Error(`Missing value for input variable \`${u}\``);return o[u]=t[u],o},{}),s=await a.formatMessages(i);r=r.concat(s)}return r}async partial(e){const t={...this};return t.inputVariables=this.inputVariables.filter(r=>!(r in e)),t.partialVariables={...this.partialVariables??{},...e},new je(t)}static fromPromptMessages(e){const t=e.reduce((i,s)=>i.concat(s instanceof je?s.promptMessages:[s]),[]),r=e.reduce((i,s)=>s instanceof je?Object.assign(i,s.partialVariables):i,Object.create(null)),a=new Set;for(const i of t)for(const s of i.inputVariables)s in r||a.add(s);return new je({inputVariables:[...a],promptMessages:t,partialVariables:r})}}class Ui{async getPromptAsync(e,t){return this.getPrompt(e).partial((t==null?void 0:t.partialVariables)??{})}}class qt extends Ui{constructor(e,t=[]){super(),Object.defineProperty(this,"defaultPrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"conditionals",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.defaultPrompt=e,this.conditionals=t}getPrompt(e){for(const[t,r]of this.conditionals)if(t(e))return r;return this.defaultPrompt}}function Ht(n){return n._modelType()==="base_chat_model"}const Vi=new oe({template:`Use the following pieces of context to answer the question at the end. If you don't know the answer, just say that you don't know, don't try to make up an answer.

{context}

Question: {question}
Helpful Answer:`,inputVariables:["context","question"]}),Fi=`Use the following pieces of context to answer the users question. 
If you don't know the answer, just say that you don't know, don't try to make up an answer.
----------------
{context}`,Ki=[sr.fromTemplate(Fi),it.fromTemplate("{question}")],zi=je.fromPromptMessages(Ki),qi=new qt(Vi,[[Ht,zi]]),Hi=`Use the following portion of a long document to see if any of the text is relevant to answer the question. 
Return any relevant text verbatim.
{context}
Question: {question}
Relevant text, if any:`,Yi=oe.fromTemplate(Hi),Gi=`Use the following portion of a long document to see if any of the text is relevant to answer the question. 
Return any relevant text verbatim.
----------------
{context}`,Wi=[sr.fromTemplate(Gi),it.fromTemplate("{question}")],Ji=je.fromPromptMessages(Wi),Qi=new qt(Yi,[[Ht,Ji]]),Xi=`Given the following extracted parts of a long document and a question, create a final answer. 
If you don't know the answer, just say that you don't know. Don't try to make up an answer.

QUESTION: Which state/country's law governs the interpretation of the contract?
=========
Content: This Agreement is governed by English law and the parties submit to the exclusive jurisdiction of the English courts in  relation to any dispute (contractual or non-contractual) concerning this Agreement save that either party may apply to any court for an  injunction or other relief to protect its Intellectual Property Rights.

Content: No Waiver. Failure or delay in exercising any right or remedy under this Agreement shall not constitute a waiver of such (or any other)  right or remedy.

11.7 Severability. The invalidity, illegality or unenforceability of any term (or part of a term) of this Agreement shall not affect the continuation  in force of the remainder of the term (if any) and this Agreement.

11.8 No Agency. Except as expressly stated otherwise, nothing in this Agreement shall create an agency, partnership or joint venture of any  kind between the parties.

11.9 No Third-Party Beneficiaries.

Content: (b) if Google believes, in good faith, that the Distributor has violated or caused Google to violate any Anti-Bribery Laws (as  defined in Clause 8.5) or that such a violation is reasonably likely to occur,
=========
FINAL ANSWER: This Agreement is governed by English law.

QUESTION: What did the president say about Michael Jackson?
=========
Content: Madam Speaker, Madam Vice President, our First Lady and Second Gentleman. Members of Congress and the Cabinet. Justices of the Supreme Court. My fellow Americans.  

Last year COVID-19 kept us apart. This year we are finally together again. 

Tonight, we meet as Democrats Republicans and Independents. But most importantly as Americans. 

With a duty to one another to the American people to the Constitution. 

And with an unwavering resolve that freedom will always triumph over tyranny. 

Six days ago, Russias Vladimir Putin sought to shake the foundations of the free world thinking he could make it bend to his menacing ways. But he badly miscalculated. 

He thought he could roll into Ukraine and the world would roll over. Instead he met a wall of strength he never imagined. 

He met the Ukrainian people. 

From President Zelenskyy to every Ukrainian, their fearlessness, their courage, their determination, inspires the world. 

Groups of citizens blocking tanks with their bodies. Everyone from students to retirees teachers turned soldiers defending their homeland.

Content: And we wont stop. 

We have lost so much to COVID-19. Time with one another. And worst of all, so much loss of life. 

Lets use this moment to reset. Lets stop looking at COVID-19 as a partisan dividing line and see it for what it is: A God-awful disease.  

Lets stop seeing each other as enemies, and start seeing each other for who we really are: Fellow Americans.  

We cant change how divided weve been. But we can change how we move forwardon COVID-19 and other issues we must face together. 

I recently visited the New York City Police Department days after the funerals of Officer Wilbert Mora and his partner, Officer Jason Rivera. 

They were responding to a 9-1-1 call when a man shot and killed them with a stolen gun. 

Officer Mora was 27 years old. 

Officer Rivera was 22. 

Both Dominican Americans whod grown up on the same streets they later chose to patrol as police officers. 

I spoke with their families and told them that we are forever in debt for their sacrifice, and we will carry on their mission to restore the trust and safety every community deserves.

Content: And a proud Ukrainian people, who have known 30 years  of independence, have repeatedly shown that they will not tolerate anyone who tries to take their country backwards.  

To all Americans, I will be honest with you, as Ive always promised. A Russian dictator, invading a foreign country, has costs around the world. 

And Im taking robust action to make sure the pain of our sanctions  is targeted at Russias economy. And I will use every tool at our disposal to protect American businesses and consumers. 

Tonight, I can announce that the United States has worked with 30 other countries to release 60 Million barrels of oil from reserves around the world.  

America will lead that effort, releasing 30 Million barrels from our own Strategic Petroleum Reserve. And we stand ready to do more if necessary, unified with our allies.  

These steps will help blunt gas prices here at home. And I know the news about whats happening can seem alarming. 

But I want you to know that we are going to be okay.

Content: More support for patients and families. 

To get there, I call on Congress to fund ARPA-H, the Advanced Research Projects Agency for Health. 

Its based on DARPAthe Defense Department project that led to the Internet, GPS, and so much more.  

ARPA-H will have a singular purposeto drive breakthroughs in cancer, Alzheimers, diabetes, and more. 

A unity agenda for the nation. 

We can do this. 

My fellow Americanstonight , we have gathered in a sacred spacethe citadel of our democracy. 

In this Capitol, generation after generation, Americans have debated great questions amid great strife, and have done great things. 

We have fought for freedom, expanded liberty, defeated totalitarianism and terror. 

And built the strongest, freest, and most prosperous nation the world has ever known. 

Now is the hour. 

Our moment of responsibility. 

Our test of resolve and conscience, of history itself. 

It is in this moment that our character is formed. Our purpose is found. Our future is forged. 

Well I know this nation.
=========
FINAL ANSWER: The president did not mention Michael Jackson.

QUESTION: {question}
=========
{summaries}
=========
FINAL ANSWER:`,es=oe.fromTemplate(Xi),ts=`Given the following extracted parts of a long document and a question, create a final answer. 
If you don't know the answer, just say that you don't know. Don't try to make up an answer.
----------------
{summaries}`,rs=[sr.fromTemplate(ts),it.fromTemplate("{question}")],ns=je.fromPromptMessages(rs),as=new qt(es,[[Ht,ns]]),is=`The original question is as follows: {question}
We have provided an existing answer: {existing_answer}
We have the opportunity to refine the existing answer
(only if needed) with some more context below.
------------
{context}
------------
Given the new context, refine the original answer to better answer the question. 
If the context isn't useful, return the original answer.`,ss=new oe({inputVariables:["question","existing_answer","context"],template:is}),os=`The original question is as follows: {question}
We have provided an existing answer: {existing_answer}
We have the opportunity to refine the existing answer
(only if needed) with some more context below.
------------
{context}
------------
Given the new context, refine the original answer to better answer the question. 
If the context isn't useful, return the original answer.`,us=[it.fromTemplate("{question}"),Bi.fromTemplate("{existing_answer}"),it.fromTemplate(os)],cs=je.fromPromptMessages(us),ls=new qt(ss,[[Ht,cs]]),ds=`Context information is below. 
---------------------
{context}
---------------------
Given the context information and not prior knowledge, answer the question: {question}`,hs=new oe({inputVariables:["context","question"],template:ds}),ps=`Context information is below. 
---------------------
{context}
---------------------
Given the context information and not prior knowledge, answer any questions`,fs=[sr.fromTemplate(ps),it.fromTemplate("{question}")],ms=je.fromPromptMessages(fs),gs=new qt(hs,[[Ht,ms]]),ys=(n,e={type:"stuff"})=>{const{type:t}=e;if(t==="stuff")return bs(n,e);if(t==="map_reduce")return _s(n,e);if(t==="refine")return vs(n,e);throw new Error(`Invalid _type: ${t}`)};function bs(n,e={}){const{prompt:t=qi.getPrompt(n),verbose:r}=e,a=new ge({prompt:t,llm:n,verbose:r});return new yt({llmChain:a,verbose:r})}function _s(n,e={}){const{combineMapPrompt:t=Qi.getPrompt(n),combinePrompt:r=as.getPrompt(n),verbose:a,returnIntermediateSteps:i}=e,s=new ge({prompt:t,llm:n,verbose:a}),o=new ge({prompt:r,llm:n,verbose:a}),u=new yt({llmChain:o,documentVariableName:"summaries",verbose:a});return new ar({llmChain:s,combineDocumentChain:u,returnIntermediateSteps:i,verbose:a})}function vs(n,e={}){const{questionPrompt:t=gs.getPrompt(n),refinePrompt:r=ls.getPrompt(n),verbose:a}=e,i=new ge({prompt:t,llm:n,verbose:a}),s=new ge({prompt:r,llm:n,verbose:a});return new ir({llmChain:i,refineLLMChain:s,verbose:a})}const ws=`Given the following conversation and a follow up question, rephrase the follow up question to be a standalone question.

Chat History:
{chat_history}
Follow Up Input: {question}
Standalone question:`;class Lr extends zt{get inputKeys(){return[this.inputKey,this.chatHistoryKey]}get outputKeys(){return this.combineDocumentsChain.outputKeys.concat(this.returnSourceDocuments?["sourceDocuments"]:[])}constructor(e){super(e),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"question"}),Object.defineProperty(this,"chatHistoryKey",{enumerable:!0,configurable:!0,writable:!0,value:"chat_history"}),Object.defineProperty(this,"retriever",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"combineDocumentsChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"questionGeneratorChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSourceDocuments",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.retriever=e.retriever,this.combineDocumentsChain=e.combineDocumentsChain,this.questionGeneratorChain=e.questionGeneratorChain,this.inputKey=e.inputKey??this.inputKey,this.returnSourceDocuments=e.returnSourceDocuments??this.returnSourceDocuments}static getChatHistoryString(e){return Array.isArray(e)?e.map(t=>t._getType()==="human"?`Human: ${t.content}`:t._getType()==="ai"?`Assistant: ${t.content}`:`${t.content}`).join(`
`):e}async _call(e,t){if(!(this.inputKey in e))throw new Error(`Question key ${this.inputKey} not found.`);if(!(this.chatHistoryKey in e))throw new Error(`Chat history key ${this.chatHistoryKey} not found.`);const r=e[this.inputKey],a=Lr.getChatHistoryString(e[this.chatHistoryKey]);let i=r;if(a.length>0){const l=await this.questionGeneratorChain.call({question:r,chat_history:a},t==null?void 0:t.getChild("question_generator")),g=Object.keys(l);if(g.length===1)i=l[g[0]];else throw new Error("Return from llm chain has multiple values, only single values supported.")}const s=await this.retriever.getRelevantDocuments(i),o={question:i,input_documents:s,chat_history:a},u=await this.combineDocumentsChain.call(o,t==null?void 0:t.getChild("combine_documents"));return this.returnSourceDocuments?{...u,sourceDocuments:s}:u}_chainType(){return"conversational_retrieval_chain"}static async deserialize(e,t){throw new Error("Not implemented.")}serialize(){throw new Error("Not implemented.")}static fromLLM(e,t,r={}){const{questionGeneratorTemplate:a,qaTemplate:i,qaChainOptions:s={type:"stuff",prompt:i?oe.fromTemplate(i):void 0},questionGeneratorChainOptions:o,verbose:u,...l}=r,g=ys(e,s),O=oe.fromTemplate((o==null?void 0:o.template)??a??ws),L=new ge({prompt:O,llm:(o==null?void 0:o.llm)??e,verbose:u});return new this({retriever:t,combineDocumentsChain:g,questionGeneratorChain:L,verbose:u,...l})}}var J;(function(n){n.assertEqual=a=>a;function e(a){}n.assertIs=e;function t(a){throw new Error}n.assertNever=t,n.arrayToEnum=a=>{const i={};for(const s of a)i[s]=s;return i},n.getValidEnumValues=a=>{const i=n.objectKeys(a).filter(o=>typeof a[a[o]]!="number"),s={};for(const o of i)s[o]=a[o];return n.objectValues(s)},n.objectValues=a=>n.objectKeys(a).map(function(i){return a[i]}),n.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const s in a)Object.prototype.hasOwnProperty.call(a,s)&&i.push(s);return i},n.find=(a,i)=>{for(const s of a)if(i(s))return s},n.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function r(a,i=" | "){return a.map(s=>typeof s=="string"?`'${s}'`:s).join(i)}n.joinValues=r,n.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(J||(J={}));var er;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(er||(er={}));const M=J.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ce=n=>{switch(typeof n){case"undefined":return M.undefined;case"string":return M.string;case"number":return isNaN(n)?M.nan:M.number;case"boolean":return M.boolean;case"function":return M.function;case"bigint":return M.bigint;case"symbol":return M.symbol;case"object":return Array.isArray(n)?M.array:n===null?M.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?M.promise:typeof Map<"u"&&n instanceof Map?M.map:typeof Set<"u"&&n instanceof Set?M.set:typeof Date<"u"&&n instanceof Date?M.date:M.object;default:return M.unknown}},T=J.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Fn=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:");class ve extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(i){return i.message},r={_errors:[]},a=i=>{for(const s of i.issues)if(s.code==="invalid_union")s.unionErrors.map(a);else if(s.code==="invalid_return_type")a(s.returnTypeError);else if(s.code==="invalid_arguments")a(s.argumentsError);else if(s.path.length===0)r._errors.push(t(s));else{let o=r,u=0;for(;u<s.path.length;){const l=s.path[u];u===s.path.length-1?(o[l]=o[l]||{_errors:[]},o[l]._errors.push(t(s))):o[l]=o[l]||{_errors:[]},o=o[l],u++}}};return a(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,J.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const a of this.issues)a.path.length>0?(t[a.path[0]]=t[a.path[0]]||[],t[a.path[0]].push(e(a))):r.push(e(a));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}ve.create=n=>new ve(n);const st=(n,e)=>{let t;switch(n.code){case T.invalid_type:n.received===M.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case T.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,J.jsonStringifyReplacer)}`;break;case T.unrecognized_keys:t=`Unrecognized key(s) in object: ${J.joinValues(n.keys,", ")}`;break;case T.invalid_union:t="Invalid input";break;case T.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${J.joinValues(n.options)}`;break;case T.invalid_enum_value:t=`Invalid enum value. Expected ${J.joinValues(n.options)}, received '${n.received}'`;break;case T.invalid_arguments:t="Invalid function arguments";break;case T.invalid_return_type:t="Invalid function return type";break;case T.invalid_date:t="Invalid date";break;case T.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:J.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case T.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case T.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case T.custom:t="Invalid input";break;case T.invalid_intersection_types:t="Intersection results could not be merged";break;case T.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case T.not_finite:t="Number must be finite";break;default:t=e.defaultError,J.assertNever(n)}return{message:t}};let Kn=st;function zn(n){Kn=n}function Mt(){return Kn}const Nt=n=>{const{data:e,path:t,errorMaps:r,issueData:a}=n,i=[...t,...a.path||[]],s={...a,path:i};let o="";const u=r.filter(l=>!!l).slice().reverse();for(const l of u)o=l(s,{data:e,defaultError:o}).message;return{...a,path:i,message:a.message||o}},qn=[];function N(n,e){const t=Nt({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Mt(),st].filter(r=>!!r)});n.common.issues.push(t)}class ue{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const a of t){if(a.status==="aborted")return z;a.status==="dirty"&&e.dirty(),r.push(a.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const a of t)r.push({key:await a.key,value:await a.value});return ue.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const a of t){const{key:i,value:s}=a;if(i.status==="aborted"||s.status==="aborted")return z;i.status==="dirty"&&e.dirty(),s.status==="dirty"&&e.dirty(),(typeof s.value<"u"||a.alwaysSet)&&(r[i.value]=s.value)}return{status:e.value,value:r}}}const z=Object.freeze({status:"aborted"}),Rr=n=>({status:"dirty",value:n}),de=n=>({status:"valid",value:n}),tr=n=>n.status==="aborted",rr=n=>n.status==="dirty",Lt=n=>n.status==="valid",Rt=n=>typeof Promise<"u"&&n instanceof Promise;var Z;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Z||(Z={}));class Ae{constructor(e,t,r,a){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const an=(n,e)=>{if(Lt(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new ve(n.common.issues);return this._error=t,this._error}}};function G(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:a}=n;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:a}:{errorMap:(s,o)=>s.code!=="invalid_type"?{message:o.defaultError}:typeof o.data>"u"?{message:r??o.defaultError}:{message:t??o.defaultError},description:a}}class Y{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Ce(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Ce(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ue,ctx:{common:e.parent.common,data:e.data,parsedType:Ce(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Rt(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const a={common:{issues:[],async:(r=t==null?void 0:t.async)!==null&&r!==void 0?r:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ce(e)},i=this._parseSync({data:e,path:a.path,parent:a});return an(a,i)}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ce(e)},a=this._parse({data:e,path:r.path,parent:r}),i=await(Rt(a)?a:Promise.resolve(a));return an(r,i)}refine(e,t){const r=a=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(a):t;return this._refinement((a,i)=>{const s=e(a),o=()=>i.addIssue({code:T.custom,...r(a)});return typeof Promise<"u"&&s instanceof Promise?s.then(u=>u?!0:(o(),!1)):s?!0:(o(),!1)})}refinement(e,t){return this._refinement((r,a)=>e(r)?!0:(a.addIssue(typeof t=="function"?t(r,a):t),!1))}_refinement(e){return new ye({schema:this,typeName:K.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Se.create(this,this._def)}nullable(){return Ve.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return we.create(this,this._def)}promise(){return Je.create(this,this._def)}or(e){return lt.create([this,e],this._def)}and(e){return dt.create(this,e,this._def)}transform(e){return new ye({...G(this._def),schema:this,typeName:K.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new gt({...G(this._def),innerType:this,defaultValue:t,typeName:K.ZodDefault})}brand(){return new $r({typeName:K.ZodBranded,type:this,...G(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Ut({...G(this._def),innerType:this,catchValue:t,typeName:K.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return bt.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const xs=/^c[^\s-]{8,}$/i,Ps=/^[a-z][a-z0-9]*$/,Os=/[0-9A-HJKMNP-TV-Z]{26}/,Es=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,Ts=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,ks=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,js=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,Ss=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,As=n=>n.precision?n.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${n.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${n.precision}}Z$`):n.precision===0?n.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):n.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function Is(n,e){return!!((e==="v4"||!e)&&js.test(n)||(e==="v6"||!e)&&Ss.test(n))}class _e extends Y{constructor(){super(...arguments),this._regex=(e,t,r)=>this.refinement(a=>e.test(a),{validation:t,code:T.invalid_string,...Z.errToObj(r)}),this.nonempty=e=>this.min(1,Z.errToObj(e)),this.trim=()=>new _e({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new _e({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new _e({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==M.string){const i=this._getOrReturnCtx(e);return N(i,{code:T.invalid_type,expected:M.string,received:i.parsedType}),z}const r=new ue;let a;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(a=this._getOrReturnCtx(e,a),N(a,{code:T.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(a=this._getOrReturnCtx(e,a),N(a,{code:T.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const s=e.data.length>i.value,o=e.data.length<i.value;(s||o)&&(a=this._getOrReturnCtx(e,a),s?N(a,{code:T.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&N(a,{code:T.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")Ts.test(e.data)||(a=this._getOrReturnCtx(e,a),N(a,{validation:"email",code:T.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")ks.test(e.data)||(a=this._getOrReturnCtx(e,a),N(a,{validation:"emoji",code:T.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")Es.test(e.data)||(a=this._getOrReturnCtx(e,a),N(a,{validation:"uuid",code:T.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")xs.test(e.data)||(a=this._getOrReturnCtx(e,a),N(a,{validation:"cuid",code:T.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")Ps.test(e.data)||(a=this._getOrReturnCtx(e,a),N(a,{validation:"cuid2",code:T.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")Os.test(e.data)||(a=this._getOrReturnCtx(e,a),N(a,{validation:"ulid",code:T.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),N(a,{validation:"url",code:T.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),N(a,{validation:"regex",code:T.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(e,a),N(a,{code:T.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(a=this._getOrReturnCtx(e,a),N(a,{code:T.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(a=this._getOrReturnCtx(e,a),N(a,{code:T.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?As(i).test(e.data)||(a=this._getOrReturnCtx(e,a),N(a,{code:T.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?Is(e.data,i.version)||(a=this._getOrReturnCtx(e,a),N(a,{validation:"ip",code:T.invalid_string,message:i.message}),r.dirty()):J.assertNever(i);return{status:r.value,value:e.data}}_addCheck(e){return new _e({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Z.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Z.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Z.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Z.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Z.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Z.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Z.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Z.errToObj(e)})}datetime(e){var t;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,...Z.errToObj(e==null?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Z.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...Z.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Z.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Z.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Z.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Z.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Z.errToObj(t)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}_e.create=n=>{var e;return new _e({checks:[],typeName:K.ZodString,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...G(n)})};function Cs(n,e){const t=(n.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,a=t>r?t:r,i=parseInt(n.toFixed(a).replace(".","")),s=parseInt(e.toFixed(a).replace(".",""));return i%s/Math.pow(10,a)}class De extends Y{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==M.number){const i=this._getOrReturnCtx(e);return N(i,{code:T.invalid_type,expected:M.number,received:i.parsedType}),z}let r;const a=new ue;for(const i of this._def.checks)i.kind==="int"?J.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),N(r,{code:T.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),N(r,{code:T.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),N(r,{code:T.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?Cs(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),N(r,{code:T.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),N(r,{code:T.not_finite,message:i.message}),a.dirty()):J.assertNever(i);return{status:a.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Z.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Z.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Z.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Z.toString(t))}setLimit(e,t,r,a){return new De({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Z.toString(a)}]})}_addCheck(e){return new De({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Z.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Z.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Z.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Z.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Z.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Z.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Z.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Z.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Z.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&J.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}De.create=n=>new De({checks:[],typeName:K.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...G(n)});class Me extends Y{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==M.bigint){const i=this._getOrReturnCtx(e);return N(i,{code:T.invalid_type,expected:M.bigint,received:i.parsedType}),z}let r;const a=new ue;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),N(r,{code:T.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),N(r,{code:T.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),N(r,{code:T.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):J.assertNever(i);return{status:a.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Z.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Z.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Z.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Z.toString(t))}setLimit(e,t,r,a){return new Me({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Z.toString(a)}]})}_addCheck(e){return new Me({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Z.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Z.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Z.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Z.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Z.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Me.create=n=>{var e;return new Me({checks:[],typeName:K.ZodBigInt,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...G(n)})};class ot extends Y{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==M.boolean){const r=this._getOrReturnCtx(e);return N(r,{code:T.invalid_type,expected:M.boolean,received:r.parsedType}),z}return de(e.data)}}ot.create=n=>new ot({typeName:K.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...G(n)});class Be extends Y{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==M.date){const i=this._getOrReturnCtx(e);return N(i,{code:T.invalid_type,expected:M.date,received:i.parsedType}),z}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return N(i,{code:T.invalid_date}),z}const r=new ue;let a;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(a=this._getOrReturnCtx(e,a),N(a,{code:T.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(a=this._getOrReturnCtx(e,a),N(a,{code:T.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):J.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Be({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Z.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Z.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Be.create=n=>new Be({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:K.ZodDate,...G(n)});class $t extends Y{_parse(e){if(this._getType(e)!==M.symbol){const r=this._getOrReturnCtx(e);return N(r,{code:T.invalid_type,expected:M.symbol,received:r.parsedType}),z}return de(e.data)}}$t.create=n=>new $t({typeName:K.ZodSymbol,...G(n)});class ut extends Y{_parse(e){if(this._getType(e)!==M.undefined){const r=this._getOrReturnCtx(e);return N(r,{code:T.invalid_type,expected:M.undefined,received:r.parsedType}),z}return de(e.data)}}ut.create=n=>new ut({typeName:K.ZodUndefined,...G(n)});class ct extends Y{_parse(e){if(this._getType(e)!==M.null){const r=this._getOrReturnCtx(e);return N(r,{code:T.invalid_type,expected:M.null,received:r.parsedType}),z}return de(e.data)}}ct.create=n=>new ct({typeName:K.ZodNull,...G(n)});class We extends Y{constructor(){super(...arguments),this._any=!0}_parse(e){return de(e.data)}}We.create=n=>new We({typeName:K.ZodAny,...G(n)});class Ze extends Y{constructor(){super(...arguments),this._unknown=!0}_parse(e){return de(e.data)}}Ze.create=n=>new Ze({typeName:K.ZodUnknown,...G(n)});class Ie extends Y{_parse(e){const t=this._getOrReturnCtx(e);return N(t,{code:T.invalid_type,expected:M.never,received:t.parsedType}),z}}Ie.create=n=>new Ie({typeName:K.ZodNever,...G(n)});class Zt extends Y{_parse(e){if(this._getType(e)!==M.undefined){const r=this._getOrReturnCtx(e);return N(r,{code:T.invalid_type,expected:M.void,received:r.parsedType}),z}return de(e.data)}}Zt.create=n=>new Zt({typeName:K.ZodVoid,...G(n)});class we extends Y{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),a=this._def;if(t.parsedType!==M.array)return N(t,{code:T.invalid_type,expected:M.array,received:t.parsedType}),z;if(a.exactLength!==null){const s=t.data.length>a.exactLength.value,o=t.data.length<a.exactLength.value;(s||o)&&(N(t,{code:s?T.too_big:T.too_small,minimum:o?a.exactLength.value:void 0,maximum:s?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&t.data.length<a.minLength.value&&(N(t,{code:T.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&t.data.length>a.maxLength.value&&(N(t,{code:T.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((s,o)=>a.type._parseAsync(new Ae(t,s,t.path,o)))).then(s=>ue.mergeArray(r,s));const i=[...t.data].map((s,o)=>a.type._parseSync(new Ae(t,s,t.path,o)));return ue.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new we({...this._def,minLength:{value:e,message:Z.toString(t)}})}max(e,t){return new we({...this._def,maxLength:{value:e,message:Z.toString(t)}})}length(e,t){return new we({...this._def,exactLength:{value:e,message:Z.toString(t)}})}nonempty(e){return this.min(1,e)}}we.create=(n,e)=>new we({type:n,minLength:null,maxLength:null,exactLength:null,typeName:K.ZodArray,...G(e)});function rt(n){if(n instanceof ee){const e={};for(const t in n.shape){const r=n.shape[t];e[t]=Se.create(rt(r))}return new ee({...n._def,shape:()=>e})}else return n instanceof we?new we({...n._def,type:rt(n.element)}):n instanceof Se?Se.create(rt(n.unwrap())):n instanceof Ve?Ve.create(rt(n.unwrap())):n instanceof Oe?Oe.create(n.items.map(e=>rt(e))):n}class ee extends Y{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=J.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==M.object){const l=this._getOrReturnCtx(e);return N(l,{code:T.invalid_type,expected:M.object,received:l.parsedType}),z}const{status:r,ctx:a}=this._processInputParams(e),{shape:i,keys:s}=this._getCached(),o=[];if(!(this._def.catchall instanceof Ie&&this._def.unknownKeys==="strip"))for(const l in a.data)s.includes(l)||o.push(l);const u=[];for(const l of s){const g=i[l],O=a.data[l];u.push({key:{status:"valid",value:l},value:g._parse(new Ae(a,O,a.path,l)),alwaysSet:l in a.data})}if(this._def.catchall instanceof Ie){const l=this._def.unknownKeys;if(l==="passthrough")for(const g of o)u.push({key:{status:"valid",value:g},value:{status:"valid",value:a.data[g]}});else if(l==="strict")o.length>0&&(N(a,{code:T.unrecognized_keys,keys:o}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const g of o){const O=a.data[g];u.push({key:{status:"valid",value:g},value:l._parse(new Ae(a,O,a.path,g)),alwaysSet:g in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const l=[];for(const g of u){const O=await g.key;l.push({key:O,value:await g.value,alwaysSet:g.alwaysSet})}return l}).then(l=>ue.mergeObjectSync(r,l)):ue.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(e){return Z.errToObj,new ee({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var a,i,s,o;const u=(s=(i=(a=this._def).errorMap)===null||i===void 0?void 0:i.call(a,t,r).message)!==null&&s!==void 0?s:r.defaultError;return t.code==="unrecognized_keys"?{message:(o=Z.errToObj(e).message)!==null&&o!==void 0?o:u}:{message:u}}}:{}})}strip(){return new ee({...this._def,unknownKeys:"strip"})}passthrough(){return new ee({...this._def,unknownKeys:"passthrough"})}extend(e){return new ee({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ee({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:K.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ee({...this._def,catchall:e})}pick(e){const t={};return J.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new ee({...this._def,shape:()=>t})}omit(e){const t={};return J.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new ee({...this._def,shape:()=>t})}deepPartial(){return rt(this)}partial(e){const t={};return J.objectKeys(this.shape).forEach(r=>{const a=this.shape[r];e&&!e[r]?t[r]=a:t[r]=a.optional()}),new ee({...this._def,shape:()=>t})}required(e){const t={};return J.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Se;)i=i._def.innerType;t[r]=i}}),new ee({...this._def,shape:()=>t})}keyof(){return Hn(J.objectKeys(this.shape))}}ee.create=(n,e)=>new ee({shape:()=>n,unknownKeys:"strip",catchall:Ie.create(),typeName:K.ZodObject,...G(e)});ee.strictCreate=(n,e)=>new ee({shape:()=>n,unknownKeys:"strict",catchall:Ie.create(),typeName:K.ZodObject,...G(e)});ee.lazycreate=(n,e)=>new ee({shape:n,unknownKeys:"strip",catchall:Ie.create(),typeName:K.ZodObject,...G(e)});class lt extends Y{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function a(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return t.common.issues.push(...o.ctx.common.issues),o.result;const s=i.map(o=>new ve(o.ctx.common.issues));return N(t,{code:T.invalid_union,unionErrors:s}),z}if(t.common.async)return Promise.all(r.map(async i=>{const s={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:s}),ctx:s}})).then(a);{let i;const s=[];for(const u of r){const l={...t,common:{...t.common,issues:[]},parent:null},g=u._parseSync({data:t.data,path:t.path,parent:l});if(g.status==="valid")return g;g.status==="dirty"&&!i&&(i={result:g,ctx:l}),l.common.issues.length&&s.push(l.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const o=s.map(u=>new ve(u));return N(t,{code:T.invalid_union,unionErrors:o}),z}}get options(){return this._def.options}}lt.create=(n,e)=>new lt({options:n,typeName:K.ZodUnion,...G(e)});const Xt=n=>n instanceof pt?Xt(n.schema):n instanceof ye?Xt(n.innerType()):n instanceof ft?[n.value]:n instanceof Ne?n.options:n instanceof mt?Object.keys(n.enum):n instanceof gt?Xt(n._def.innerType):n instanceof ut?[void 0]:n instanceof ct?[null]:null;class Yt extends Y{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==M.object)return N(t,{code:T.invalid_type,expected:M.object,received:t.parsedType}),z;const r=this.discriminator,a=t.data[r],i=this.optionsMap.get(a);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(N(t,{code:T.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),z)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const a=new Map;for(const i of t){const s=Xt(i.shape[e]);if(!s)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of s){if(a.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);a.set(o,i)}}return new Yt({typeName:K.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:a,...G(r)})}}function kr(n,e){const t=Ce(n),r=Ce(e);if(n===e)return{valid:!0,data:n};if(t===M.object&&r===M.object){const a=J.objectKeys(e),i=J.objectKeys(n).filter(o=>a.indexOf(o)!==-1),s={...n,...e};for(const o of i){const u=kr(n[o],e[o]);if(!u.valid)return{valid:!1};s[o]=u.data}return{valid:!0,data:s}}else if(t===M.array&&r===M.array){if(n.length!==e.length)return{valid:!1};const a=[];for(let i=0;i<n.length;i++){const s=n[i],o=e[i],u=kr(s,o);if(!u.valid)return{valid:!1};a.push(u.data)}return{valid:!0,data:a}}else return t===M.date&&r===M.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class dt extends Y{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),a=(i,s)=>{if(tr(i)||tr(s))return z;const o=kr(i.value,s.value);return o.valid?((rr(i)||rr(s))&&t.dirty(),{status:t.value,value:o.data}):(N(r,{code:T.invalid_intersection_types}),z)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,s])=>a(i,s)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}dt.create=(n,e,t)=>new dt({left:n,right:e,typeName:K.ZodIntersection,...G(t)});class Oe extends Y{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==M.array)return N(r,{code:T.invalid_type,expected:M.array,received:r.parsedType}),z;if(r.data.length<this._def.items.length)return N(r,{code:T.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),z;!this._def.rest&&r.data.length>this._def.items.length&&(N(r,{code:T.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...r.data].map((s,o)=>{const u=this._def.items[o]||this._def.rest;return u?u._parse(new Ae(r,s,r.path,o)):null}).filter(s=>!!s);return r.common.async?Promise.all(i).then(s=>ue.mergeArray(t,s)):ue.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new Oe({...this._def,rest:e})}}Oe.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Oe({items:n,typeName:K.ZodTuple,rest:null,...G(e)})};class ht extends Y{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==M.object)return N(r,{code:T.invalid_type,expected:M.object,received:r.parsedType}),z;const a=[],i=this._def.keyType,s=this._def.valueType;for(const o in r.data)a.push({key:i._parse(new Ae(r,o,r.path,o)),value:s._parse(new Ae(r,r.data[o],r.path,o))});return r.common.async?ue.mergeObjectAsync(t,a):ue.mergeObjectSync(t,a)}get element(){return this._def.valueType}static create(e,t,r){return t instanceof Y?new ht({keyType:e,valueType:t,typeName:K.ZodRecord,...G(r)}):new ht({keyType:_e.create(),valueType:e,typeName:K.ZodRecord,...G(t)})}}class Bt extends Y{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==M.map)return N(r,{code:T.invalid_type,expected:M.map,received:r.parsedType}),z;const a=this._def.keyType,i=this._def.valueType,s=[...r.data.entries()].map(([o,u],l)=>({key:a._parse(new Ae(r,o,r.path,[l,"key"])),value:i._parse(new Ae(r,u,r.path,[l,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const u of s){const l=await u.key,g=await u.value;if(l.status==="aborted"||g.status==="aborted")return z;(l.status==="dirty"||g.status==="dirty")&&t.dirty(),o.set(l.value,g.value)}return{status:t.value,value:o}})}else{const o=new Map;for(const u of s){const l=u.key,g=u.value;if(l.status==="aborted"||g.status==="aborted")return z;(l.status==="dirty"||g.status==="dirty")&&t.dirty(),o.set(l.value,g.value)}return{status:t.value,value:o}}}}Bt.create=(n,e,t)=>new Bt({valueType:e,keyType:n,typeName:K.ZodMap,...G(t)});class Ue extends Y{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==M.set)return N(r,{code:T.invalid_type,expected:M.set,received:r.parsedType}),z;const a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(N(r,{code:T.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),t.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(N(r,{code:T.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),t.dirty());const i=this._def.valueType;function s(u){const l=new Set;for(const g of u){if(g.status==="aborted")return z;g.status==="dirty"&&t.dirty(),l.add(g.value)}return{status:t.value,value:l}}const o=[...r.data.values()].map((u,l)=>i._parse(new Ae(r,u,r.path,l)));return r.common.async?Promise.all(o).then(u=>s(u)):s(o)}min(e,t){return new Ue({...this._def,minSize:{value:e,message:Z.toString(t)}})}max(e,t){return new Ue({...this._def,maxSize:{value:e,message:Z.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Ue.create=(n,e)=>new Ue({valueType:n,minSize:null,maxSize:null,typeName:K.ZodSet,...G(e)});class Ge extends Y{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==M.function)return N(t,{code:T.invalid_type,expected:M.function,received:t.parsedType}),z;function r(o,u){return Nt({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Mt(),st].filter(l=>!!l),issueData:{code:T.invalid_arguments,argumentsError:u}})}function a(o,u){return Nt({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Mt(),st].filter(l=>!!l),issueData:{code:T.invalid_return_type,returnTypeError:u}})}const i={errorMap:t.common.contextualErrorMap},s=t.data;return this._def.returns instanceof Je?de(async(...o)=>{const u=new ve([]),l=await this._def.args.parseAsync(o,i).catch(L=>{throw u.addIssue(r(o,L)),u}),g=await s(...l);return await this._def.returns._def.type.parseAsync(g,i).catch(L=>{throw u.addIssue(a(g,L)),u})}):de((...o)=>{const u=this._def.args.safeParse(o,i);if(!u.success)throw new ve([r(o,u.error)]);const l=s(...u.data),g=this._def.returns.safeParse(l,i);if(!g.success)throw new ve([a(l,g.error)]);return g.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Ge({...this._def,args:Oe.create(e).rest(Ze.create())})}returns(e){return new Ge({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new Ge({args:e||Oe.create([]).rest(Ze.create()),returns:t||Ze.create(),typeName:K.ZodFunction,...G(r)})}}class pt extends Y{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}pt.create=(n,e)=>new pt({getter:n,typeName:K.ZodLazy,...G(e)});class ft extends Y{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return N(t,{received:t.data,code:T.invalid_literal,expected:this._def.value}),z}return{status:"valid",value:e.data}}get value(){return this._def.value}}ft.create=(n,e)=>new ft({value:n,typeName:K.ZodLiteral,...G(e)});function Hn(n,e){return new Ne({values:n,typeName:K.ZodEnum,...G(e)})}class Ne extends Y{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return N(t,{expected:J.joinValues(r),received:t.parsedType,code:T.invalid_type}),z}if(this._def.values.indexOf(e.data)===-1){const t=this._getOrReturnCtx(e),r=this._def.values;return N(t,{received:t.data,code:T.invalid_enum_value,options:r}),z}return de(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return Ne.create(e)}exclude(e){return Ne.create(this.options.filter(t=>!e.includes(t)))}}Ne.create=Hn;class mt extends Y{_parse(e){const t=J.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==M.string&&r.parsedType!==M.number){const a=J.objectValues(t);return N(r,{expected:J.joinValues(a),received:r.parsedType,code:T.invalid_type}),z}if(t.indexOf(e.data)===-1){const a=J.objectValues(t);return N(r,{received:r.data,code:T.invalid_enum_value,options:a}),z}return de(e.data)}get enum(){return this._def.values}}mt.create=(n,e)=>new mt({values:n,typeName:K.ZodNativeEnum,...G(e)});class Je extends Y{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==M.promise&&t.common.async===!1)return N(t,{code:T.invalid_type,expected:M.promise,received:t.parsedType}),z;const r=t.parsedType===M.promise?t.data:Promise.resolve(t.data);return de(r.then(a=>this._def.type.parseAsync(a,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Je.create=(n,e)=>new Je({type:n,typeName:K.ZodPromise,...G(e)});class ye extends Y{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===K.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),a=this._def.effect||null;if(a.type==="preprocess"){const s=a.transform(r.data);return r.common.async?Promise.resolve(s).then(o=>this._def.schema._parseAsync({data:o,path:r.path,parent:r})):this._def.schema._parseSync({data:s,path:r.path,parent:r})}const i={addIssue:s=>{N(r,s),s.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="refinement"){const s=o=>{const u=a.refinement(o,i);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?z:(o.status==="dirty"&&t.dirty(),s(o.value),{status:t.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?z:(o.status==="dirty"&&t.dirty(),s(o.value).then(()=>({status:t.value,value:o.value}))))}if(a.type==="transform")if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Lt(s))return s;const o=a.transform(s.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>Lt(s)?Promise.resolve(a.transform(s.value,i)).then(o=>({status:t.value,value:o})):s);J.assertNever(a)}}ye.create=(n,e,t)=>new ye({schema:n,typeName:K.ZodEffects,effect:e,...G(t)});ye.createWithPreprocess=(n,e,t)=>new ye({schema:e,effect:{type:"preprocess",transform:n},typeName:K.ZodEffects,...G(t)});class Se extends Y{_parse(e){return this._getType(e)===M.undefined?de(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Se.create=(n,e)=>new Se({innerType:n,typeName:K.ZodOptional,...G(e)});class Ve extends Y{_parse(e){return this._getType(e)===M.null?de(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ve.create=(n,e)=>new Ve({innerType:n,typeName:K.ZodNullable,...G(e)});class gt extends Y{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===M.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}gt.create=(n,e)=>new gt({innerType:n,typeName:K.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...G(e)});class Ut extends Y{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Rt(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ve(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new ve(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Ut.create=(n,e)=>new Ut({innerType:n,typeName:K.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...G(e)});class Vt extends Y{_parse(e){if(this._getType(e)!==M.nan){const r=this._getOrReturnCtx(e);return N(r,{code:T.invalid_type,expected:M.nan,received:r.parsedType}),z}return{status:"valid",value:e.data}}}Vt.create=n=>new Vt({typeName:K.ZodNaN,...G(n)});const Yn=Symbol("zod_brand");class $r extends Y{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class bt extends Y{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?z:i.status==="dirty"?(t.dirty(),Rr(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?z:a.status==="dirty"?(t.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(e,t){return new bt({in:e,out:t,typeName:K.ZodPipeline})}}const Zr=(n,e={},t)=>n?We.create().superRefine((r,a)=>{var i,s;if(!n(r)){const o=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,u=(s=(i=o.fatal)!==null&&i!==void 0?i:t)!==null&&s!==void 0?s:!0,l=typeof o=="string"?{message:o}:o;a.addIssue({code:"custom",...l,fatal:u})}}):We.create(),Gn={object:ee.lazycreate};var K;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline"})(K||(K={}));const Wn=(n,e={message:`Input not instance of ${n.name}`})=>Zr(t=>t instanceof n,e),Br=_e.create,Ur=De.create,Jn=Vt.create,Qn=Me.create,Vr=ot.create,Xn=Be.create,ea=$t.create,ta=ut.create,ra=ct.create,na=We.create,aa=Ze.create,ia=Ie.create,sa=Zt.create,oa=we.create,ua=ee.create,ca=ee.strictCreate,la=lt.create,da=Yt.create,ha=dt.create,pa=Oe.create,fa=ht.create,ma=Bt.create,ga=Ue.create,ya=Ge.create,ba=pt.create,_a=ft.create,va=Ne.create,wa=mt.create,xa=Je.create,nr=ye.create,Pa=Se.create,Oa=Ve.create,Ea=ye.createWithPreprocess,Ta=bt.create,ka=()=>Br().optional(),ja=()=>Ur().optional(),Sa=()=>Vr().optional(),Aa={string:n=>_e.create({...n,coerce:!0}),number:n=>De.create({...n,coerce:!0}),boolean:n=>ot.create({...n,coerce:!0}),bigint:n=>Me.create({...n,coerce:!0}),date:n=>Be.create({...n,coerce:!0})},Ia=z;var sn=Object.freeze({__proto__:null,defaultErrorMap:st,setErrorMap:zn,getErrorMap:Mt,makeIssue:Nt,EMPTY_PATH:qn,addIssueToContext:N,ParseStatus:ue,INVALID:z,DIRTY:Rr,OK:de,isAborted:tr,isDirty:rr,isValid:Lt,isAsync:Rt,get util(){return J},get objectUtil(){return er},ZodParsedType:M,getParsedType:Ce,ZodType:Y,ZodString:_e,ZodNumber:De,ZodBigInt:Me,ZodBoolean:ot,ZodDate:Be,ZodSymbol:$t,ZodUndefined:ut,ZodNull:ct,ZodAny:We,ZodUnknown:Ze,ZodNever:Ie,ZodVoid:Zt,ZodArray:we,ZodObject:ee,ZodUnion:lt,ZodDiscriminatedUnion:Yt,ZodIntersection:dt,ZodTuple:Oe,ZodRecord:ht,ZodMap:Bt,ZodSet:Ue,ZodFunction:Ge,ZodLazy:pt,ZodLiteral:ft,ZodEnum:Ne,ZodNativeEnum:mt,ZodPromise:Je,ZodEffects:ye,ZodTransformer:ye,ZodOptional:Se,ZodNullable:Ve,ZodDefault:gt,ZodCatch:Ut,ZodNaN:Vt,BRAND:Yn,ZodBranded:$r,ZodPipeline:bt,custom:Zr,Schema:Y,ZodSchema:Y,late:Gn,get ZodFirstPartyTypeKind(){return K},coerce:Aa,any:na,array:oa,bigint:Qn,boolean:Vr,date:Xn,discriminatedUnion:da,effect:nr,enum:va,function:ya,instanceof:Wn,intersection:ha,lazy:ba,literal:_a,map:ma,nan:Jn,nativeEnum:wa,never:ia,null:ra,nullable:Oa,number:Ur,object:ua,oboolean:Sa,onumber:ja,optional:Pa,ostring:ka,pipeline:Ta,preprocess:Ea,promise:xa,record:fa,set:ga,strictObject:ca,string:Br,symbol:ea,transformer:nr,tuple:pa,undefined:ta,union:la,unknown:aa,void:sa,NEVER:Ia,ZodIssueCode:T,quotelessJson:Fn,ZodError:ve});const Ds=Object.freeze(Object.defineProperty({__proto__:null,BRAND:Yn,DIRTY:Rr,EMPTY_PATH:qn,INVALID:z,NEVER:Ia,OK:de,ParseStatus:ue,Schema:Y,ZodAny:We,ZodArray:we,ZodBigInt:Me,ZodBoolean:ot,ZodBranded:$r,ZodCatch:Ut,ZodDate:Be,ZodDefault:gt,ZodDiscriminatedUnion:Yt,ZodEffects:ye,ZodEnum:Ne,ZodError:ve,get ZodFirstPartyTypeKind(){return K},ZodFunction:Ge,ZodIntersection:dt,ZodIssueCode:T,ZodLazy:pt,ZodLiteral:ft,ZodMap:Bt,ZodNaN:Vt,ZodNativeEnum:mt,ZodNever:Ie,ZodNull:ct,ZodNullable:Ve,ZodNumber:De,ZodObject:ee,ZodOptional:Se,ZodParsedType:M,ZodPipeline:bt,ZodPromise:Je,ZodRecord:ht,ZodSchema:Y,ZodSet:Ue,ZodString:_e,ZodSymbol:$t,ZodTransformer:ye,ZodTuple:Oe,ZodType:Y,ZodUndefined:ut,ZodUnion:lt,ZodUnknown:Ze,ZodVoid:Zt,addIssueToContext:N,any:na,array:oa,bigint:Qn,boolean:Vr,coerce:Aa,custom:Zr,date:Xn,default:sn,defaultErrorMap:st,discriminatedUnion:da,effect:nr,enum:va,function:ya,getErrorMap:Mt,getParsedType:Ce,instanceof:Wn,intersection:ha,isAborted:tr,isAsync:Rt,isDirty:rr,isValid:Lt,late:Gn,lazy:ba,literal:_a,makeIssue:Nt,map:ma,nan:Jn,nativeEnum:wa,never:ia,null:ra,nullable:Oa,number:Ur,object:ua,get objectUtil(){return er},oboolean:Sa,onumber:ja,optional:Pa,ostring:ka,pipeline:Ta,preprocess:Ea,promise:xa,quotelessJson:Fn,record:fa,set:ga,setErrorMap:zn,strictObject:ca,string:Br,symbol:ea,transformer:nr,tuple:pa,undefined:ta,union:la,unknown:aa,get util(){return J},void:sa,z:sn},Symbol.toStringTag,{value:"Module"}));var Ms={},or={},_t={};const Fr=qa(Ds);var ur={};Object.defineProperty(ur,"__esModule",{value:!0});ur.parseAnyDef=void 0;function Ns(){return{}}ur.parseAnyDef=Ns;var vt={},Ee={};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.setResponseValueAndErrors=Ee.addErrorMessage=void 0;function Ca(n,e,t,r){r!=null&&r.errorMessages&&t&&(n.errorMessage=Object.assign(Object.assign({},n.errorMessage),{[e]:t}))}Ee.addErrorMessage=Ca;function Ls(n,e,t,r,a){n[e]=t,Ca(n,e,r,a)}Ee.setResponseValueAndErrors=Ls;var on;function Rs(){if(on)return vt;on=1,Object.defineProperty(vt,"__esModule",{value:!0}),vt.parseArrayDef=void 0;const n=Fr,e=Ee,t=ce();function r(a,i){var s,o;const u={type:"array"};return((o=(s=a.type)===null||s===void 0?void 0:s._def)===null||o===void 0?void 0:o.typeName)!==n.ZodFirstPartyTypeKind.ZodAny&&(u.items=(0,t.parseDef)(a.type._def,Object.assign(Object.assign({},i),{currentPath:[...i.currentPath,"items"]}))),a.minLength&&(0,e.setResponseValueAndErrors)(u,"minItems",a.minLength.value,a.minLength.message,i),a.maxLength&&(0,e.setResponseValueAndErrors)(u,"maxItems",a.maxLength.value,a.maxLength.message,i),a.exactLength&&((0,e.setResponseValueAndErrors)(u,"minItems",a.exactLength.value,a.exactLength.message,i),(0,e.setResponseValueAndErrors)(u,"maxItems",a.exactLength.value,a.exactLength.message,i)),u}return vt.parseArrayDef=r,vt}var cr={};Object.defineProperty(cr,"__esModule",{value:!0});cr.parseBigintDef=void 0;const ze=Ee;function $s(n,e){const t={type:"integer",format:"int64"};if(!n.checks)return t;for(const r of n.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?(0,ze.setResponseValueAndErrors)(t,"minimum",r.value,r.message,e):(0,ze.setResponseValueAndErrors)(t,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(t.exclusiveMinimum=!0),(0,ze.setResponseValueAndErrors)(t,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?(0,ze.setResponseValueAndErrors)(t,"maximum",r.value,r.message,e):(0,ze.setResponseValueAndErrors)(t,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(t.exclusiveMaximum=!0),(0,ze.setResponseValueAndErrors)(t,"maximum",r.value,r.message,e));break;case"multipleOf":(0,ze.setResponseValueAndErrors)(t,"multipleOf",r.value,r.message,e);break}return t}cr.parseBigintDef=$s;var lr={};Object.defineProperty(lr,"__esModule",{value:!0});lr.parseBooleanDef=void 0;function Zs(){return{type:"boolean"}}lr.parseBooleanDef=Zs;var wt={},un;function Bs(){if(un)return wt;un=1,Object.defineProperty(wt,"__esModule",{value:!0}),wt.parseBrandedDef=void 0;const n=ce();function e(t,r){return(0,n.parseDef)(t.type._def,r)}return wt.parseBrandedDef=e,wt}var xt={},cn;function Us(){if(cn)return xt;cn=1,Object.defineProperty(xt,"__esModule",{value:!0}),xt.parseCatchDef=void 0;const n=ce(),e=(t,r)=>(0,n.parseDef)(t.innerType._def,r);return xt.parseCatchDef=e,xt}var dr={};Object.defineProperty(dr,"__esModule",{value:!0});dr.parseDateDef=void 0;const ln=Ee;function Vs(n,e){return e.dateStrategy=="integer"?Fs(n,e):{type:"string",format:"date-time"}}dr.parseDateDef=Vs;const Fs=(n,e)=>{const t={type:"integer",format:"unix-time"};for(const r of n.checks)switch(r.kind){case"min":e.target==="jsonSchema7"&&(0,ln.setResponseValueAndErrors)(t,"minimum",r.value,r.message,e);break;case"max":e.target==="jsonSchema7"&&(0,ln.setResponseValueAndErrors)(t,"maximum",r.value,r.message,e);break}return t};var Pt={},dn;function Ks(){if(dn)return Pt;dn=1,Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.parseDefaultDef=void 0;const n=ce();function e(t,r){return Object.assign(Object.assign({},(0,n.parseDef)(t.innerType._def,r)),{default:t.defaultValue()})}return Pt.parseDefaultDef=e,Pt}var Ot={},hn;function zs(){if(hn)return Ot;hn=1,Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.parseEffectsDef=void 0;const n=ce();function e(t,r){return r.effectStrategy==="input"?(0,n.parseDef)(t.schema._def,r):{}}return Ot.parseEffectsDef=e,Ot}var hr={};Object.defineProperty(hr,"__esModule",{value:!0});hr.parseEnumDef=void 0;function qs(n){return{type:"string",enum:n.values}}hr.parseEnumDef=qs;var Et={},pn;function Hs(){if(pn)return Et;pn=1;var n=Jr&&Jr.__rest||function(a,i){var s={};for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.indexOf(o)<0&&(s[o]=a[o]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(a);u<o.length;u++)i.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(a,o[u])&&(s[o[u]]=a[o[u]]);return s};Object.defineProperty(Et,"__esModule",{value:!0}),Et.parseIntersectionDef=void 0;const e=ce(),t=a=>"type"in a&&a.type==="string"?!1:"allOf"in a;function r(a,i){const s=[(0,e.parseDef)(a.left._def,Object.assign(Object.assign({},i),{currentPath:[...i.currentPath,"allOf","0"]})),(0,e.parseDef)(a.right._def,Object.assign(Object.assign({},i),{currentPath:[...i.currentPath,"allOf","1"]}))].filter(l=>!!l);let o=i.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const u=[];return s.forEach(l=>{if(t(l))u.push(...l.allOf),l.unevaluatedProperties===void 0&&(o=void 0);else{let g=l;"additionalProperties"in l&&l.additionalProperties===!1?g=n(l,["additionalProperties"]):o=void 0,u.push(g)}}),u.length?Object.assign({allOf:u},o):void 0}return Et.parseIntersectionDef=r,Et}var pr={};Object.defineProperty(pr,"__esModule",{value:!0});pr.parseLiteralDef=void 0;function Ys(n,e){const t=typeof n.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(n.value)?"array":"object"}:e.target==="openApi3"?{type:t==="bigint"?"integer":t,enum:[n.value]}:{type:t==="bigint"?"integer":t,const:n.value}}pr.parseLiteralDef=Ys;var Tt={},fn;function Gs(){if(fn)return Tt;fn=1,Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.parseMapDef=void 0;const n=ce();function e(t,r){const a=(0,n.parseDef)(t.keyType._def,Object.assign(Object.assign({},r),{currentPath:[...r.currentPath,"items","items","0"]}))||{},i=(0,n.parseDef)(t.valueType._def,Object.assign(Object.assign({},r),{currentPath:[...r.currentPath,"items","items","1"]}))||{};return{type:"array",maxItems:125,items:{type:"array",items:[a,i],minItems:2,maxItems:2}}}return Tt.parseMapDef=e,Tt}var fr={};Object.defineProperty(fr,"__esModule",{value:!0});fr.parseNativeEnumDef=void 0;function Ws(n){const e=n.values,r=Object.keys(n.values).filter(i=>typeof e[e[i]]!="number").map(i=>e[i]),a=Array.from(new Set(r.map(i=>typeof i)));return{type:a.length===1?a[0]==="string"?"string":"number":["string","number"],enum:r}}fr.parseNativeEnumDef=Ws;var mr={};Object.defineProperty(mr,"__esModule",{value:!0});mr.parseNeverDef=void 0;function Js(){return{not:{}}}mr.parseNeverDef=Js;var gr={};Object.defineProperty(gr,"__esModule",{value:!0});gr.parseNullDef=void 0;function Qs(n){return n.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}gr.parseNullDef=Qs;var kt={},Er={},mn;function Da(){return mn||(mn=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.parseUnionDef=n.primitiveMappings=void 0;const e=ce();n.primitiveMappings={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function t(a,i){if(i.target==="openApi3")return r(a,i);const s=a.options instanceof Map?Array.from(a.options.values()):a.options;if(s.every(o=>o._def.typeName in n.primitiveMappings&&(!o._def.checks||!o._def.checks.length))){const o=s.reduce((u,l)=>{const g=n.primitiveMappings[l._def.typeName];return g&&!u.includes(g)?[...u,g]:u},[]);return{type:o.length>1?o:o[0]}}else if(s.every(o=>o._def.typeName==="ZodLiteral"&&!o.description)){const o=s.reduce((u,l)=>{const g=typeof l._def.value;switch(g){case"string":case"number":case"boolean":return[...u,g];case"bigint":return[...u,"integer"];case"object":if(l._def.value===null)return[...u,"null"];case"symbol":case"undefined":case"function":default:return u}},[]);if(o.length===s.length){const u=o.filter((l,g,O)=>O.indexOf(l)===g);return{type:u.length>1?u:u[0],enum:s.reduce((l,g)=>l.includes(g._def.value)?l:[...l,g._def.value],[])}}}else if(s.every(o=>o._def.typeName==="ZodEnum"))return{type:"string",enum:s.reduce((o,u)=>[...o,...u._def.values.filter(l=>!o.includes(l))],[])};return r(a,i)}n.parseUnionDef=t;const r=(a,i)=>{const s=(a.options instanceof Map?Array.from(a.options.values()):a.options).map((o,u)=>(0,e.parseDef)(o._def,Object.assign(Object.assign({},i),{currentPath:[...i.currentPath,"anyOf",`${u}`]}))).filter(o=>!!o&&(!i.strictUnions||typeof o=="object"&&Object.keys(o).length>0));return s.length?{anyOf:s}:void 0}}(Er)),Er}var gn;function Xs(){if(gn)return kt;gn=1,Object.defineProperty(kt,"__esModule",{value:!0}),kt.parseNullableDef=void 0;const n=ce(),e=Da();function t(r,a){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(r.innerType._def.typeName)&&(!r.innerType._def.checks||!r.innerType._def.checks.length))return a.target==="openApi3"?{type:e.primitiveMappings[r.innerType._def.typeName],nullable:!0}:{type:[e.primitiveMappings[r.innerType._def.typeName],"null"]};if(a.target==="openApi3"){const s=(0,n.parseDef)(r.innerType._def,Object.assign(Object.assign({},a),{currentPath:[...a.currentPath]}));return s&&Object.assign(Object.assign({},s),{nullable:!0})}const i=(0,n.parseDef)(r.innerType._def,Object.assign(Object.assign({},a),{currentPath:[...a.currentPath,"anyOf","0"]}));return i&&{anyOf:[i,{type:"null"}]}}return kt.parseNullableDef=t,kt}var yr={};Object.defineProperty(yr,"__esModule",{value:!0});yr.parseNumberDef=void 0;const Re=Ee;function eo(n,e){const t={type:"number"};if(!n.checks)return t;for(const r of n.checks)switch(r.kind){case"int":t.type="integer",(0,Re.addErrorMessage)(t,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?(0,Re.setResponseValueAndErrors)(t,"minimum",r.value,r.message,e):(0,Re.setResponseValueAndErrors)(t,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(t.exclusiveMinimum=!0),(0,Re.setResponseValueAndErrors)(t,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?(0,Re.setResponseValueAndErrors)(t,"maximum",r.value,r.message,e):(0,Re.setResponseValueAndErrors)(t,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(t.exclusiveMaximum=!0),(0,Re.setResponseValueAndErrors)(t,"maximum",r.value,r.message,e));break;case"multipleOf":(0,Re.setResponseValueAndErrors)(t,"multipleOf",r.value,r.message,e);break}return t}yr.parseNumberDef=eo;var qe={},yn;function to(){if(yn)return qe;yn=1,Object.defineProperty(qe,"__esModule",{value:!0}),qe.parseObjectDef=qe.parseObjectDefX=void 0;const n=ce();function e(r,a){var i,s;Object.keys(r.shape()).reduce((u,l)=>{let g=r.shape()[l];const O=g.isOptional();O||(g=Object.assign({},g._def.innerSchema));const L=(0,n.parseDef)(g._def,Object.assign(Object.assign({},a),{currentPath:[...a.currentPath,"properties",l],propertyPath:[...a.currentPath,"properties",l]}));return L!==void 0&&(u.properties[l]=L,O||(u.required||(u.required=[]),u.required.push(l))),u},{type:"object",properties:{},additionalProperties:r.catchall._def.typeName==="ZodNever"?r.unknownKeys==="passthrough":(i=(0,n.parseDef)(r.catchall._def,Object.assign(Object.assign({},a),{currentPath:[...a.currentPath,"additionalProperties"]})))!==null&&i!==void 0?i:!0});const o=Object.assign(Object.assign({type:"object"},Object.entries(r.shape()).reduce((u,[l,g])=>{if(g===void 0||g._def===void 0)return u;const O=(0,n.parseDef)(g._def,Object.assign(Object.assign({},a),{currentPath:[...a.currentPath,"properties",l],propertyPath:[...a.currentPath,"properties",l]}));return O===void 0?u:{properties:Object.assign(Object.assign({},u.properties),{[l]:O}),required:g.isOptional()?u.required:[...u.required,l]}},{properties:{},required:[]})),{additionalProperties:r.catchall._def.typeName==="ZodNever"?r.unknownKeys==="passthrough":(s=(0,n.parseDef)(r.catchall._def,Object.assign(Object.assign({},a),{currentPath:[...a.currentPath,"additionalProperties"]})))!==null&&s!==void 0?s:!0});return o.required.length||delete o.required,o}qe.parseObjectDefX=e;function t(r,a){var i;const s=Object.assign(Object.assign({type:"object"},Object.entries(r.shape()).reduce((o,[u,l])=>{if(l===void 0||l._def===void 0)return o;const g=(0,n.parseDef)(l._def,Object.assign(Object.assign({},a),{currentPath:[...a.currentPath,"properties",u],propertyPath:[...a.currentPath,"properties",u]}));return g===void 0?o:{properties:Object.assign(Object.assign({},o.properties),{[u]:g}),required:l.isOptional()?o.required:[...o.required,u]}},{properties:{},required:[]})),{additionalProperties:r.catchall._def.typeName==="ZodNever"?r.unknownKeys==="passthrough":(i=(0,n.parseDef)(r.catchall._def,Object.assign(Object.assign({},a),{currentPath:[...a.currentPath,"additionalProperties"]})))!==null&&i!==void 0?i:!0});return s.required.length||delete s.required,s}return qe.parseObjectDef=t,qe}var jt={},bn;function ro(){if(bn)return jt;bn=1,Object.defineProperty(jt,"__esModule",{value:!0}),jt.parseOptionalDef=void 0;const n=ce(),e=(t,r)=>{var a;if(r.currentPath.toString()===((a=r.propertyPath)===null||a===void 0?void 0:a.toString()))return(0,n.parseDef)(t.innerType._def,r);const i=(0,n.parseDef)(t.innerType._def,Object.assign(Object.assign({},r),{currentPath:[...r.currentPath,"anyOf","1"]}));return i?{anyOf:[{not:{}},i]}:{}};return jt.parseOptionalDef=e,jt}var St={},_n;function no(){if(_n)return St;_n=1,Object.defineProperty(St,"__esModule",{value:!0}),St.parsePipelineDef=void 0;const n=ce(),e=(t,r)=>{if(r.pipeStrategy==="input")return(0,n.parseDef)(t.in._def,r);const a=(0,n.parseDef)(t.in._def,Object.assign(Object.assign({},r),{currentPath:[...r.currentPath,"allOf","0"]})),i=(0,n.parseDef)(t.out._def,Object.assign(Object.assign({},r),{currentPath:[...r.currentPath,"allOf",a?"1":"0"]}));return{allOf:[a,i].filter(s=>s!==void 0)}};return St.parsePipelineDef=e,St}var At={},vn;function ao(){if(vn)return At;vn=1,Object.defineProperty(At,"__esModule",{value:!0}),At.parsePromiseDef=void 0;const n=ce();function e(t,r){return(0,n.parseDef)(t.type._def,r)}return At.parsePromiseDef=e,At}var It={},Kr={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.parseStringDef=n.emojiPattern=n.ulidPattern=n.cuid2Pattern=n.cuidPattern=n.emailPattern=void 0;const e=Ee;n.emailPattern='^(([^<>()[\\]\\\\.,;:\\s@\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\"]+)*)|(\\".+\\"))@((\\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\])|(\\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\\.[A-Za-z]{2,})+))$',n.cuidPattern="^c[^\\s-]{8,}$",n.cuid2Pattern="^[a-z][a-z0-9]*$",n.ulidPattern="/[0-9A-HJKMNP-TV-Z]{26}/",n.emojiPattern="/^(p{Extended_Pictographic}|p{Emoji_Component})+$/u";function t(s,o){const u={type:"string"};if(s.checks)for(const l of s.checks)switch(l.kind){case"min":(0,e.setResponseValueAndErrors)(u,"minLength",typeof u.minLength=="number"?Math.max(u.minLength,l.value):l.value,l.message,o);break;case"max":(0,e.setResponseValueAndErrors)(u,"maxLength",typeof u.maxLength=="number"?Math.min(u.maxLength,l.value):l.value,l.message,o);break;case"email":switch(o.emailStrategy){case"format:email":a(u,"email",l.message,o);break;case"format:idn-email":a(u,"idn-email",l.message,o);break;case"pattern:zod":i(u,n.emailPattern,l.message,o);break}break;case"url":a(u,"uri",l.message,o);break;case"uuid":a(u,"uuid",l.message,o);break;case"regex":i(u,l.regex.source,l.message,o);break;case"cuid":i(u,n.cuidPattern,l.message,o);break;case"cuid2":i(u,n.cuid2Pattern,l.message,o);break;case"startsWith":i(u,"^"+r(l.value),l.message,o);break;case"endsWith":i(u,r(l.value)+"$",l.message,o);break;case"datetime":a(u,"date-time",l.message,o);break;case"length":(0,e.setResponseValueAndErrors)(u,"minLength",typeof u.minLength=="number"?Math.max(u.minLength,l.value):l.value,l.message,o),(0,e.setResponseValueAndErrors)(u,"maxLength",typeof u.maxLength=="number"?Math.min(u.maxLength,l.value):l.value,l.message,o);break;case"includes":{i(u,r(l.value),l.message,o);break}case"ip":{l.version!=="v6"&&a(u,"ipv4",l.message,o),l.version!=="v4"&&a(u,"ipv6",l.message,o);break}case"emoji":i(u,n.emojiPattern,l.message,o);break;case"ulid":{i(u,n.ulidPattern,l.message,o);break}}return u}n.parseStringDef=t;const r=s=>Array.from(s).map(o=>/[a-zA-Z0-9]/.test(o)?o:`\\${o}`).join(""),a=(s,o,u,l)=>{var g;s.format||!((g=s.anyOf)===null||g===void 0)&&g.some(O=>O.format)?(s.anyOf||(s.anyOf=[]),s.format&&(s.anyOf.push(Object.assign({format:s.format},s.errorMessage&&l.errorMessages&&{errorMessage:{format:s.errorMessage.format}})),delete s.format,s.errorMessage&&(delete s.errorMessage.format,Object.keys(s.errorMessage).length===0&&delete s.errorMessage)),s.anyOf.push(Object.assign({format:o},u&&l.errorMessages&&{errorMessage:{format:u}}))):(0,e.setResponseValueAndErrors)(s,"format",o,u,l)},i=(s,o,u,l)=>{var g;s.pattern||!((g=s.allOf)===null||g===void 0)&&g.some(O=>O.pattern)?(s.allOf||(s.allOf=[]),s.pattern&&(s.allOf.push(Object.assign({pattern:s.pattern},s.errorMessage&&l.errorMessages&&{errorMessage:{pattern:s.errorMessage.pattern}})),delete s.pattern,s.errorMessage&&(delete s.errorMessage.pattern,Object.keys(s.errorMessage).length===0&&delete s.errorMessage)),s.allOf.push(Object.assign({pattern:o},u&&l.errorMessages&&{errorMessage:{pattern:u}}))):(0,e.setResponseValueAndErrors)(s,"pattern",o,u,l)}})(Kr);var wn;function io(){if(wn)return It;wn=1,Object.defineProperty(It,"__esModule",{value:!0}),It.parseRecordDef=void 0;const n=Fr,e=ce(),t=Kr;function r(a,i){var s,o,u,l,g;if(i.target==="openApi3"&&((s=a.keyType)===null||s===void 0?void 0:s._def.typeName)===n.ZodFirstPartyTypeKind.ZodEnum)return{type:"object",required:a.keyType._def.values,properties:a.keyType._def.values.reduce((L,Q)=>{var x;return Object.assign(Object.assign({},L),{[Q]:(x=(0,e.parseDef)(a.valueType._def,Object.assign(Object.assign({},i),{currentPath:[...i.currentPath,"properties",Q]})))!==null&&x!==void 0?x:{}})},{}),additionalProperties:!1};const O={type:"object",additionalProperties:(o=(0,e.parseDef)(a.valueType._def,Object.assign(Object.assign({},i),{currentPath:[...i.currentPath,"additionalProperties"]})))!==null&&o!==void 0?o:{}};if(i.target==="openApi3")return O;if(((u=a.keyType)===null||u===void 0?void 0:u._def.typeName)===n.ZodFirstPartyTypeKind.ZodString&&(!((l=a.keyType._def.checks)===null||l===void 0)&&l.length)){const L=Object.entries((0,t.parseStringDef)(a.keyType._def,i)).reduce((Q,[x,$])=>x==="type"?Q:Object.assign(Object.assign({},Q),{[x]:$}),{});return Object.assign(Object.assign({},O),{propertyNames:L})}else if(((g=a.keyType)===null||g===void 0?void 0:g._def.typeName)===n.ZodFirstPartyTypeKind.ZodEnum)return Object.assign(Object.assign({},O),{propertyNames:{enum:a.keyType._def.values}});return O}return It.parseRecordDef=r,It}var Ct={},xn;function so(){if(xn)return Ct;xn=1,Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.parseSetDef=void 0;const n=Ee,e=ce();function t(r,a){const s={type:"array",uniqueItems:!0,items:(0,e.parseDef)(r.valueType._def,Object.assign(Object.assign({},a),{currentPath:[...a.currentPath,"items"]}))};return r.minSize&&(0,n.setResponseValueAndErrors)(s,"minItems",r.minSize.value,r.minSize.message,a),r.maxSize&&(0,n.setResponseValueAndErrors)(s,"maxItems",r.maxSize.value,r.maxSize.message,a),s}return Ct.parseSetDef=t,Ct}var Dt={},Pn;function oo(){if(Pn)return Dt;Pn=1,Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.parseTupleDef=void 0;const n=ce();function e(t,r){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((a,i)=>(0,n.parseDef)(a._def,Object.assign(Object.assign({},r),{currentPath:[...r.currentPath,"items",`${i}`]}))).reduce((a,i)=>i===void 0?a:[...a,i],[]),additionalItems:(0,n.parseDef)(t.rest._def,Object.assign(Object.assign({},r),{currentPath:[...r.currentPath,"additionalItems"]}))}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((a,i)=>(0,n.parseDef)(a._def,Object.assign(Object.assign({},r),{currentPath:[...r.currentPath,"items",`${i}`]}))).reduce((a,i)=>i===void 0?a:[...a,i],[])}}return Dt.parseTupleDef=e,Dt}var br={};Object.defineProperty(br,"__esModule",{value:!0});br.parseUndefinedDef=void 0;function uo(){return{not:{}}}br.parseUndefinedDef=uo;var _r={};Object.defineProperty(_r,"__esModule",{value:!0});_r.parseUnknownDef=void 0;function co(){return{}}_r.parseUnknownDef=co;var On;function ce(){if(On)return _t;On=1,Object.defineProperty(_t,"__esModule",{value:!0}),_t.parseDef=void 0;const n=Fr,e=ur,t=Rs(),r=cr,a=lr,i=Bs(),s=Us(),o=dr,u=Ks(),l=zs(),g=hr,O=Hs(),L=pr,Q=Gs(),x=fr,$=mr,v=gr,j=Xs(),D=yr,S=to(),k=ro(),U=no(),y=ao(),w=io(),h=so(),f=Kr,d=oo(),b=br,_=Da(),q=_r;function V(A,F,B=!1){const Te=F.seen.get(A);if(Te&&!B){const Qe=H(Te,F);if(Qe!==void 0)return Qe}const Fe={def:A,path:F.currentPath,jsonSchema:void 0};F.seen.set(A,Fe);const Ke=X(A,A.typeName,F);return Ke&&ne(A,F,Ke),Fe.jsonSchema=Ke,Ke}_t.parseDef=V;const H=(A,F)=>{switch(F.$refStrategy){case"root":return{$ref:A.path.length===0?"":A.path.length===1?`${A.path[0]}/`:A.path.join("/")};case"relative":return{$ref:R(F.currentPath,A.path)};case"none":return A.path.length<F.currentPath.length&&A.path.every((B,Te)=>F.currentPath[Te]===B)?(console.warn(`Recursive reference detected at ${F.currentPath.join("/")}! Defaulting to any`),{}):void 0;case"seen":return A.path.length<F.currentPath.length&&A.path.every((B,Te)=>F.currentPath[Te]===B)?(console.warn(`Recursive reference detected at ${F.currentPath.join("/")}! Defaulting to any`),{}):A.jsonSchema}},R=(A,F)=>{let B=0;for(;B<A.length&&B<F.length&&A[B]===F[B];B++);return[(A.length-B).toString(),...F.slice(B)].join("/")},X=(A,F,B)=>{switch(F){case n.ZodFirstPartyTypeKind.ZodString:return(0,f.parseStringDef)(A,B);case n.ZodFirstPartyTypeKind.ZodNumber:return(0,D.parseNumberDef)(A,B);case n.ZodFirstPartyTypeKind.ZodObject:return(0,S.parseObjectDef)(A,B);case n.ZodFirstPartyTypeKind.ZodBigInt:return(0,r.parseBigintDef)(A,B);case n.ZodFirstPartyTypeKind.ZodBoolean:return(0,a.parseBooleanDef)();case n.ZodFirstPartyTypeKind.ZodDate:return(0,o.parseDateDef)(A,B);case n.ZodFirstPartyTypeKind.ZodUndefined:return(0,b.parseUndefinedDef)();case n.ZodFirstPartyTypeKind.ZodNull:return(0,v.parseNullDef)(B);case n.ZodFirstPartyTypeKind.ZodArray:return(0,t.parseArrayDef)(A,B);case n.ZodFirstPartyTypeKind.ZodUnion:case n.ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return(0,_.parseUnionDef)(A,B);case n.ZodFirstPartyTypeKind.ZodIntersection:return(0,O.parseIntersectionDef)(A,B);case n.ZodFirstPartyTypeKind.ZodTuple:return(0,d.parseTupleDef)(A,B);case n.ZodFirstPartyTypeKind.ZodRecord:return(0,w.parseRecordDef)(A,B);case n.ZodFirstPartyTypeKind.ZodLiteral:return(0,L.parseLiteralDef)(A,B);case n.ZodFirstPartyTypeKind.ZodEnum:return(0,g.parseEnumDef)(A);case n.ZodFirstPartyTypeKind.ZodNativeEnum:return(0,x.parseNativeEnumDef)(A);case n.ZodFirstPartyTypeKind.ZodNullable:return(0,j.parseNullableDef)(A,B);case n.ZodFirstPartyTypeKind.ZodOptional:return(0,k.parseOptionalDef)(A,B);case n.ZodFirstPartyTypeKind.ZodMap:return(0,Q.parseMapDef)(A,B);case n.ZodFirstPartyTypeKind.ZodSet:return(0,h.parseSetDef)(A,B);case n.ZodFirstPartyTypeKind.ZodLazy:return V(A.getter()._def,B);case n.ZodFirstPartyTypeKind.ZodPromise:return(0,y.parsePromiseDef)(A,B);case n.ZodFirstPartyTypeKind.ZodNaN:case n.ZodFirstPartyTypeKind.ZodNever:return(0,$.parseNeverDef)();case n.ZodFirstPartyTypeKind.ZodEffects:return(0,l.parseEffectsDef)(A,B);case n.ZodFirstPartyTypeKind.ZodAny:return(0,e.parseAnyDef)();case n.ZodFirstPartyTypeKind.ZodUnknown:return(0,q.parseUnknownDef)();case n.ZodFirstPartyTypeKind.ZodDefault:return(0,u.parseDefaultDef)(A,B);case n.ZodFirstPartyTypeKind.ZodBranded:return(0,i.parseBrandedDef)(A,B);case n.ZodFirstPartyTypeKind.ZodCatch:return(0,s.parseCatchDef)(A,B);case n.ZodFirstPartyTypeKind.ZodPipeline:return(0,U.parsePipelineDef)(A,B);case n.ZodFirstPartyTypeKind.ZodFunction:case n.ZodFirstPartyTypeKind.ZodVoid:case n.ZodFirstPartyTypeKind.ZodSymbol:return;default:return(Te=>{})()}},ne=(A,F,B)=>(A.description&&(B.description=A.description,F.markdownDescription&&(B.markdownDescription=A.description)),B);return _t}var vr={},Ma={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getDefaultOptions=n.defaultOptions=void 0,n.defaultOptions={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"string",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,emailStrategy:"format:email"};const e=t=>typeof t=="string"?Object.assign(Object.assign({},n.defaultOptions),{name:t}):Object.assign(Object.assign({},n.defaultOptions),t);n.getDefaultOptions=e})(Ma);Object.defineProperty(vr,"__esModule",{value:!0});vr.getRefs=void 0;const lo=Ma,ho=n=>{const e=(0,lo.getDefaultOptions)(n),t=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return Object.assign(Object.assign({},e),{currentPath:t,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([r,a])=>[a._def,{def:a._def,path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))})};vr.getRefs=ho;Object.defineProperty(or,"__esModule",{value:!0});or.zodToJsonSchema=void 0;const En=ce(),po=vr,fo=(n,e)=>{var t;const r=(0,po.getRefs)(e),a=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((u,[l,g])=>{var O;return Object.assign(Object.assign({},u),{[l]:(O=(0,En.parseDef)(g._def,Object.assign(Object.assign({},r),{currentPath:[...r.basePath,r.definitionPath,l]}),!0))!==null&&O!==void 0?O:{}})},{}):void 0,i=typeof e=="string"?e:e==null?void 0:e.name,s=(t=(0,En.parseDef)(n._def,i===void 0?r:Object.assign(Object.assign({},r),{currentPath:[...r.basePath,r.definitionPath,i]}),!1))!==null&&t!==void 0?t:{},o=i===void 0?a?Object.assign(Object.assign({},s),{[r.definitionPath]:a}):s:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,i].join("/"),[r.definitionPath]:Object.assign(Object.assign({},a),{[i]:s})};return r.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":r.target==="jsonSchema2019-09"&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),o};or.zodToJsonSchema=fo;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.zodToJsonSchema=void 0;const e=or;Object.defineProperty(n,"zodToJsonSchema",{enumerable:!0,get:function(){return e.zodToJsonSchema}}),n.default=e.zodToJsonSchema})(Ms);/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function Na(n){return typeof n>"u"||n===null}function mo(n){return typeof n=="object"&&n!==null}function go(n){return Array.isArray(n)?n:Na(n)?[]:[n]}function yo(n,e){var t,r,a,i;if(e)for(i=Object.keys(e),t=0,r=i.length;t<r;t+=1)a=i[t],n[a]=e[a];return n}function bo(n,e){var t="",r;for(r=0;r<e;r+=1)t+=n;return t}function _o(n){return n===0&&Number.NEGATIVE_INFINITY===1/n}var vo=Na,wo=mo,xo=go,Po=bo,Oo=_o,Eo=yo,zr={isNothing:vo,isObject:wo,toArray:xo,repeat:Po,isNegativeZero:Oo,extend:Eo};function La(n,e){var t="",r=n.reason||"(unknown reason)";return n.mark?(n.mark.name&&(t+='in "'+n.mark.name+'" '),t+="("+(n.mark.line+1)+":"+(n.mark.column+1)+")",!e&&n.mark.snippet&&(t+=`

`+n.mark.snippet),r+" "+t):r}function Ft(n,e){Error.call(this),this.name="YAMLException",this.reason=n,this.mark=e,this.message=La(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Ft.prototype=Object.create(Error.prototype);Ft.prototype.constructor=Ft;Ft.prototype.toString=function(e){return this.name+": "+La(this,e)};var Ye=Ft,To=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],ko=["scalar","sequence","mapping"];function jo(n){var e={};return n!==null&&Object.keys(n).forEach(function(t){n[t].forEach(function(r){e[String(r)]=t})}),e}function So(n,e){if(e=e||{},Object.keys(e).forEach(function(t){if(To.indexOf(t)===-1)throw new Ye('Unknown option "'+t+'" is met in definition of "'+n+'" YAML type.')}),this.options=e,this.tag=n,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(t){return t},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=jo(e.styleAliases||null),ko.indexOf(this.kind)===-1)throw new Ye('Unknown kind "'+this.kind+'" is specified for "'+n+'" YAML type.')}var le=So;function Tn(n,e){var t=[];return n[e].forEach(function(r){var a=t.length;t.forEach(function(i,s){i.tag===r.tag&&i.kind===r.kind&&i.multi===r.multi&&(a=s)}),t[a]=r}),t}function Ao(){var n={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,t;function r(a){a.multi?(n.multi[a.kind].push(a),n.multi.fallback.push(a)):n[a.kind][a.tag]=n.fallback[a.tag]=a}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(r);return n}function jr(n){return this.extend(n)}jr.prototype.extend=function(e){var t=[],r=[];if(e instanceof le)r.push(e);else if(Array.isArray(e))r=r.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(r=r.concat(e.explicit));else throw new Ye("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");t.forEach(function(i){if(!(i instanceof le))throw new Ye("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(i.loadKind&&i.loadKind!=="scalar")throw new Ye("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(i.multi)throw new Ye("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(i){if(!(i instanceof le))throw new Ye("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var a=Object.create(jr.prototype);return a.implicit=(this.implicit||[]).concat(t),a.explicit=(this.explicit||[]).concat(r),a.compiledImplicit=Tn(a,"implicit"),a.compiledExplicit=Tn(a,"explicit"),a.compiledTypeMap=Ao(a.compiledImplicit,a.compiledExplicit),a};var Io=jr,Co=new le("tag:yaml.org,2002:str",{kind:"scalar",construct:function(n){return n!==null?n:""}}),Do=new le("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(n){return n!==null?n:[]}}),Mo=new le("tag:yaml.org,2002:map",{kind:"mapping",construct:function(n){return n!==null?n:{}}}),No=new Io({explicit:[Co,Do,Mo]});function Lo(n){if(n===null)return!0;var e=n.length;return e===1&&n==="~"||e===4&&(n==="null"||n==="Null"||n==="NULL")}function Ro(){return null}function $o(n){return n===null}var Zo=new le("tag:yaml.org,2002:null",{kind:"scalar",resolve:Lo,construct:Ro,predicate:$o,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function Bo(n){if(n===null)return!1;var e=n.length;return e===4&&(n==="true"||n==="True"||n==="TRUE")||e===5&&(n==="false"||n==="False"||n==="FALSE")}function Uo(n){return n==="true"||n==="True"||n==="TRUE"}function Vo(n){return Object.prototype.toString.call(n)==="[object Boolean]"}var Fo=new le("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Bo,construct:Uo,predicate:Vo,represent:{lowercase:function(n){return n?"true":"false"},uppercase:function(n){return n?"TRUE":"FALSE"},camelcase:function(n){return n?"True":"False"}},defaultStyle:"lowercase"});function Ko(n){return 48<=n&&n<=57||65<=n&&n<=70||97<=n&&n<=102}function zo(n){return 48<=n&&n<=55}function qo(n){return 48<=n&&n<=57}function Ho(n){if(n===null)return!1;var e=n.length,t=0,r=!1,a;if(!e)return!1;if(a=n[t],(a==="-"||a==="+")&&(a=n[++t]),a==="0"){if(t+1===e)return!0;if(a=n[++t],a==="b"){for(t++;t<e;t++)if(a=n[t],a!=="_"){if(a!=="0"&&a!=="1")return!1;r=!0}return r&&a!=="_"}if(a==="x"){for(t++;t<e;t++)if(a=n[t],a!=="_"){if(!Ko(n.charCodeAt(t)))return!1;r=!0}return r&&a!=="_"}if(a==="o"){for(t++;t<e;t++)if(a=n[t],a!=="_"){if(!zo(n.charCodeAt(t)))return!1;r=!0}return r&&a!=="_"}}if(a==="_")return!1;for(;t<e;t++)if(a=n[t],a!=="_"){if(!qo(n.charCodeAt(t)))return!1;r=!0}return!(!r||a==="_")}function Yo(n){var e=n,t=1,r;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),r=e[0],(r==="-"||r==="+")&&(r==="-"&&(t=-1),e=e.slice(1),r=e[0]),e==="0")return 0;if(r==="0"){if(e[1]==="b")return t*parseInt(e.slice(2),2);if(e[1]==="x")return t*parseInt(e.slice(2),16);if(e[1]==="o")return t*parseInt(e.slice(2),8)}return t*parseInt(e,10)}function Go(n){return Object.prototype.toString.call(n)==="[object Number]"&&n%1===0&&!zr.isNegativeZero(n)}var Wo=new le("tag:yaml.org,2002:int",{kind:"scalar",resolve:Ho,construct:Yo,predicate:Go,represent:{binary:function(n){return n>=0?"0b"+n.toString(2):"-0b"+n.toString(2).slice(1)},octal:function(n){return n>=0?"0o"+n.toString(8):"-0o"+n.toString(8).slice(1)},decimal:function(n){return n.toString(10)},hexadecimal:function(n){return n>=0?"0x"+n.toString(16).toUpperCase():"-0x"+n.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Jo=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Qo(n){return!(n===null||!Jo.test(n)||n[n.length-1]==="_")}function Xo(n){var e,t;return e=n.replace(/_/g,"").toLowerCase(),t=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?t===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:t*parseFloat(e,10)}var eu=/^[-+]?[0-9]+e/;function tu(n,e){var t;if(isNaN(n))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===n)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===n)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(zr.isNegativeZero(n))return"-0.0";return t=n.toString(10),eu.test(t)?t.replace("e",".e"):t}function ru(n){return Object.prototype.toString.call(n)==="[object Number]"&&(n%1!==0||zr.isNegativeZero(n))}var nu=new le("tag:yaml.org,2002:float",{kind:"scalar",resolve:Qo,construct:Xo,predicate:ru,represent:tu,defaultStyle:"lowercase"}),au=No.extend({implicit:[Zo,Fo,Wo,nu]}),iu=au,Ra=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),$a=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function su(n){return n===null?!1:Ra.exec(n)!==null||$a.exec(n)!==null}function ou(n){var e,t,r,a,i,s,o,u=0,l=null,g,O,L;if(e=Ra.exec(n),e===null&&(e=$a.exec(n)),e===null)throw new Error("Date resolve error");if(t=+e[1],r=+e[2]-1,a=+e[3],!e[4])return new Date(Date.UTC(t,r,a));if(i=+e[4],s=+e[5],o=+e[6],e[7]){for(u=e[7].slice(0,3);u.length<3;)u+="0";u=+u}return e[9]&&(g=+e[10],O=+(e[11]||0),l=(g*60+O)*6e4,e[9]==="-"&&(l=-l)),L=new Date(Date.UTC(t,r,a,i,s,o,u)),l&&L.setTime(L.getTime()-l),L}function uu(n){return n.toISOString()}var cu=new le("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:su,construct:ou,instanceOf:Date,represent:uu});function lu(n){return n==="<<"||n===null}var du=new le("tag:yaml.org,2002:merge",{kind:"scalar",resolve:lu}),qr=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function hu(n){if(n===null)return!1;var e,t,r=0,a=n.length,i=qr;for(t=0;t<a;t++)if(e=i.indexOf(n.charAt(t)),!(e>64)){if(e<0)return!1;r+=6}return r%8===0}function pu(n){var e,t,r=n.replace(/[\r\n=]/g,""),a=r.length,i=qr,s=0,o=[];for(e=0;e<a;e++)e%4===0&&e&&(o.push(s>>16&255),o.push(s>>8&255),o.push(s&255)),s=s<<6|i.indexOf(r.charAt(e));return t=a%4*6,t===0?(o.push(s>>16&255),o.push(s>>8&255),o.push(s&255)):t===18?(o.push(s>>10&255),o.push(s>>2&255)):t===12&&o.push(s>>4&255),new Uint8Array(o)}function fu(n){var e="",t=0,r,a,i=n.length,s=qr;for(r=0;r<i;r++)r%3===0&&r&&(e+=s[t>>18&63],e+=s[t>>12&63],e+=s[t>>6&63],e+=s[t&63]),t=(t<<8)+n[r];return a=i%3,a===0?(e+=s[t>>18&63],e+=s[t>>12&63],e+=s[t>>6&63],e+=s[t&63]):a===2?(e+=s[t>>10&63],e+=s[t>>4&63],e+=s[t<<2&63],e+=s[64]):a===1&&(e+=s[t>>2&63],e+=s[t<<4&63],e+=s[64],e+=s[64]),e}function mu(n){return Object.prototype.toString.call(n)==="[object Uint8Array]"}var gu=new le("tag:yaml.org,2002:binary",{kind:"scalar",resolve:hu,construct:pu,predicate:mu,represent:fu}),yu=Object.prototype.hasOwnProperty,bu=Object.prototype.toString;function _u(n){if(n===null)return!0;var e=[],t,r,a,i,s,o=n;for(t=0,r=o.length;t<r;t+=1){if(a=o[t],s=!1,bu.call(a)!=="[object Object]")return!1;for(i in a)if(yu.call(a,i))if(!s)s=!0;else return!1;if(!s)return!1;if(e.indexOf(i)===-1)e.push(i);else return!1}return!0}function vu(n){return n!==null?n:[]}var wu=new le("tag:yaml.org,2002:omap",{kind:"sequence",resolve:_u,construct:vu}),xu=Object.prototype.toString;function Pu(n){if(n===null)return!0;var e,t,r,a,i,s=n;for(i=new Array(s.length),e=0,t=s.length;e<t;e+=1){if(r=s[e],xu.call(r)!=="[object Object]"||(a=Object.keys(r),a.length!==1))return!1;i[e]=[a[0],r[a[0]]]}return!0}function Ou(n){if(n===null)return[];var e,t,r,a,i,s=n;for(i=new Array(s.length),e=0,t=s.length;e<t;e+=1)r=s[e],a=Object.keys(r),i[e]=[a[0],r[a[0]]];return i}var Eu=new le("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Pu,construct:Ou}),Tu=Object.prototype.hasOwnProperty;function ku(n){if(n===null)return!0;var e,t=n;for(e in t)if(Tu.call(t,e)&&t[e]!==null)return!1;return!0}function ju(n){return n!==null?n:{}}var Su=new le("tag:yaml.org,2002:set",{kind:"mapping",resolve:ku,construct:ju});iu.extend({implicit:[cu,du],explicit:[gu,wu,Eu,Su]});function kn(n){return n===48?"\0":n===97?"\x07":n===98?"\b":n===116||n===9?"	":n===110?`
`:n===118?"\v":n===102?"\f":n===114?"\r":n===101?"\x1B":n===32?" ":n===34?'"':n===47?"/":n===92?"\\":n===78?"":n===95?"":n===76?"\u2028":n===80?"\u2029":""}var Au=new Array(256),Iu=new Array(256);for(var tt=0;tt<256;tt++)Au[tt]=kn(tt)?1:0,Iu[tt]=kn(tt);var Za={exports:{}};(function(n,e){(function(t){n.exports=t()})(function(){return function t(r,a,i){function s(l,g){if(!a[l]){if(!r[l]){var O=typeof Gt=="function"&&Gt;if(!g&&O)return O(l,!0);if(o)return o(l,!0);throw new Error("Cannot find module '"+l+"'")}g=a[l]={exports:{}},r[l][0].call(g.exports,function(L){var Q=r[l][1][L];return s(Q||L)},g,g.exports,t,r,a,i)}return a[l].exports}for(var o=typeof Gt=="function"&&Gt,u=0;u<i.length;u++)s(i[u]);return s}({1:[function(t,r,a){(function(i,s,o,u,l,g,O,L,Q){var x=t("crypto");function $(y,w){w=D(y,w);var h;return(h=w.algorithm!=="passthrough"?x.createHash(w.algorithm):new U).write===void 0&&(h.write=h.update,h.end=h.update),k(w,h).dispatch(y),h.update||h.end(""),h.digest?h.digest(w.encoding==="buffer"?void 0:w.encoding):(y=h.read(),w.encoding!=="buffer"?y.toString(w.encoding):y)}(a=r.exports=$).sha1=function(y){return $(y)},a.keys=function(y){return $(y,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},a.MD5=function(y){return $(y,{algorithm:"md5",encoding:"hex"})},a.keysMD5=function(y){return $(y,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var v=x.getHashes?x.getHashes().slice():["sha1","md5"],j=(v.push("passthrough"),["buffer","hex","binary","base64"]);function D(y,w){var h={};if(h.algorithm=(w=w||{}).algorithm||"sha1",h.encoding=w.encoding||"hex",h.excludeValues=!!w.excludeValues,h.algorithm=h.algorithm.toLowerCase(),h.encoding=h.encoding.toLowerCase(),h.ignoreUnknown=w.ignoreUnknown===!0,h.respectType=w.respectType!==!1,h.respectFunctionNames=w.respectFunctionNames!==!1,h.respectFunctionProperties=w.respectFunctionProperties!==!1,h.unorderedArrays=w.unorderedArrays===!0,h.unorderedSets=w.unorderedSets!==!1,h.unorderedObjects=w.unorderedObjects!==!1,h.replacer=w.replacer||void 0,h.excludeKeys=w.excludeKeys||void 0,y===void 0)throw new Error("Object argument required.");for(var f=0;f<v.length;++f)v[f].toLowerCase()===h.algorithm.toLowerCase()&&(h.algorithm=v[f]);if(v.indexOf(h.algorithm)===-1)throw new Error('Algorithm "'+h.algorithm+'"  not supported. supported values: '+v.join(", "));if(j.indexOf(h.encoding)===-1&&h.algorithm!=="passthrough")throw new Error('Encoding "'+h.encoding+'"  not supported. supported values: '+j.join(", "));return h}function S(y){if(typeof y=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(y))!=null}function k(y,w,h){h=h||[];function f(d){return w.update?w.update(d,"utf8"):w.write(d,"utf8")}return{dispatch:function(d){return this["_"+((d=y.replacer?y.replacer(d):d)===null?"null":typeof d)](d)},_object:function(d){var b,_=Object.prototype.toString.call(d),q=/\[object (.*)\]/i.exec(_);if(q=(q=q?q[1]:"unknown:["+_+"]").toLowerCase(),0<=(_=h.indexOf(d)))return this.dispatch("[CIRCULAR:"+_+"]");if(h.push(d),o!==void 0&&o.isBuffer&&o.isBuffer(d))return f("buffer:"),f(d);if(q==="object"||q==="function"||q==="asyncfunction")return _=Object.keys(d),y.unorderedObjects&&(_=_.sort()),y.respectType===!1||S(d)||_.splice(0,0,"prototype","__proto__","constructor"),y.excludeKeys&&(_=_.filter(function(V){return!y.excludeKeys(V)})),f("object:"+_.length+":"),b=this,_.forEach(function(V){b.dispatch(V),f(":"),y.excludeValues||b.dispatch(d[V]),f(",")});if(!this["_"+q]){if(y.ignoreUnknown)return f("["+q+"]");throw new Error('Unknown object type "'+q+'"')}this["_"+q](d)},_array:function(d,V){V=V!==void 0?V:y.unorderedArrays!==!1;var _=this;if(f("array:"+d.length+":"),!V||d.length<=1)return d.forEach(function(H){return _.dispatch(H)});var q=[],V=d.map(function(H){var R=new U,X=h.slice();return k(y,R,X).dispatch(H),q=q.concat(X.slice(h.length)),R.read().toString()});return h=h.concat(q),V.sort(),this._array(V,!1)},_date:function(d){return f("date:"+d.toJSON())},_symbol:function(d){return f("symbol:"+d.toString())},_error:function(d){return f("error:"+d.toString())},_boolean:function(d){return f("bool:"+d.toString())},_string:function(d){f("string:"+d.length+":"),f(d.toString())},_function:function(d){f("fn:"),S(d)?this.dispatch("[native]"):this.dispatch(d.toString()),y.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(d.name)),y.respectFunctionProperties&&this._object(d)},_number:function(d){return f("number:"+d.toString())},_xml:function(d){return f("xml:"+d.toString())},_null:function(){return f("Null")},_undefined:function(){return f("Undefined")},_regexp:function(d){return f("regex:"+d.toString())},_uint8array:function(d){return f("uint8array:"),this.dispatch(Array.prototype.slice.call(d))},_uint8clampedarray:function(d){return f("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(d))},_int8array:function(d){return f("int8array:"),this.dispatch(Array.prototype.slice.call(d))},_uint16array:function(d){return f("uint16array:"),this.dispatch(Array.prototype.slice.call(d))},_int16array:function(d){return f("int16array:"),this.dispatch(Array.prototype.slice.call(d))},_uint32array:function(d){return f("uint32array:"),this.dispatch(Array.prototype.slice.call(d))},_int32array:function(d){return f("int32array:"),this.dispatch(Array.prototype.slice.call(d))},_float32array:function(d){return f("float32array:"),this.dispatch(Array.prototype.slice.call(d))},_float64array:function(d){return f("float64array:"),this.dispatch(Array.prototype.slice.call(d))},_arraybuffer:function(d){return f("arraybuffer:"),this.dispatch(new Uint8Array(d))},_url:function(d){return f("url:"+d.toString())},_map:function(d){return f("map:"),d=Array.from(d),this._array(d,y.unorderedSets!==!1)},_set:function(d){return f("set:"),d=Array.from(d),this._array(d,y.unorderedSets!==!1)},_file:function(d){return f("file:"),this.dispatch([d.name,d.size,d.type,d.lastModfied])},_blob:function(){if(y.ignoreUnknown)return f("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return f("domwindow")},_bigint:function(d){return f("bigint:"+d.toString())},_process:function(){return f("process")},_timer:function(){return f("timer")},_pipe:function(){return f("pipe")},_tcp:function(){return f("tcp")},_udp:function(){return f("udp")},_tty:function(){return f("tty")},_statwatcher:function(){return f("statwatcher")},_securecontext:function(){return f("securecontext")},_connection:function(){return f("connection")},_zlib:function(){return f("zlib")},_context:function(){return f("context")},_nodescript:function(){return f("nodescript")},_httpparser:function(){return f("httpparser")},_dataview:function(){return f("dataview")},_signal:function(){return f("signal")},_fsevent:function(){return f("fsevent")},_tlswrap:function(){return f("tlswrap")}}}function U(){return{buf:"",write:function(y){this.buf+=y},end:function(y){this.buf+=y},read:function(){return this.buf}}}a.writeToStream=function(y,w,h){return h===void 0&&(h=w,w={}),k(w=D(y,w),h).dispatch(y)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(t,r,a){(function(i,s,o,u,l,g,O,L,Q){(function(x){var $=typeof Uint8Array<"u"?Uint8Array:Array,v="+".charCodeAt(0),j="/".charCodeAt(0),D="0".charCodeAt(0),S="a".charCodeAt(0),k="A".charCodeAt(0),U="-".charCodeAt(0),y="_".charCodeAt(0);function w(h){return h=h.charCodeAt(0),h===v||h===U?62:h===j||h===y?63:h<D?-1:h<D+10?h-D+26+26:h<k+26?h-k:h<S+26?h-S+26:void 0}x.toByteArray=function(h){var f,d;if(0<h.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var b=h.length,b=h.charAt(b-2)==="="?2:h.charAt(b-1)==="="?1:0,_=new $(3*h.length/4-b),q=0<b?h.length-4:h.length,V=0;function H(R){_[V++]=R}for(f=0;f<q;f+=4,0)H((16711680&(d=w(h.charAt(f))<<18|w(h.charAt(f+1))<<12|w(h.charAt(f+2))<<6|w(h.charAt(f+3))))>>16),H((65280&d)>>8),H(255&d);return b==2?H(255&(d=w(h.charAt(f))<<2|w(h.charAt(f+1))>>4)):b==1&&(H((d=w(h.charAt(f))<<10|w(h.charAt(f+1))<<4|w(h.charAt(f+2))>>2)>>8&255),H(255&d)),_},x.fromByteArray=function(h){var f,d,b,_,q=h.length%3,V="";function H(R){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(R)}for(f=0,b=h.length-q;f<b;f+=3)d=(h[f]<<16)+(h[f+1]<<8)+h[f+2],V+=H((_=d)>>18&63)+H(_>>12&63)+H(_>>6&63)+H(63&_);switch(q){case 1:V=(V+=H((d=h[h.length-1])>>2))+H(d<<4&63)+"==";break;case 2:V=(V=(V+=H((d=(h[h.length-2]<<8)+h[h.length-1])>>10))+H(d>>4&63))+H(d<<2&63)+"="}return V}})(a===void 0?this.base64js={}:a)}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(t,r,a){(function(i,s,v,u,l,g,O,L,Q){var x=t("base64-js"),$=t("ieee754");function v(c,p,m){if(!(this instanceof v))return new v(c,p,m);var E,P,C,W,te=typeof c;if(p==="base64"&&te=="string")for(c=(W=c).trim?W.trim():W.replace(/^\s+|\s+$/g,"");c.length%4!=0;)c+="=";if(te=="number")E=ne(c);else if(te=="string")E=v.byteLength(c,p);else{if(te!="object")throw new Error("First argument needs to be a number, array or string.");E=ne(c.length)}if(v._useTypedArrays?P=v._augment(new Uint8Array(E)):((P=this).length=E,P._isBuffer=!0),v._useTypedArrays&&typeof c.byteLength=="number")P._set(c);else if(A(W=c)||v.isBuffer(W)||W&&typeof W=="object"&&typeof W.length=="number")for(C=0;C<E;C++)v.isBuffer(c)?P[C]=c.readUInt8(C):P[C]=c[C];else if(te=="string")P.write(c,0,p);else if(te=="number"&&!v._useTypedArrays&&!m)for(C=0;C<E;C++)P[C]=0;return P}function j(c,p,m,E){return v._charsWritten=Fe(function(P){for(var C=[],W=0;W<P.length;W++)C.push(255&P.charCodeAt(W));return C}(p),c,m,E)}function D(c,p,m,E){return v._charsWritten=Fe(function(P){for(var C,W,te=[],ae=0;ae<P.length;ae++)W=P.charCodeAt(ae),C=W>>8,W=W%256,te.push(W),te.push(C);return te}(p),c,m,E)}function S(c,p,m){var E="";m=Math.min(c.length,m);for(var P=p;P<m;P++)E+=String.fromCharCode(c[P]);return E}function k(c,p,m,C){C||(I(typeof m=="boolean","missing or invalid endian"),I(p!=null,"missing offset"),I(p+1<c.length,"Trying to read beyond buffer length"));var P,C=c.length;if(!(C<=p))return m?(P=c[p],p+1<C&&(P|=c[p+1]<<8)):(P=c[p]<<8,p+1<C&&(P|=c[p+1])),P}function U(c,p,m,C){C||(I(typeof m=="boolean","missing or invalid endian"),I(p!=null,"missing offset"),I(p+3<c.length,"Trying to read beyond buffer length"));var P,C=c.length;if(!(C<=p))return m?(p+2<C&&(P=c[p+2]<<16),p+1<C&&(P|=c[p+1]<<8),P|=c[p],p+3<C&&(P+=c[p+3]<<24>>>0)):(p+1<C&&(P=c[p+1]<<16),p+2<C&&(P|=c[p+2]<<8),p+3<C&&(P|=c[p+3]),P+=c[p]<<24>>>0),P}function y(c,p,m,E){if(E||(I(typeof m=="boolean","missing or invalid endian"),I(p!=null,"missing offset"),I(p+1<c.length,"Trying to read beyond buffer length")),!(c.length<=p))return E=k(c,p,m,!0),32768&E?-1*(65535-E+1):E}function w(c,p,m,E){if(E||(I(typeof m=="boolean","missing or invalid endian"),I(p!=null,"missing offset"),I(p+3<c.length,"Trying to read beyond buffer length")),!(c.length<=p))return E=U(c,p,m,!0),2147483648&E?-1*(4294967295-E+1):E}function h(c,p,m,E){return E||(I(typeof m=="boolean","missing or invalid endian"),I(p+3<c.length,"Trying to read beyond buffer length")),$.read(c,p,m,23,4)}function f(c,p,m,E){return E||(I(typeof m=="boolean","missing or invalid endian"),I(p+7<c.length,"Trying to read beyond buffer length")),$.read(c,p,m,52,8)}function d(c,p,m,E,P){if(P||(I(p!=null,"missing value"),I(typeof E=="boolean","missing or invalid endian"),I(m!=null,"missing offset"),I(m+1<c.length,"trying to write beyond buffer length"),Qe(p,65535)),P=c.length,!(P<=m))for(var C=0,W=Math.min(P-m,2);C<W;C++)c[m+C]=(p&255<<8*(E?C:1-C))>>>8*(E?C:1-C)}function b(c,p,m,E,P){if(P||(I(p!=null,"missing value"),I(typeof E=="boolean","missing or invalid endian"),I(m!=null,"missing offset"),I(m+3<c.length,"trying to write beyond buffer length"),Qe(p,4294967295)),P=c.length,!(P<=m))for(var C=0,W=Math.min(P-m,4);C<W;C++)c[m+C]=p>>>8*(E?C:3-C)&255}function _(c,p,m,E,P){P||(I(p!=null,"missing value"),I(typeof E=="boolean","missing or invalid endian"),I(m!=null,"missing offset"),I(m+1<c.length,"Trying to write beyond buffer length"),wr(p,32767,-32768)),c.length<=m||d(c,0<=p?p:65535+p+1,m,E,P)}function q(c,p,m,E,P){P||(I(p!=null,"missing value"),I(typeof E=="boolean","missing or invalid endian"),I(m!=null,"missing offset"),I(m+3<c.length,"Trying to write beyond buffer length"),wr(p,2147483647,-2147483648)),c.length<=m||b(c,0<=p?p:4294967295+p+1,m,E,P)}function V(c,p,m,E,P){P||(I(p!=null,"missing value"),I(typeof E=="boolean","missing or invalid endian"),I(m!=null,"missing offset"),I(m+3<c.length,"Trying to write beyond buffer length"),Gr(p,34028234663852886e22,-34028234663852886e22)),c.length<=m||$.write(c,p,m,E,23,4)}function H(c,p,m,E,P){P||(I(p!=null,"missing value"),I(typeof E=="boolean","missing or invalid endian"),I(m!=null,"missing offset"),I(m+7<c.length,"Trying to write beyond buffer length"),Gr(p,17976931348623157e292,-17976931348623157e292)),c.length<=m||$.write(c,p,m,E,52,8)}a.Buffer=v,a.SlowBuffer=v,a.INSPECT_MAX_BYTES=50,v.poolSize=8192,v._useTypedArrays=function(){try{var c=new ArrayBuffer(0),p=new Uint8Array(c);return p.foo=function(){return 42},p.foo()===42&&typeof p.subarray=="function"}catch{return!1}}(),v.isEncoding=function(c){switch(String(c).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},v.isBuffer=function(c){return!(c==null||!c._isBuffer)},v.byteLength=function(c,p){var m;switch(c+="",p||"utf8"){case"hex":m=c.length/2;break;case"utf8":case"utf-8":m=B(c).length;break;case"ascii":case"binary":case"raw":m=c.length;break;case"base64":m=Te(c).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":m=2*c.length;break;default:throw new Error("Unknown encoding")}return m},v.concat=function(c,p){if(I(A(c),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),c.length===0)return new v(0);if(c.length===1)return c[0];if(typeof p!="number")for(P=p=0;P<c.length;P++)p+=c[P].length;for(var m=new v(p),E=0,P=0;P<c.length;P++){var C=c[P];C.copy(m,E),E+=C.length}return m},v.prototype.write=function(c,p,m,E){isFinite(p)?isFinite(m)||(E=m,m=void 0):(ae=E,E=p,p=m,m=ae),p=Number(p)||0;var P,C,W,te,ae=this.length-p;switch((!m||ae<(m=Number(m)))&&(m=ae),E=String(E||"utf8").toLowerCase()){case"hex":P=function(xe,he,pe,ie){pe=Number(pe)||0;var re=xe.length-pe;(!ie||re<(ie=Number(ie)))&&(ie=re),I((re=he.length)%2==0,"Invalid hex string"),re/2<ie&&(ie=re/2);for(var Xe=0;Xe<ie;Xe++){var Wr=parseInt(he.substr(2*Xe,2),16);I(!isNaN(Wr),"Invalid hex string"),xe[pe+Xe]=Wr}return v._charsWritten=2*Xe,Xe}(this,c,p,m);break;case"utf8":case"utf-8":C=this,W=p,te=m,P=v._charsWritten=Fe(B(c),C,W,te);break;case"ascii":case"binary":P=j(this,c,p,m);break;case"base64":C=this,W=p,te=m,P=v._charsWritten=Fe(Te(c),C,W,te);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":P=D(this,c,p,m);break;default:throw new Error("Unknown encoding")}return P},v.prototype.toString=function(c,p,m){var E,P,C,W,te=this;if(c=String(c||"utf8").toLowerCase(),p=Number(p)||0,(m=m!==void 0?Number(m):te.length)===p)return"";switch(c){case"hex":E=function(ae,xe,he){var pe=ae.length;(!xe||xe<0)&&(xe=0),(!he||he<0||pe<he)&&(he=pe);for(var ie="",re=xe;re<he;re++)ie+=F(ae[re]);return ie}(te,p,m);break;case"utf8":case"utf-8":E=function(ae,xe,he){var pe="",ie="";he=Math.min(ae.length,he);for(var re=xe;re<he;re++)ae[re]<=127?(pe+=Ke(ie)+String.fromCharCode(ae[re]),ie=""):ie+="%"+ae[re].toString(16);return pe+Ke(ie)}(te,p,m);break;case"ascii":case"binary":E=S(te,p,m);break;case"base64":P=te,W=m,E=(C=p)===0&&W===P.length?x.fromByteArray(P):x.fromByteArray(P.slice(C,W));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":E=function(ae,xe,he){for(var pe=ae.slice(xe,he),ie="",re=0;re<pe.length;re+=2)ie+=String.fromCharCode(pe[re]+256*pe[re+1]);return ie}(te,p,m);break;default:throw new Error("Unknown encoding")}return E},v.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},v.prototype.copy=function(c,p,m,E){if(p=p||0,(E=E||E===0?E:this.length)!==(m=m||0)&&c.length!==0&&this.length!==0){I(m<=E,"sourceEnd < sourceStart"),I(0<=p&&p<c.length,"targetStart out of bounds"),I(0<=m&&m<this.length,"sourceStart out of bounds"),I(0<=E&&E<=this.length,"sourceEnd out of bounds"),E>this.length&&(E=this.length);var P=(E=c.length-p<E-m?c.length-p+m:E)-m;if(P<100||!v._useTypedArrays)for(var C=0;C<P;C++)c[C+p]=this[C+m];else c._set(this.subarray(m,m+P),p)}},v.prototype.slice=function(c,p){var m=this.length;if(c=X(c,m,0),p=X(p,m,m),v._useTypedArrays)return v._augment(this.subarray(c,p));for(var E=p-c,P=new v(E,void 0,!0),C=0;C<E;C++)P[C]=this[C+c];return P},v.prototype.get=function(c){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(c)},v.prototype.set=function(c,p){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(c,p)},v.prototype.readUInt8=function(c,p){if(p||(I(c!=null,"missing offset"),I(c<this.length,"Trying to read beyond buffer length")),!(c>=this.length))return this[c]},v.prototype.readUInt16LE=function(c,p){return k(this,c,!0,p)},v.prototype.readUInt16BE=function(c,p){return k(this,c,!1,p)},v.prototype.readUInt32LE=function(c,p){return U(this,c,!0,p)},v.prototype.readUInt32BE=function(c,p){return U(this,c,!1,p)},v.prototype.readInt8=function(c,p){if(p||(I(c!=null,"missing offset"),I(c<this.length,"Trying to read beyond buffer length")),!(c>=this.length))return 128&this[c]?-1*(255-this[c]+1):this[c]},v.prototype.readInt16LE=function(c,p){return y(this,c,!0,p)},v.prototype.readInt16BE=function(c,p){return y(this,c,!1,p)},v.prototype.readInt32LE=function(c,p){return w(this,c,!0,p)},v.prototype.readInt32BE=function(c,p){return w(this,c,!1,p)},v.prototype.readFloatLE=function(c,p){return h(this,c,!0,p)},v.prototype.readFloatBE=function(c,p){return h(this,c,!1,p)},v.prototype.readDoubleLE=function(c,p){return f(this,c,!0,p)},v.prototype.readDoubleBE=function(c,p){return f(this,c,!1,p)},v.prototype.writeUInt8=function(c,p,m){m||(I(c!=null,"missing value"),I(p!=null,"missing offset"),I(p<this.length,"trying to write beyond buffer length"),Qe(c,255)),p>=this.length||(this[p]=c)},v.prototype.writeUInt16LE=function(c,p,m){d(this,c,p,!0,m)},v.prototype.writeUInt16BE=function(c,p,m){d(this,c,p,!1,m)},v.prototype.writeUInt32LE=function(c,p,m){b(this,c,p,!0,m)},v.prototype.writeUInt32BE=function(c,p,m){b(this,c,p,!1,m)},v.prototype.writeInt8=function(c,p,m){m||(I(c!=null,"missing value"),I(p!=null,"missing offset"),I(p<this.length,"Trying to write beyond buffer length"),wr(c,127,-128)),p>=this.length||(0<=c?this.writeUInt8(c,p,m):this.writeUInt8(255+c+1,p,m))},v.prototype.writeInt16LE=function(c,p,m){_(this,c,p,!0,m)},v.prototype.writeInt16BE=function(c,p,m){_(this,c,p,!1,m)},v.prototype.writeInt32LE=function(c,p,m){q(this,c,p,!0,m)},v.prototype.writeInt32BE=function(c,p,m){q(this,c,p,!1,m)},v.prototype.writeFloatLE=function(c,p,m){V(this,c,p,!0,m)},v.prototype.writeFloatBE=function(c,p,m){V(this,c,p,!1,m)},v.prototype.writeDoubleLE=function(c,p,m){H(this,c,p,!0,m)},v.prototype.writeDoubleBE=function(c,p,m){H(this,c,p,!1,m)},v.prototype.fill=function(c,p,m){if(p=p||0,m=m||this.length,I(typeof(c=typeof(c=c||0)=="string"?c.charCodeAt(0):c)=="number"&&!isNaN(c),"value is not a number"),I(p<=m,"end < start"),m!==p&&this.length!==0){I(0<=p&&p<this.length,"start out of bounds"),I(0<=m&&m<=this.length,"end out of bounds");for(var E=p;E<m;E++)this[E]=c}},v.prototype.inspect=function(){for(var c=[],p=this.length,m=0;m<p;m++)if(c[m]=F(this[m]),m===a.INSPECT_MAX_BYTES){c[m+1]="...";break}return"<Buffer "+c.join(" ")+">"},v.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(v._useTypedArrays)return new v(this).buffer;for(var c=new Uint8Array(this.length),p=0,m=c.length;p<m;p+=1)c[p]=this[p];return c.buffer};var R=v.prototype;function X(c,p,m){return typeof c!="number"?m:p<=(c=~~c)?p:0<=c||0<=(c+=p)?c:0}function ne(c){return(c=~~Math.ceil(+c))<0?0:c}function A(c){return(Array.isArray||function(p){return Object.prototype.toString.call(p)==="[object Array]"})(c)}function F(c){return c<16?"0"+c.toString(16):c.toString(16)}function B(c){for(var p=[],m=0;m<c.length;m++){var E=c.charCodeAt(m);if(E<=127)p.push(c.charCodeAt(m));else for(var P=m,C=(55296<=E&&E<=57343&&m++,encodeURIComponent(c.slice(P,m+1)).substr(1).split("%")),W=0;W<C.length;W++)p.push(parseInt(C[W],16))}return p}function Te(c){return x.toByteArray(c)}function Fe(c,p,m,E){for(var P=0;P<E&&!(P+m>=p.length||P>=c.length);P++)p[P+m]=c[P];return P}function Ke(c){try{return decodeURIComponent(c)}catch{return String.fromCharCode(65533)}}function Qe(c,p){I(typeof c=="number","cannot write a non-number as a number"),I(0<=c,"specified a negative value for writing an unsigned value"),I(c<=p,"value is larger than maximum value for type"),I(Math.floor(c)===c,"value has a fractional component")}function wr(c,p,m){I(typeof c=="number","cannot write a non-number as a number"),I(c<=p,"value larger than maximum allowed value"),I(m<=c,"value smaller than minimum allowed value"),I(Math.floor(c)===c,"value has a fractional component")}function Gr(c,p,m){I(typeof c=="number","cannot write a non-number as a number"),I(c<=p,"value larger than maximum allowed value"),I(m<=c,"value smaller than minimum allowed value")}function I(c,p){if(!c)throw new Error(p||"Failed assertion")}v._augment=function(c){return c._isBuffer=!0,c._get=c.get,c._set=c.set,c.get=R.get,c.set=R.set,c.write=R.write,c.toString=R.toString,c.toLocaleString=R.toString,c.toJSON=R.toJSON,c.copy=R.copy,c.slice=R.slice,c.readUInt8=R.readUInt8,c.readUInt16LE=R.readUInt16LE,c.readUInt16BE=R.readUInt16BE,c.readUInt32LE=R.readUInt32LE,c.readUInt32BE=R.readUInt32BE,c.readInt8=R.readInt8,c.readInt16LE=R.readInt16LE,c.readInt16BE=R.readInt16BE,c.readInt32LE=R.readInt32LE,c.readInt32BE=R.readInt32BE,c.readFloatLE=R.readFloatLE,c.readFloatBE=R.readFloatBE,c.readDoubleLE=R.readDoubleLE,c.readDoubleBE=R.readDoubleBE,c.writeUInt8=R.writeUInt8,c.writeUInt16LE=R.writeUInt16LE,c.writeUInt16BE=R.writeUInt16BE,c.writeUInt32LE=R.writeUInt32LE,c.writeUInt32BE=R.writeUInt32BE,c.writeInt8=R.writeInt8,c.writeInt16LE=R.writeInt16LE,c.writeInt16BE=R.writeInt16BE,c.writeInt32LE=R.writeInt32LE,c.writeInt32BE=R.writeInt32BE,c.writeFloatLE=R.writeFloatLE,c.writeFloatBE=R.writeFloatBE,c.writeDoubleLE=R.writeDoubleLE,c.writeDoubleBE=R.writeDoubleBE,c.fill=R.fill,c.inspect=R.inspect,c.toArrayBuffer=R.toArrayBuffer,c}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(t,r,a){(function(i,s,x,u,l,g,O,L,Q){var x=t("buffer").Buffer,$=4,v=new x($);v.fill(0),r.exports={hash:function(j,D,S,k){for(var U=D(function(d,b){d.length%$!=0&&(_=d.length+($-d.length%$),d=x.concat([d,v],_));for(var _,q=[],V=b?d.readInt32BE:d.readInt32LE,H=0;H<d.length;H+=$)q.push(V.call(d,H));return q}(j=x.isBuffer(j)?j:new x(j),k),8*j.length),D=k,y=new x(S),w=D?y.writeInt32BE:y.writeInt32LE,h=0;h<U.length;h++)w.call(y,U[h],4*h,!0);return y}}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(t,r,a){(function(i,s,x,u,l,g,O,L,Q){var x=t("buffer").Buffer,$=t("./sha"),v=t("./sha256"),j=t("./rng"),D={sha1:$,sha256:v,md5:t("./md5")},S=64,k=new x(S);function U(d,b){var _=D[d=d||"sha1"],q=[];return _||y("algorithm:",d,"is not yet supported"),{update:function(V){return x.isBuffer(V)||(V=new x(V)),q.push(V),V.length,this},digest:function(V){var H=x.concat(q),H=b?function(R,X,ne){x.isBuffer(X)||(X=new x(X)),x.isBuffer(ne)||(ne=new x(ne)),X.length>S?X=R(X):X.length<S&&(X=x.concat([X,k],S));for(var A=new x(S),F=new x(S),B=0;B<S;B++)A[B]=54^X[B],F[B]=92^X[B];return ne=R(x.concat([A,ne])),R(x.concat([F,ne]))}(_,b,H):_(H);return q=null,V?H.toString(V):H}}}function y(){var d=[].slice.call(arguments).join(" ");throw new Error([d,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}k.fill(0),a.createHash=function(d){return U(d)},a.createHmac=U,a.randomBytes=function(d,b){if(!b||!b.call)return new x(j(d));try{b.call(this,void 0,new x(j(d)))}catch(_){b(_)}};var w,h=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],f=function(d){a[d]=function(){y("sorry,",d,"is not implemented yet")}};for(w in h)f(h[w])}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(t,r,a){(function(i,s,o,u,l,g,O,L,Q){var x=t("./helpers");function $(y,w){y[w>>5]|=128<<w%32,y[14+(w+64>>>9<<4)]=w;for(var h=1732584193,f=-271733879,d=-1732584194,b=271733878,_=0;_<y.length;_+=16){var q=h,V=f,H=d,R=b,h=j(h,f,d,b,y[_+0],7,-680876936),b=j(b,h,f,d,y[_+1],12,-389564586),d=j(d,b,h,f,y[_+2],17,606105819),f=j(f,d,b,h,y[_+3],22,-1044525330);h=j(h,f,d,b,y[_+4],7,-176418897),b=j(b,h,f,d,y[_+5],12,1200080426),d=j(d,b,h,f,y[_+6],17,-1473231341),f=j(f,d,b,h,y[_+7],22,-45705983),h=j(h,f,d,b,y[_+8],7,1770035416),b=j(b,h,f,d,y[_+9],12,-1958414417),d=j(d,b,h,f,y[_+10],17,-42063),f=j(f,d,b,h,y[_+11],22,-1990404162),h=j(h,f,d,b,y[_+12],7,1804603682),b=j(b,h,f,d,y[_+13],12,-40341101),d=j(d,b,h,f,y[_+14],17,-1502002290),h=D(h,f=j(f,d,b,h,y[_+15],22,1236535329),d,b,y[_+1],5,-165796510),b=D(b,h,f,d,y[_+6],9,-1069501632),d=D(d,b,h,f,y[_+11],14,643717713),f=D(f,d,b,h,y[_+0],20,-373897302),h=D(h,f,d,b,y[_+5],5,-701558691),b=D(b,h,f,d,y[_+10],9,38016083),d=D(d,b,h,f,y[_+15],14,-660478335),f=D(f,d,b,h,y[_+4],20,-405537848),h=D(h,f,d,b,y[_+9],5,568446438),b=D(b,h,f,d,y[_+14],9,-1019803690),d=D(d,b,h,f,y[_+3],14,-187363961),f=D(f,d,b,h,y[_+8],20,1163531501),h=D(h,f,d,b,y[_+13],5,-1444681467),b=D(b,h,f,d,y[_+2],9,-51403784),d=D(d,b,h,f,y[_+7],14,1735328473),h=S(h,f=D(f,d,b,h,y[_+12],20,-1926607734),d,b,y[_+5],4,-378558),b=S(b,h,f,d,y[_+8],11,-2022574463),d=S(d,b,h,f,y[_+11],16,1839030562),f=S(f,d,b,h,y[_+14],23,-35309556),h=S(h,f,d,b,y[_+1],4,-1530992060),b=S(b,h,f,d,y[_+4],11,1272893353),d=S(d,b,h,f,y[_+7],16,-155497632),f=S(f,d,b,h,y[_+10],23,-1094730640),h=S(h,f,d,b,y[_+13],4,681279174),b=S(b,h,f,d,y[_+0],11,-358537222),d=S(d,b,h,f,y[_+3],16,-722521979),f=S(f,d,b,h,y[_+6],23,76029189),h=S(h,f,d,b,y[_+9],4,-640364487),b=S(b,h,f,d,y[_+12],11,-421815835),d=S(d,b,h,f,y[_+15],16,530742520),h=k(h,f=S(f,d,b,h,y[_+2],23,-995338651),d,b,y[_+0],6,-198630844),b=k(b,h,f,d,y[_+7],10,1126891415),d=k(d,b,h,f,y[_+14],15,-1416354905),f=k(f,d,b,h,y[_+5],21,-57434055),h=k(h,f,d,b,y[_+12],6,1700485571),b=k(b,h,f,d,y[_+3],10,-1894986606),d=k(d,b,h,f,y[_+10],15,-1051523),f=k(f,d,b,h,y[_+1],21,-2054922799),h=k(h,f,d,b,y[_+8],6,1873313359),b=k(b,h,f,d,y[_+15],10,-30611744),d=k(d,b,h,f,y[_+6],15,-1560198380),f=k(f,d,b,h,y[_+13],21,1309151649),h=k(h,f,d,b,y[_+4],6,-145523070),b=k(b,h,f,d,y[_+11],10,-1120210379),d=k(d,b,h,f,y[_+2],15,718787259),f=k(f,d,b,h,y[_+9],21,-343485551),h=U(h,q),f=U(f,V),d=U(d,H),b=U(b,R)}return Array(h,f,d,b)}function v(y,w,h,f,d,b){return U((w=U(U(w,y),U(f,b)))<<d|w>>>32-d,h)}function j(y,w,h,f,d,b,_){return v(w&h|~w&f,y,w,d,b,_)}function D(y,w,h,f,d,b,_){return v(w&f|h&~f,y,w,d,b,_)}function S(y,w,h,f,d,b,_){return v(w^h^f,y,w,d,b,_)}function k(y,w,h,f,d,b,_){return v(h^(w|~f),y,w,d,b,_)}function U(y,w){var h=(65535&y)+(65535&w);return(y>>16)+(w>>16)+(h>>16)<<16|65535&h}r.exports=function(y){return x.hash(y,$,16)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(t,r,a){(function(i,s,o,u,l,g,O,L,Q){r.exports=function(x){for(var $,v=new Array(x),j=0;j<x;j++)!(3&j)&&($=4294967296*Math.random()),v[j]=$>>>((3&j)<<3)&255;return v}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(t,r,a){(function(i,s,o,u,l,g,O,L,Q){var x=t("./helpers");function $(D,S){D[S>>5]|=128<<24-S%32,D[15+(S+64>>9<<4)]=S;for(var k,U,y,w=Array(80),h=1732584193,f=-271733879,d=-1732584194,b=271733878,_=-1009589776,q=0;q<D.length;q+=16){for(var V=h,H=f,R=d,X=b,ne=_,A=0;A<80;A++){w[A]=A<16?D[q+A]:j(w[A-3]^w[A-8]^w[A-14]^w[A-16],1);var F=v(v(j(h,5),(F=f,U=d,y=b,(k=A)<20?F&U|~F&y:!(k<40)&&k<60?F&U|F&y|U&y:F^U^y)),v(v(_,w[A]),(k=A)<20?1518500249:k<40?1859775393:k<60?-1894007588:-899497514)),_=b,b=d,d=j(f,30),f=h,h=F}h=v(h,V),f=v(f,H),d=v(d,R),b=v(b,X),_=v(_,ne)}return Array(h,f,d,b,_)}function v(D,S){var k=(65535&D)+(65535&S);return(D>>16)+(S>>16)+(k>>16)<<16|65535&k}function j(D,S){return D<<S|D>>>32-S}r.exports=function(D){return x.hash(D,$,20,!0)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(t,r,a){(function(i,s,o,u,l,g,O,L,Q){function x(S,k){var U=(65535&S)+(65535&k);return(S>>16)+(k>>16)+(U>>16)<<16|65535&U}function $(S,k){var U,y=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),w=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),h=new Array(64);S[k>>5]|=128<<24-k%32,S[15+(k+64>>9<<4)]=k;for(var f,d,b=0;b<S.length;b+=16){for(var _=w[0],q=w[1],V=w[2],H=w[3],R=w[4],X=w[5],ne=w[6],A=w[7],F=0;F<64;F++)h[F]=F<16?S[F+b]:x(x(x((d=h[F-2],j(d,17)^j(d,19)^D(d,10)),h[F-7]),(d=h[F-15],j(d,7)^j(d,18)^D(d,3))),h[F-16]),U=x(x(x(x(A,j(d=R,6)^j(d,11)^j(d,25)),R&X^~R&ne),y[F]),h[F]),f=x(j(f=_,2)^j(f,13)^j(f,22),_&q^_&V^q&V),A=ne,ne=X,X=R,R=x(H,U),H=V,V=q,q=_,_=x(U,f);w[0]=x(_,w[0]),w[1]=x(q,w[1]),w[2]=x(V,w[2]),w[3]=x(H,w[3]),w[4]=x(R,w[4]),w[5]=x(X,w[5]),w[6]=x(ne,w[6]),w[7]=x(A,w[7])}return w}var v=t("./helpers"),j=function(S,k){return S>>>k|S<<32-k},D=function(S,k){return S>>>k};r.exports=function(S){return v.hash(S,$,32,!0)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(t,r,a){(function(i,s,o,u,l,g,O,L,Q){a.read=function(x,$,v,j,b){var S,k,U=8*b-j-1,y=(1<<U)-1,w=y>>1,h=-7,f=v?b-1:0,d=v?-1:1,b=x[$+f];for(f+=d,S=b&(1<<-h)-1,b>>=-h,h+=U;0<h;S=256*S+x[$+f],f+=d,h-=8);for(k=S&(1<<-h)-1,S>>=-h,h+=j;0<h;k=256*k+x[$+f],f+=d,h-=8);if(S===0)S=1-w;else{if(S===y)return k?NaN:1/0*(b?-1:1);k+=Math.pow(2,j),S-=w}return(b?-1:1)*k*Math.pow(2,S-j)},a.write=function(x,$,v,j,D,_){var k,U,y=8*_-D-1,w=(1<<y)-1,h=w>>1,f=D===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=j?0:_-1,b=j?1:-1,_=$<0||$===0&&1/$<0?1:0;for($=Math.abs($),isNaN($)||$===1/0?(U=isNaN($)?1:0,k=w):(k=Math.floor(Math.log($)/Math.LN2),$*(j=Math.pow(2,-k))<1&&(k--,j*=2),2<=($+=1<=k+h?f/j:f*Math.pow(2,1-h))*j&&(k++,j/=2),w<=k+h?(U=0,k=w):1<=k+h?(U=($*j-1)*Math.pow(2,D),k+=h):(U=$*Math.pow(2,h-1)*Math.pow(2,D),k=0));8<=D;x[v+d]=255&U,d+=b,U/=256,D-=8);for(k=k<<D|U,y+=D;0<y;x[v+d]=255&k,d+=b,k/=256,y-=8);x[v+d-b]|=128*_}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(t,r,a){(function(i,s,o,u,l,g,O,L,Q){var x,$,v;function j(){}(i=r.exports={}).nextTick=($=typeof window<"u"&&window.setImmediate,v=typeof window<"u"&&window.postMessage&&window.addEventListener,$?function(D){return window.setImmediate(D)}:v?(x=[],window.addEventListener("message",function(D){var S=D.source;S!==window&&S!==null||D.data!=="process-tick"||(D.stopPropagation(),0<x.length&&x.shift()())},!0),function(D){x.push(D),window.postMessage("process-tick","*")}):function(D){setTimeout(D,0)}),i.title="browser",i.browser=!0,i.env={},i.argv=[],i.on=j,i.addListener=j,i.once=j,i.off=j,i.removeListener=j,i.removeAllListeners=j,i.emit=j,i.binding=function(D){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(D){throw new Error("process.chdir is not supported")}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)})})(Za);var Cu=Za.exports;const Du=Mn(Cu),jn=(...n)=>Du(n.join("_")),Mu=new Map;class Hr extends Fa{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,t){return Promise.resolve(this.cache.get(jn(e,t))??null)}async update(e,t,r){this.cache.set(jn(e,t),r)}static global(){return new Hr(Mu)}}class Nu extends Bn{constructor({cache:e,concurrency:t,...r}){super(t?{maxConcurrency:t,...r}:r),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","llms",this._llmType()]}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof e=="object"?this.cache=e:e?this.cache=Hr.global():this.cache=void 0}async generatePrompt(e,t,r){const a=e.map(i=>i.toString());return this.generate(a,t,r)}invocationParams(e){return{}}_flattenLLMResult(e){const t=[];for(let r=0;r<e.generations.length;r+=1){const a=e.generations[r];if(r===0)t.push({generations:[a],llmOutput:e.llmOutput});else{const i=e.llmOutput?{...e.llmOutput,tokenUsage:{}}:void 0;t.push({generations:[a],llmOutput:i})}}return t}async _generateUncached(e,t,r){const a=await $e.configure(r.callbacks,this.callbacks,r.tags,this.tags,r.metadata,this.metadata,{verbose:this.verbose}),i={options:t,invocation_params:this==null?void 0:this.invocationParams(t)},s=await(a==null?void 0:a.handleLLMStart(this.toJSON(),e,void 0,void 0,i));let o;try{o=await this._generate(e,t,s==null?void 0:s[0])}catch(g){throw await Promise.all((s??[]).map(O=>O==null?void 0:O.handleLLMError(g))),g}const u=this._flattenLLMResult(o);await Promise.all((s??[]).map((g,O)=>g==null?void 0:g.handleLLMEnd(u[O])));const l=(s==null?void 0:s.map(g=>g.runId))||void 0;return Object.defineProperty(o,An,{value:l?{runIds:l}:void 0,configurable:!0}),o}async generate(e,t,r){if(!Array.isArray(e))throw new Error("Argument 'prompts' is expected to be a string[]");let a;Array.isArray(t)?a={stop:t}:t!=null&&t.timeout&&!t.signal?a={...t,signal:AbortSignal.timeout(t.timeout)}:a=t??{};const i={tags:a.tags,metadata:a.metadata,callbacks:a.callbacks??r};if(delete a.tags,delete a.metadata,delete a.callbacks,!this.cache)return this._generateUncached(e,a,i);const{cache:s}=this,o=this.serialize();o.stop=a.stop??o.stop;const u=`${Object.entries(o).sort()}`,l=[],g=await Promise.all(e.map(async(L,Q)=>{const x=await s.lookup(L,u);return x||l.push(Q),x}));let O={};if(l.length>0){const L=await this._generateUncached(l.map(Q=>e[Q]),a,i);await Promise.all(L.generations.map(async(Q,x)=>{const $=l[x];return g[$]=Q,s.update(e[$],u,Q)})),O=L.llmOutput??{}}return{generations:g,llmOutput:O}}async call(e,t,r){const{generations:a}=await this.generate([e],t??{},r);return a[0][0].text}async predict(e,t,r){return this.call(e,t,r)}async predictMessages(e,t,r){const a=Cr(e),i=await this.call(a,t,r);return new Dn(i)}_identifyingParams(){return{}}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}_modelType(){return"base_llm"}static async deserialize(e){const{_type:t,_model:r,...a}=e;if(r&&r!=="base_llm")throw new Error(`Cannot load LLM with model ${r}`);const i={openai:(await fe(()=>import("./openai.1f080cab.js"),["_app/immutable/chunks/openai.1f080cab.js","_app/immutable/chunks/NavBar.34dbe8c9.js","_app/immutable/chunks/public.42564a77.js","_app/immutable/chunks/scheduler.2364b0ad.js","_app/immutable/chunks/index.e0615928.js","_app/immutable/chunks/globals.7f7f1b26.js","_app/immutable/assets/NavBar.ffbd0f32.css","_app/immutable/chunks/prompt-layer.00daf386.js"])).OpenAI}[t];if(i===void 0)throw new Error(`Cannot load  LLM with type ${t}`);return new i(a)}}class Lu extends Nu{async _generate(e,t,r){return{generations:await Promise.all(e.map((i,s)=>this._call(i,{...t,promptIndex:s},r).then(o=>[{text:o}])))}}}class Yr extends Lu{get lc_secrets(){return{apiKey:"HUGGINGFACEHUB_API_KEY"}}constructor(e){if(super(e??{}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"gpt2"}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topK",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.model=(e==null?void 0:e.model)??this.model,this.temperature=(e==null?void 0:e.temperature)??this.temperature,this.maxTokens=(e==null?void 0:e.maxTokens)??this.maxTokens,this.topP=(e==null?void 0:e.topP)??this.topP,this.topK=(e==null?void 0:e.topK)??this.topK,this.frequencyPenalty=(e==null?void 0:e.frequencyPenalty)??this.frequencyPenalty,this.apiKey=(e==null?void 0:e.apiKey)??ke("HUGGINGFACEHUB_API_KEY"),!this.apiKey)throw new Error("Please set an API key for HuggingFace Hub in the environment variable HUGGINGFACEHUB_API_KEY or in the apiKey field of the HuggingFaceInference constructor.")}_llmType(){return"hf"}async _call(e,t){const{HfInference:r}=await Yr.imports(),a=new r(this.apiKey);return(await this.caller.callWithOptions({signal:t.signal},a.textGeneration.bind(a),{model:this.model,parameters:{return_full_text:!1,temperature:this.temperature,max_new_tokens:this.maxTokens,top_p:this.topP,top_k:this.topK,repetition_penalty:this.frequencyPenalty},inputs:e})).generated_text}static async imports(){try{const{HfInference:e}=await fe(()=>import("./index.3c8223fb.js"),[]);return{HfInference:e}}catch{throw new Error("Please install huggingface as a dependency with, e.g. `yarn add @huggingface/inference`")}}}async function Vu(n,e,t,r,a){if(a==null||a==="")return"Please enter a question";{console.log("question is actually ",a);const i=new Yr({apiKey:n,model:"tiiuae/falcon-7b-instruct",maxTokens:5e3}),s=Ha(Ga,Ya),o=Wa;let u=new Ka({openAIApiKey:o});await s.auth.getUser(),new za(u,{client:s,tableName:"documents"});const l="{question}",g=Lr.fromLLM(i,e.asRetriever(),{returnSourceDocuments:!0,questionGeneratorChainOptions:{template:l}});let O={search_distance:.9};const L=await g.call({question:a,chat_history:[],vector_db_kwargs:O});return console.log("result",L),console.log(L.text),L.text}}export{zt as B,$e as C,ge as L,oe as P,Lu as a,Nu as b,Vu as c,Uu as d,ji as e,Li as f,Bn as g,$n as h,bs as l,Vn as r,He as v,Ms as z};
