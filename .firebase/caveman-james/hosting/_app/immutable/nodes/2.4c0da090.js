import{s as ot,o as qe,d as c,n as Re,r as Bt,v as kt,h as It,i as Lt}from"../chunks/scheduler.98e03797.js";import{S as it,i as rt,d as ae,v as ct,j as u,s as I,k as d,l as P,A,c as E,g as C,m as l,a as Ie,z as t,B as Ve,C as me,o as ve,p as _e,q as Ye,D as $e,E as Et,F as Ht,G as Ct,H as Gt,I as zt,J as Pt,u as Mt,w as Ft,x as Jt,f as Kt,t as Wt,y as Yt}from"../chunks/index.e99f61eb.js";import{g as yt}from"../chunks/globals.7f7f1b26.js";import{f as dt,u as ft}from"../chunks/files.d4ee2840.js";import{c as at,O as Vt}from"../chunks/question.7d3532c1.js";import{g as Dt,d as Nt,b as Xt}from"../chunks/brain.c0d8c4fe.js";import{c as Se,P as ye,a as we,b as ke}from"../chunks/public.8bae8052.js";import{H as Le,S as He,N as Tt,A as Qt}from"../chunks/NavBar.adcb78d3.js";import{w as Te}from"../chunks/index.0907e69b.js";const he="src/routes/insert.svelte";function ht(s){let e,n;const a={c:function(){e=u("div"),n=ve(s[1]),this.h()},l:function(o){e=d(o,"DIV",{class:!0});var i=P(e);n=_e(i,s[1]),i.forEach(C),this.h()},h:function(){l(e,"class","text-red-500 mb-4"),c(e,he,65,4,1816)},m:function(o,i){Ie(o,e,i),t(e,n)},p:function(o,i){i&2&&Ye(n,o[1])},d:function(o){o&&C(e)}};return ae("SvelteRegisterBlock",{block:a,id:ht.name,type:"if",source:"(65:2) {#if error}",ctx:s}),a}function mt(s){let e,n,a="Insert Data Page",p,o,i,r,g="Upload Files",b,m,h,v,x,O="Upload Files",R,w,q,y="Add the URL to the database",T,D,k,V,G,Y="Add URL",_,$,B=s[1]&&ht(s);const ee={c:function(){e=u("div"),n=u("h1"),n.textContent=a,p=I(),B&&B.c(),o=I(),i=u("div"),r=u("label"),r.textContent=g,b=I(),m=u("div"),h=u("input"),v=I(),x=u("button"),x.textContent=O,R=I(),w=u("div"),q=u("label"),q.textContent=y,T=I(),D=u("div"),k=u("textarea"),V=I(),G=u("button"),G.textContent=Y,this.h()},l:function(L){e=d(L,"DIV",{class:!0});var f=P(e);n=d(f,"H1",{class:!0,"data-svelte-h":!0}),A(n)!=="svelte-1jf55pk"&&(n.textContent=a),p=E(f),B&&B.l(f),o=E(f),i=d(f,"DIV",{class:!0});var M=P(i);r=d(M,"LABEL",{class:!0,"data-svelte-h":!0}),A(r)!=="svelte-qb0qet"&&(r.textContent=g),b=E(M),m=d(M,"DIV",{class:!0});var H=P(m);h=d(H,"INPUT",{type:!0,class:!0}),v=E(H),x=d(H,"BUTTON",{class:!0,"data-svelte-h":!0}),A(x)!=="svelte-tt1zro"&&(x.textContent=O),H.forEach(C),M.forEach(C),R=E(f),w=d(f,"DIV",{class:!0});var Ee=P(w);q=d(Ee,"LABEL",{class:!0,"data-svelte-h":!0}),A(q)!=="svelte-123a26r"&&(q.textContent=y),T=E(Ee),D=d(Ee,"DIV",{class:!0});var X=P(D);k=d(X,"TEXTAREA",{class:!0,rows:!0}),P(k).forEach(C),V=E(X),G=d(X,"BUTTON",{class:!0,"data-svelte-h":!0}),A(G)!=="svelte-1y9apbx"&&(G.textContent=Y),X.forEach(C),Ee.forEach(C),f.forEach(C),this.h()},h:function(){l(n,"class","text-4xl font-bold mb-8"),c(n,he,62,2,1715),l(r,"class","label mb-2 text-lg font-bold"),c(r,he,70,4,1927),l(h,"type","file"),h.multiple=!0,l(h,"class","input input-accent mr-4"),c(h,he,72,6,2034),l(x,"class","btn btn-primary text-lg font-bold"),c(x,he,78,6,2160),l(m,"class","flex items-center"),c(m,he,71,4,1996),l(i,"class","w-full mb-8"),c(i,he,69,2,1897),l(q,"class","label mb-2 text-lg font-bold"),c(q,he,89,4,2379),l(k,"class","textarea textarea-accent resize-none flex-grow text-lg font-bold"),l(k,"rows","1"),c(k,he,93,6,2513),l(G,"class","btn btn-primary text-lg font-bold ml-4"),c(G,he,98,6,2661),l(D,"class","flex items-center"),c(D,he,92,4,2475),l(w,"class","w-full"),c(w,he,88,2,2354),l(e,"class","p-8 flex flex-col items-center h-screen"),c(e,he,61,0,1659)},m:function(L,f){Ie(L,e,f),t(e,n),t(e,p),B&&B.m(e,null),t(e,o),t(e,i),t(i,r),t(i,b),t(i,m),t(m,h),t(m,v),t(m,x),t(e,R),t(e,w),t(w,q),t(w,T),t(w,D),t(D,k),Ve(k,s[0]),t(D,V),t(D,G),_||($=[me(h,"change",s[2],!1,!1,!1,!1),me(x,"click",s[5],!1,!1,!1,!1),me(k,"input",s[6]),me(G,"click",s[7],!1,!1,!1,!1)],_=!0)},p:function(L,[f]){L[1]?B?B.p(L,f):(B=ht(L),B.c(),B.m(e,o)):B&&(B.d(1),B=null),f&1&&Ve(k,L[0])},i:Re,o:Re,d:function(L){L&&C(e),B&&B.d(),_=!1,Bt($)}};return ae("SvelteRegisterBlock",{block:ee,id:mt.name,type:"component",source:"",ctx:s}),ee}function Zt(s,e,n){let{$$slots:a={},$$scope:p}=e;ct("Insert",a,[]);let o,i,r,g,b,m="";async function h(y){g=y.target.files[0]}qe(()=>{o=Se(we,ye),r=new Le({apiKey:ke}),i=new He(r,{client:o,tableName:"documents"})});async function v(){try{await dt(o,ke,i,g),n(1,m="")}catch(y){n(1,m=y.message)}}async function x(){try{await ft(o,ke,i,b),n(1,m="")}catch(y){n(1,m=y.message)}}const O=[];Object.keys(e).forEach(y=>{!~O.indexOf(y)&&y.slice(0,2)!=="$$"&&y!=="slot"&&console.warn(`<Insert> was created with unknown prop '${y}'`)});const R=()=>v();function w(){b=this.value,n(0,b)}const q=()=>x();return s.$capture_state=()=>({file_uploader:dt,url_uploader:ft,createClient:Se,SupabaseVectorStore:He,HuggingFaceInferenceEmbeddings:Le,onMount:qe,PUBLIC_SUPABASE_KEY:ye,PUBLIC_SUPABASE_URL:we,PUBLIC_HUGGINGFACE_API_KEY:ke,supabase:o,vector:i,embeddings:r,files:g,url:b,error:m,upload:h,handleFileUpload:v,handleUrlUpload:x}),s.$inject_state=y=>{"supabase"in y&&(o=y.supabase),"vector"in y&&(i=y.vector),"embeddings"in y&&(r=y.embeddings),"files"in y&&(g=y.files),"url"in y&&n(0,b=y.url),"error"in y&&n(1,m=y.error)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),[b,m,h,v,x,R,w,q]}class $t extends it{constructor(e){super(e),rt(this,e,Zt,mt,ot,{}),ae("SvelteRegisterComponent",{component:this,tagName:"Insert",options:e,id:mt.name})}}const{console:en}=yt,j="src/routes/ask.svelte";function St(s,e,n){const a=s.slice();return a[25]=e[n],a}function At(s,e,n){const a=s.slice();return a[28]=e[n],a}function vt(s){let e,n,a=s[28].chat_id+"",p,o,i,r;function g(){return s[13](s[28])}const b={c:function(){e=u("div"),n=ve("Chat ID: "),p=ve(a),o=I(),this.h()},l:function(h){e=d(h,"DIV",{class:!0});var v=P(e);n=_e(v,"Chat ID: "),p=_e(v,a),o=E(v),v.forEach(C),this.h()},h:function(){l(e,"class","mb-2 cursor-pointer"),c(e,j,192,6,6574)},m:function(h,v){Ie(h,e,v),t(e,n),t(e,p),t(e,o),i||(r=me(e,"click",g,!1,!1,!1,!1),i=!0)},p:function(h,v){s=h,v&16&&a!==(a=s[28].chat_id+"")&&Ye(p,a)},d:function(h){h&&C(e),i=!1,r()}};return ae("SvelteRegisterBlock",{block:b,id:vt.name,type:"each",source:"(192:4) {#each $userChats as chat}",ctx:s}),b}function jt(s){let e,n=$e(s[5]),a=[];for(let o=0;o<n.length;o+=1)a[o]=_t(St(s,n,o));const p={c:function(){e=u("div");for(let i=0;i<a.length;i+=1)a[i].c();this.h()},l:function(i){e=d(i,"DIV",{class:!0});var r=P(e);for(let g=0;g<a.length;g+=1)a[g].l(r);r.forEach(C),this.h()},h:function(){l(e,"class","chat-container s-NxPPOnB08NvG"),c(e,j,208,6,6978)},m:function(i,r){Ie(i,e,r);for(let g=0;g<a.length;g+=1)a[g]&&a[g].m(e,null)},p:function(i,r){if(r&32){n=$e(i[5]);let g;for(g=0;g<n.length;g+=1){const b=St(i,n,g);a[g]?a[g].p(b,r):(a[g]=_t(b),a[g].c(),a[g].m(e,null))}for(;g<a.length;g+=1)a[g].d(1);a.length=n.length}},d:function(i){i&&C(e),Ct(a,i)}};return ae("SvelteRegisterBlock",{block:p,id:jt.name,type:"else",source:"(208:4) {:else}",ctx:s}),p}function Rt(s){let e,n="Select a chat from the history to view messages.";const a={c:function(){e=u("p"),e.textContent=n,this.h()},l:function(o){e=d(o,"P",{class:!0,"data-svelte-h":!0}),A(e)!=="svelte-1by3xe6"&&(e.textContent=n),this.h()},h:function(){l(e,"class","text-gray-500"),c(e,j,204,6,6866)},m:function(o,i){Ie(o,e,i)},p:Re,d:function(o){o&&C(e)}};return ae("SvelteRegisterBlock",{block:a,id:Rt.name,type:"if",source:"(204:4) {#if selectedChatId === null}",ctx:s}),a}function _t(s){let e,n=s[25].message+"",a,p,o=s[25].timestamp+"",i,r;const g={c:function(){e=u("div"),a=ve(n),p=ve(" - "),i=ve(o),r=I(),this.h()},l:function(m){e=d(m,"DIV",{class:!0});var h=P(e);a=_e(h,n),p=_e(h," - "),i=_e(h,o),r=E(h),h.forEach(C),this.h()},h:function(){l(e,"class","chat-message s-NxPPOnB08NvG"),Pt(e,"is-user-message",s[25].is_user_message),c(e,j,210,10,7066)},m:function(m,h){Ie(m,e,h),t(e,a),t(e,p),t(e,i),t(e,r)},p:function(m,h){h&32&&n!==(n=m[25].message+"")&&Ye(a,n),h&32&&o!==(o=m[25].timestamp+"")&&Ye(i,o),h&32&&Pt(e,"is-user-message",m[25].is_user_message)},d:function(m){m&&C(e)}};return ae("SvelteRegisterBlock",{block:g,id:_t.name,type:"each",source:"(210:8) {#each $selectedChatMessages as message}",ctx:s}),g}function gt(s){let e,n,a,p="Configuration",o,i,r="Choose your model and temperature for asking questions.",g,b,m,h="Model",v,x,O,R="tiiuae/falcon-7b-instruct",w,q="meta-llama/Llama-2-70b-chat-hf",y,T="OpenAssistant/oasst-sft-4-pythia-12b-epoch-3.5",D,k,V,G="Temperature",Y,_,$,B,ee,re,L,f,M="Chat History",H,Ee,X,te,et="Chat Messages",Ge,ge,le,be,ce="Ask AI Page",Pe,W,xe,Xe="Your Question",pe,ue,ze,Q,Qe,Ue,oe,ne,Z,tt="Generated Text:",Me,se,Ze,Fe,De,Ae=$e(s[4]),J=[];for(let K=0;K<Ae.length;K+=1)J[K]=vt(At(s,Ae,K));function nt(K,S){return K[3]===null?Rt:jt}let Oe=nt(s),F=Oe(s);const st={c:function(){e=u("div"),n=u("div"),a=u("h2"),a.textContent=p,o=I(),i=u("p"),i.textContent=r,g=I(),b=u("div"),m=u("label"),m.textContent=h,v=I(),x=u("select"),O=u("option"),O.textContent=R,w=u("option"),w.textContent=q,y=u("option"),y.textContent=T,D=I(),k=u("div"),V=u("label"),V.textContent=G,Y=I(),_=u("input"),$=I(),B=u("span"),ee=ve(s[1]),re=I(),L=u("div"),f=u("h2"),f.textContent=M,H=I();for(let S=0;S<J.length;S+=1)J[S].c();Ee=I(),X=u("div"),te=u("h1"),te.textContent=et,Ge=I(),F.c(),ge=I(),le=u("div"),be=u("h1"),be.textContent=ce,Pe=I(),W=u("div"),xe=u("label"),xe.textContent=Xe,pe=I(),ue=u("textarea"),ze=I(),Q=u("button"),Qe=ve("Ask the AI and Send Message"),oe=I(),ne=u("div"),Z=u("p"),Z.textContent=tt,Me=I(),se=u("div"),Ze=ve(s[6]),this.h()},l:function(S){e=d(S,"DIV",{class:!0});var z=P(e);n=d(z,"DIV",{class:!0});var N=P(n);a=d(N,"H2",{class:!0,"data-svelte-h":!0}),A(a)!=="svelte-1ali85g"&&(a.textContent=p),o=E(N),i=d(N,"P",{class:!0,"data-svelte-h":!0}),A(i)!=="svelte-1xczfp8"&&(i.textContent=r),g=E(N),b=d(N,"DIV",{class:!0});var Ce=P(b);m=d(Ce,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),A(m)!=="svelte-6cjlpw"&&(m.textContent=h),v=E(Ce),x=d(Ce,"SELECT",{id:!0,class:!0});var de=P(x);O=d(de,"OPTION",{"data-svelte-h":!0}),A(O)!=="svelte-2e4awe"&&(O.textContent=R),w=d(de,"OPTION",{"data-svelte-h":!0}),A(w)!=="svelte-ejnk6e"&&(w.textContent=q),y=d(de,"OPTION",{"data-svelte-h":!0}),A(y)!=="svelte-1jx7lkk"&&(y.textContent=T),de.forEach(C),Ce.forEach(C),D=E(N),k=d(N,"DIV",{class:!0});var fe=P(k);V=d(fe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),A(V)!=="svelte-11sobei"&&(V.textContent=G),Y=E(fe),_=d(fe,"INPUT",{type:!0,id:!0,min:!0,max:!0,step:!0,class:!0}),$=E(fe),B=d(fe,"SPAN",{class:!0});var lt=P(B);ee=_e(lt,s[1]),lt.forEach(C),fe.forEach(C),N.forEach(C),re=E(z),L=d(z,"DIV",{class:!0});var Ne=P(L);f=d(Ne,"H2",{class:!0,"data-svelte-h":!0}),A(f)!=="svelte-141gz04"&&(f.textContent=M),H=E(Ne);for(let ut=0;ut<J.length;ut+=1)J[ut].l(Ne);Ne.forEach(C),Ee=E(z),X=d(z,"DIV",{class:!0});var Je=P(X);te=d(Je,"H1",{class:!0,"data-svelte-h":!0}),A(te)!=="svelte-fy4ok2"&&(te.textContent=et),Ge=E(Je),F.l(Je),Je.forEach(C),ge=E(z),le=d(z,"DIV",{class:!0});var ie=P(le);be=d(ie,"H1",{class:!0,"data-svelte-h":!0}),A(be)!=="svelte-1m9568"&&(be.textContent=ce),Pe=E(ie),W=d(ie,"DIV",{class:!0});var Ke=P(W);xe=d(Ke,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),A(xe)!=="svelte-20y8o"&&(xe.textContent=Xe),pe=E(Ke),ue=d(Ke,"TEXTAREA",{id:!0,class:!0}),P(ue).forEach(C),Ke.forEach(C),ze=E(ie),Q=d(ie,"BUTTON",{class:!0});var Be=P(Q);Qe=_e(Be,"Ask the AI and Send Message"),Be.forEach(C),oe=E(ie),ne=d(ie,"DIV",{class:!0});var We=P(ne);Z=d(We,"P",{class:!0,"data-svelte-h":!0}),A(Z)!=="svelte-1th80ox"&&(Z.textContent=tt),Me=E(We),se=d(We,"DIV",{id:!0,class:!0});var wt=P(se);Ze=_e(wt,s[6]),wt.forEach(C),We.forEach(C),ie.forEach(C),z.forEach(C),this.h()},h:function(){l(a,"class","text-2xl font-bold mb-4"),c(a,j,158,4,5399),l(i,"class","mb-4"),c(i,j,159,4,5458),l(m,"for","model"),l(m,"class","s-NxPPOnB08NvG"),c(m,j,161,6,5571),O.__value="tiiuae/falcon-7b-instruct",Ve(O,O.__value),c(O,j,163,8,5685),w.__value="meta-llama/Llama-2-70b-chat-hf",Ve(w,w.__value),c(w,j,166,8,5790),y.__value="OpenAssistant/oasst-sft-4-pythia-12b-epoch-3.5",Ve(y,y.__value),c(y,j,169,8,5905),l(x,"id","model"),l(x,"class","input input-primary"),s[0]===void 0&&Lt(()=>s[11].call(x)),c(x,j,162,6,5610),l(b,"class","form-control s-NxPPOnB08NvG"),c(b,j,160,4,5538),l(V,"for","temperature"),l(V,"class","s-NxPPOnB08NvG"),c(V,j,175,6,6113),l(_,"type","range"),l(_,"id","temperature"),l(_,"min","0.1"),l(_,"max","1.0"),l(_,"step","0.2"),l(_,"class","input input-primary"),c(_,j,176,6,6164),l(B,"class","text-sm ml-2 s-NxPPOnB08NvG"),c(B,j,185,6,6356),l(k,"class","form-control mt-4 s-NxPPOnB08NvG"),c(k,j,174,4,6075),l(n,"class","col-span-3 bg-gray-800 rounded-lg p-4"),c(n,j,157,2,5343),l(f,"class","text-2xl font-bold mb-4"),c(f,j,190,4,6483),l(L,"class","col-span-3 bg-gray-800 rounded-lg p-4"),c(L,j,189,2,6427),l(te,"class","text-4xl font-bold mb-8"),c(te,j,202,4,6771),l(X,"class","col-span-6"),c(X,j,201,2,6742),l(be,"class","text-4xl font-bold mb-8"),c(be,j,245,4,8041),l(xe,"for","question"),l(xe,"class","label s-NxPPOnB08NvG"),c(xe,j,247,6,8136),l(ue,"id","question"),l(ue,"class","textarea textarea-primary"),c(ue,j,248,6,8200),l(W,"class","form-control mb-4 s-NxPPOnB08NvG"),c(W,j,246,4,8098),l(Q,"class","btn btn-primary mb-4"),Q.disabled=Ue=s[3]===null,c(Q,j,256,4,8399),l(Z,"class","text-xl mb-2"),c(Z,j,266,6,8683),l(se,"id","displayTextContainer"),l(se,"class","text-gray-200 s-NxPPOnB08NvG"),c(se,j,267,6,8733),l(ne,"class","bg-gray-800 p-4 rounded-lg"),c(ne,j,265,4,8636),l(le,"class","col-span-9"),c(le,j,244,2,8012),l(e,"class","grid grid-cols-12 min-h-screen gap-4 bg-gray-900 text-white p-8"),c(e,j,155,0,5230)},m:function(S,z){Ie(S,e,z),t(e,n),t(n,a),t(n,o),t(n,i),t(n,g),t(n,b),t(b,m),t(b,v),t(b,x),t(x,O),t(x,w),t(x,y),Et(x,s[0],!0),t(n,D),t(n,k),t(k,V),t(k,Y),t(k,_),Ve(_,s[1]),t(k,$),t(k,B),t(B,ee),t(e,re),t(e,L),t(L,f),t(L,H);for(let N=0;N<J.length;N+=1)J[N]&&J[N].m(L,null);t(e,Ee),t(e,X),t(X,te),t(X,Ge),F.m(X,null),t(e,ge),t(e,le),t(le,be),t(le,Pe),t(le,W),t(W,xe),t(W,pe),t(W,ue),Ve(ue,s[2]),t(le,ze),t(le,Q),t(Q,Qe),t(le,oe),t(le,ne),t(ne,Z),t(ne,Me),t(ne,se),t(se,Ze),Fe||(De=[me(x,"change",s[11]),me(_,"change",s[12]),me(_,"input",s[12]),me(ue,"input",s[14]),me(Q,"click",s[15],!1,!1,!1,!1)],Fe=!0)},p:function(S,[z]){if(z&1&&Et(x,S[0]),z&2&&Ve(_,S[1]),z&2&&Ye(ee,S[1]),z&1040){Ae=$e(S[4]);let N;for(N=0;N<Ae.length;N+=1){const Ce=At(S,Ae,N);J[N]?J[N].p(Ce,z):(J[N]=vt(Ce),J[N].c(),J[N].m(L,null))}for(;N<J.length;N+=1)J[N].d(1);J.length=Ae.length}Oe===(Oe=nt(S))&&F?F.p(S,z):(F.d(1),F=Oe(S),F&&(F.c(),F.m(X,null))),z&4&&Ve(ue,S[2]),z&8&&Ue!==(Ue=S[3]===null)&&Ht(Q,"disabled",Ue)},i:Re,o:Re,d:function(S){S&&C(e),Ct(J,S),F.d(),Fe=!1,Bt(De)}};return ae("SvelteRegisterBlock",{block:st,id:gt.name,type:"component",source:"",ctx:s}),st}function tn(s,e,n){let a,p,{$$slots:o={},$$scope:i}=e;ct("Ask",o,[]);const r=Se(we,ye);let g,b,m="tiiuae/falcon-7b-instruct",h=.2,v="",x="";const O=Te([]);kt(O,"userChats"),It(s,O,f=>n(4,a=f));const R=Te([]);kt(R,"selectedChatMessages"),It(s,R,f=>n(5,p=f));let w=null;async function q(){const f="userId",{data:M,error:H}=await r.from("chats").select("chat_id").eq("user_id",f);H?console.error("Error fetching user chats:",H.message):O.set(M)}async function y(f){n(3,w=f);const{data:M,error:H}=await r.from("chats").select("message, is_user_message").eq("chat_id",f).order("timestamp",{ascending:!0});H?console.error("Error fetching chat messages:",H.message):R.set(M)}async function T(f){await r.from("chats").insert([{user_id:f,chat_id:w,message:v,is_user_message:!0,timestamp:new Date().toISOString()}]),n(2,v=""),y(w)}async function D(){const f=G();console.log("userId",f),await T(f),await V(f)}async function k(f,M){await r.from("chats").insert([{user_id:M,chat_id:w,message:f,is_user_message:!1,timestamp:new Date().toISOString()}]),y(w)}async function V(f){const M=Se(we,ye);b=new Le({apiKey:ke}),g=new He(b,{client:M,tableName:"documents"});let H=await at(ke,g,m,h,v);await k(H,f)}async function G(){const f=await r.auth.getUser();return f?f.data.user.id:null}function Y(f){y(f)}qe(()=>{q()});const _=[];Object.keys(e).forEach(f=>{!~_.indexOf(f)&&f.slice(0,2)!=="$$"&&f!=="slot"&&en.warn(`<Ask> was created with unknown prop '${f}'`)});function $(){m=Gt(this),n(0,m)}function B(){h=zt(this.value),n(1,h)}const ee=f=>Y(f.chat_id);function re(){v=this.value,n(2,v)}const L=()=>D();return s.$capture_state=()=>({chatWithDoc:at,onMount:qe,createClient:Se,SupabaseVectorStore:He,writable:Te,HuggingFaceInferenceEmbeddings:Le,PUBLIC_SUPABASE_KEY:ye,PUBLIC_SUPABASE_URL:we,PUBLIC_HUGGINGFACE_API_KEY:ke,OpenAIEmbeddings:Vt,supabaseClient:r,vector:g,embeddings:b,model:m,temperature:h,question:v,responseText:x,userChats:O,selectedChatMessages:R,selectedChatId:w,loadUserChats:q,loadChatMessages:y,sendMessage:T,sendUserMessageAndAIResponse:D,saveAIResponse:k,getAIResponse:V,getCurrentUserId:G,selectChat:Y,$userChats:a,$selectedChatMessages:p}),s.$inject_state=f=>{"vector"in f&&(g=f.vector),"embeddings"in f&&(b=f.embeddings),"model"in f&&n(0,m=f.model),"temperature"in f&&n(1,h=f.temperature),"question"in f&&n(2,v=f.question),"responseText"in f&&n(6,x=f.responseText),"selectedChatId"in f&&n(3,w=f.selectedChatId)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),[m,h,v,w,a,p,x,O,R,D,Y,$,B,ee,re,L]}class nn extends it{constructor(e){super(e),rt(this,e,tn,gt,ot,{}),ae("SvelteRegisterComponent",{component:this,tagName:"Ask",options:e,id:gt.name})}}const{console:sn}=yt,je="src/routes/forget.svelte";function Ot(s,e,n){const a=s.slice();return a[5]=e[n],a}function bt(s){let e,n,a,p,o=s[5].name+"",i,r,g=s[5].size+"",b,m,h,v,x,O,R,w;function q(){return s[2](s[5])}const y={c:function(){e=u("div"),n=u("div"),a=u("p"),p=u("strong"),i=ve(o),r=ve(" ("),b=ve(g),m=ve(" bytes)"),h=I(),v=u("button"),x=u("i"),O=I(),this.h()},l:function(D){e=d(D,"DIV",{class:!0});var k=P(e);n=d(k,"DIV",{});var V=P(n);a=d(V,"P",{class:!0});var G=P(a);p=d(G,"STRONG",{});var Y=P(p);i=_e(Y,o),Y.forEach(C),r=_e(G," ("),b=_e(G,g),m=_e(G," bytes)"),G.forEach(C),V.forEach(C),h=E(k),v=d(k,"BUTTON",{class:!0});var _=P(v);x=d(_,"I",{class:!0}),P(x).forEach(C),_.forEach(C),O=E(k),k.forEach(C),this.h()},h:function(){c(p,je,60,12,1906),l(a,"class","text-lg"),c(a,je,59,10,1874),c(n,je,58,8,1858),l(x,"class","fas fa-trash"),c(x,je,67,10,2124),l(v,"class","btn btn-error"),c(v,je,63,8,2001),l(e,"class","bg-gray-800 p-4 rounded-lg flex items-center justify-between"),c(e,je,57,6,1775)},m:function(D,k){Ie(D,e,k),t(e,n),t(n,a),t(a,p),t(p,i),t(a,r),t(a,b),t(a,m),t(e,h),t(e,v),t(v,x),t(e,O),R||(w=me(v,"click",q,!1,!1,!1,!1),R=!0)},p:function(D,k){s=D,k&1&&o!==(o=s[5].name+"")&&Ye(i,o),k&1&&g!==(g=s[5].size+"")&&Ye(b,g)},d:function(D){D&&C(e),R=!1,w()}};return ae("SvelteRegisterBlock",{block:y,id:bt.name,type:"each",source:"(57:4) {#each documents as document}",ctx:s}),y}function xt(s){let e,n,a="Forget Data Page",p,o,i=$e(s[0]),r=[];for(let b=0;b<i.length;b+=1)r[b]=bt(Ot(s,i,b));const g={c:function(){e=u("div"),n=u("h1"),n.textContent=a,p=I(),o=u("div");for(let m=0;m<r.length;m+=1)r[m].c();this.h()},l:function(m){e=d(m,"DIV",{class:!0});var h=P(e);n=d(h,"H1",{class:!0,"data-svelte-h":!0}),A(n)!=="svelte-ew6ckg"&&(n.textContent=a),p=E(h),o=d(h,"DIV",{class:!0});var v=P(o);for(let x=0;x<r.length;x+=1)r[x].l(v);v.forEach(C),h.forEach(C),this.h()},h:function(){l(n,"class","text-4xl font-bold mb-8"),c(n,je,54,2,1651),l(o,"class","space-y-4"),c(o,je,55,2,1711),l(e,"class","p-8"),c(e,je,53,0,1631)},m:function(m,h){Ie(m,e,h),t(e,n),t(e,p),t(e,o);for(let v=0;v<r.length;v+=1)r[v]&&r[v].m(o,null)},p:function(m,[h]){if(h&3){i=$e(m[0]);let v;for(v=0;v<i.length;v+=1){const x=Ot(m,i,v);r[v]?r[v].p(x,h):(r[v]=bt(x),r[v].c(),r[v].m(o,null))}for(;v<r.length;v+=1)r[v].d(1);r.length=i.length}},i:Re,o:Re,d:function(m){m&&C(e),Ct(r,m)}};return ae("SvelteRegisterBlock",{block:g,id:xt.name,type:"component",source:"",ctx:s}),g}function ln(s,e,n){let{$$slots:a={},$$scope:p}=e;ct("Forget",a,[]);let o,i,r=[];qe(async()=>{o=Se(we,ye),i=new He(new Le({apiKey:ke}),{client:o,tableName:"documents"}),n(0,r=await Dt(o))});async function g(h){const v=h.split("/"),x=v[v.length-1];await Nt(o,x)?n(0,r=r.filter(R=>R.name!==x)):console.error(`Error deleting ${x}`)}const b=[];Object.keys(e).forEach(h=>{!~b.indexOf(h)&&h.slice(0,2)!=="$$"&&h!=="slot"&&sn.warn(`<Forget> was created with unknown prop '${h}'`)});const m=h=>g(h.name);return s.$capture_state=()=>({onMount:qe,createClient:Se,SupabaseVectorStore:He,HuggingFaceInferenceEmbeddings:Le,PUBLIC_SUPABASE_KEY:ye,PUBLIC_SUPABASE_URL:we,PUBLIC_HUGGINGFACE_API_KEY:ke,getDocuments:Dt,deleteDocument:Nt,supabase:o,vector:i,documents:r,handleDeleteDocument:g}),s.$inject_state=h=>{"supabase"in h&&(o=h.supabase),"vector"in h&&(i=h.vector),"documents"in h&&n(0,r=h.documents)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),[r,g,m]}class an extends it{constructor(e){super(e),rt(this,e,ln,xt,ot,{}),ae("SvelteRegisterComponent",{component:this,tagName:"Forget",options:e,id:xt.name})}}const{console:on}=yt,U="src/routes/+page.svelte";function Ut(s){let e,n="Log In",a,p;const o={c:function(){e=u("button"),e.textContent=n,this.h()},l:function(r){e=d(r,"BUTTON",{class:!0,"data-svelte-h":!0}),A(e)!=="svelte-q8u9rg"&&(e.textContent=n),this.h()},h:function(){l(e,"class","btn btn-primary btn-lg mt-8 rounded-md uppercase"),c(e,U,177,6,3753)},m:function(r,g){Ie(r,e,g),a||(p=me(e,"click",s[2],!1,!1,!1,!1),a=!0)},p:Re,d:function(r){r&&C(e),a=!1,p()}};return ae("SvelteRegisterBlock",{block:o,id:Ut.name,type:"else",source:"(122:4) {:else}",ctx:s}),o}function qt(s){let e,n="Get Started",a,p;const o={c:function(){e=u("button"),e.textContent=n,this.h()},l:function(r){e=d(r,"BUTTON",{class:!0,"data-svelte-h":!0}),A(e)!=="svelte-x6p7fq"&&(e.textContent=n),this.h()},h:function(){l(e,"class","btn btn-primary btn-lg mt-8 rounded-md uppercase"),c(e,U,170,6,3558)},m:function(r,g){Ie(r,e,g),a||(p=me(e,"click",s[1],!1,!1,!1,!1),a=!0)},p:Re,d:function(r){r&&C(e),a=!1,p()}};return ae("SvelteRegisterBlock",{block:o,id:qt.name,type:"if",source:"(115:4) {#if userLoggedIn}",ctx:s}),o}function pt(s){let e,n,a,p,o,i="Welcome to James 🧠🧠",r,g,b,m=`James is an AI-powered assistant that can remember everything you tell
        him and answer your questions. He is a smart and curious AI, constantly
        learning and improving with every interaction.`,h,v,x=`Whether you need help with research, have questions about various
        topics, or simply want to chat, James should be here to assist you.
        PLEASE provide feedback and suggestions to help him become even better!`,O,R,w,q="What James can help you with (when he feels like it):",y,T,D,k,V,G="🔍",Y,_,$="Research",B,ee,re=`James can read and remember entire books, articles, and web pages. He
          can also answer your questions about what he has read, but don't try
          to trick him, he's smarter than you.`,L,f,M,H,Ee="📚",X,te,et="Studying",Ge,ge,le=`With James by your side, you will probably never need to study again,
          but if you do, he can help you with that too. He can make flashcards,
          answer questions, and even help you with your homework (but don't tell
          your teacher).`,be,ce,Pe,W,xe="💻",Xe,pe,ue="Programming",ze,Q,Qe=`James can swallow up entire documentation pages so you don't have to.
          If you have a question about a programming language or framework, he
          can hopefully answer it. He can also help you with your code, but he's
          not very good at it yet.`,Ue,oe,ne,Z,tt="💬",Me,se,Ze="Chat with Your Notes",Fe,De,Ae=`Please let James read all your personal notes and thoughts. He
          promises he won't tell anyone. He can also answer your questions and
          have a conversation with you.`,J;a=new Tt({$$inline:!0});function nt(K,S){return K[0]?qt:Ut}let Oe=nt(s),F=Oe(s);const st={c:function(){e=u("div"),n=u("div"),Mt(a.$$.fragment),p=I(),o=u("h1"),o.textContent=i,r=I(),g=u("div"),b=u("p"),b.textContent=m,h=I(),v=u("p"),v.textContent=x,O=I(),F.c(),R=I(),w=u("p"),w.textContent=q,y=I(),T=u("div"),D=u("div"),k=u("div"),V=u("span"),V.textContent=G,Y=I(),_=u("h3"),_.textContent=$,B=I(),ee=u("p"),ee.textContent=re,L=I(),f=u("div"),M=u("div"),H=u("span"),H.textContent=Ee,X=I(),te=u("h3"),te.textContent=et,Ge=I(),ge=u("p"),ge.textContent=le,be=I(),ce=u("div"),Pe=u("div"),W=u("span"),W.textContent=xe,Xe=I(),pe=u("h3"),pe.textContent=ue,ze=I(),Q=u("p"),Q.textContent=Qe,Ue=I(),oe=u("div"),ne=u("div"),Z=u("span"),Z.textContent=tt,Me=I(),se=u("h3"),se.textContent=Ze,Fe=I(),De=u("p"),De.textContent=Ae,this.h()},l:function(S){e=d(S,"DIV",{class:!0});var z=P(e);n=d(z,"DIV",{class:!0});var N=P(n);Ft(a.$$.fragment,N),p=E(N),o=d(N,"H1",{class:!0,"data-svelte-h":!0}),A(o)!=="svelte-10ixsw2"&&(o.textContent=i),r=E(N),g=d(N,"DIV",{class:!0});var Ce=P(g);b=d(Ce,"P",{class:!0,"data-svelte-h":!0}),A(b)!=="svelte-11zjwmi"&&(b.textContent=m),h=E(Ce),v=d(Ce,"P",{class:!0,"data-svelte-h":!0}),A(v)!=="svelte-1a5mza6"&&(v.textContent=x),Ce.forEach(C),O=E(N),F.l(N),R=E(N),w=d(N,"P",{class:!0,"data-svelte-h":!0}),A(w)!=="svelte-11mrk0x"&&(w.textContent=q),y=E(N),T=d(N,"DIV",{class:!0});var de=P(T);D=d(de,"DIV",{class:!0});var fe=P(D);k=d(fe,"DIV",{class:!0});var lt=P(k);V=d(lt,"SPAN",{class:!0,role:!0,"aria-label":!0,"data-svelte-h":!0}),A(V)!=="svelte-1ollpdz"&&(V.textContent=G),lt.forEach(C),Y=E(fe),_=d(fe,"H3",{class:!0,"data-svelte-h":!0}),A(_)!=="svelte-135kwp4"&&(_.textContent=$),B=E(fe),ee=d(fe,"P",{class:!0,"data-svelte-h":!0}),A(ee)!=="svelte-1mvvnm1"&&(ee.textContent=re),fe.forEach(C),L=E(de),f=d(de,"DIV",{class:!0});var Ne=P(f);M=d(Ne,"DIV",{class:!0});var Je=P(M);H=d(Je,"SPAN",{class:!0,role:!0,"aria-label":!0,"data-svelte-h":!0}),A(H)!=="svelte-1n5n2yq"&&(H.textContent=Ee),Je.forEach(C),X=E(Ne),te=d(Ne,"H3",{class:!0,"data-svelte-h":!0}),A(te)!=="svelte-nuleb2"&&(te.textContent=et),Ge=E(Ne),ge=d(Ne,"P",{class:!0,"data-svelte-h":!0}),A(ge)!=="svelte-1a0w9zx"&&(ge.textContent=le),Ne.forEach(C),be=E(de),ce=d(de,"DIV",{class:!0});var ie=P(ce);Pe=d(ie,"DIV",{class:!0});var Ke=P(Pe);W=d(Ke,"SPAN",{class:!0,role:!0,"aria-label":!0,"data-svelte-h":!0}),A(W)!=="svelte-17ikkc7"&&(W.textContent=xe),Ke.forEach(C),Xe=E(ie),pe=d(ie,"H3",{class:!0,"data-svelte-h":!0}),A(pe)!=="svelte-1rvp22w"&&(pe.textContent=ue),ze=E(ie),Q=d(ie,"P",{class:!0,"data-svelte-h":!0}),A(Q)!=="svelte-9k6qwb"&&(Q.textContent=Qe),ie.forEach(C),Ue=E(de),oe=d(de,"DIV",{class:!0});var Be=P(oe);ne=d(Be,"DIV",{class:!0});var We=P(ne);Z=d(We,"SPAN",{class:!0,role:!0,"aria-label":!0,"data-svelte-h":!0}),A(Z)!=="svelte-1vjrmcj"&&(Z.textContent=tt),We.forEach(C),Me=E(Be),se=d(Be,"H3",{class:!0,"data-svelte-h":!0}),A(se)!=="svelte-r8mlpt"&&(se.textContent=Ze),Fe=E(Be),De=d(Be,"P",{class:!0,"data-svelte-h":!0}),A(De)!=="svelte-1d9gr5u"&&(De.textContent=Ae),Be.forEach(C),de.forEach(C),N.forEach(C),z.forEach(C),this.h()},h:function(){l(o,"class","text-6xl font-bold my-8"),c(o,U,154,4,2855),l(b,"class","text-xl text-center mb-6"),c(b,U,157,6,2971),l(v,"class","text-xl text-center mb-6"),c(v,U,162,6,3239),l(g,"class","max-w-3xl mx-auto space-y-4"),c(g,U,156,4,2923),l(w,"class","text-xl text-center mt-8 mb-6"),c(w,U,185,4,3939),l(V,"class","text-4xl"),l(V,"role","img"),l(V,"aria-label","Research"),c(V,U,193,10,4321),l(k,"class","flex items-center justify-center mb-4"),c(k,U,192,8,4259),l(_,"class","text-2xl font-bold text-white"),c(_,U,195,8,4410),l(ee,"class","text-lg text-white"),c(ee,U,196,8,4474),l(D,"class","bg-gray-900 p-6 rounded-lg border border-blue-400 space-y-4"),c(D,U,191,6,4177),l(H,"class","text-4xl"),l(H,"role","img"),l(H,"aria-label","Study"),c(H,U,204,10,4887),l(M,"class","flex items-center justify-center mb-4"),c(M,U,203,8,4825),l(te,"class","text-2xl font-bold text-white"),c(te,U,206,8,4973),l(ge,"class","text-lg text-white"),c(ge,U,207,8,5037),l(f,"class","bg-gray-900 p-6 rounded-lg border border-blue-400 space-y-4"),c(f,U,202,6,4743),l(W,"class","text-4xl"),l(W,"role","img"),l(W,"aria-label","Programming"),c(W,U,216,10,5510),l(Pe,"class","flex items-center justify-center mb-4"),c(Pe,U,215,8,5448),l(pe,"class","text-2xl font-bold text-white"),c(pe,U,218,8,5602),l(Q,"class","text-lg text-white"),c(Q,U,219,8,5669),l(ce,"class","bg-gray-900 p-6 rounded-lg border border-blue-400 space-y-4"),c(ce,U,214,6,5366),l(Z,"class","text-4xl"),l(Z,"role","img"),l(Z,"aria-label","Chat"),c(Z,U,228,10,6151),l(ne,"class","flex items-center justify-center mb-4"),c(ne,U,227,8,6089),l(se,"class","text-2xl font-bold text-white"),c(se,U,230,8,6236),l(De,"class","text-lg text-white"),c(De,U,231,8,6312),l(oe,"class","bg-gray-900 p-6 rounded-lg border border-blue-400 space-y-4"),c(oe,U,226,6,6007),l(T,"class","grid gap-8 md:grid-cols-2 max-w-3xl mx-auto mb-8"),c(T,U,190,4,4108),l(n,"class","flex flex-col items-center"),c(n,U,151,2,2766),l(e,"class","flex flex-col min-h-screen bg-gray-900 text-white p-4"),c(e,U,150,0,2696)},m:function(S,z){Ie(S,e,z),t(e,n),Jt(a,n,null),t(n,p),t(n,o),t(n,r),t(n,g),t(g,b),t(g,h),t(g,v),t(n,O),F.m(n,null),t(n,R),t(n,w),t(n,y),t(n,T),t(T,D),t(D,k),t(k,V),t(D,Y),t(D,_),t(D,B),t(D,ee),t(T,L),t(T,f),t(f,M),t(M,H),t(f,X),t(f,te),t(f,Ge),t(f,ge),t(T,be),t(T,ce),t(ce,Pe),t(Pe,W),t(ce,Xe),t(ce,pe),t(ce,ze),t(ce,Q),t(T,Ue),t(T,oe),t(oe,ne),t(ne,Z),t(oe,Me),t(oe,se),t(oe,Fe),t(oe,De),J=!0},p:function(S,[z]){Oe===(Oe=nt(S))&&F?F.p(S,z):(F.d(1),F=Oe(S),F&&(F.c(),F.m(n,R)))},i:function(S){J||(Kt(a.$$.fragment,S),J=!0)},o:function(S){Wt(a.$$.fragment,S),J=!1},d:function(S){S&&C(e),Yt(a),F.d()}};return ae("SvelteRegisterBlock",{block:st,id:pt.name,type:"component",source:"",ctx:s}),st}function rn(s,e,n){let{$$slots:a={},$$scope:p}=e;ct("Page",a,[]);let o=Te("Add Knowledge"),i=Te("tiiuae/falcon-7b-instruct"),r=Te(.2),g=Te(500),b=Te(0),m,h,v="",x,O,R,w="",q=!1;async function y(){const{error:_}=await x.auth.signOut();_?console.log(_):window.location.reload()}async function T(){let _=await at(ke,O,i,r,v);const $=document.getElementById("displayTextContainer");$.textContent=_}const D=async()=>{const _=Se(we,ye),{data:{session:$},error:B}=await _.auth.getSession();return B?(console.log(B),null):($!=null&&$.user?n(0,q=!0):n(0,q=!1),$)};qe(()=>{D(),x=Se(we,ye),console.log("public_supabase_url",we),console.log("public_supabase_key",ye);const _=Se(we,ye);R=new Le({apiKey:ke}),O=new He(R,{client:_,tableName:"documents"})});async function k(_){m=_.target.files[0]}const V=[];Object.keys(e).forEach(_=>{!~V.indexOf(_)&&_.slice(0,2)!=="$$"&&_!=="slot"&&on.warn(`<Page> was created with unknown prop '${_}'`)});const G=()=>window.location.href="/upload",Y=()=>window.location.href="/login";return s.$capture_state=()=>({onMount:qe,file_uploader:dt,url_uploader:ft,chatWithDoc:at,brain:Xt,createClient:Se,OpenAIEmbeddings:Vt,SupabaseVectorStore:He,writable:Te,HuggingFaceInferenceEmbeddings:Le,PUBLIC_SUPABASE_KEY:ye,PUBLIC_SUPABASE_URL:we,PUBLIC_HUGGINGFACE_API_KEY:ke,AuthCheck:Qt,Insert:$t,Ask:nn,Forget:an,NavBar:Tt,mode:o,model:i,temperature:r,chunkSize:g,chunkOverlap:b,files:m,url:h,question:v,supabase:x,vector:O,embeddings:R,retrievedText:w,userLoggedIn:q,signOutUser:y,getAIResponse:T,getSessionData:D,upload:k}),s.$inject_state=_=>{"mode"in _&&(o=_.mode),"model"in _&&(i=_.model),"temperature"in _&&(r=_.temperature),"chunkSize"in _&&(g=_.chunkSize),"chunkOverlap"in _&&(b=_.chunkOverlap),"files"in _&&(m=_.files),"url"in _&&(h=_.url),"question"in _&&(v=_.question),"supabase"in _&&(x=_.supabase),"vector"in _&&(O=_.vector),"embeddings"in _&&(R=_.embeddings),"retrievedText"in _&&(w=_.retrievedText),"userLoggedIn"in _&&n(0,q=_.userLoggedIn)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),[q,G,Y]}class bn extends it{constructor(e){super(e),rt(this,e,rn,pt,ot,{}),ae("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:pt.name})}}export{bn as component};
